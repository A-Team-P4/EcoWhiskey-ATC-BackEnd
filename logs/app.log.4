2025-11-07 22:41:21,544 | INFO | sqlalchemy.engine.Engine | [generated in 0.00143s] ('{"meteo": {"qnh": "3004", "vis": "", "wind": "", "condition": "", "windSpeed": 11, "windDirection": 80}, "route": "MRPV-MRPV", "scenario_id": "mrpv_f ... (18246 characters truncated) ... : "3004", "vis": "", "wind": "", "condition": "", "windSpeed": 11, "windDirection": 80}, "route": "MRPV-MRPV", "timestamp": "2025-11-08T04:41:21Z"}]}', datetime.datetime(2025, 11, 8, 4, 41, 21, 542919), UUID('767d4c4f-5ef2-4216-ab34-1cc70607991d'))
2025-11-07 22:41:21,563 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 22:41:21,591 | INFO | app.controllers.audio | Fase activa session=b2c19e9d-2533-4839-90bf-8bb21b519153 phase_id=ground_departure_request intent=ground_taxi_clearance freq=ground
2025-11-07 22:41:21,594 | INFO | app.services.audio_pipeline | Prompts generados intent=ground_taxi_clearance freq_group=ground
SYSTEM> Eres Pavas Superficie (121.7). Recibes la llamada inicial para abrir plan de vuelo y autorizar rodaje. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "metadata": object
 }.
Si necesitas proponer un cambio de fase, incluye en metadata la clave "nextPhase". No escribas texto adicional antes o después del JSON.
USER> Fase actual: Solicitud de apertura y autorización de rodaje
Intent esperado: ground_taxi_clearance
Transcripción textual del alumno:
probando, probando, probando, probando, probando.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: ground
- Fase ID: ground_departure_request

Checklist alumno:
- Saludo correcto a Pavas Superficie.
- Indicar ubicación actual en el aeródromo y destino previsto.
- Solicitar apertura de plan e indicar altitud solicitada.
- Proporcionar almas a bordo,...
2025-11-07 22:41:24,069 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=ground_taxi_clearance: ```json
{
  "intent": "ground_taxi_clearance",
  "allowResponse": false,
  "controllerText": null,
  "feedback": "La llamada inicial debe incluir el saludo, ubicación actual y destino, solicitud de apertura de plan de vuelo e información sobre las almas a bordo. Además, debe especificar la altitud solicitada, piloto al mando y autonomía estimada.",
  "confidence": null,
  "metadata": {
    "missing_elements": [
      "saludo",
      "ubicación actual y destino",
      "solicitud de apertura d...
2025-11-07 22:41:24,070 | ERROR | app.controllers.audio | Fallo en pipeline LLM
Traceback (most recent call last):
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\services\response_contract.py", line 36, in from_json
    data = json.loads(payload)
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\json\decoder.py", line 355, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\controllers\audio.py", line 187, in analyze_audio
    llm_outcome = await call_conversation_llm(request)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\pipelines\audio\llm.py", line 39, in call_conversation_llm
    structured = StructuredLlmResponse.from_json(raw_response)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\services\response_contract.py", line 38, in from_json
    raise ValidationError.from_exception_data(
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: "Invalid error type: 'json_decode_error'"
2025-11-07 22:41:24,115 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 22:42:05,053 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 22:42:05,054 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-07 22:42:05,055 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-07 22:42:05,056 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 22:42:05,056 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-07 22:42:05,057 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-07 22:42:05,057 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 22:42:05,058 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 22:42:05,059 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-07 22:42:05,059 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 22:42:05,061 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 22:42:05,062 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-07 22:42:05,063 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-07 22:42:05,063 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 22:42:05,064 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-07 22:42:05,065 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-07 22:42:05,066 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 22:42:05,066 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 22:42:05,067 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:269]
2025-11-07 22:42:05,067 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 22:42:05,067 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 22:42:05,069 | DEBUG | python_multipart.multipart | Calling on_header_field with data[311:330]
2025-11-07 22:42:05,070 | DEBUG | python_multipart.multipart | Calling on_header_value with data[332:386]
2025-11-07 22:42:05,071 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 22:42:05,071 | DEBUG | python_multipart.multipart | Calling on_header_field with data[388:400]
2025-11-07 22:42:05,072 | DEBUG | python_multipart.multipart | Calling on_header_value with data[402:412]
2025-11-07 22:42:05,073 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 22:42:05,073 | DEBUG | python_multipart.multipart | Calling on_header_field with data[414:428]
2025-11-07 22:42:05,074 | DEBUG | python_multipart.multipart | Calling on_header_value with data[430:435]
2025-11-07 22:42:05,074 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 22:42:05,075 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 22:42:05,076 | DEBUG | python_multipart.multipart | Calling on_part_data with data[439:1460]
2025-11-07 22:42:05,078 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 22:42:05,080 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 22:42:05,199 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 22:42:05,203 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 22:42:05,204 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 22:42:05,324 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 22:42:05,326 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 22:42:05,328 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 22:42:05,441 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 22:42:05,443 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 22:42:05,445 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 22:42:05,561 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 22:42:05,563 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 22:42:05,564 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 22:42:05,678 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 22:42:05,679 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 22:42:05,680 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 22:42:05,758 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 22:42:05,760 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 22:42:05,761 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:899]
2025-11-07 22:42:05,761 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 22:42:05,763 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-07 22:42:05,862 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:42:05,863 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 22:42:05,863 | INFO | sqlalchemy.engine.Engine | [cached since 272.4s ago] ()
2025-11-07 22:42:05,869 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 22:42:05,870 | INFO | sqlalchemy.engine.Engine | [cached since 53.84s ago] (1,)
2025-11-07 22:42:05,933 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 22:42:05,935 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002033B206610>}) about to wait for the following futures []
2025-11-07 22:42:05,935 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002033B206610>}) done waiting for dependent futures
2025-11-07 22:42:05,936 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002033B206610>}) with kwargs {'client': <botocore.client.S3 object at 0x000002033A9E1490>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002037E1A90D0>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002033B233E90>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002033B2134D0>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002033B206610>}
2025-11-07 22:42:05,936 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/b2c19e9d-2533-4839-90bf-8bb21b519153/5e64e2d160c44f43a8832f0008bc841d.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002033B2134D0> for transfer request: 0.
2025-11-07 22:42:05,937 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 22:42:05,938 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/b2c19e9d-2533-4839-90bf-8bb21b519153/5e64e2d160c44f43a8832f0008bc841d.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-07 22:42:05,938 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 22:42:05,939 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/b2c19e9d-2533-4839-90bf-8bb21b519153/5e64e2d160c44f43a8832f0008bc841d.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-07 22:42:05,940 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/b2c19e9d-2533-4839-90bf-8bb21b519153/5e64e2d160c44f43a8832f0008bc841d.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x000002033A9E1490>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002033AE34310>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/b2c19e9d-2533-4839-90bf-8bb21b519153/5e64e2d160c44f43a8832f0008bc841d.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-07 22:42:06,502 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 22:42:14,015 | INFO | app.controllers.audio | Transcripción recibida session=b2c19e9d-2533-4839-90bf-8bb21b519153: probando, probando, probando, probando, probando.
2025-11-07 22:42:14,016 | INFO | app.logs.transcript | student | session=b2c19e9d-2533-4839-90bf-8bb21b519153 | frequency=121.700 | text=probando, probando, probando, probando, probando.
2025-11-07 22:42:14,113 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:42:14,114 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 22:42:14,115 | INFO | sqlalchemy.engine.Engine | [cached since 53.67s ago] (UUID('b2c19e9d-2533-4839-90bf-8bb21b519153'),)
2025-11-07 22:42:14,126 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 22:42:14,554 | WARNING | app.services.audio_pipeline | Intent detector invalid JSON: "Invalid error type: 'json_decode_error'" raw=```json
{
  "intent": "ground_test_transmission",
  "confidence": 0.9,
  "frequencyGroup": "ground"
}
```
2025-11-07 22:42:14,658 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:42:14,659 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 22:42:14,660 | INFO | sqlalchemy.engine.Engine | [cached since 54.21s ago] (UUID('b2c19e9d-2533-4839-90bf-8bb21b519153'),)
2025-11-07 22:42:14,674 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-07 22:42:14,675 | INFO | sqlalchemy.engine.Engine | [cached since 53.13s ago] ('{"meteo": {"qnh": "3004", "vis": "", "wind": "", "condition": "", "windSpeed": 11, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "st ... (18515 characters truncated) ... nd": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0524", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 8, 4, 42, 14, 674121), UUID('767d4c4f-5ef2-4216-ab34-1cc70607991d'))
2025-11-07 22:42:14,689 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 22:42:14,718 | INFO | app.controllers.audio | Fase activa session=b2c19e9d-2533-4839-90bf-8bb21b519153 phase_id=ground_departure_request intent=ground_taxi_clearance freq=ground
2025-11-07 22:42:14,721 | INFO | app.services.audio_pipeline | Prompts generados intent=ground_taxi_clearance freq_group=ground
SYSTEM> Eres Pavas Superficie (121.7). Recibes la llamada inicial para abrir plan de vuelo y autorizar rodaje. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "metadata": object
 }.
Si necesitas proponer un cambio de fase, incluye en metadata la clave "nextPhase". No escribas texto adicional antes o después del JSON.
USER> Fase actual: Solicitud de apertura y autorización de rodaje
Intent esperado: ground_taxi_clearance
Transcripción textual del alumno:
probando, probando, probando, probando, probando.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: ground
- Fase ID: ground_departure_request

Checklist alumno:
- Saludo correcto a Pavas Superficie.
- Indicar ubicación actual en el aeródromo y destino previsto.
- Solicitar apertura de plan e indicar altitud solicitada.
- Proporcionar almas a bordo,...
2025-11-07 22:42:16,910 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=ground_taxi_clearance: ```json
{
  "intent": "ground_taxi_clearance",
  "allowResponse": false,
  "controllerText": null,
  "feedback": "La solicitud debe incluir datos como ubicación actual, destino, plan de vuelo y altitud solicitada. Comience su solicitud con 'Pavas Superficie, este es (indicativo de la aeronave), ubicado en (ubicación actual), solicitamos apertura de plan de vuelo y rodaje hacia (destino) a la altitud de (altitud).'",
  "confidence": 0.1,
  "metadata": {
    "missing_elements": [
      "ubicaci...
2025-11-07 22:42:16,912 | ERROR | app.controllers.audio | Fallo en pipeline LLM
Traceback (most recent call last):
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\services\response_contract.py", line 36, in from_json
    data = json.loads(payload)
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\json\decoder.py", line 355, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\controllers\audio.py", line 187, in analyze_audio
    llm_outcome = await call_conversation_llm(request)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\pipelines\audio\llm.py", line 39, in call_conversation_llm
    structured = StructuredLlmResponse.from_json(raw_response)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\services\response_contract.py", line 38, in from_json
    raise ValidationError.from_exception_data(
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: "Invalid error type: 'json_decode_error'"
2025-11-07 22:42:16,914 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 22:42:27,149 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 22:42:27,149 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-07 22:42:27,151 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-07 22:42:27,151 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 22:42:27,151 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-07 22:42:27,153 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-07 22:42:27,153 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 22:42:27,154 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 22:42:27,155 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-07 22:42:27,156 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 22:42:27,157 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 22:42:27,158 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-07 22:42:27,159 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-07 22:42:27,159 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 22:42:27,160 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-07 22:42:27,161 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-07 22:42:27,161 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 22:42:27,161 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 22:42:27,163 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:269]
2025-11-07 22:42:27,163 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 22:42:27,164 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 22:42:27,164 | DEBUG | python_multipart.multipart | Calling on_header_field with data[311:330]
2025-11-07 22:42:27,165 | DEBUG | python_multipart.multipart | Calling on_header_value with data[332:386]
2025-11-07 22:42:27,165 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 22:42:27,166 | DEBUG | python_multipart.multipart | Calling on_header_field with data[388:400]
2025-11-07 22:42:27,166 | DEBUG | python_multipart.multipart | Calling on_header_value with data[402:412]
2025-11-07 22:42:27,168 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 22:42:27,168 | DEBUG | python_multipart.multipart | Calling on_header_field with data[414:428]
2025-11-07 22:42:27,169 | DEBUG | python_multipart.multipart | Calling on_header_value with data[430:435]
2025-11-07 22:42:27,170 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 22:42:27,171 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 22:42:27,172 | DEBUG | python_multipart.multipart | Calling on_part_data with data[439:5840]
2025-11-07 22:42:27,174 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 22:42:27,276 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 22:42:27,279 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 22:42:27,280 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 22:42:27,399 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 22:42:27,399 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 22:42:27,402 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 22:42:27,521 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 22:42:27,522 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 22:42:27,523 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 22:42:27,524 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 22:42:27,641 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 22:42:27,642 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 22:42:27,782 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 22:42:27,783 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 22:42:27,784 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 22:42:27,786 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 22:42:27,860 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 22:42:27,861 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 22:42:27,862 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:899]
2025-11-07 22:42:27,862 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 22:42:27,864 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-07 22:42:27,991 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:42:27,993 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 22:42:27,993 | INFO | sqlalchemy.engine.Engine | [cached since 294.5s ago] ()
2025-11-07 22:42:27,998 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 22:42:27,998 | INFO | sqlalchemy.engine.Engine | [cached since 75.97s ago] (1,)
2025-11-07 22:42:28,066 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 22:42:28,069 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002033B21E4D0>}) about to wait for the following futures []
2025-11-07 22:42:28,070 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002033B21E4D0>}) done waiting for dependent futures
2025-11-07 22:42:28,071 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002033B21E4D0>}) with kwargs {'client': <botocore.client.S3 object at 0x000002033A9E1490>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002033B211410>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002033B210B50>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002033B211B90>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002033B21E4D0>}
2025-11-07 22:42:28,071 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/b2c19e9d-2533-4839-90bf-8bb21b519153/36ae65fcce3249988080b787aac82675.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002033B211B90> for transfer request: 0.
2025-11-07 22:42:28,072 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 22:42:28,074 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/b2c19e9d-2533-4839-90bf-8bb21b519153/36ae65fcce3249988080b787aac82675.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-07 22:42:28,074 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 22:42:28,074 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/b2c19e9d-2533-4839-90bf-8bb21b519153/36ae65fcce3249988080b787aac82675.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-07 22:42:28,075 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/b2c19e9d-2533-4839-90bf-8bb21b519153/36ae65fcce3249988080b787aac82675.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x000002033A9E1490>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002033B21FFD0>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/b2c19e9d-2533-4839-90bf-8bb21b519153/36ae65fcce3249988080b787aac82675.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-07 22:42:28,260 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 22:42:37,701 | INFO | app.controllers.audio | Transcripción recibida session=b2c19e9d-2533-4839-90bf-8bb21b519153: probando, probando, probando, probando, probando.
2025-11-07 22:42:37,702 | INFO | app.logs.transcript | student | session=b2c19e9d-2533-4839-90bf-8bb21b519153 | frequency=121.700 | text=probando, probando, probando, probando, probando.
2025-11-07 22:42:37,809 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:42:37,809 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 22:42:37,810 | INFO | sqlalchemy.engine.Engine | [cached since 77.36s ago] (UUID('b2c19e9d-2533-4839-90bf-8bb21b519153'),)
2025-11-07 22:42:37,819 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 22:42:38,226 | WARNING | app.services.audio_pipeline | Intent detector invalid JSON: "Invalid error type: 'json_decode_error'" raw=```json
{
  "intent": "ground_test_transmission",
  "confidence": 0.9,
  "frequencyGroup": "ground"
}
```
2025-11-07 22:42:38,323 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:42:38,324 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 22:42:38,324 | INFO | sqlalchemy.engine.Engine | [cached since 77.88s ago] (UUID('b2c19e9d-2533-4839-90bf-8bb21b519153'),)
2025-11-07 22:42:38,337 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-07 22:42:38,338 | INFO | sqlalchemy.engine.Engine | [cached since 76.79s ago] ('{"meteo": {"qnh": "3004", "vis": "", "wind": "", "condition": "", "windSpeed": 11, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "st ... (18784 characters truncated) ... nd": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0524", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 8, 4, 42, 38, 337159), UUID('767d4c4f-5ef2-4216-ab34-1cc70607991d'))
2025-11-07 22:42:38,346 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 22:42:38,373 | INFO | app.controllers.audio | Fase activa session=b2c19e9d-2533-4839-90bf-8bb21b519153 phase_id=ground_departure_request intent=ground_taxi_clearance freq=ground
2025-11-07 22:42:38,376 | INFO | app.services.audio_pipeline | Prompts generados intent=ground_taxi_clearance freq_group=ground
SYSTEM> Eres Pavas Superficie (121.7). Recibes la llamada inicial para abrir plan de vuelo y autorizar rodaje. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "metadata": object
 }.
Si necesitas proponer un cambio de fase, incluye en metadata la clave "nextPhase". No escribas texto adicional antes o después del JSON.
USER> Fase actual: Solicitud de apertura y autorización de rodaje
Intent esperado: ground_taxi_clearance
Transcripción textual del alumno:
probando, probando, probando, probando, probando.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: ground
- Fase ID: ground_departure_request

Checklist alumno:
- Saludo correcto a Pavas Superficie.
- Indicar ubicación actual en el aeródromo y destino previsto.
- Solicitar apertura de plan e indicar altitud solicitada.
- Proporcionar almas a bordo,...
2025-11-07 22:42:40,127 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=ground_taxi_clearance: {
  "intent": "ground_taxi_clearance",
  "allowResponse": false,
  "controllerText": null,
  "feedback": "No se ha realizado ninguna solicitud válida. Por favor, inicie la comunicación proporcionando los datos esenciales como ubicación actual, destino previsto, número de personas a bordo, piloto al mando, autonomía estimada y altitud solicitada para la autorización de rodaje.",
  "confidence": null,
  "metadata": {
    "missing_items": [
      "ubicación actual",
      "destino previsto",
   ...
2025-11-07 22:42:40,219 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:42:40,220 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 22:42:40,221 | INFO | sqlalchemy.engine.Engine | [cached since 79.77s ago] (UUID('b2c19e9d-2533-4839-90bf-8bb21b519153'),)
2025-11-07 22:42:40,231 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-07 22:42:40,232 | INFO | sqlalchemy.engine.Engine | [cached since 78.69s ago] ('{"meteo": {"qnh": "3004", "vis": "", "wind": "", "condition": "", "windSpeed": 11, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "st ... (20210 characters truncated) ... nd": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0524", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 8, 4, 42, 40, 231765), UUID('767d4c4f-5ef2-4216-ab34-1cc70607991d'))
2025-11-07 22:42:40,244 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 22:42:40,259 | INFO | app.logs.transcript | controller | session=b2c19e9d-2533-4839-90bf-8bb21b519153 | frequency=121.700 | intent=ground_taxi_clearance | phase=ground_departure_request | allow_response=False | text=
2025-11-07 22:42:40,262 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 22:46:28,247 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 22:46:28,248 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-07 22:46:28,249 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-07 22:46:28,250 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 22:46:28,251 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-07 22:46:28,252 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-07 22:46:28,252 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 22:46:28,253 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 22:46:28,253 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-07 22:46:28,254 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 22:46:28,255 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 22:46:28,255 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-07 22:46:28,256 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-07 22:46:28,258 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 22:46:28,258 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-07 22:46:28,260 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-07 22:46:28,261 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 22:46:28,261 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 22:46:28,262 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:269]
2025-11-07 22:46:28,263 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 22:46:28,263 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 22:46:28,264 | DEBUG | python_multipart.multipart | Calling on_header_field with data[311:330]
2025-11-07 22:46:28,265 | DEBUG | python_multipart.multipart | Calling on_header_value with data[332:386]
2025-11-07 22:46:28,265 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 22:46:28,266 | DEBUG | python_multipart.multipart | Calling on_header_field with data[388:400]
2025-11-07 22:46:28,267 | DEBUG | python_multipart.multipart | Calling on_header_value with data[402:412]
2025-11-07 22:46:28,268 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 22:46:28,268 | DEBUG | python_multipart.multipart | Calling on_header_field with data[414:428]
2025-11-07 22:46:28,269 | DEBUG | python_multipart.multipart | Calling on_header_value with data[430:435]
2025-11-07 22:46:28,270 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 22:46:28,271 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 22:46:28,272 | DEBUG | python_multipart.multipart | Calling on_part_data with data[439:1460]
2025-11-07 22:46:28,275 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 22:46:28,278 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-07 22:46:28,442 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 22:46:28,444 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 22:46:28,445 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-07 22:46:28,587 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 22:46:28,590 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-07 22:46:28,711 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 22:46:28,712 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 22:46:28,714 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 22:46:28,838 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 22:46:28,839 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 22:46:28,840 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 22:46:28,841 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 22:46:28,972 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 22:46:28,974 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 22:46:28,976 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 22:46:28,978 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 22:46:29,128 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 22:46:29,130 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 22:46:29,133 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 22:46:29,253 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 22:46:29,256 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 22:46:29,258 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 22:46:29,303 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 22:46:29,305 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:18]
2025-11-07 22:46:29,306 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 22:46:29,306 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-07 22:46:29,414 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:46:29,415 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 22:46:29,416 | INFO | sqlalchemy.engine.Engine | [cached since 535.9s ago] ()
2025-11-07 22:46:29,422 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 22:46:29,424 | INFO | sqlalchemy.engine.Engine | [cached since 317.4s ago] (1,)
2025-11-07 22:46:29,516 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 22:46:29,518 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002033B2114D0>}) about to wait for the following futures []
2025-11-07 22:46:29,519 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002033B2114D0>}) done waiting for dependent futures
2025-11-07 22:46:29,519 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002033B2114D0>}) with kwargs {'client': <botocore.client.S3 object at 0x000002033A9E1490>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002033AE06BD0>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002033AE06C50>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002033B253990>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002033B2114D0>}
2025-11-07 22:46:29,521 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/b2c19e9d-2533-4839-90bf-8bb21b519153/5a83bf44f3d04597b3878e5372727361.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002033B253990> for transfer request: 0.
2025-11-07 22:46:29,523 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 22:46:29,525 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/b2c19e9d-2533-4839-90bf-8bb21b519153/5a83bf44f3d04597b3878e5372727361.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-07 22:46:29,525 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 22:46:29,526 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/b2c19e9d-2533-4839-90bf-8bb21b519153/5a83bf44f3d04597b3878e5372727361.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-07 22:46:29,528 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/b2c19e9d-2533-4839-90bf-8bb21b519153/5a83bf44f3d04597b3878e5372727361.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x000002033A9E1490>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002033B1D2610>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/b2c19e9d-2533-4839-90bf-8bb21b519153/5a83bf44f3d04597b3878e5372727361.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-07 22:46:30,133 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 22:46:39,801 | INFO | app.controllers.audio | Transcripción recibida session=b2c19e9d-2533-4839-90bf-8bb21b519153: Buenos días. Solicito permiso para despegar.
2025-11-07 22:46:39,802 | INFO | app.logs.transcript | student | session=b2c19e9d-2533-4839-90bf-8bb21b519153 | frequency=121.700 | text=Buenos días. Solicito permiso para despegar.
2025-11-07 22:46:39,918 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:46:39,918 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 22:46:39,920 | INFO | sqlalchemy.engine.Engine | [cached since 319.5s ago] (UUID('b2c19e9d-2533-4839-90bf-8bb21b519153'),)
2025-11-07 22:46:39,932 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 22:46:40,294 | WARNING | app.services.audio_pipeline | Intent detector invalid JSON: "Invalid error type: 'json_decode_error'" raw=```json
{
    "intent": "tower_takeoff_clearance",
    "confidence": 0.95,
    "frequencyGroup": "tower"
}
```
2025-11-07 22:46:40,393 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:46:40,394 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 22:46:40,395 | INFO | sqlalchemy.engine.Engine | [cached since 319.9s ago] (UUID('b2c19e9d-2533-4839-90bf-8bb21b519153'),)
2025-11-07 22:46:40,408 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-07 22:46:40,408 | INFO | sqlalchemy.engine.Engine | [cached since 318.9s ago] ('{"meteo": {"qnh": "3004", "vis": "", "wind": "", "condition": "", "windSpeed": 11, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "st ... (20480 characters truncated) ... nd": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0524", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 8, 4, 46, 40, 407085), UUID('767d4c4f-5ef2-4216-ab34-1cc70607991d'))
2025-11-07 22:46:40,420 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 22:46:40,445 | INFO | app.controllers.audio | Fase activa session=b2c19e9d-2533-4839-90bf-8bb21b519153 phase_id=ground_departure_request intent=ground_taxi_clearance freq=ground
2025-11-07 22:46:40,448 | INFO | app.services.audio_pipeline | Prompts generados intent=ground_taxi_clearance freq_group=ground
SYSTEM> Eres Pavas Superficie (121.7). Recibes la llamada inicial para abrir plan de vuelo y autorizar rodaje. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "metadata": object
 }.
Si necesitas proponer un cambio de fase, incluye en metadata la clave "nextPhase". No escribas texto adicional antes o después del JSON.
USER> Fase actual: Solicitud de apertura y autorización de rodaje
Intent esperado: ground_taxi_clearance
Transcripción textual del alumno:
Buenos días. Solicito permiso para despegar.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: ground
- Fase ID: ground_departure_request

Checklist alumno:
- Saludo correcto a Pavas Superficie.
- Indicar ubicación actual en el aeródromo y destino previsto.
- Solicitar apertura de plan e indicar altitud solicitada.
- Proporcionar almas a bordo, pilo...
2025-11-07 22:46:42,423 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=ground_taxi_clearance: {
  "intent": "ground_taxi_clearance",
  "allowResponse": false,
  "controllerText": null,
  "feedback": "Buenos días. Solicitó permiso para despegar pero falta información crítica. Debe proporcionar su ubicación actual en el aeródromo, destino previsto, número de personas a bordo, piloto al mando, autonomía estimada y altitud solicitada para la autorización de rodaje.",
  "confidence": 0.8,
  "metadata": {
    "missing_info": [
      "ubicación actual",
      "destino previsto",
      "perso...
2025-11-07 22:46:42,536 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:46:42,538 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 22:46:42,539 | INFO | sqlalchemy.engine.Engine | [cached since 322.1s ago] (UUID('b2c19e9d-2533-4839-90bf-8bb21b519153'),)
2025-11-07 22:46:42,551 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-07 22:46:42,552 | INFO | sqlalchemy.engine.Engine | [cached since 321s ago] ('{"meteo": {"qnh": "3004", "vis": "", "wind": "", "condition": "", "windSpeed": 11, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "st ... (21912 characters truncated) ... nd": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0524", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 8, 4, 46, 42, 550715), UUID('767d4c4f-5ef2-4216-ab34-1cc70607991d'))
2025-11-07 22:46:42,563 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 22:46:42,577 | INFO | app.logs.transcript | controller | session=b2c19e9d-2533-4839-90bf-8bb21b519153 | frequency=121.700 | intent=ground_taxi_clearance | phase=ground_departure_request | allow_response=False | text=
2025-11-07 22:46:42,579 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 22:54:53,072 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-07 22:54:53,073 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:54:53,079 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-07 22:54:53,079 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:54:53,086 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-07 22:54:53,089 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:54:53,093 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:54:53,095 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-07 22:54:53,095 | INFO | sqlalchemy.engine.Engine | [generated in 0.00073s] ()
2025-11-07 22:54:53,101 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 22:54:53,102 | INFO | sqlalchemy.engine.Engine | [generated in 0.00111s] ()
2025-11-07 22:54:53,108 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:54:53,109 | INFO | sqlalchemy.engine.Engine | [generated in 0.00105s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:54:53,127 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:54:53,128 | INFO | sqlalchemy.engine.Engine | [cached since 0.02058s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:54:53,131 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:54:53,132 | INFO | sqlalchemy.engine.Engine | [cached since 0.02431s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:54:53,134 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:54:53,136 | INFO | sqlalchemy.engine.Engine | [cached since 0.02857s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:54:53,138 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:54:53,139 | INFO | sqlalchemy.engine.Engine | [cached since 0.03218s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:54:53,144 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 22:54:53,145 | INFO | sqlalchemy.engine.Engine | [generated in 0.00152s] ('user_status', 'pg_catalog')
2025-11-07 22:54:53,150 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 22:54:53,152 | INFO | sqlalchemy.engine.Engine | [cached since 0.00813s ago] ('account_type', 'pg_catalog')
2025-11-07 22:54:53,154 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-07 22:54:53,157 | INFO | sqlalchemy.engine.Engine | [generated in 0.00114s] ()
2025-11-07 22:54:53,161 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-07 22:54:53,162 | INFO | sqlalchemy.engine.Engine | [generated in 0.00097s] ()
2025-11-07 22:54:53,176 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-07 22:54:53,178 | INFO | sqlalchemy.engine.Engine | [generated in 0.00152s] ()
2025-11-07 22:54:53,230 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 22:54:53,262 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-07 22:55:17,541 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-07 22:55:17,541 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:55:17,549 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-07 22:55:17,549 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:55:17,555 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-07 22:55:17,556 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:55:17,561 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:55:17,563 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-07 22:55:17,563 | INFO | sqlalchemy.engine.Engine | [generated in 0.00110s] ()
2025-11-07 22:55:17,569 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 22:55:17,569 | INFO | sqlalchemy.engine.Engine | [generated in 0.00096s] ()
2025-11-07 22:55:17,575 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:55:17,576 | INFO | sqlalchemy.engine.Engine | [generated in 0.00123s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:55:17,593 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:55:17,594 | INFO | sqlalchemy.engine.Engine | [cached since 0.0185s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:55:17,598 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:55:17,599 | INFO | sqlalchemy.engine.Engine | [cached since 0.02293s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:55:17,603 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:55:17,604 | INFO | sqlalchemy.engine.Engine | [cached since 0.02766s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:55:17,606 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:55:17,607 | INFO | sqlalchemy.engine.Engine | [cached since 0.03118s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:55:17,611 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 22:55:17,612 | INFO | sqlalchemy.engine.Engine | [generated in 0.00126s] ('user_status', 'pg_catalog')
2025-11-07 22:55:17,616 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 22:55:17,617 | INFO | sqlalchemy.engine.Engine | [cached since 0.007052s ago] ('account_type', 'pg_catalog')
2025-11-07 22:55:17,620 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-07 22:55:17,621 | INFO | sqlalchemy.engine.Engine | [generated in 0.00098s] ()
2025-11-07 22:55:17,625 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-07 22:55:17,627 | INFO | sqlalchemy.engine.Engine | [generated in 0.00135s] ()
2025-11-07 22:55:17,641 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-07 22:55:17,643 | INFO | sqlalchemy.engine.Engine | [generated in 0.00180s] ()
2025-11-07 22:55:17,696 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 22:55:17,726 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-07 22:56:24,413 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-07 22:56:24,414 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:56:24,418 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-07 22:56:24,419 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:56:24,426 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-07 22:56:24,427 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:56:24,431 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:56:24,433 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-07 22:56:24,434 | INFO | sqlalchemy.engine.Engine | [generated in 0.00104s] ()
2025-11-07 22:56:24,438 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 22:56:24,438 | INFO | sqlalchemy.engine.Engine | [generated in 0.00094s] ()
2025-11-07 22:56:24,445 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:56:24,446 | INFO | sqlalchemy.engine.Engine | [generated in 0.00158s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:56:24,464 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:56:24,465 | INFO | sqlalchemy.engine.Engine | [cached since 0.0207s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:56:24,469 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:56:24,470 | INFO | sqlalchemy.engine.Engine | [cached since 0.02496s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:56:24,472 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:56:24,474 | INFO | sqlalchemy.engine.Engine | [cached since 0.02908s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:56:24,477 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:56:24,478 | INFO | sqlalchemy.engine.Engine | [cached since 0.033s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:56:24,482 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 22:56:24,483 | INFO | sqlalchemy.engine.Engine | [generated in 0.00113s] ('user_status', 'pg_catalog')
2025-11-07 22:56:24,489 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 22:56:24,490 | INFO | sqlalchemy.engine.Engine | [cached since 0.007769s ago] ('account_type', 'pg_catalog')
2025-11-07 22:56:24,492 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-07 22:56:24,493 | INFO | sqlalchemy.engine.Engine | [generated in 0.00104s] ()
2025-11-07 22:56:24,498 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-07 22:56:24,498 | INFO | sqlalchemy.engine.Engine | [generated in 0.00082s] ()
2025-11-07 22:56:24,513 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-07 22:56:24,515 | INFO | sqlalchemy.engine.Engine | [generated in 0.00183s] ()
2025-11-07 22:56:24,571 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 22:56:24,611 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-07 22:56:35,666 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-07 22:56:35,667 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:56:35,672 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-07 22:56:35,673 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:56:35,679 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-07 22:56:35,680 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:56:35,686 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:56:35,689 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-07 22:56:35,690 | INFO | sqlalchemy.engine.Engine | [generated in 0.00089s] ()
2025-11-07 22:56:35,694 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 22:56:35,695 | INFO | sqlalchemy.engine.Engine | [generated in 0.00082s] ()
2025-11-07 22:56:35,701 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:56:35,702 | INFO | sqlalchemy.engine.Engine | [generated in 0.00111s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:56:35,720 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:56:35,723 | INFO | sqlalchemy.engine.Engine | [cached since 0.02075s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:56:35,726 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:56:35,726 | INFO | sqlalchemy.engine.Engine | [cached since 0.02448s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:56:35,729 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:56:35,730 | INFO | sqlalchemy.engine.Engine | [cached since 0.02832s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:56:35,734 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:56:35,735 | INFO | sqlalchemy.engine.Engine | [cached since 0.03349s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:56:35,739 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 22:56:35,740 | INFO | sqlalchemy.engine.Engine | [generated in 0.00093s] ('user_status', 'pg_catalog')
2025-11-07 22:56:35,745 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 22:56:35,746 | INFO | sqlalchemy.engine.Engine | [cached since 0.007265s ago] ('account_type', 'pg_catalog')
2025-11-07 22:56:35,750 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-07 22:56:35,750 | INFO | sqlalchemy.engine.Engine | [generated in 0.00079s] ()
2025-11-07 22:56:35,756 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-07 22:56:35,757 | INFO | sqlalchemy.engine.Engine | [generated in 0.00101s] ()
2025-11-07 22:56:35,772 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-07 22:56:35,774 | INFO | sqlalchemy.engine.Engine | [generated in 0.00148s] ()
2025-11-07 22:56:35,823 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 22:56:35,855 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-07 22:57:15,703 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-07 22:57:15,704 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:57:15,709 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-07 22:57:15,710 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:57:15,717 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-07 22:57:15,718 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:57:15,722 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:57:15,724 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-07 22:57:15,725 | INFO | sqlalchemy.engine.Engine | [generated in 0.00100s] ()
2025-11-07 22:57:15,730 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 22:57:15,730 | INFO | sqlalchemy.engine.Engine | [generated in 0.00112s] ()
2025-11-07 22:57:15,737 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:57:15,738 | INFO | sqlalchemy.engine.Engine | [generated in 0.00112s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:57:15,757 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:57:15,758 | INFO | sqlalchemy.engine.Engine | [cached since 0.02044s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:57:15,760 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:57:15,761 | INFO | sqlalchemy.engine.Engine | [cached since 0.02408s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:57:15,764 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:57:15,765 | INFO | sqlalchemy.engine.Engine | [cached since 0.02853s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:57:15,768 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:57:15,768 | INFO | sqlalchemy.engine.Engine | [cached since 0.03177s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:57:15,773 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 22:57:15,774 | INFO | sqlalchemy.engine.Engine | [generated in 0.00095s] ('user_status', 'pg_catalog')
2025-11-07 22:57:15,778 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 22:57:15,780 | INFO | sqlalchemy.engine.Engine | [cached since 0.006987s ago] ('account_type', 'pg_catalog')
2025-11-07 22:57:15,786 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-07 22:57:15,788 | INFO | sqlalchemy.engine.Engine | [generated in 0.00155s] ()
2025-11-07 22:57:15,794 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-07 22:57:15,795 | INFO | sqlalchemy.engine.Engine | [generated in 0.00128s] ()
2025-11-07 22:57:15,815 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-07 22:57:15,818 | INFO | sqlalchemy.engine.Engine | [generated in 0.00217s] ()
2025-11-07 22:57:15,884 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 22:57:15,922 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-07 23:00:54,853 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-07 23:00:54,853 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 23:00:54,862 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-07 23:00:54,863 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 23:00:54,871 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-07 23:00:54,872 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 23:00:54,878 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:00:54,880 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-07 23:00:54,881 | INFO | sqlalchemy.engine.Engine | [generated in 0.00117s] ()
2025-11-07 23:00:54,887 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 23:00:54,888 | INFO | sqlalchemy.engine.Engine | [generated in 0.00101s] ()
2025-11-07 23:00:54,896 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:00:54,897 | INFO | sqlalchemy.engine.Engine | [generated in 0.00144s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:00:54,921 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:00:54,922 | INFO | sqlalchemy.engine.Engine | [cached since 0.02561s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:00:54,925 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:00:54,926 | INFO | sqlalchemy.engine.Engine | [cached since 0.02956s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:00:54,930 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:00:54,931 | INFO | sqlalchemy.engine.Engine | [cached since 0.03455s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:00:54,934 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:00:54,936 | INFO | sqlalchemy.engine.Engine | [cached since 0.03963s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:00:54,942 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 23:00:54,942 | INFO | sqlalchemy.engine.Engine | [generated in 0.00122s] ('user_status', 'pg_catalog')
2025-11-07 23:00:54,950 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 23:00:54,951 | INFO | sqlalchemy.engine.Engine | [cached since 0.009835s ago] ('account_type', 'pg_catalog')
2025-11-07 23:00:54,955 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-07 23:00:54,957 | INFO | sqlalchemy.engine.Engine | [generated in 0.00106s] ()
2025-11-07 23:00:54,961 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-07 23:00:54,963 | INFO | sqlalchemy.engine.Engine | [generated in 0.00171s] ()
2025-11-07 23:00:54,983 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-07 23:00:54,986 | INFO | sqlalchemy.engine.Engine | [generated in 0.00197s] ()
2025-11-07 23:00:55,051 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:00:55,100 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-07 23:02:04,489 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-07 23:02:04,489 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 23:02:04,496 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-07 23:02:04,497 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 23:02:04,503 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-07 23:02:04,504 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 23:02:04,508 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:02:04,509 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-07 23:02:04,511 | INFO | sqlalchemy.engine.Engine | [generated in 0.00117s] ()
2025-11-07 23:02:04,516 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 23:02:04,518 | INFO | sqlalchemy.engine.Engine | [generated in 0.00089s] ()
2025-11-07 23:02:04,522 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:02:04,523 | INFO | sqlalchemy.engine.Engine | [generated in 0.00085s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:02:04,538 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:02:04,539 | INFO | sqlalchemy.engine.Engine | [cached since 0.01695s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:02:04,543 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:02:04,544 | INFO | sqlalchemy.engine.Engine | [cached since 0.02159s ago] ('phase_scores', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:02:04,547 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:02:04,548 | INFO | sqlalchemy.engine.Engine | [cached since 0.02582s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:02:04,552 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:02:04,552 | INFO | sqlalchemy.engine.Engine | [cached since 0.02982s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:02:04,555 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:02:04,557 | INFO | sqlalchemy.engine.Engine | [cached since 0.03372s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:02:04,562 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 23:02:04,563 | INFO | sqlalchemy.engine.Engine | [generated in 0.00109s] ('user_status', 'pg_catalog')
2025-11-07 23:02:04,569 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 23:02:04,570 | INFO | sqlalchemy.engine.Engine | [cached since 0.008759s ago] ('account_type', 'pg_catalog')
2025-11-07 23:02:04,574 | INFO | sqlalchemy.engine.Engine | 
CREATE TABLE ecowhiskey.phase_scores (
	id UUID NOT NULL, 
	training_session_id UUID NOT NULL, 
	user_id INTEGER NOT NULL, 
	phase_id VARCHAR NOT NULL, 
	score FLOAT NOT NULL, 
	created_at TIMESTAMP WITHOUT TIME ZONE DEFAULT 'NOW()' NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES ecowhiskey.users (id) ON DELETE CASCADE
)


2025-11-07 23:02:04,576 | INFO | sqlalchemy.engine.Engine | [no key 0.00184s] ()
2025-11-07 23:02:04,768 | INFO | sqlalchemy.engine.Engine | CREATE INDEX ix_phase_scores_training_session_id ON ecowhiskey.phase_scores (training_session_id)
2025-11-07 23:02:04,769 | INFO | sqlalchemy.engine.Engine | [no key 0.00109s] ()
2025-11-07 23:02:04,783 | INFO | sqlalchemy.engine.Engine | CREATE INDEX ix_phase_scores_user_id ON ecowhiskey.phase_scores (user_id)
2025-11-07 23:02:04,784 | INFO | sqlalchemy.engine.Engine | [no key 0.00101s] ()
2025-11-07 23:02:04,800 | INFO | sqlalchemy.engine.Engine | CREATE INDEX ix_phase_scores_phase_id ON ecowhiskey.phase_scores (phase_id)
2025-11-07 23:02:04,801 | INFO | sqlalchemy.engine.Engine | [no key 0.00095s] ()
2025-11-07 23:02:04,816 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-07 23:02:04,817 | INFO | sqlalchemy.engine.Engine | [generated in 0.00106s] ()
2025-11-07 23:02:04,821 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-07 23:02:04,823 | INFO | sqlalchemy.engine.Engine | [generated in 0.00112s] ()
2025-11-07 23:02:04,840 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-07 23:02:04,841 | INFO | sqlalchemy.engine.Engine | [generated in 0.00203s] ()
2025-11-07 23:02:04,891 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:02:04,931 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-07 23:02:40,906 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-07 23:02:40,906 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 23:02:40,913 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-07 23:02:40,913 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 23:02:40,918 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-07 23:02:40,920 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 23:02:40,926 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:02:40,928 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-07 23:02:40,928 | INFO | sqlalchemy.engine.Engine | [generated in 0.00084s] ()
2025-11-07 23:02:40,933 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 23:02:40,933 | INFO | sqlalchemy.engine.Engine | [generated in 0.00065s] ()
2025-11-07 23:02:40,940 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:02:40,941 | INFO | sqlalchemy.engine.Engine | [generated in 0.00116s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:02:40,956 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:02:40,957 | INFO | sqlalchemy.engine.Engine | [cached since 0.01809s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:02:40,962 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:02:40,962 | INFO | sqlalchemy.engine.Engine | [cached since 0.02227s ago] ('phase_scores', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:02:40,966 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:02:40,966 | INFO | sqlalchemy.engine.Engine | [cached since 0.02628s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:02:40,969 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:02:40,970 | INFO | sqlalchemy.engine.Engine | [cached since 0.03039s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:02:40,973 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:02:40,975 | INFO | sqlalchemy.engine.Engine | [cached since 0.03491s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:02:40,979 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 23:02:40,981 | INFO | sqlalchemy.engine.Engine | [generated in 0.00120s] ('user_status', 'pg_catalog')
2025-11-07 23:02:40,986 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 23:02:40,987 | INFO | sqlalchemy.engine.Engine | [cached since 0.007625s ago] ('account_type', 'pg_catalog')
2025-11-07 23:02:40,991 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-07 23:02:40,992 | INFO | sqlalchemy.engine.Engine | [generated in 0.00090s] ()
2025-11-07 23:02:40,996 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-07 23:02:40,997 | INFO | sqlalchemy.engine.Engine | [generated in 0.00103s] ()
2025-11-07 23:02:41,007 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-07 23:02:41,010 | INFO | sqlalchemy.engine.Engine | [generated in 0.00192s] ()
2025-11-07 23:02:41,061 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:02:41,088 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-07 23:03:13,085 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-07 23:03:13,086 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 23:03:13,091 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-07 23:03:13,092 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 23:03:13,099 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-07 23:03:13,100 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 23:03:13,106 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:03:13,107 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-07 23:03:13,108 | INFO | sqlalchemy.engine.Engine | [generated in 0.00108s] ()
2025-11-07 23:03:13,113 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 23:03:13,114 | INFO | sqlalchemy.engine.Engine | [generated in 0.00114s] ()
2025-11-07 23:03:13,122 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:03:13,123 | INFO | sqlalchemy.engine.Engine | [generated in 0.00152s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:03:13,141 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:03:13,142 | INFO | sqlalchemy.engine.Engine | [cached since 0.02045s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:03:13,145 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:03:13,146 | INFO | sqlalchemy.engine.Engine | [cached since 0.02452s ago] ('phase_scores', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:03:13,149 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:03:13,150 | INFO | sqlalchemy.engine.Engine | [cached since 0.02866s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:03:13,153 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:03:13,154 | INFO | sqlalchemy.engine.Engine | [cached since 0.03261s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:03:13,158 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:03:13,159 | INFO | sqlalchemy.engine.Engine | [cached since 0.03737s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:03:13,163 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 23:03:13,165 | INFO | sqlalchemy.engine.Engine | [generated in 0.00125s] ('user_status', 'pg_catalog')
2025-11-07 23:03:13,171 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 23:03:13,172 | INFO | sqlalchemy.engine.Engine | [cached since 0.009213s ago] ('account_type', 'pg_catalog')
2025-11-07 23:03:13,176 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-07 23:03:13,177 | INFO | sqlalchemy.engine.Engine | [generated in 0.00091s] ()
2025-11-07 23:03:13,182 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-07 23:03:13,183 | INFO | sqlalchemy.engine.Engine | [generated in 0.00120s] ()
2025-11-07 23:03:13,203 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-07 23:03:13,204 | INFO | sqlalchemy.engine.Engine | [generated in 0.00160s] ()
2025-11-07 23:03:13,261 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:03:13,299 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-07 23:03:55,661 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-07 23:03:55,661 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 23:03:55,667 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-07 23:03:55,667 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 23:03:55,672 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-07 23:03:55,673 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 23:03:55,677 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:03:55,678 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-07 23:03:55,679 | INFO | sqlalchemy.engine.Engine | [generated in 0.00078s] ()
2025-11-07 23:03:55,685 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 23:03:55,685 | INFO | sqlalchemy.engine.Engine | [generated in 0.00095s] ()
2025-11-07 23:03:55,691 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:03:55,692 | INFO | sqlalchemy.engine.Engine | [generated in 0.00113s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:03:55,710 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:03:55,711 | INFO | sqlalchemy.engine.Engine | [cached since 0.02008s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:03:55,714 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:03:55,715 | INFO | sqlalchemy.engine.Engine | [cached since 0.02423s ago] ('phase_scores', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:03:55,719 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:03:55,719 | INFO | sqlalchemy.engine.Engine | [cached since 0.0282s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:03:55,722 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:03:55,723 | INFO | sqlalchemy.engine.Engine | [cached since 0.03158s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:03:55,726 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:03:55,726 | INFO | sqlalchemy.engine.Engine | [cached since 0.03533s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:03:55,730 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 23:03:55,732 | INFO | sqlalchemy.engine.Engine | [generated in 0.00186s] ('user_status', 'pg_catalog')
2025-11-07 23:03:55,738 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 23:03:55,739 | INFO | sqlalchemy.engine.Engine | [cached since 0.008979s ago] ('account_type', 'pg_catalog')
2025-11-07 23:03:55,742 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-07 23:03:55,742 | INFO | sqlalchemy.engine.Engine | [generated in 0.00073s] ()
2025-11-07 23:03:55,747 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-07 23:03:55,748 | INFO | sqlalchemy.engine.Engine | [generated in 0.00115s] ()
2025-11-07 23:03:55,760 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-07 23:03:55,762 | INFO | sqlalchemy.engine.Engine | [generated in 0.00186s] ()
2025-11-07 23:03:55,811 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:03:55,842 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-07 23:04:47,412 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-07 23:04:47,412 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 23:04:47,418 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-07 23:04:47,418 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 23:04:47,424 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-07 23:04:47,425 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 23:04:47,431 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:04:47,432 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-07 23:04:47,433 | INFO | sqlalchemy.engine.Engine | [generated in 0.00101s] ()
2025-11-07 23:04:47,438 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 23:04:47,438 | INFO | sqlalchemy.engine.Engine | [generated in 0.00085s] ()
2025-11-07 23:04:47,445 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:04:47,445 | INFO | sqlalchemy.engine.Engine | [generated in 0.00085s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:04:47,460 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:04:47,461 | INFO | sqlalchemy.engine.Engine | [cached since 0.01688s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:04:47,464 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:04:47,464 | INFO | sqlalchemy.engine.Engine | [cached since 0.02076s ago] ('phase_scores', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:04:47,468 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:04:47,469 | INFO | sqlalchemy.engine.Engine | [cached since 0.02486s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:04:47,472 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:04:47,473 | INFO | sqlalchemy.engine.Engine | [cached since 0.02811s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:04:47,475 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:04:47,476 | INFO | sqlalchemy.engine.Engine | [cached since 0.03148s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:04:47,480 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 23:04:47,482 | INFO | sqlalchemy.engine.Engine | [generated in 0.00132s] ('user_status', 'pg_catalog')
2025-11-07 23:04:47,487 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 23:04:47,488 | INFO | sqlalchemy.engine.Engine | [cached since 0.007806s ago] ('account_type', 'pg_catalog')
2025-11-07 23:04:47,491 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-07 23:04:47,498 | INFO | sqlalchemy.engine.Engine | [generated in 0.00683s] ()
2025-11-07 23:04:47,504 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-07 23:04:47,504 | INFO | sqlalchemy.engine.Engine | [generated in 0.00074s] ()
2025-11-07 23:04:47,522 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-07 23:04:47,524 | INFO | sqlalchemy.engine.Engine | [generated in 0.00160s] ()
2025-11-07 23:04:47,579 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:04:47,618 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-07 23:05:13,378 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-07 23:05:13,378 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 23:05:13,384 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-07 23:05:13,385 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 23:05:13,392 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-07 23:05:13,393 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 23:05:13,398 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:05:13,399 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-07 23:05:13,400 | INFO | sqlalchemy.engine.Engine | [generated in 0.00096s] ()
2025-11-07 23:05:13,405 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 23:05:13,406 | INFO | sqlalchemy.engine.Engine | [generated in 0.00094s] ()
2025-11-07 23:05:13,415 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:05:13,416 | INFO | sqlalchemy.engine.Engine | [generated in 0.00130s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:05:13,436 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:05:13,437 | INFO | sqlalchemy.engine.Engine | [cached since 0.02405s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:05:13,441 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:05:13,442 | INFO | sqlalchemy.engine.Engine | [cached since 0.02787s ago] ('phase_scores', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:05:13,447 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:05:13,447 | INFO | sqlalchemy.engine.Engine | [cached since 0.03314s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:05:13,451 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:05:13,452 | INFO | sqlalchemy.engine.Engine | [cached since 0.03818s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:05:13,454 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:05:13,456 | INFO | sqlalchemy.engine.Engine | [cached since 0.04188s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:05:13,460 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 23:05:13,461 | INFO | sqlalchemy.engine.Engine | [generated in 0.00107s] ('user_status', 'pg_catalog')
2025-11-07 23:05:13,466 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 23:05:13,467 | INFO | sqlalchemy.engine.Engine | [cached since 0.007565s ago] ('account_type', 'pg_catalog')
2025-11-07 23:05:13,471 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-07 23:05:13,471 | INFO | sqlalchemy.engine.Engine | [generated in 0.00075s] ()
2025-11-07 23:05:13,474 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-07 23:05:13,476 | INFO | sqlalchemy.engine.Engine | [generated in 0.00128s] ()
2025-11-07 23:05:13,488 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-07 23:05:13,490 | INFO | sqlalchemy.engine.Engine | [generated in 0.00158s] ()
2025-11-07 23:05:13,539 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:05:13,572 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-07 23:05:23,676 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-07 23:05:23,677 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 23:05:23,684 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-07 23:05:23,684 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 23:05:23,690 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-07 23:05:23,691 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 23:05:23,697 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:05:23,698 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-07 23:05:23,699 | INFO | sqlalchemy.engine.Engine | [generated in 0.00106s] ()
2025-11-07 23:05:23,705 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 23:05:23,707 | INFO | sqlalchemy.engine.Engine | [generated in 0.00126s] ()
2025-11-07 23:05:23,713 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:05:23,714 | INFO | sqlalchemy.engine.Engine | [generated in 0.00124s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:05:23,732 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:05:23,733 | INFO | sqlalchemy.engine.Engine | [cached since 0.02025s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:05:23,737 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:05:23,738 | INFO | sqlalchemy.engine.Engine | [cached since 0.02448s ago] ('phase_scores', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:05:23,741 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:05:23,742 | INFO | sqlalchemy.engine.Engine | [cached since 0.02883s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:05:23,744 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:05:23,745 | INFO | sqlalchemy.engine.Engine | [cached since 0.03225s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:05:23,749 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:05:23,750 | INFO | sqlalchemy.engine.Engine | [cached since 0.0368s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:05:23,754 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 23:05:23,755 | INFO | sqlalchemy.engine.Engine | [generated in 0.00100s] ('user_status', 'pg_catalog')
2025-11-07 23:05:23,763 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 23:05:23,763 | INFO | sqlalchemy.engine.Engine | [cached since 0.008954s ago] ('account_type', 'pg_catalog')
2025-11-07 23:05:23,767 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-07 23:05:23,768 | INFO | sqlalchemy.engine.Engine | [generated in 0.00106s] ()
2025-11-07 23:05:23,772 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-07 23:05:23,773 | INFO | sqlalchemy.engine.Engine | [generated in 0.00084s] ()
2025-11-07 23:05:23,786 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-07 23:05:23,788 | INFO | sqlalchemy.engine.Engine | [generated in 0.00183s] ()
2025-11-07 23:05:23,840 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:05:23,873 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-07 23:05:51,747 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-07 23:05:51,748 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 23:05:51,754 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-07 23:05:51,755 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 23:05:51,762 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-07 23:05:51,763 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 23:05:51,769 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:05:51,771 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-07 23:05:51,772 | INFO | sqlalchemy.engine.Engine | [generated in 0.00111s] ()
2025-11-07 23:05:51,777 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 23:05:51,778 | INFO | sqlalchemy.engine.Engine | [generated in 0.00115s] ()
2025-11-07 23:05:51,785 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:05:51,787 | INFO | sqlalchemy.engine.Engine | [generated in 0.00154s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:05:51,808 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:05:51,809 | INFO | sqlalchemy.engine.Engine | [cached since 0.02308s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:05:51,812 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:05:51,814 | INFO | sqlalchemy.engine.Engine | [cached since 0.02913s ago] ('phase_scores', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:05:51,818 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:05:51,819 | INFO | sqlalchemy.engine.Engine | [cached since 0.03373s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:05:51,822 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:05:51,823 | INFO | sqlalchemy.engine.Engine | [cached since 0.03731s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:05:51,825 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:05:51,826 | INFO | sqlalchemy.engine.Engine | [cached since 0.0415s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:05:51,834 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 23:05:51,834 | INFO | sqlalchemy.engine.Engine | [generated in 0.00082s] ('user_status', 'pg_catalog')
2025-11-07 23:05:51,840 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 23:05:51,841 | INFO | sqlalchemy.engine.Engine | [cached since 0.00715s ago] ('account_type', 'pg_catalog')
2025-11-07 23:05:51,844 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-07 23:05:51,845 | INFO | sqlalchemy.engine.Engine | [generated in 0.00105s] ()
2025-11-07 23:05:51,852 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-07 23:05:51,853 | INFO | sqlalchemy.engine.Engine | [generated in 0.00114s] ()
2025-11-07 23:05:51,883 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-07 23:05:51,886 | INFO | sqlalchemy.engine.Engine | [generated in 0.00341s] ()
2025-11-07 23:05:52,001 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:05:52,066 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-07 23:06:32,732 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:06:32,733 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 23:06:32,736 | INFO | sqlalchemy.engine.Engine | [cached since 40.96s ago] ()
2025-11-07 23:06:32,773 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.email = $1::VARCHAR
2025-11-07 23:06:32,777 | INFO | sqlalchemy.engine.Engine | [generated in 0.00283s] ('josuelu3@gmail.com',)
2025-11-07 23:06:32,918 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 23:06:34,585 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:06:34,586 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 23:06:34,587 | INFO | sqlalchemy.engine.Engine | [cached since 42.81s ago] ()
2025-11-07 23:06:34,593 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 23:06:34,593 | INFO | sqlalchemy.engine.Engine | [generated in 0.00102s] (1,)
2025-11-07 23:06:34,667 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 23:06:34,668 | INFO | sqlalchemy.engine.Engine | [cached since 0.07506s ago] (1,)
2025-11-07 23:06:34,672 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 23:06:55,540 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:06:55,541 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 23:06:55,542 | INFO | sqlalchemy.engine.Engine | [cached since 63.76s ago] ()
2025-11-07 23:06:55,550 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 23:06:55,552 | INFO | sqlalchemy.engine.Engine | [cached since 20.96s ago] (1,)
2025-11-07 23:06:55,651 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.training_contexts (id, training_session_id, user_id, context) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::JSONB) RETURNING ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at
2025-11-07 23:06:55,652 | INFO | sqlalchemy.engine.Engine | [generated in 0.00107s] (UUID('6e317866-538a-4aed-bbf4-bac703f8a651'), UUID('3d790afb-9634-4868-a9cf-367eb49509b5'), 1, '{"route": "MRPV-MRPV", "meteo": {"condition": "IMC", "vis": "3km", "qnh": "984", "windDirection": "040", "windSpeed": "4", "wind": "040/4"}, "scenario_id": "mrpv_full_flight"}')
2025-11-07 23:06:55,660 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:06:55,809 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:06:55,811 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.id = $1::UUID
2025-11-07 23:06:55,813 | INFO | sqlalchemy.engine.Engine | [generated in 0.00119s] (UUID('6e317866-538a-4aed-bbf4-bac703f8a651'),)
2025-11-07 23:06:55,828 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 23:11:29,624 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:11:29,626 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 23:11:29,628 | INFO | sqlalchemy.engine.Engine | [cached since 337.9s ago] ()
2025-11-07 23:11:29,637 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.email = $1::VARCHAR
2025-11-07 23:11:29,639 | INFO | sqlalchemy.engine.Engine | [cached since 296.9s ago] ('josuelu3@gmail.com',)
2025-11-07 23:11:29,808 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 23:11:32,530 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:11:32,532 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 23:11:32,534 | INFO | sqlalchemy.engine.Engine | [cached since 340.8s ago] ()
2025-11-07 23:11:32,546 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 23:11:32,549 | INFO | sqlalchemy.engine.Engine | [cached since 298s ago] (1,)
2025-11-07 23:11:32,742 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 23:11:32,745 | INFO | sqlalchemy.engine.Engine | [cached since 298.2s ago] (1,)
2025-11-07 23:11:32,753 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 23:11:39,798 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:11:39,799 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 23:11:39,800 | INFO | sqlalchemy.engine.Engine | [cached since 348s ago] ()
2025-11-07 23:11:39,806 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 23:11:39,807 | INFO | sqlalchemy.engine.Engine | [cached since 305.2s ago] (1,)
2025-11-07 23:11:39,890 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.training_contexts (id, training_session_id, user_id, context) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::JSONB) RETURNING ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at
2025-11-07 23:11:39,891 | INFO | sqlalchemy.engine.Engine | [cached since 284.2s ago] (UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'), UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'), 1, '{"route": "MRPV-MRPV", "meteo": {"condition": "", "vis": "", "qnh": "", "windDirection": "", "windSpeed": "", "wind": ""}, "scenario_id": "mrpv_full_flight"}')
2025-11-07 23:11:39,898 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:11:40,041 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:11:40,042 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.id = $1::UUID
2025-11-07 23:11:40,043 | INFO | sqlalchemy.engine.Engine | [cached since 284.2s ago] (UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'),)
2025-11-07 23:11:40,056 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 23:14:15,008 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:14:15,009 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-07 23:14:15,009 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-07 23:14:15,010 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:14:15,010 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-07 23:14:15,010 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-07 23:14:15,012 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:14:15,012 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:14:15,013 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-07 23:14:15,013 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:14:15,014 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:14:15,015 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-07 23:14:15,016 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-07 23:14:15,017 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:14:15,017 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-07 23:14:15,018 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-07 23:14:15,019 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:14:15,020 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:14:15,022 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:269]
2025-11-07 23:14:15,022 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:14:15,023 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:14:15,025 | DEBUG | python_multipart.multipart | Calling on_header_field with data[311:330]
2025-11-07 23:14:15,026 | DEBUG | python_multipart.multipart | Calling on_header_value with data[332:386]
2025-11-07 23:14:15,026 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:14:15,027 | DEBUG | python_multipart.multipart | Calling on_header_field with data[388:400]
2025-11-07 23:14:15,027 | DEBUG | python_multipart.multipart | Calling on_header_value with data[402:412]
2025-11-07 23:14:15,029 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:14:15,029 | DEBUG | python_multipart.multipart | Calling on_header_field with data[414:428]
2025-11-07 23:14:15,030 | DEBUG | python_multipart.multipart | Calling on_header_value with data[430:436]
2025-11-07 23:14:15,032 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:14:15,033 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:14:15,035 | DEBUG | python_multipart.multipart | Calling on_part_data with data[440:5840]
2025-11-07 23:14:15,037 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:14:15,144 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:14:15,146 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:14:15,147 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:14:15,264 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:14:15,265 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:14:15,267 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:14:15,385 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:14:15,388 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:14:15,389 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:14:15,504 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:14:15,506 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:14:15,507 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:14:15,643 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:14:15,644 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:14:15,764 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:14:15,765 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:14:15,767 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:14:15,887 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:14:15,889 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:14:15,890 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:14:16,005 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:14:16,007 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:14:16,009 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-07 23:14:16,124 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:14:16,126 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:14:16,127 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:14:16,244 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4379]
2025-11-07 23:14:16,245 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1]
2025-11-07 23:14:16,246 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:14:16,246 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:14:16,355 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:14:16,356 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:14:16,358 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:14:16,477 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:14:16,479 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:14:16,481 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:14:16,600 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:14:16,603 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:14:16,604 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-07 23:14:16,719 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:14:16,721 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:14:16,722 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:14:16,839 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:14:16,842 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-07 23:14:16,960 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:14:16,962 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:6732]
2025-11-07 23:14:17,077 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:14:17,079 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:14:17,080 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:14:17,196 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:14:17,197 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:14:17,199 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:14:17,313 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:14:17,314 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:14:17,315 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:14:17,429 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:14:17,432 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:14:17,433 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3811]
2025-11-07 23:14:17,548 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1]
2025-11-07 23:14:17,549 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:14:17,550 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:14:17,665 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:14:17,667 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:14:17,669 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:14:17,791 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:14:17,793 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-07 23:14:17,914 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:14:17,915 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:14:17,917 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:14:18,028 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:14:18,029 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:14:18,030 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:14:18,055 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:14:18,057 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:267]
2025-11-07 23:14:18,057 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:14:18,059 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-07 23:14:18,162 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:14:18,162 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 23:14:18,163 | INFO | sqlalchemy.engine.Engine | [cached since 506.4s ago] ()
2025-11-07 23:14:18,169 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 23:14:18,170 | INFO | sqlalchemy.engine.Engine | [cached since 463.6s ago] (1,)
2025-11-07 23:14:18,255 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 23:14:18,256 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000001CFEC9CB750>}) about to wait for the following futures []
2025-11-07 23:14:18,257 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000001CFEC9CB750>}) done waiting for dependent futures
2025-11-07 23:14:18,258 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000001CFEC9CB750>}) with kwargs {'client': <botocore.client.S3 object at 0x000001CFEC6E4F90>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000001CFED022690>, 'osutil': <s3transfer.utils.OSUtils object at 0x000001CFED020E10>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000001CFED03E090>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000001CFEC9CB750>}
2025-11-07 23:14:18,259 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/6fc78820980443afa4ce4a5558fc5e33.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000001CFED03E090> for transfer request: 0.
2025-11-07 23:14:18,259 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 23:14:18,260 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/6fc78820980443afa4ce4a5558fc5e33.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-07 23:14:18,260 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 23:14:18,260 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/6fc78820980443afa4ce4a5558fc5e33.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-07 23:14:18,262 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/6fc78820980443afa4ce4a5558fc5e33.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x000001CFEC6E4F90>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000001CFED03F290>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/6fc78820980443afa4ce4a5558fc5e33.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-07 23:14:19,209 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 23:14:29,052 | INFO | app.controllers.audio | Transcripción recibida session=08fd22f7-1621-4b61-9273-6b21d67e0d6c: pa superficie, Alfa Noviembre, India, en hangar 37 solicitamos abrir plan de vuelo hacia zona eco, vía paso Chumogo, 7000 pies, dos almas a bordo, capitán Maggie, autonomía, cinco horas.
2025-11-07 23:14:29,053 | INFO | app.logs.transcript | student | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=118.000 | text=pa superficie, Alfa Noviembre, India, en hangar 37 solicitamos abrir plan de vuelo hacia zona eco, vía paso Chumogo, 7000 pies, dos almas a bordo, capitán Maggie, autonomía, cinco horas.
2025-11-07 23:14:29,184 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:14:29,186 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:14:29,187 | INFO | sqlalchemy.engine.Engine | [generated in 0.00139s] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:14:29,204 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 23:14:29,915 | WARNING | app.services.audio_pipeline | Intent detector invalid JSON: "Invalid error type: 'json_decode_error'" raw=```json
{
  "intent": "tower_takeoff_clearance",
  "confidence": 0.95,
  "frequencyGroup": "tower"
}
```
2025-11-07 23:14:30,044 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:14:30,045 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:14:30,046 | INFO | sqlalchemy.engine.Engine | [cached since 0.8594s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:14:30,064 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-07 23:14:30,065 | INFO | sqlalchemy.engine.Engine | [generated in 0.00154s] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "scenario_id": "mrpv_fu ... (18380 characters truncated) ... ": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "timestamp": "2025-11-08T05:14:29Z"}]}', datetime.datetime(2025, 11, 8, 5, 14, 30, 64055), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-07 23:14:30,079 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:14:30,111 | INFO | app.controllers.audio | Fase activa session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=ground_departure_request intent=ground_taxi_clearance freq=ground
2025-11-07 23:14:30,112 | INFO | app.controllers.audio | Frecuencia fuera de rango intent=ground_taxi_clearance freq=118.000 esperado=121.700
2025-11-07 23:14:30,232 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:14:30,233 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:14:30,234 | INFO | sqlalchemy.engine.Engine | [cached since 1.048s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:14:30,246 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-07 23:14:30,248 | INFO | sqlalchemy.engine.Engine | [cached since 0.1851s ago] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (18784 characters truncated) ... roach": "120.5", "radio": "126.8", "unicom": "122.0"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 8, 5, 14, 30, 246886), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-07 23:14:30,260 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:14:30,278 | INFO | app.logs.transcript | controller | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=118.000 | intent=ground_taxi_clearance | phase=ground_departure_request | allow_response=False | text=La frecuencia esperada para esta solicitud es 121.700.
2025-11-07 23:14:30,280 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 23:26:02,269 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-07 23:26:02,269 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 23:26:02,275 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-07 23:26:02,276 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 23:26:02,281 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-07 23:26:02,283 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 23:26:02,287 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:26:02,288 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-07 23:26:02,288 | INFO | sqlalchemy.engine.Engine | [generated in 0.00060s] ()
2025-11-07 23:26:02,291 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 23:26:02,293 | INFO | sqlalchemy.engine.Engine | [generated in 0.00096s] ()
2025-11-07 23:26:02,298 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:26:02,299 | INFO | sqlalchemy.engine.Engine | [generated in 0.00113s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:26:02,313 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:26:02,315 | INFO | sqlalchemy.engine.Engine | [cached since 0.01669s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:26:02,318 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:26:02,319 | INFO | sqlalchemy.engine.Engine | [cached since 0.02065s ago] ('phase_scores', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:26:02,322 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:26:02,322 | INFO | sqlalchemy.engine.Engine | [cached since 0.02368s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:26:02,324 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:26:02,325 | INFO | sqlalchemy.engine.Engine | [cached since 0.02687s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:26:02,327 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:26:02,328 | INFO | sqlalchemy.engine.Engine | [cached since 0.03044s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:26:02,333 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 23:26:02,335 | INFO | sqlalchemy.engine.Engine | [generated in 0.00154s] ('user_status', 'pg_catalog')
2025-11-07 23:26:02,339 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 23:26:02,340 | INFO | sqlalchemy.engine.Engine | [cached since 0.006849s ago] ('account_type', 'pg_catalog')
2025-11-07 23:26:02,343 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-07 23:26:02,344 | INFO | sqlalchemy.engine.Engine | [generated in 0.00071s] ()
2025-11-07 23:26:02,347 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-07 23:26:02,348 | INFO | sqlalchemy.engine.Engine | [generated in 0.00086s] ()
2025-11-07 23:26:02,359 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-07 23:26:02,362 | INFO | sqlalchemy.engine.Engine | [generated in 0.00179s] ()
2025-11-07 23:26:02,414 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:26:02,444 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-07 23:27:13,872 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:27:13,873 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-07 23:27:13,874 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-07 23:27:13,874 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:27:13,875 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-07 23:27:13,876 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-07 23:27:13,876 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:27:13,877 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:27:13,879 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-07 23:27:13,880 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:27:13,881 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:27:13,881 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-07 23:27:13,882 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-07 23:27:13,882 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:27:13,884 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-07 23:27:13,886 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-07 23:27:13,887 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:27:13,887 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:27:13,888 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:269]
2025-11-07 23:27:13,889 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:27:13,889 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:27:13,890 | DEBUG | python_multipart.multipart | Calling on_header_field with data[311:330]
2025-11-07 23:27:13,892 | DEBUG | python_multipart.multipart | Calling on_header_value with data[332:386]
2025-11-07 23:27:13,892 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:27:13,893 | DEBUG | python_multipart.multipart | Calling on_header_field with data[388:400]
2025-11-07 23:27:13,894 | DEBUG | python_multipart.multipart | Calling on_header_value with data[402:412]
2025-11-07 23:27:13,895 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:27:13,895 | DEBUG | python_multipart.multipart | Calling on_header_field with data[414:428]
2025-11-07 23:27:13,897 | DEBUG | python_multipart.multipart | Calling on_header_value with data[430:436]
2025-11-07 23:27:13,898 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:27:13,898 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:27:13,899 | DEBUG | python_multipart.multipart | Calling on_part_data with data[440:8192]
2025-11-07 23:27:14,002 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:27:14,004 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:27:14,005 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-07 23:27:14,133 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:27:14,134 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:27:14,136 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:27:14,248 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:27:14,249 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:27:14,365 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:27:14,366 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:27:14,368 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:27:14,479 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:27:14,481 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:27:14,482 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-07 23:27:14,597 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:27:14,599 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:27:14,601 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:27:14,716 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:27:14,717 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:27:14,718 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:27:14,827 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:27:14,829 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:27:14,830 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5271]
2025-11-07 23:27:14,941 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1]
2025-11-07 23:27:14,941 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:27:14,943 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:27:14,944 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:27:15,053 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:27:15,054 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:27:15,057 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:27:15,169 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:27:15,171 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:27:15,173 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:27:15,287 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:27:15,289 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:27:15,290 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:27:15,399 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:27:15,401 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:27:15,403 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:27:15,515 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:27:15,516 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:27:15,630 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:27:15,631 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:27:15,632 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:27:15,741 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:27:15,742 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:27:15,743 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:27:15,852 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:27:15,854 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:27:15,856 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:27:15,973 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:27:15,975 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:27:15,976 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:27:16,089 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:27:16,090 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:27:16,091 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:27:16,206 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:27:16,208 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:27:16,209 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:27:16,326 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:27:16,327 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:27:16,328 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:27:16,440 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:27:16,441 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:27:16,443 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:27:16,551 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:27:16,554 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:27:16,556 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:27:16,666 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:27:16,668 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:27:16,669 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:27:16,781 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:27:16,782 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:27:16,784 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:27:16,786 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:27:16,895 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:27:16,896 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:27:16,898 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:27:16,982 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:27:16,982 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:27:16,984 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1808]
2025-11-07 23:27:16,985 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:27:16,986 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-07 23:27:17,087 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:27:17,088 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 23:27:17,089 | INFO | sqlalchemy.engine.Engine | [cached since 74.8s ago] ()
2025-11-07 23:27:17,109 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 23:27:17,109 | INFO | sqlalchemy.engine.Engine | [generated in 0.00091s] (1,)
2025-11-07 23:27:17,181 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 23:27:17,183 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000019988F0B390>}) about to wait for the following futures []
2025-11-07 23:27:17,183 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000019988F0B390>}) done waiting for dependent futures
2025-11-07 23:27:17,184 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000019988F0B390>}) with kwargs {'client': <botocore.client.S3 object at 0x0000019988BF8210>, 'config': <boto3.s3.transfer.TransferConfig object at 0x00000199893FEC10>, 'osutil': <s3transfer.utils.OSUtils object at 0x00000199893D82D0>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x00000199893FEED0>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000019988F0B390>}
2025-11-07 23:27:17,185 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/55278e415031498c9f856a32588b0d7c.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x00000199893FEED0> for transfer request: 0.
2025-11-07 23:27:17,186 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 23:27:17,187 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/55278e415031498c9f856a32588b0d7c.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-07 23:27:17,187 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 23:27:17,188 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/55278e415031498c9f856a32588b0d7c.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-07 23:27:17,189 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/55278e415031498c9f856a32588b0d7c.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x0000019988BF8210>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x00000199862CA710>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/55278e415031498c9f856a32588b0d7c.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-07 23:27:18,075 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 23:27:29,940 | INFO | app.controllers.audio | Transcripción recibida session=08fd22f7-1621-4b61-9273-6b21d67e0d6c: pa superficie Alfa Noviembre India en hangar 37 Solicitamos abrir plan de vuelo hacia zona Eco Vía Paso Oogo 7000 pies dos almas a bordo Capitan Nube. autonomía cinco horas.
2025-11-07 23:27:29,940 | INFO | app.logs.transcript | student | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=118.000 | text=pa superficie Alfa Noviembre India en hangar 37 Solicitamos abrir plan de vuelo hacia zona Eco Vía Paso Oogo 7000 pies dos almas a bordo Capitan Nube. autonomía cinco horas.
2025-11-07 23:27:30,042 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:27:30,044 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:27:30,044 | INFO | sqlalchemy.engine.Engine | [generated in 0.00066s] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:27:30,056 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 23:27:30,718 | WARNING | app.services.audio_pipeline | Intent detector invalid JSON: "Invalid error type: 'json_decode_error'" raw=```json
{
    "intent": "tower_takeoff_clearance",
    "confidence": 0.9,
    "frequencyGroup": "tower"
}
```
2025-11-07 23:27:30,823 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:27:30,824 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:27:30,824 | INFO | sqlalchemy.engine.Engine | [cached since 0.781s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:27:30,840 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-07 23:27:30,842 | INFO | sqlalchemy.engine.Engine | [generated in 0.00119s] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (19188 characters truncated) ... nd": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 8, 5, 27, 30, 840848), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-07 23:27:30,856 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:27:30,882 | INFO | app.controllers.audio | Fase activa session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=ground_departure_request intent=ground_taxi_clearance freq=ground
2025-11-07 23:27:30,884 | INFO | app.controllers.audio | Frecuencia fuera de rango intent=ground_taxi_clearance freq=118.000 esperado=121.700
2025-11-07 23:27:31,006 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:27:31,007 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:27:31,008 | INFO | sqlalchemy.engine.Engine | [cached since 0.9642s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:27:31,021 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-07 23:27:31,021 | INFO | sqlalchemy.engine.Engine | [cached since 0.181s ago] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (19592 characters truncated) ... nd": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 8, 5, 27, 31, 19513), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-07 23:27:31,032 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:27:31,046 | INFO | app.logs.transcript | controller | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=118.000 | intent=ground_taxi_clearance | phase=ground_departure_request | allow_response=False | text=La frecuencia esperada para esta solicitud es 121.700.
2025-11-07 23:27:31,047 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 23:29:46,748 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-07 23:29:46,749 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 23:29:46,755 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-07 23:29:46,755 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 23:29:46,760 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-07 23:29:46,761 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 23:29:46,767 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:29:46,769 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-07 23:29:46,770 | INFO | sqlalchemy.engine.Engine | [generated in 0.00079s] ()
2025-11-07 23:29:46,774 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 23:29:46,775 | INFO | sqlalchemy.engine.Engine | [generated in 0.00061s] ()
2025-11-07 23:29:46,782 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:29:46,783 | INFO | sqlalchemy.engine.Engine | [generated in 0.00094s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:29:46,799 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:29:46,800 | INFO | sqlalchemy.engine.Engine | [cached since 0.01849s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:29:46,802 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:29:46,804 | INFO | sqlalchemy.engine.Engine | [cached since 0.02269s ago] ('phase_scores', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:29:46,807 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:29:46,808 | INFO | sqlalchemy.engine.Engine | [cached since 0.02591s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:29:46,809 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:29:46,810 | INFO | sqlalchemy.engine.Engine | [cached since 0.0293s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:29:46,814 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 23:29:46,816 | INFO | sqlalchemy.engine.Engine | [cached since 0.03415s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 23:29:46,820 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 23:29:46,821 | INFO | sqlalchemy.engine.Engine | [generated in 0.00115s] ('user_status', 'pg_catalog')
2025-11-07 23:29:46,826 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 23:29:46,828 | INFO | sqlalchemy.engine.Engine | [cached since 0.007157s ago] ('account_type', 'pg_catalog')
2025-11-07 23:29:46,831 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-07 23:29:46,832 | INFO | sqlalchemy.engine.Engine | [generated in 0.00110s] ()
2025-11-07 23:29:46,837 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-07 23:29:46,837 | INFO | sqlalchemy.engine.Engine | [generated in 0.00134s] ()
2025-11-07 23:29:46,853 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-07 23:29:46,855 | INFO | sqlalchemy.engine.Engine | [generated in 0.00168s] ()
2025-11-07 23:29:46,907 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:29:46,939 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-07 23:30:17,007 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:30:17,007 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-07 23:30:17,008 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-07 23:30:17,008 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:30:17,008 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-07 23:30:17,010 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-07 23:30:17,010 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:30:17,010 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:30:17,012 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-07 23:30:17,013 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:30:17,014 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:30:17,015 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-07 23:30:17,015 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-07 23:30:17,016 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:30:17,017 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-07 23:30:17,017 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-07 23:30:17,018 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:30:17,018 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:30:17,020 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:269]
2025-11-07 23:30:17,021 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:30:17,022 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:30:17,022 | DEBUG | python_multipart.multipart | Calling on_header_field with data[311:330]
2025-11-07 23:30:17,022 | DEBUG | python_multipart.multipart | Calling on_header_value with data[332:386]
2025-11-07 23:30:17,023 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:30:17,023 | DEBUG | python_multipart.multipart | Calling on_header_field with data[388:400]
2025-11-07 23:30:17,023 | DEBUG | python_multipart.multipart | Calling on_header_value with data[402:412]
2025-11-07 23:30:17,024 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:30:17,025 | DEBUG | python_multipart.multipart | Calling on_header_field with data[414:428]
2025-11-07 23:30:17,026 | DEBUG | python_multipart.multipart | Calling on_header_value with data[430:436]
2025-11-07 23:30:17,027 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:30:17,027 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:30:17,028 | DEBUG | python_multipart.multipart | Calling on_part_data with data[440:8192]
2025-11-07 23:30:17,114 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:30:17,116 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:30:17,118 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:30:17,248 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:30:17,250 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2919]
2025-11-07 23:30:17,251 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1]
2025-11-07 23:30:17,252 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:30:17,383 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:30:17,385 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:30:17,386 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:30:17,510 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:30:17,512 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:30:17,513 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-07 23:30:17,637 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:30:17,640 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:30:17,642 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:30:17,763 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:30:17,765 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:30:17,766 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:30:17,892 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:30:17,895 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:30:17,896 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:30:18,013 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:30:18,014 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:30:18,017 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:30:18,134 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:30:18,137 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:30:18,138 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:30:18,140 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:30:18,260 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:30:18,262 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:30:18,263 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:30:18,265 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:30:18,390 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:30:18,392 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:30:18,394 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:30:18,512 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:30:18,513 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:30:18,632 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:30:18,633 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:30:18,634 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:30:18,747 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:30:18,748 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:30:18,750 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:30:18,860 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:30:18,861 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:30:18,863 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:30:18,975 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:30:18,977 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:30:18,979 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:30:18,980 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:30:19,092 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:30:19,094 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:30:19,203 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:30:19,205 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:30:19,206 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:30:19,323 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:30:19,325 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:30:19,326 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:30:19,442 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:30:19,444 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:30:19,562 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:30:19,564 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:30:19,566 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:30:19,568 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:30:19,688 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:30:19,690 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:30:19,692 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:30:19,726 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:30:19,727 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1012]
2025-11-07 23:30:19,727 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:30:19,727 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-07 23:30:19,830 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:30:19,830 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 23:30:19,831 | INFO | sqlalchemy.engine.Engine | [cached since 33.06s ago] ()
2025-11-07 23:30:19,849 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 23:30:19,850 | INFO | sqlalchemy.engine.Engine | [generated in 0.00136s] (1,)
2025-11-07 23:30:19,917 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 23:30:19,920 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000232222FF510>}) about to wait for the following futures []
2025-11-07 23:30:19,920 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000232222FF510>}) done waiting for dependent futures
2025-11-07 23:30:19,921 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000232222FF510>}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'config': <boto3.s3.transfer.TransferConfig object at 0x00000232222FE710>, 'osutil': <s3transfer.utils.OSUtils object at 0x00000232222FE6D0>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x00000232222FEA50>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000232222FF510>}
2025-11-07 23:30:19,922 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/eb05a66560e04ebcbb8a6a3092914a9d.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x00000232222FEA50> for transfer request: 0.
2025-11-07 23:30:19,924 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 23:30:19,925 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/eb05a66560e04ebcbb8a6a3092914a9d.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-07 23:30:19,925 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 23:30:19,925 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/eb05a66560e04ebcbb8a6a3092914a9d.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-07 23:30:19,927 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/eb05a66560e04ebcbb8a6a3092914a9d.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x00000232222FFA90>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/eb05a66560e04ebcbb8a6a3092914a9d.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-07 23:30:20,657 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 23:30:30,440 | INFO | app.controllers.audio | Transcripción recibida session=08fd22f7-1621-4b61-9273-6b21d67e0d6c: pavas superficie Alfa Noviembre India en hangar 40 Solicitamos abrir plan de vuelo hacia zona Eco Vía Paso Chomogo 7000 pies dos almas a bordo.
2025-11-07 23:30:30,440 | INFO | app.logs.transcript | student | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=118.000 | text=pavas superficie Alfa Noviembre India en hangar 40 Solicitamos abrir plan de vuelo hacia zona Eco Vía Paso Chomogo 7000 pies dos almas a bordo.
2025-11-07 23:30:30,543 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:30:30,545 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:30:30,546 | INFO | sqlalchemy.engine.Engine | [generated in 0.00078s] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:30:30,558 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 23:30:31,245 | WARNING | app.services.audio_pipeline | Intent detector invalid JSON: "Invalid error type: 'json_decode_error'" raw=```json
{
  "intent": "ground_taxi_clearance",
  "confidence": 0.95,
  "frequencyGroup": "ground"
}
```
2025-11-07 23:30:31,346 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:30:31,347 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:30:31,348 | INFO | sqlalchemy.engine.Engine | [cached since 0.8023s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:30:31,360 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-07 23:30:31,361 | INFO | sqlalchemy.engine.Engine | [generated in 0.00120s] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (19960 characters truncated) ... nd": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 8, 5, 30, 31, 360127), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-07 23:30:31,374 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:30:31,402 | INFO | app.controllers.audio | Fase activa session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=ground_departure_request intent=ground_taxi_clearance freq=ground
2025-11-07 23:30:31,403 | INFO | app.controllers.audio | Frecuencia fuera de rango intent=ground_taxi_clearance freq=118.000 esperado=121.700
2025-11-07 23:30:31,522 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:30:31,523 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:30:31,525 | INFO | sqlalchemy.engine.Engine | [cached since 0.9796s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:30:31,539 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-07 23:30:31,540 | INFO | sqlalchemy.engine.Engine | [cached since 0.1807s ago] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (20378 characters truncated) ... nd": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 8, 5, 30, 31, 538764), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-07 23:30:31,557 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:30:31,578 | INFO | app.controllers.audio | Error de frecuencia registrado session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=ground_departure_request
2025-11-07 23:30:31,583 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.phase_scores (id, training_session_id, user_id, phase_id, score) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::VARCHAR, $5::FLOAT), ($6::UUID, $7::UUID, $8::INTEGER, $9::VARCHAR, $10::FLOAT) RETURNING ecowhiskey.phase_scores.created_at, ecowhiskey.phase_scores.id
2025-11-07 23:30:31,584 | INFO | sqlalchemy.engine.Engine | [generated in 0.00036s (insertmanyvalues) 1/1 (ordered)] (UUID('e01d7651-3ac2-4c2d-9840-1372aaa90034'), UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'), 1, 'ground_departure_request', 0.0, UUID('6f26979a-f1b4-45b6-a76b-009116418a5b'), UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'), 1, 'frequency_usage_error', 0.0)
2025-11-07 23:30:31,607 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:30:31,639 | INFO | app.controllers.audio | Puntuación guardada session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=ground_departure_request score=0.00
2025-11-07 23:30:31,640 | INFO | app.logs.transcript | controller | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=118.000 | intent=ground_taxi_clearance | phase=ground_departure_request | allow_response=False | text=La frecuencia esperada para esta solicitud es 121.700.
2025-11-07 23:32:08,650 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:32:08,650 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-07 23:32:08,651 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-07 23:32:08,652 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:32:08,652 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-07 23:32:08,653 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-07 23:32:08,654 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:32:08,655 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:32:08,656 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-07 23:32:08,657 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:32:08,657 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:32:08,658 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-07 23:32:08,659 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-07 23:32:08,660 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:32:08,661 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-07 23:32:08,663 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-07 23:32:08,663 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:32:08,664 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:32:08,665 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:269]
2025-11-07 23:32:08,666 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:32:08,668 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:32:08,669 | DEBUG | python_multipart.multipart | Calling on_header_field with data[311:330]
2025-11-07 23:32:08,670 | DEBUG | python_multipart.multipart | Calling on_header_value with data[332:386]
2025-11-07 23:32:08,671 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:32:08,672 | DEBUG | python_multipart.multipart | Calling on_header_field with data[388:400]
2025-11-07 23:32:08,673 | DEBUG | python_multipart.multipart | Calling on_header_value with data[402:412]
2025-11-07 23:32:08,674 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:32:08,675 | DEBUG | python_multipart.multipart | Calling on_header_field with data[414:428]
2025-11-07 23:32:08,676 | DEBUG | python_multipart.multipart | Calling on_header_value with data[430:436]
2025-11-07 23:32:08,677 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:32:08,679 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:32:08,680 | DEBUG | python_multipart.multipart | Calling on_part_data with data[440:5840]
2025-11-07 23:32:08,683 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:32:08,782 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:32:08,787 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:32:08,788 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:32:08,790 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:32:08,895 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:32:08,897 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:32:08,899 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:32:09,010 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:32:09,013 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:32:09,015 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:32:09,144 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:32:09,146 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:32:09,149 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:32:09,274 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:32:09,275 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:32:09,277 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:32:09,390 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:32:09,395 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:32:09,395 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:32:09,508 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:32:09,510 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:32:09,512 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:32:09,512 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:32:09,629 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:32:09,632 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:32:09,633 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:32:09,776 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:32:09,779 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:32:09,782 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:32:09,927 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:32:09,930 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:32:10,048 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:32:10,050 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:32:10,051 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-07 23:32:10,164 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:32:10,166 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:32:10,169 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:32:10,311 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:32:10,316 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:32:10,319 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:32:10,496 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:32:10,497 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:32:10,500 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:32:10,629 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:32:10,631 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:32:10,633 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-07 23:32:10,757 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:32:10,758 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:32:10,761 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:32:10,878 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:32:10,880 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:32:10,881 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:32:11,007 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:32:11,009 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:32:11,012 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:32:11,144 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:32:11,147 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:32:11,148 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:32:11,262 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:32:11,264 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:32:11,265 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:32:11,375 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:32:11,377 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:32:11,379 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:32:11,492 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:32:11,495 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:32:11,612 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:32:11,614 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:32:11,615 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3811]
2025-11-07 23:32:11,729 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1]
2025-11-07 23:32:11,731 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1459]
2025-11-07 23:32:11,732 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1]
2025-11-07 23:32:11,733 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:32:11,734 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-07 23:32:11,854 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:32:11,856 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:32:11,857 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:32:11,864 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:552]
2025-11-07 23:32:11,864 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:32:11,865 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-07 23:32:11,990 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:32:11,990 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 23:32:11,991 | INFO | sqlalchemy.engine.Engine | [cached since 145.2s ago] ()
2025-11-07 23:32:11,998 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 23:32:11,999 | INFO | sqlalchemy.engine.Engine | [cached since 112.1s ago] (1,)
2025-11-07 23:32:12,073 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 23:32:12,075 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023222319310>}) about to wait for the following futures []
2025-11-07 23:32:12,076 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023222319310>}) done waiting for dependent futures
2025-11-07 23:32:12,077 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023222319310>}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002322229B0D0>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002322229A650>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x00000232222FC790>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023222319310>}
2025-11-07 23:32:12,077 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/0383a236a4f54c95aadadfcc2a257bec.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x00000232222FC790> for transfer request: 0.
2025-11-07 23:32:12,078 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 23:32:12,078 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/0383a236a4f54c95aadadfcc2a257bec.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-07 23:32:12,079 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 23:32:12,080 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/0383a236a4f54c95aadadfcc2a257bec.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-07 23:32:12,081 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/0383a236a4f54c95aadadfcc2a257bec.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x0000023221F26290>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/0383a236a4f54c95aadadfcc2a257bec.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-07 23:32:12,867 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 23:32:24,629 | INFO | app.controllers.audio | Transcripción recibida session=08fd22f7-1621-4b61-9273-6b21d67e0d6c: pava superficie Alfa Noviembre India en hangar 37 Solicitamos abrir plan de vuelo hacia zona Eco vía Paso Chomogo 7000 pies dos almas a bordo. Capitán Nube Autonomía cinco horas.
2025-11-07 23:32:24,630 | INFO | app.logs.transcript | student | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=121.700 | text=pava superficie Alfa Noviembre India en hangar 37 Solicitamos abrir plan de vuelo hacia zona Eco vía Paso Chomogo 7000 pies dos almas a bordo. Capitán Nube Autonomía cinco horas.
2025-11-07 23:32:24,750 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:32:24,752 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:32:24,754 | INFO | sqlalchemy.engine.Engine | [cached since 114.2s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:32:24,768 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 23:32:25,180 | WARNING | app.services.audio_pipeline | Intent detector invalid JSON: "Invalid error type: 'json_decode_error'" raw=```json
{
  "intent": "tower_takeoff_clearance",
  "confidence": 0.95,
  "frequencyGroup": "tower"
}
```
2025-11-07 23:32:25,306 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:32:25,307 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:32:25,309 | INFO | sqlalchemy.engine.Engine | [cached since 114.8s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:32:25,325 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-07 23:32:25,327 | INFO | sqlalchemy.engine.Engine | [cached since 114s ago] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (20793 characters truncated) ... nd": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 8, 5, 32, 25, 325785), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-07 23:32:25,346 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:32:25,377 | INFO | app.controllers.audio | Fase activa session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=ground_departure_request intent=ground_taxi_clearance freq=ground
2025-11-07 23:32:25,382 | INFO | app.services.audio_pipeline | Prompts generados intent=ground_taxi_clearance freq_group=ground
SYSTEM> Eres Pavas Superficie (121.7). Recibes la llamada inicial para abrir plan de vuelo y autorizar rodaje. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "score": number | null,
  "metadata": object
 }.
El campo "score" debe ser un número de 0 a 100 que evalúe la calidad de la transmisión del alumno para la fase actual, considerando: fra...
USER> Fase actual: Solicitud de apertura y autorización de rodaje
Intent esperado: ground_taxi_clearance
Transcripción textual del alumno:
pava superficie Alfa Noviembre India en hangar 37 Solicitamos abrir plan de vuelo hacia zona Eco vía Paso Chomogo 7000 pies dos almas a bordo. Capitán Nube Autonomía cinco horas.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: ground
- Fase ID: ground_departure_request

Checklist alumno:
- Saludo correcto a Pavas Superficie.
- Indicar ubicación ac...
2025-11-07 23:32:27,787 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=ground_taxi_clearance: {
  "intent": "ground_taxi_clearance",
  "allowResponse": true,
  "controllerText": "Alfa Noviembre India, Pavas Superficie, pista en uso uno cero, viento 8 nudos de 80 grados, QNH 3002. Rodaje al punto de espera vía Alfa, Charlie. Contacte Torre 118.3 cuando esté listo. Buena suerte y buen vuelo.",
  "feedback": "Solicitud completa. Recuerda contactar a Torre en 118.3 cuando estés listo para rodar.",
  "confidence": 0.95,
  "score": 90,
  "metadata": {
    "nextPhase": "ground_readback"
  }
}
2025-11-07 23:32:27,789 | INFO | app.controllers.audio | Transición automática de fase session=08fd22f7-1621-4b61-9273-6b21d67e0d6c de=ground_departure_request a=ground_readback
2025-11-07 23:32:27,944 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:32:27,945 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:32:27,946 | INFO | sqlalchemy.engine.Engine | [cached since 117.4s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:32:27,958 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-07 23:32:27,959 | INFO | sqlalchemy.engine.Engine | [cached since 116.6s ago] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (21923 characters truncated) ... nd": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 8, 5, 32, 27, 957595), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-07 23:32:27,969 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:32:27,983 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.phase_scores (id, training_session_id, user_id, phase_id, score) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::VARCHAR, $5::FLOAT) RETURNING ecowhiskey.phase_scores.created_at
2025-11-07 23:32:27,984 | INFO | sqlalchemy.engine.Engine | [generated in 0.00100s] (UUID('7099766b-b6b2-43c6-8dd7-cdc8260b5046'), UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'), 1, 'ground_readback', 90.0)
2025-11-07 23:32:27,992 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:32:28,014 | INFO | app.controllers.audio | Puntuación guardada session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=ground_readback score=90.00
2025-11-07 23:32:28,015 | INFO | app.logs.transcript | controller | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=121.700 | intent=ground_taxi_clearance | phase=ground_readback | allow_response=True | text=Alfa Noviembre India, Pavas Superficie, pista en uso uno cero, viento 8 nudos de 80 grados, QNH 3002. Rodaje al punto de espera vía Alfa, Charlie. Contacte Torre 118.3 cuando esté listo. Buena suerte y buen vuelo.
2025-11-07 23:34:54,530 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:34:54,531 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-07 23:34:54,532 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-07 23:34:54,532 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:34:54,534 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-07 23:34:54,535 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-07 23:34:54,535 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:34:54,536 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:34:54,536 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-07 23:34:54,538 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:34:54,539 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:34:54,540 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-07 23:34:54,540 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-07 23:34:54,541 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:34:54,541 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-07 23:34:54,542 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-07 23:34:54,542 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:34:54,542 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:34:54,543 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:269]
2025-11-07 23:34:54,543 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:34:54,543 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:34:54,545 | DEBUG | python_multipart.multipart | Calling on_header_field with data[311:330]
2025-11-07 23:34:54,545 | DEBUG | python_multipart.multipart | Calling on_header_value with data[332:386]
2025-11-07 23:34:54,545 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:34:54,546 | DEBUG | python_multipart.multipart | Calling on_header_field with data[388:400]
2025-11-07 23:34:54,547 | DEBUG | python_multipart.multipart | Calling on_header_value with data[402:412]
2025-11-07 23:34:54,548 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:34:54,549 | DEBUG | python_multipart.multipart | Calling on_header_field with data[414:428]
2025-11-07 23:34:54,549 | DEBUG | python_multipart.multipart | Calling on_header_value with data[430:436]
2025-11-07 23:34:54,551 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:34:54,551 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:34:54,553 | DEBUG | python_multipart.multipart | Calling on_part_data with data[440:5840]
2025-11-07 23:34:54,555 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:34:54,671 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:34:54,673 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:34:54,674 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:34:54,789 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:34:54,790 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-07 23:34:54,907 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:34:54,908 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:34:54,910 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:34:55,027 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:34:55,029 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3811]
2025-11-07 23:34:55,146 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1]
2025-11-07 23:34:55,147 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:34:55,149 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:6732]
2025-11-07 23:34:55,262 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:34:55,263 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:34:55,265 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-07 23:34:55,382 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:34:55,383 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:34:55,385 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:34:55,505 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:34:55,506 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:34:55,617 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:34:55,619 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:34:55,620 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:34:55,737 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:34:55,738 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:34:55,740 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:34:55,741 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:34:55,857 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:34:55,858 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:34:55,859 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:34:55,975 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:34:55,977 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:34:55,978 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:34:56,089 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:34:56,091 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:34:56,093 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:34:56,211 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:34:56,212 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:34:56,214 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:34:56,215 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:34:56,343 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:34:56,345 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:34:56,347 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:34:56,487 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:34:56,489 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:34:56,490 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:34:56,491 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:34:56,626 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:34:56,627 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:34:56,628 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:34:56,741 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:34:56,743 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:34:56,744 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-07 23:34:56,855 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:34:56,857 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:34:56,858 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:34:56,859 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:34:56,974 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:34:56,975 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:34:56,976 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:34:57,091 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:34:57,093 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:34:57,094 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-07 23:34:57,211 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:34:57,212 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:34:57,328 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:34:57,331 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:34:57,332 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-07 23:34:57,450 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:34:57,452 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:34:57,454 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:34:57,456 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:34:57,571 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:34:57,572 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:34:57,573 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:34:57,685 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:34:57,687 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:34:57,689 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:34:57,690 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:34:57,692 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:34:57,807 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:34:57,808 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:34:57,810 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:34:57,921 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1458]
2025-11-07 23:34:57,922 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2]
2025-11-07 23:34:57,923 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:34:57,923 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:34:58,042 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:34:58,043 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:34:58,045 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:34:58,182 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:34:58,183 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:34:58,186 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:34:58,308 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:34:58,309 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:34:58,311 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:34:58,441 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:34:58,442 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:34:58,444 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:34:58,575 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:34:58,577 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:34:58,578 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:34:58,615 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2297]
2025-11-07 23:34:58,615 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:34:58,616 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-07 23:34:58,770 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:34:58,771 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 23:34:58,772 | INFO | sqlalchemy.engine.Engine | [cached since 312s ago] ()
2025-11-07 23:34:58,781 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 23:34:58,782 | INFO | sqlalchemy.engine.Engine | [cached since 278.9s ago] (1,)
2025-11-07 23:34:58,858 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 23:34:58,859 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023222389350>}) about to wait for the following futures []
2025-11-07 23:34:58,859 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023222389350>}) done waiting for dependent futures
2025-11-07 23:34:58,860 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023222389350>}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'config': <boto3.s3.transfer.TransferConfig object at 0x00000232223549D0>, 'osutil': <s3transfer.utils.OSUtils object at 0x0000023222356F50>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002322234B690>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023222389350>}
2025-11-07 23:34:58,861 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/4d3eedb2218a42efae39a441d683cd31.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002322234B690> for transfer request: 0.
2025-11-07 23:34:58,861 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 23:34:58,862 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/4d3eedb2218a42efae39a441d683cd31.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-07 23:34:58,863 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 23:34:58,863 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/4d3eedb2218a42efae39a441d683cd31.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-07 23:34:58,865 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/4d3eedb2218a42efae39a441d683cd31.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x0000023222372D10>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/4d3eedb2218a42efae39a441d683cd31.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-07 23:34:59,631 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 23:35:09,304 | INFO | app.controllers.audio | Transcripción recibida session=08fd22f7-1621-4b61-9273-6b21d67e0d6c: QNH3002 transponder 0522. rodaremos a Via Alfa Charlie. al.de espera. pista 10. Alfa Noviembre India.
2025-11-07 23:35:09,306 | INFO | app.logs.transcript | student | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=121.700 | text=QNH3002 transponder 0522. rodaremos a Via Alfa Charlie. al.de espera. pista 10. Alfa Noviembre India.
2025-11-07 23:35:09,431 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:35:09,432 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:35:09,433 | INFO | sqlalchemy.engine.Engine | [cached since 278.9s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:35:09,448 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 23:35:09,844 | WARNING | app.services.audio_pipeline | Intent detector invalid JSON: "Invalid error type: 'json_decode_error'" raw=```json
{
    "intent": "ground_taxi_clearance",
    "confidence": 0.9,
    "frequencyGroup": "ground"
}
```
2025-11-07 23:35:09,946 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:35:09,947 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:35:09,948 | INFO | sqlalchemy.engine.Engine | [cached since 279.4s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:35:09,962 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-07 23:35:09,962 | INFO | sqlalchemy.engine.Engine | [cached since 278.6s ago] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (22243 characters truncated) ... nd": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 8, 5, 35, 9, 962009), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-07 23:35:09,974 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:35:09,999 | INFO | app.controllers.audio | Fase activa session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=ground_readback intent=ground_taxi_readback freq=ground
2025-11-07 23:35:10,002 | INFO | app.services.audio_pipeline | Prompts generados intent=ground_taxi_readback freq_group=ground
SYSTEM> Sigues como Pavas Superficie. Evalúas la colación y decides si pasa a Torre. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "score": number | null,
  "metadata": object
 }.
El campo "score" debe ser un número de 0 a 100 que evalúe la calidad de la transmisión del alumno para la fase actual, considerando: fraseología correcta, informa...
USER> Fase actual: Readback de autorización de rodaje
Intent esperado: ground_taxi_readback
Transcripción textual del alumno:
QNH3002 transponder 0522. rodaremos a Via Alfa Charlie. al.de espera. pista 10. Alfa Noviembre India.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: ground
- Fase ID: ground_readback

Checklist alumno:
- Repetir pista, QNH y ruta de rodaje.
- Mantener indicativo correcto y mención de contactar Torre.

Checklist controlador:
- Confirmar colación o pedir correc...
2025-11-07 23:35:11,769 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=ground_taxi_readback: {
  "intent": "ground_taxi_readback",
  "allowResponse": false,
  "controllerText": null,
  "feedback": "Te falta mencionar la velocidad del viento y el cambio de frecuencia a Torre. Repite la velocidad del viento y menciona que contactarás Torre 118.3 cuando estés listo para rodar.",
  "confidence": 0.7,
  "score": 60,
  "metadata": {
    "missingElements": [
      "Viento",
      "Contacto Torre 118.3"
    ],
    "nextPhase": null
  }
}
2025-11-07 23:35:11,877 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:35:11,878 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:35:11,880 | INFO | sqlalchemy.engine.Engine | [cached since 281.3s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:35:11,895 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-07 23:35:11,895 | INFO | sqlalchemy.engine.Engine | [cached since 280.5s ago] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (23246 characters truncated) ... nd": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 8, 5, 35, 11, 895258), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-07 23:35:11,908 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:35:11,925 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.phase_scores (id, training_session_id, user_id, phase_id, score) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::VARCHAR, $5::FLOAT) RETURNING ecowhiskey.phase_scores.created_at
2025-11-07 23:35:11,925 | INFO | sqlalchemy.engine.Engine | [cached since 163.9s ago] (UUID('c830510a-d4bb-42db-87db-44ee2e8db415'), UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'), 1, 'ground_readback', 60.0)
2025-11-07 23:35:11,934 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:35:11,962 | INFO | app.controllers.audio | Puntuación guardada session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=ground_readback score=60.00
2025-11-07 23:35:11,963 | INFO | app.logs.transcript | controller | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=121.700 | intent=ground_taxi_readback | phase=ground_readback | allow_response=False | text=
2025-11-07 23:36:08,480 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:36:08,481 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-07 23:36:08,482 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-07 23:36:08,482 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:36:08,484 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-07 23:36:08,485 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-07 23:36:08,486 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:36:08,487 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:36:08,488 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-07 23:36:08,489 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:36:08,490 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:36:08,491 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-07 23:36:08,491 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-07 23:36:08,492 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:36:08,492 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-07 23:36:08,493 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-07 23:36:08,493 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:36:08,494 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:36:08,494 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:269]
2025-11-07 23:36:08,495 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:36:08,496 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:36:08,497 | DEBUG | python_multipart.multipart | Calling on_header_field with data[311:330]
2025-11-07 23:36:08,497 | DEBUG | python_multipart.multipart | Calling on_header_value with data[332:386]
2025-11-07 23:36:08,498 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:36:08,498 | DEBUG | python_multipart.multipart | Calling on_header_field with data[388:400]
2025-11-07 23:36:08,498 | DEBUG | python_multipart.multipart | Calling on_header_value with data[402:412]
2025-11-07 23:36:08,499 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:36:08,499 | DEBUG | python_multipart.multipart | Calling on_header_field with data[414:428]
2025-11-07 23:36:08,500 | DEBUG | python_multipart.multipart | Calling on_header_value with data[430:436]
2025-11-07 23:36:08,501 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:36:08,503 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:36:08,504 | DEBUG | python_multipart.multipart | Calling on_part_data with data[440:4380]
2025-11-07 23:36:08,506 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:08,508 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:36:08,610 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:08,612 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:08,613 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:36:08,739 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:08,741 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:08,742 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:36:08,860 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:08,861 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:08,863 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:36:08,987 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:08,989 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:08,990 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:36:09,109 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:09,110 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:09,111 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:36:09,231 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:36:09,233 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:09,235 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:36:09,379 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:09,381 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:09,382 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:36:09,498 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:09,500 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:09,502 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:09,504 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:36:09,621 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:09,622 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:09,624 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:36:09,741 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:09,742 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:09,744 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:09,745 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:36:09,869 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:09,870 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:09,872 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:36:09,991 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:09,992 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:09,994 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:36:10,110 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:10,112 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:10,112 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:36:10,231 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:10,232 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:10,234 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:10,237 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:36:10,359 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:10,361 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:36:10,362 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:36:10,495 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:10,497 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:10,498 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:36:10,616 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:36:10,618 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:10,620 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:36:10,740 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:10,742 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:10,743 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:36:10,861 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:10,862 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:10,864 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:36:10,982 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:10,985 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:10,986 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:36:11,102 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:11,103 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:11,104 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:36:11,224 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:11,227 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:11,228 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:36:11,348 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:11,350 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:11,351 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:36:11,489 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:11,491 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:6732]
2025-11-07 23:36:11,628 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:11,629 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:11,631 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:11,632 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:36:11,755 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:36:11,839 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:36:11,876 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:11,878 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:11,878 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:36:11,999 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:12,001 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:12,003 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3811]
2025-11-07 23:36:12,123 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1]
2025-11-07 23:36:12,124 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:12,126 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:12,127 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:36:12,250 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:12,252 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:12,254 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:36:12,375 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:36:12,376 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:12,377 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:36:12,494 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:12,496 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:12,497 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:36:12,613 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:12,614 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:12,617 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:12,619 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:36:12,741 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:36:12,742 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:36:12,863 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:12,864 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:12,865 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:12,867 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:36:12,983 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:12,984 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:12,986 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:36:13,106 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:13,107 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:13,109 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:36:13,226 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:13,228 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:13,228 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:36:13,361 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:13,362 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:13,364 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:36:13,556 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:13,559 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-07 23:36:13,746 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:13,748 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:13,750 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:36:13,929 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:13,933 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:13,936 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:36:14,131 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:14,134 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:14,137 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:14,139 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:36:14,307 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:14,311 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:14,311 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:36:14,427 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:14,429 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:14,430 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:36:14,548 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:14,550 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:14,552 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:36:14,668 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:14,671 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:14,672 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-07 23:36:14,788 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:14,789 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:14,791 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:36:14,909 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:36:14,910 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:36:14,911 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:36:15,034 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:15,035 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:15,038 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-07 23:36:15,105 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:36:15,108 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3157]
2025-11-07 23:36:15,109 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:36:15,109 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-07 23:36:15,230 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:36:15,231 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 23:36:15,232 | INFO | sqlalchemy.engine.Engine | [cached since 388.5s ago] ()
2025-11-07 23:36:15,237 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 23:36:15,240 | INFO | sqlalchemy.engine.Engine | [cached since 355.4s ago] (1,)
2025-11-07 23:36:15,317 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 23:36:15,319 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023221EAEA10>}) about to wait for the following futures []
2025-11-07 23:36:15,320 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023221EAEA10>}) done waiting for dependent futures
2025-11-07 23:36:15,321 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023221EAEA10>}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'config': <boto3.s3.transfer.TransferConfig object at 0x00000232223B3C10>, 'osutil': <s3transfer.utils.OSUtils object at 0x00000232223B3B50>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x0000023221ED8590>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023221EAEA10>}
2025-11-07 23:36:15,321 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/2fc5b68d42d7448e991e5724a3bc8dfb.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x0000023221ED8590> for transfer request: 0.
2025-11-07 23:36:15,323 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 23:36:15,324 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/2fc5b68d42d7448e991e5724a3bc8dfb.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-07 23:36:15,324 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 23:36:15,326 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/2fc5b68d42d7448e991e5724a3bc8dfb.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-07 23:36:15,327 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/2fc5b68d42d7448e991e5724a3bc8dfb.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x0000023221DD9C10>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/2fc5b68d42d7448e991e5724a3bc8dfb.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-07 23:36:16,174 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 23:36:25,907 | INFO | app.controllers.audio | Transcripción recibida session=08fd22f7-1621-4b61-9273-6b21d67e0d6c: QNH3002. transponder 0522 rodaremos había Alfa. Charlie. en pista 10. contactaremos a Torrent 118 cuando estemos listos para despegar. viento ocho nudos 80 grados. listo. Alfa Noviembre India.
2025-11-07 23:36:25,908 | INFO | app.logs.transcript | student | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=121.700 | text=QNH3002. transponder 0522 rodaremos había Alfa. Charlie. en pista 10. contactaremos a Torrent 118 cuando estemos listos para despegar. viento ocho nudos 80 grados. listo. Alfa Noviembre India.
2025-11-07 23:36:26,027 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:36:26,027 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:36:26,029 | INFO | sqlalchemy.engine.Engine | [cached since 355.5s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:36:26,041 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 23:36:26,465 | WARNING | app.services.audio_pipeline | Intent detector invalid JSON: "Invalid error type: 'json_decode_error'" raw=```json
{
  "intent": "ground_taxi_clearance",
  "confidence": 0.9,
  "frequencyGroup": "ground"
}
```
2025-11-07 23:36:26,588 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:36:26,589 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:36:26,591 | INFO | sqlalchemy.engine.Engine | [cached since 356s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:36:26,611 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-07 23:36:26,612 | INFO | sqlalchemy.engine.Engine | [cached since 355.3s ago] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (23663 characters truncated) ... nd": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 8, 5, 36, 26, 610342), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-07 23:36:26,630 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:36:26,665 | INFO | app.controllers.audio | Fase activa session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=ground_readback intent=ground_taxi_readback freq=ground
2025-11-07 23:36:26,669 | INFO | app.services.audio_pipeline | Prompts generados intent=ground_taxi_readback freq_group=ground
SYSTEM> Sigues como Pavas Superficie. Evalúas la colación y decides si pasa a Torre. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "score": number | null,
  "metadata": object
 }.
El campo "score" debe ser un número de 0 a 100 que evalúe la calidad de la transmisión del alumno para la fase actual, considerando: fraseología correcta, informa...
USER> Fase actual: Readback de autorización de rodaje
Intent esperado: ground_taxi_readback
Transcripción textual del alumno:
QNH3002. transponder 0522 rodaremos había Alfa. Charlie. en pista 10. contactaremos a Torrent 118 cuando estemos listos para despegar. viento ocho nudos 80 grados. listo. Alfa Noviembre India.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: ground
- Fase ID: ground_readback

Checklist alumno:
- Repetir pista, QNH y ruta de rodaje.
- Mantener indicativo correct...
2025-11-07 23:36:28,486 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=ground_taxi_readback: {
  "intent": "ground_taxi_readback",
  "allowResponse": true,
  "controllerText": "Colación correcta, Alfa Noviembre India. Puedes pasar a Torre 118.3 cuando estés listo para rodar.",
  "feedback": "Repetir pista, QNH y ruta de rodaje es correcto. Añade 'Torrent' como 'Torre' en la frecuencia. El readback fue preciso en todos los demás aspectos.",
  "confidence": 0.95,
  "score": 95,
  "metadata": {
    "nextPhase": "tower_hold_short"
  }
}
2025-11-07 23:36:28,488 | INFO | app.controllers.audio | Transición automática de fase session=08fd22f7-1621-4b61-9273-6b21d67e0d6c de=ground_readback a=tower_hold_short
2025-11-07 23:36:28,606 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:36:28,607 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:36:28,608 | INFO | sqlalchemy.engine.Engine | [cached since 358.1s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:36:28,623 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-07 23:36:28,624 | INFO | sqlalchemy.engine.Engine | [cached since 357.3s ago] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (24717 characters truncated) ... und": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "tower"}', datetime.datetime(2025, 11, 8, 5, 36, 28, 621665), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-07 23:36:28,637 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:36:28,667 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.phase_scores (id, training_session_id, user_id, phase_id, score) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::VARCHAR, $5::FLOAT) RETURNING ecowhiskey.phase_scores.created_at
2025-11-07 23:36:28,669 | INFO | sqlalchemy.engine.Engine | [cached since 240.7s ago] (UUID('e8311fc9-e1fa-4ce8-a553-8d2585091a1e'), UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'), 1, 'tower_hold_short', 95.0)
2025-11-07 23:36:28,678 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:36:28,705 | INFO | app.controllers.audio | Puntuación guardada session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=tower_hold_short score=95.00
2025-11-07 23:36:28,706 | INFO | app.logs.transcript | controller | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=121.700 | intent=ground_taxi_readback | phase=tower_hold_short | allow_response=True | text=Colación correcta, Alfa Noviembre India. Puedes pasar a Torre 118.3 cuando estés listo para rodar.
2025-11-07 23:38:02,432 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:38:02,432 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-07 23:38:02,434 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-07 23:38:02,435 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:38:02,436 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-07 23:38:02,436 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-07 23:38:02,437 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:38:02,438 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:38:02,439 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-07 23:38:02,440 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:38:02,440 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:38:02,442 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-07 23:38:02,443 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-07 23:38:02,444 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:38:02,444 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-07 23:38:02,445 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-07 23:38:02,445 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:38:02,446 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:38:02,447 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:269]
2025-11-07 23:38:02,447 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:38:02,448 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:38:02,449 | DEBUG | python_multipart.multipart | Calling on_header_field with data[311:330]
2025-11-07 23:38:02,450 | DEBUG | python_multipart.multipart | Calling on_header_value with data[332:386]
2025-11-07 23:38:02,451 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:38:02,451 | DEBUG | python_multipart.multipart | Calling on_header_field with data[388:400]
2025-11-07 23:38:02,452 | DEBUG | python_multipart.multipart | Calling on_header_value with data[402:412]
2025-11-07 23:38:02,453 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:38:02,454 | DEBUG | python_multipart.multipart | Calling on_header_field with data[414:428]
2025-11-07 23:38:02,455 | DEBUG | python_multipart.multipart | Calling on_header_value with data[430:436]
2025-11-07 23:38:02,456 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:38:02,457 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:38:02,458 | DEBUG | python_multipart.multipart | Calling on_part_data with data[440:4380]
2025-11-07 23:38:02,460 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:38:02,559 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:38:02,561 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:38:02,562 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:38:02,679 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:38:02,681 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:38:02,683 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:38:02,797 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:38:02,799 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:38:02,802 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:38:02,921 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:38:02,921 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:38:02,922 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:38:03,043 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:38:03,044 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:38:03,045 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:38:03,162 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:38:03,164 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:38:03,164 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:38:03,283 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:38:03,286 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:38:03,289 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:38:03,290 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:38:03,406 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:38:03,407 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:38:03,409 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:38:03,545 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:38:03,548 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:38:03,552 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:38:03,739 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:38:03,743 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:38:03,747 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:38:03,929 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:38:03,932 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:38:03,934 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:38:04,113 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:38:04,115 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:38:04,118 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:38:04,280 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:38:04,282 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:38:04,398 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:38:04,400 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:38:04,403 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:38:04,404 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:38:04,515 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:38:04,516 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:38:04,518 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:38:04,520 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:38:04,632 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:38:04,633 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:38:04,635 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3401]
2025-11-07 23:38:04,636 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:38:04,637 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-07 23:38:04,738 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:38:04,739 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 23:38:04,740 | INFO | sqlalchemy.engine.Engine | [cached since 498s ago] ()
2025-11-07 23:38:04,745 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 23:38:04,746 | INFO | sqlalchemy.engine.Engine | [cached since 464.9s ago] (1,)
2025-11-07 23:38:04,818 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 23:38:04,820 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023221F01310>}) about to wait for the following futures []
2025-11-07 23:38:04,821 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023221F01310>}) done waiting for dependent futures
2025-11-07 23:38:04,821 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023221F01310>}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'config': <boto3.s3.transfer.TransferConfig object at 0x00000232223AAA90>, 'osutil': <s3transfer.utils.OSUtils object at 0x00000232222F3750>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x0000023222330390>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023221F01310>}
2025-11-07 23:38:04,823 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/37af531cf4b1440a9d95708ff224fd11.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x0000023222330390> for transfer request: 0.
2025-11-07 23:38:04,823 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 23:38:04,825 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/37af531cf4b1440a9d95708ff224fd11.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-07 23:38:04,825 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 23:38:04,826 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/37af531cf4b1440a9d95708ff224fd11.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-07 23:38:04,826 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/37af531cf4b1440a9d95708ff224fd11.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002322233FFD0>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/37af531cf4b1440a9d95708ff224fd11.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-07 23:38:05,604 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 23:38:15,239 | INFO | app.controllers.audio | Transcripción recibida session=08fd22f7-1621-4b61-9273-6b21d67e0d6c: P Story Alfa Noviembre India. listo para listo en.de espera pista 10.
2025-11-07 23:38:15,240 | INFO | app.logs.transcript | student | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=118.300 | text=P Story Alfa Noviembre India. listo para listo en.de espera pista 10.
2025-11-07 23:38:15,351 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:38:15,352 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:38:15,353 | INFO | sqlalchemy.engine.Engine | [cached since 464.8s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:38:15,364 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 23:38:15,791 | WARNING | app.services.audio_pipeline | Intent detector invalid JSON: "Invalid error type: 'json_decode_error'" raw=```json
{
    "intent": "ground_taxi_clearance",
    "confidence": 0.85,
    "frequencyGroup": "ground"
}
```
2025-11-07 23:38:15,891 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:38:15,892 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:38:15,894 | INFO | sqlalchemy.engine.Engine | [cached since 465.3s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:38:15,904 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-07 23:38:15,906 | INFO | sqlalchemy.engine.Engine | [cached since 464.5s ago] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (25005 characters truncated) ... und": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "tower"}', datetime.datetime(2025, 11, 8, 5, 38, 15, 904497), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-07 23:38:15,918 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:38:15,944 | INFO | app.controllers.audio | Fase activa session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=tower_hold_short intent=tower_hold_short freq=tower
2025-11-07 23:38:15,947 | INFO | app.services.audio_pipeline | Prompts generados intent=tower_hold_short freq_group=tower
SYSTEM> Eres Pavas Torre (118.3). El tránsito solicita despegue pero tienes tráfico en final. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "score": number | null,
  "metadata": object
 }.
El campo "score" debe ser un número de 0 a 100 que evalúe la calidad de la transmisión del alumno para la fase actual, considerando: fraseología correcta...
USER> Fase actual: Contacto inicial con Torre (mantener fuera)
Intent esperado: tower_hold_short
Transcripción textual del alumno:
P Story Alfa Noviembre India. listo para listo en.de espera pista 10.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: tower
- Fase ID: tower_hold_short

Checklist alumno:
- Cambiar destinatario a Pavas Torre.
- Indicar estar listo en punto de espera pista 10.

Checklist controlador:
- Instruir mantener fuera de pista por tránsito.
- Mantener tono breve y ...
2025-11-07 23:38:17,789 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=tower_hold_short: ```json
{
  "intent": "tower_hold_short",
  "allowResponse": true,
  "controllerText": "Alfa Noviembre India, Pavas Torre, mantén fuera de pista 10 por tráfico en final. Aguarda instrucciones.",
  "feedback": "Buen intento, pero recuerda mantener fuera de la pista mientras haya tráfico en final. Vuelve a intentar.",
  "confidence": 0.85,
  "score": 60,
  "metadata": {
    "missingElements": [
      "mencionar mantener fuera de pista"
    ],
    "nextPhase": "tower_hold_short"
  }
}
```
2025-11-07 23:38:17,791 | ERROR | app.controllers.audio | Fallo en pipeline LLM
Traceback (most recent call last):
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\services\response_contract.py", line 39, in from_json
    data = json.loads(payload)
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\json\decoder.py", line 355, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\controllers\audio.py", line 189, in analyze_audio
    llm_outcome = await call_conversation_llm(request)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\pipelines\audio\llm.py", line 39, in call_conversation_llm
    structured = StructuredLlmResponse.from_json(raw_response)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\services\response_contract.py", line 41, in from_json
    raise ValidationError.from_exception_data(
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: "Invalid error type: 'json_decode_error'"
2025-11-07 23:38:17,794 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 23:38:44,419 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:38:44,420 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-07 23:38:44,420 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-07 23:38:44,422 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:38:44,423 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-07 23:38:44,423 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-07 23:38:44,424 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:38:44,425 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:38:44,426 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-07 23:38:44,427 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:38:44,428 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:38:44,429 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-07 23:38:44,429 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-07 23:38:44,429 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:38:44,430 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-07 23:38:44,430 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-07 23:38:44,431 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:38:44,432 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:38:44,432 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:269]
2025-11-07 23:38:44,433 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:38:44,434 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:38:44,435 | DEBUG | python_multipart.multipart | Calling on_header_field with data[311:330]
2025-11-07 23:38:44,437 | DEBUG | python_multipart.multipart | Calling on_header_value with data[332:386]
2025-11-07 23:38:44,438 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:38:44,438 | DEBUG | python_multipart.multipart | Calling on_header_field with data[388:400]
2025-11-07 23:38:44,439 | DEBUG | python_multipart.multipart | Calling on_header_value with data[402:412]
2025-11-07 23:38:44,441 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:38:44,442 | DEBUG | python_multipart.multipart | Calling on_header_field with data[414:428]
2025-11-07 23:38:44,443 | DEBUG | python_multipart.multipart | Calling on_header_value with data[430:436]
2025-11-07 23:38:44,444 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:38:44,445 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:38:44,445 | DEBUG | python_multipart.multipart | Calling on_part_data with data[440:2920]
2025-11-07 23:38:44,446 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:38:44,448 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:38:44,567 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:38:44,569 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:38:44,570 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:38:44,573 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:38:44,692 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:38:44,695 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:38:44,696 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:38:44,807 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:38:44,809 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:38:44,921 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:38:44,923 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5840]
2025-11-07 23:38:44,925 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:38:45,042 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:38:45,043 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:38:45,044 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:38:45,152 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:38:45,155 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:38:45,158 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:38:45,159 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:38:45,269 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:38:45,271 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:38:45,273 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:38:45,390 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:38:45,392 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:38:45,392 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:38:45,506 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:38:45,508 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:38:45,624 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:38:45,625 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:38:45,626 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:38:45,741 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:38:45,742 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:38:45,743 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:38:45,859 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:38:45,861 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:38:45,862 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:38:45,973 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:38:45,976 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:38:45,977 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:38:46,094 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:38:46,095 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:38:46,097 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:38:46,097 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:38:46,209 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:38:46,210 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:38:46,211 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:38:46,319 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:38:46,322 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:38:46,324 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3401]
2025-11-07 23:38:46,324 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:38:46,326 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-07 23:38:46,429 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:38:46,430 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 23:38:46,430 | INFO | sqlalchemy.engine.Engine | [cached since 539.7s ago] ()
2025-11-07 23:38:46,436 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 23:38:46,437 | INFO | sqlalchemy.engine.Engine | [cached since 506.6s ago] (1,)
2025-11-07 23:38:46,504 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 23:38:46,507 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023221F01310>}) about to wait for the following futures []
2025-11-07 23:38:46,507 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023221F01310>}) done waiting for dependent futures
2025-11-07 23:38:46,508 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023221F01310>}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002322233FB90>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002322233D750>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002322230C910>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023221F01310>}
2025-11-07 23:38:46,509 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/082ca100a48b4c54845fbff5b13ed3d1.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002322230C910> for transfer request: 0.
2025-11-07 23:38:46,509 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 23:38:46,510 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/082ca100a48b4c54845fbff5b13ed3d1.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-07 23:38:46,510 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 23:38:46,510 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/082ca100a48b4c54845fbff5b13ed3d1.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-07 23:38:46,512 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/082ca100a48b4c54845fbff5b13ed3d1.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x00000232222FE090>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/082ca100a48b4c54845fbff5b13ed3d1.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-07 23:38:47,188 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 23:38:56,805 | INFO | app.controllers.audio | Transcripción recibida session=08fd22f7-1621-4b61-9273-6b21d67e0d6c: P Story Alfa Noviembre India. listo para listo en.de espera pista 10.
2025-11-07 23:38:56,806 | INFO | app.logs.transcript | student | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=118.300 | text=P Story Alfa Noviembre India. listo para listo en.de espera pista 10.
2025-11-07 23:38:56,910 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:38:56,911 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:38:56,912 | INFO | sqlalchemy.engine.Engine | [cached since 506.4s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:38:56,923 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 23:38:57,319 | WARNING | app.services.audio_pipeline | Intent detector invalid JSON: "Invalid error type: 'json_decode_error'" raw=```json
{
  "intent": "ground_taxi_clearance",
  "confidence": 0.85,
  "frequencyGroup": "ground"
}
```
2025-11-07 23:38:57,417 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:38:57,418 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:38:57,419 | INFO | sqlalchemy.engine.Engine | [cached since 506.9s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:38:57,430 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-07 23:38:57,432 | INFO | sqlalchemy.engine.Engine | [cached since 506.1s ago] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (25293 characters truncated) ... und": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "tower"}', datetime.datetime(2025, 11, 8, 5, 38, 57, 430386), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-07 23:38:57,446 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:38:57,469 | INFO | app.controllers.audio | Fase activa session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=tower_hold_short intent=tower_hold_short freq=tower
2025-11-07 23:38:57,472 | INFO | app.services.audio_pipeline | Prompts generados intent=tower_hold_short freq_group=tower
SYSTEM> Eres Pavas Torre (118.3). El tránsito solicita despegue pero tienes tráfico en final. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "score": number | null,
  "metadata": object
 }.
El campo "score" debe ser un número de 0 a 100 que evalúe la calidad de la transmisión del alumno para la fase actual, considerando: fraseología correcta...
USER> Fase actual: Contacto inicial con Torre (mantener fuera)
Intent esperado: tower_hold_short
Transcripción textual del alumno:
P Story Alfa Noviembre India. listo para listo en.de espera pista 10.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: tower
- Fase ID: tower_hold_short

Checklist alumno:
- Cambiar destinatario a Pavas Torre.
- Indicar estar listo en punto de espera pista 10.

Checklist controlador:
- Instruir mantener fuera de pista por tránsito.
- Mantener tono breve y ...
2025-11-07 23:38:58,859 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=tower_hold_short: {
  "intent": "tower_hold_short",
  "allowResponse": true,
  "controllerText": "Alfa Noviembre India, Pavas Torre, mantenga fuera pista 10 por tránsito en final.",
  "feedback": "Transmisión correcta. Recuerda mantener un tono breve y claro al comunicar instrucciones. Excelente manejo de la frecuencia y del indicativo.",
  "confidence": 0.95,
  "score": 95,
  "metadata": {
    "missingElements": null,
    "nextPhase": "tower_line_up"
  }
}
2025-11-07 23:38:58,860 | INFO | app.controllers.audio | Transición automática de fase session=08fd22f7-1621-4b61-9273-6b21d67e0d6c de=tower_hold_short a=tower_line_up
2025-11-07 23:38:58,982 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:38:58,984 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:38:58,985 | INFO | sqlalchemy.engine.Engine | [cached since 508.4s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:38:58,999 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-07 23:38:59,000 | INFO | sqlalchemy.engine.Engine | [cached since 507.6s ago] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (26307 characters truncated) ... und": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "tower"}', datetime.datetime(2025, 11, 8, 5, 38, 58, 998391), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-07 23:38:59,016 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:38:59,033 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.phase_scores (id, training_session_id, user_id, phase_id, score) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::VARCHAR, $5::FLOAT) RETURNING ecowhiskey.phase_scores.created_at
2025-11-07 23:38:59,034 | INFO | sqlalchemy.engine.Engine | [cached since 391.1s ago] (UUID('177b60f2-7acb-4362-a037-2569c8799104'), UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'), 1, 'tower_line_up', 95.0)
2025-11-07 23:38:59,043 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:38:59,069 | INFO | app.controllers.audio | Puntuación guardada session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=tower_line_up score=95.00
2025-11-07 23:38:59,070 | INFO | app.logs.transcript | controller | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=118.300 | intent=tower_hold_short | phase=tower_line_up | allow_response=True | text=Alfa Noviembre India, Pavas Torre, mantenga fuera pista 10 por tránsito en final.
2025-11-07 23:42:05,105 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:42:05,106 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-07 23:42:05,107 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-07 23:42:05,107 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:42:05,108 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-07 23:42:05,110 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-07 23:42:05,110 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:42:05,112 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:42:05,112 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-07 23:42:05,113 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:42:05,114 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:42:05,114 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-07 23:42:05,114 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-07 23:42:05,115 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:42:05,116 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-07 23:42:05,116 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-07 23:42:05,117 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:42:05,118 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:42:05,119 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:269]
2025-11-07 23:42:05,120 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:42:05,121 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:42:05,121 | DEBUG | python_multipart.multipart | Calling on_header_field with data[311:330]
2025-11-07 23:42:05,122 | DEBUG | python_multipart.multipart | Calling on_header_value with data[332:386]
2025-11-07 23:42:05,122 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:42:05,123 | DEBUG | python_multipart.multipart | Calling on_header_field with data[388:400]
2025-11-07 23:42:05,124 | DEBUG | python_multipart.multipart | Calling on_header_value with data[402:412]
2025-11-07 23:42:05,125 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:42:05,126 | DEBUG | python_multipart.multipart | Calling on_header_field with data[414:428]
2025-11-07 23:42:05,126 | DEBUG | python_multipart.multipart | Calling on_header_value with data[430:435]
2025-11-07 23:42:05,127 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:42:05,128 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:42:05,128 | DEBUG | python_multipart.multipart | Calling on_part_data with data[439:2920]
2025-11-07 23:42:05,129 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-07 23:42:05,225 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:42:05,228 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:42:05,229 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:42:05,230 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:42:05,347 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:42:05,348 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:42:05,351 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:42:05,473 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:42:05,475 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:42:05,475 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:42:05,587 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:42:05,589 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:42:05,591 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:42:05,706 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:42:05,708 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:42:05,817 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:42:05,819 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:42:05,821 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-07 23:42:05,935 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:42:05,937 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:42:05,939 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:42:05,940 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:42:06,035 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:42:06,036 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:42:06,038 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2916]
2025-11-07 23:42:06,039 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:42:06,039 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-07 23:42:06,140 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:42:06,142 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 23:42:06,143 | INFO | sqlalchemy.engine.Engine | [cached since 739.4s ago] ()
2025-11-07 23:42:06,148 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 23:42:06,150 | INFO | sqlalchemy.engine.Engine | [cached since 706.3s ago] (1,)
2025-11-07 23:42:06,217 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 23:42:06,218 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023221F01310>}) about to wait for the following futures []
2025-11-07 23:42:06,220 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023221F01310>}) done waiting for dependent futures
2025-11-07 23:42:06,220 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023221F01310>}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'config': <boto3.s3.transfer.TransferConfig object at 0x00000232223CF2D0>, 'osutil': <s3transfer.utils.OSUtils object at 0x00000232223CE1D0>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x00000232223CD590>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023221F01310>}
2025-11-07 23:42:06,221 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/76f5203ac6ca477782c1021bdceb7e81.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x00000232223CD590> for transfer request: 0.
2025-11-07 23:42:06,221 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 23:42:06,223 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/76f5203ac6ca477782c1021bdceb7e81.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-07 23:42:06,223 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 23:42:06,223 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/76f5203ac6ca477782c1021bdceb7e81.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-07 23:42:06,224 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/76f5203ac6ca477782c1021bdceb7e81.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x00000232222FC850>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/76f5203ac6ca477782c1021bdceb7e81.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-07 23:42:06,857 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 23:42:16,567 | INFO | app.controllers.audio | Transcripción recibida session=08fd22f7-1621-4b61-9273-6b21d67e0d6c: Pavastore Alfa Noviembre India. en espera.
2025-11-07 23:42:16,568 | INFO | app.logs.transcript | student | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=118.300 | text=Pavastore Alfa Noviembre India. en espera.
2025-11-07 23:42:16,664 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:42:16,666 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:42:16,667 | INFO | sqlalchemy.engine.Engine | [cached since 706.1s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:42:16,678 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 23:42:17,147 | WARNING | app.services.audio_pipeline | Intent detector invalid JSON: "Invalid error type: 'json_decode_error'" raw=```json
{
  "intent": "ground_holding_clearance",
  "confidence": 0.85,
  "frequencyGroup": "ground"
}
```
2025-11-07 23:42:17,258 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:42:17,259 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:42:17,259 | INFO | sqlalchemy.engine.Engine | [cached since 706.7s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:42:17,277 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-07 23:42:17,278 | INFO | sqlalchemy.engine.Engine | [cached since 705.9s ago] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (26568 characters truncated) ... und": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "tower"}', datetime.datetime(2025, 11, 8, 5, 42, 17, 276535), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-07 23:42:17,291 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:42:17,317 | INFO | app.controllers.audio | Fase activa session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=tower_line_up intent=tower_line_up_wait freq=tower
2025-11-07 23:42:17,322 | INFO | app.services.audio_pipeline | Prompts generados intent=tower_line_up_wait freq_group=tower
SYSTEM> Sigues en Pavas Torre. Una vez libre el tránsito, instruyes a la aeronave a posicionarse. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "score": number | null,
  "metadata": object
 }.
El campo "score" debe ser un número de 0 a 100 que evalúe la calidad de la transmisión del alumno para la fase actual, considerando: fraseología corr...
USER> Fase actual: Autorización a posición y mantener
Intent esperado: tower_line_up_wait
Transcripción textual del alumno:
Pavastore Alfa Noviembre India. en espera.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: tower
- Fase ID: tower_line_up

Checklist alumno:
- Reconocer la instrucción anterior y estar listo.

Checklist controlador:
- Autorizar 'ruede a posición y mantenga pista 10'.
- Mantener fraseología local (pista 'uno cero').

Cuándo responder:
- allowResponse=true con la ...
2025-11-07 23:42:19,239 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=tower_line_up_wait: {
  "intent": "tower_line_up_wait",
  "allowResponse": true,
  "controllerText": "Alfa Noviembre India, Pavas Torre, ruede a posición y mantenga pista uno cero.",
  "feedback": "Buena transmisión, pero asegúrate de incluir el número de pista en formato numérico (10) y el comando de posición completo (ruede a posición). Recuerda también mantener un tono breve y claro.",
  "confidence": 0.95,
  "score": 90,
  "metadata": {
    "missingElements": [
      "número de pista en formato numérico",
  ...
2025-11-07 23:42:19,240 | INFO | app.controllers.audio | Transición automática de fase session=08fd22f7-1621-4b61-9273-6b21d67e0d6c de=tower_line_up a=tower_takeoff_clearance
2025-11-07 23:42:19,337 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:42:19,338 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:42:19,338 | INFO | sqlalchemy.engine.Engine | [cached since 708.8s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:42:19,351 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-07 23:42:19,352 | INFO | sqlalchemy.engine.Engine | [cached since 708s ago] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (27903 characters truncated) ... und": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "tower"}', datetime.datetime(2025, 11, 8, 5, 42, 19, 351261), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-07 23:42:19,362 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:42:19,375 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.phase_scores (id, training_session_id, user_id, phase_id, score) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::VARCHAR, $5::FLOAT) RETURNING ecowhiskey.phase_scores.created_at
2025-11-07 23:42:19,376 | INFO | sqlalchemy.engine.Engine | [cached since 591.4s ago] (UUID('73cacc94-07b3-4a62-8d82-dca15ce1bca9'), UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'), 1, 'tower_takeoff_clearance', 90.0)
2025-11-07 23:42:19,383 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:42:19,401 | INFO | app.controllers.audio | Puntuación guardada session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=tower_takeoff_clearance score=90.00
2025-11-07 23:42:19,402 | INFO | app.logs.transcript | controller | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=118.300 | intent=tower_line_up_wait | phase=tower_takeoff_clearance | allow_response=True | text=Alfa Noviembre India, Pavas Torre, ruede a posición y mantenga pista uno cero.
2025-11-07 23:43:08,673 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:43:08,674 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-07 23:43:08,674 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-07 23:43:08,675 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:43:08,676 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-07 23:43:08,677 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-07 23:43:08,678 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:43:08,678 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:43:08,678 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-07 23:43:08,678 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:43:08,679 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:43:08,680 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-07 23:43:08,680 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-07 23:43:08,682 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:43:08,683 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-07 23:43:08,683 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-07 23:43:08,684 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:43:08,684 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:43:08,685 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:269]
2025-11-07 23:43:08,686 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:43:08,687 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:43:08,689 | DEBUG | python_multipart.multipart | Calling on_header_field with data[311:330]
2025-11-07 23:43:08,689 | DEBUG | python_multipart.multipart | Calling on_header_value with data[332:386]
2025-11-07 23:43:08,690 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:43:08,691 | DEBUG | python_multipart.multipart | Calling on_header_field with data[388:400]
2025-11-07 23:43:08,691 | DEBUG | python_multipart.multipart | Calling on_header_value with data[402:412]
2025-11-07 23:43:08,691 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:43:08,693 | DEBUG | python_multipart.multipart | Calling on_header_field with data[414:428]
2025-11-07 23:43:08,693 | DEBUG | python_multipart.multipart | Calling on_header_value with data[430:436]
2025-11-07 23:43:08,693 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:43:08,694 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:43:08,694 | DEBUG | python_multipart.multipart | Calling on_part_data with data[440:1460]
2025-11-07 23:43:08,696 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:43:08,697 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-07 23:43:08,800 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:43:08,802 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:43:08,916 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:43:08,917 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:43:08,919 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:43:09,040 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:43:09,042 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:43:09,045 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:43:09,162 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:43:09,164 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:43:09,165 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:43:09,285 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:43:09,287 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:43:09,289 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:43:09,290 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:43:09,293 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:43:09,409 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:43:09,410 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:43:09,412 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:43:09,532 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:43:09,534 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:43:09,537 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:43:09,656 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:43:09,657 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:43:09,659 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:43:09,660 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:43:09,777 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:43:09,779 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:43:09,780 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:43:09,906 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:43:09,907 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:43:09,909 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:43:10,023 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:43:10,024 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:43:10,025 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:43:10,027 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:43:10,108 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:43:10,109 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1346]
2025-11-07 23:43:10,110 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:43:10,110 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-07 23:43:10,209 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:43:10,210 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 23:43:10,211 | INFO | sqlalchemy.engine.Engine | [cached since 803.4s ago] ()
2025-11-07 23:43:10,216 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 23:43:10,217 | INFO | sqlalchemy.engine.Engine | [cached since 770.4s ago] (1,)
2025-11-07 23:43:10,289 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 23:43:10,290 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000232223C0710>}) about to wait for the following futures []
2025-11-07 23:43:10,290 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000232223C0710>}) done waiting for dependent futures
2025-11-07 23:43:10,291 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000232223C0710>}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'config': <boto3.s3.transfer.TransferConfig object at 0x0000023221F25FD0>, 'osutil': <s3transfer.utils.OSUtils object at 0x0000023221F25D50>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002322237E890>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000232223C0710>}
2025-11-07 23:43:10,291 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/8087d2d40af248529c112593bde3f360.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002322237E890> for transfer request: 0.
2025-11-07 23:43:10,292 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 23:43:10,293 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/8087d2d40af248529c112593bde3f360.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-07 23:43:10,293 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 23:43:10,294 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/8087d2d40af248529c112593bde3f360.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-07 23:43:10,295 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/8087d2d40af248529c112593bde3f360.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x00000232223C3610>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/8087d2d40af248529c112593bde3f360.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-07 23:43:11,027 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 23:43:20,667 | INFO | app.controllers.audio | Transcripción recibida session=08fd22f7-1621-4b61-9273-6b21d67e0d6c: P Tre Alfa Noviembre India. listo en.de espera pista 10.
2025-11-07 23:43:20,667 | INFO | app.logs.transcript | student | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=118.300 | text=P Tre Alfa Noviembre India. listo en.de espera pista 10.
2025-11-07 23:43:20,768 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:43:20,770 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:43:20,771 | INFO | sqlalchemy.engine.Engine | [cached since 770.2s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:43:20,782 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 23:43:21,242 | WARNING | app.services.audio_pipeline | Intent detector invalid JSON: "Invalid error type: 'json_decode_error'" raw=```json
{
  "intent": "ground_taxi_clearance",
  "confidence": 0.9,
  "frequencyGroup": "ground"
}
```
2025-11-07 23:43:21,354 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:43:21,355 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:43:21,356 | INFO | sqlalchemy.engine.Engine | [cached since 770.8s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:43:21,370 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-07 23:43:21,371 | INFO | sqlalchemy.engine.Engine | [cached since 770s ago] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (28178 characters truncated) ... und": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "tower"}', datetime.datetime(2025, 11, 8, 5, 43, 21, 368918), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-07 23:43:21,385 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:43:21,417 | INFO | app.controllers.audio | Fase activa session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=tower_takeoff_clearance intent=tower_takeoff_clearance freq=tower
2025-11-07 23:43:21,421 | INFO | app.services.audio_pipeline | Prompts generados intent=tower_takeoff_clearance freq_group=tower
SYSTEM> Como Torre, clearance final de despegue incluyendo viento y restricciones. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "score": number | null,
  "metadata": object
 }.
El campo "score" debe ser un número de 0 a 100 que evalúe la calidad de la transmisión del alumno para la fase actual, considerando: fraseología correcta, informaci...
USER> Fase actual: Autorización de despegue
Intent esperado: tower_takeoff_clearance
Transcripción textual del alumno:
P Tre Alfa Noviembre India. listo en.de espera pista 10.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: tower
- Fase ID: tower_takeoff_clearance

Checklist alumno:
- Solicitar autorización con fraseología adecuada.
- Escuchar instrucciones de rumbo y reporte.

Checklist controlador:
- Incluir viento, autorización de despegue, instrucción de mantener rumbo y reportar...
2025-11-07 23:43:23,584 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=tower_takeoff_clearance: {
  "intent": "tower_takeoff_clearance",
  "allowResponse": true,
  "controllerText": "Tre Alfa Noviembre India, Pavas Torre, despegue autorizado pista 10, viento 80 grados a 8 nudos, mantenga rumbo de pista, reporte 5000 pies, COCO Aproximación 120.5 al contacto.",
  "feedback": "Fraseología correcta en general, pero recuerda indicar completamente el número de pista en formato numérico (10) y el comando de despegue con precisión.",
  "confidence": 0.95,
  "score": 85,
  "metadata": {
    "mi...
2025-11-07 23:43:23,585 | INFO | app.controllers.audio | Transición automática de fase session=08fd22f7-1621-4b61-9273-6b21d67e0d6c de=tower_takeoff_clearance a=tower_initial_climb
2025-11-07 23:43:23,687 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:43:23,688 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:43:23,689 | INFO | sqlalchemy.engine.Engine | [cached since 773.1s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:43:23,702 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-07 23:43:23,702 | INFO | sqlalchemy.engine.Engine | [cached since 772.3s ago] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (29587 characters truncated) ... und": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "tower"}', datetime.datetime(2025, 11, 8, 5, 43, 23, 701485), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-07 23:43:23,715 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:43:23,742 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.phase_scores (id, training_session_id, user_id, phase_id, score) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::VARCHAR, $5::FLOAT) RETURNING ecowhiskey.phase_scores.created_at
2025-11-07 23:43:23,743 | INFO | sqlalchemy.engine.Engine | [cached since 655.8s ago] (UUID('b905ab2b-8e15-40d5-b3c7-cb7bd4d05a94'), UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'), 1, 'tower_initial_climb', 85.0)
2025-11-07 23:43:23,752 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:43:23,789 | INFO | app.controllers.audio | Puntuación guardada session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=tower_initial_climb score=85.00
2025-11-07 23:43:23,790 | INFO | app.logs.transcript | controller | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=118.300 | intent=tower_takeoff_clearance | phase=tower_initial_climb | allow_response=True | text=Tre Alfa Noviembre India, Pavas Torre, despegue autorizado pista 10, viento 80 grados a 8 nudos, mantenga rumbo de pista, reporte 5000 pies, COCO Aproximación 120.5 al contacto.
2025-11-07 23:45:00,646 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:45:00,647 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-07 23:45:00,648 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-07 23:45:00,648 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:45:00,649 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-07 23:45:00,649 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-07 23:45:00,650 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:45:00,651 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:45:00,653 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-07 23:45:00,654 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:45:00,655 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:45:00,656 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-07 23:45:00,657 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-07 23:45:00,658 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:45:00,659 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-07 23:45:00,659 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-07 23:45:00,660 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:45:00,661 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:45:00,662 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:269]
2025-11-07 23:45:00,663 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:45:00,663 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:45:00,664 | DEBUG | python_multipart.multipart | Calling on_header_field with data[311:330]
2025-11-07 23:45:00,664 | DEBUG | python_multipart.multipart | Calling on_header_value with data[332:386]
2025-11-07 23:45:00,665 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:45:00,666 | DEBUG | python_multipart.multipart | Calling on_header_field with data[388:400]
2025-11-07 23:45:00,666 | DEBUG | python_multipart.multipart | Calling on_header_value with data[402:412]
2025-11-07 23:45:00,667 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:45:00,669 | DEBUG | python_multipart.multipart | Calling on_header_field with data[414:428]
2025-11-07 23:45:00,669 | DEBUG | python_multipart.multipart | Calling on_header_value with data[430:436]
2025-11-07 23:45:00,671 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:45:00,672 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:45:00,673 | DEBUG | python_multipart.multipart | Calling on_part_data with data[440:2920]
2025-11-07 23:45:00,675 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:45:00,676 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:45:00,778 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:45:00,779 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:45:00,780 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:45:00,897 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:45:00,899 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:45:00,901 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:45:01,013 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:45:01,015 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:45:01,016 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:45:01,017 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:45:01,134 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:45:01,137 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:45:01,140 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:45:01,252 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:45:01,254 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:45:01,255 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:45:01,256 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:45:01,372 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:45:01,373 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:45:01,376 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:45:01,376 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:45:01,495 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:45:01,496 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:45:01,497 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:45:01,614 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:45:01,615 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:45:01,617 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:45:01,619 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:45:01,732 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:45:01,734 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:45:01,736 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-07 23:45:01,875 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:45:01,876 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:45:01,877 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:45:02,006 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:45:02,009 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:45:02,010 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3811]
2025-11-07 23:45:02,145 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1]
2025-11-07 23:45:02,146 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:45:02,147 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:45:02,150 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:45:02,289 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:45:02,290 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-07 23:45:02,411 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:45:02,413 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:45:02,414 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:45:02,570 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:45:02,573 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:45:02,575 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:45:02,578 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:45:02,720 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:45:02,723 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:45:02,725 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:45:02,869 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:45:02,872 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:45:02,874 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:45:02,877 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:45:03,016 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:45:03,017 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:45:03,020 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:45:03,146 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:45:03,147 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:45:03,150 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:45:03,267 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:45:03,272 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:45:03,274 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:45:03,299 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1673]
2025-11-07 23:45:03,300 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:45:03,301 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-07 23:45:03,416 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:45:03,417 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 23:45:03,418 | INFO | sqlalchemy.engine.Engine | [cached since 916.6s ago] ()
2025-11-07 23:45:03,426 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 23:45:03,428 | INFO | sqlalchemy.engine.Engine | [cached since 883.6s ago] (1,)
2025-11-07 23:45:03,506 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 23:45:03,509 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002322240E090>}) about to wait for the following futures []
2025-11-07 23:45:03,509 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002322240E090>}) done waiting for dependent futures
2025-11-07 23:45:03,510 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002322240E090>}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'config': <boto3.s3.transfer.TransferConfig object at 0x00000232223C2090>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002325E1D7610>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002322233DF10>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002322240E090>}
2025-11-07 23:45:03,510 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/14e71339b698405faa262cc3abf5bf02.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002322233DF10> for transfer request: 0.
2025-11-07 23:45:03,510 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 23:45:03,512 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/14e71339b698405faa262cc3abf5bf02.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-07 23:45:03,512 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 23:45:03,513 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/14e71339b698405faa262cc3abf5bf02.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-07 23:45:03,513 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/14e71339b698405faa262cc3abf5bf02.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002322240F1D0>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/14e71339b698405faa262cc3abf5bf02.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-07 23:45:04,291 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 23:45:13,917 | INFO | app.controllers.audio | Transcripción recibida session=08fd22f7-1621-4b61-9273-6b21d67e0d6c: Torre Alfa Noviembre India. P Tre. aproximándome. a 5000 pies coco aproximación.
2025-11-07 23:45:13,919 | INFO | app.logs.transcript | student | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=118.300 | text=Torre Alfa Noviembre India. P Tre. aproximándome. a 5000 pies coco aproximación.
2025-11-07 23:45:14,226 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:45:14,228 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:45:14,230 | INFO | sqlalchemy.engine.Engine | [cached since 883.7s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:45:14,256 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 23:45:14,662 | WARNING | app.services.audio_pipeline | Intent detector invalid JSON: "Invalid error type: 'json_decode_error'" raw=```json
{
    "intent": "tower_approach_clearance",
    "confidence": 0.95,
    "frequencyGroup": "tower"
}
```
2025-11-07 23:45:14,771 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:45:14,773 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:45:14,773 | INFO | sqlalchemy.engine.Engine | [cached since 884.2s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:45:14,784 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-07 23:45:14,784 | INFO | sqlalchemy.engine.Engine | [cached since 883.4s ago] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (29898 characters truncated) ... und": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "tower"}', datetime.datetime(2025, 11, 8, 5, 45, 14, 783750), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-07 23:45:14,798 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:45:14,823 | INFO | app.controllers.audio | Fase activa session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=tower_initial_climb intent=tower_departure_handoff freq=tower
2025-11-07 23:45:14,826 | INFO | app.services.audio_pipeline | Prompts generados intent=tower_departure_handoff freq_group=tower
SYSTEM> Ya en ascenso; al reportar 5000 pies instruyes cambio a COCO Aproximación. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "score": number | null,
  "metadata": object
 }.
El campo "score" debe ser un número de 0 a 100 que evalúe la calidad de la transmisión del alumno para la fase actual, considerando: fraseología correcta, informaci...
USER> Fase actual: Reporte pasando 5000 y transferencia a Aproximación
Intent esperado: tower_departure_handoff
Transcripción textual del alumno:
Torre Alfa Noviembre India. P Tre. aproximándome. a 5000 pies coco aproximación.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: tower
- Fase ID: tower_initial_climb

Checklist alumno:
- Reportar pasando 5000 pies y rumbo previsto.

Checklist controlador:
- Agradecer reporte.
- Transferir a COCO Aproximación 120.5.

Cuándo responder:
- Siem...
2025-11-07 23:45:16,841 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=tower_departure_handoff: {
  "intent": "tower_departure_handoff",
  "allowResponse": true,
  "controllerText": "Alfa Noviembre India, Pavas Torre, buen día. Contacto transferido a COCO Aproximacion 120.5. Buena suerte en el resto del vuelo.",
  "feedback": "Buen reporte de altitud. Recuerda mantener un tono breve y claro al comunicar instrucciones. También podrías haber informado el rumbo previsto al mencionar tu posición y altitud.",
  "confidence": 0.95,
  "score": 90,
  "metadata": {
    "nextPhase": "approach_con...
2025-11-07 23:45:16,843 | INFO | app.controllers.audio | Transición automática de fase session=08fd22f7-1621-4b61-9273-6b21d67e0d6c de=tower_initial_climb a=approach_contact
2025-11-07 23:45:16,970 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:45:16,972 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:45:16,973 | INFO | sqlalchemy.engine.Engine | [cached since 886.4s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:45:16,996 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-07 23:45:16,997 | INFO | sqlalchemy.engine.Engine | [cached since 885.6s ago] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (31070 characters truncated) ... ": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "approach"}', datetime.datetime(2025, 11, 8, 5, 45, 16, 996327), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-07 23:45:17,016 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:45:17,055 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.phase_scores (id, training_session_id, user_id, phase_id, score) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::VARCHAR, $5::FLOAT) RETURNING ecowhiskey.phase_scores.created_at
2025-11-07 23:45:17,056 | INFO | sqlalchemy.engine.Engine | [cached since 769.1s ago] (UUID('3269f390-0664-4437-87c0-f01fbf193a3d'), UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'), 1, 'approach_contact', 90.0)
2025-11-07 23:45:17,066 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:45:17,100 | INFO | app.controllers.audio | Puntuación guardada session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=approach_contact score=90.00
2025-11-07 23:45:17,101 | INFO | app.logs.transcript | controller | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=118.300 | intent=tower_departure_handoff | phase=approach_contact | allow_response=True | text=Alfa Noviembre India, Pavas Torre, buen día. Contacto transferido a COCO Aproximacion 120.5. Buena suerte en el resto del vuelo.
2025-11-07 23:46:28,616 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:46:28,616 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-07 23:46:28,616 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-07 23:46:28,618 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:46:28,619 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-07 23:46:28,619 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-07 23:46:28,620 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:46:28,621 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:46:28,622 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-07 23:46:28,623 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:46:28,623 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:46:28,624 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-07 23:46:28,625 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-07 23:46:28,626 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:46:28,627 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-07 23:46:28,628 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-07 23:46:28,628 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:46:28,629 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:46:28,630 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:269]
2025-11-07 23:46:28,631 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:46:28,631 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:46:28,632 | DEBUG | python_multipart.multipart | Calling on_header_field with data[311:330]
2025-11-07 23:46:28,633 | DEBUG | python_multipart.multipart | Calling on_header_value with data[332:386]
2025-11-07 23:46:28,635 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:46:28,635 | DEBUG | python_multipart.multipart | Calling on_header_field with data[388:400]
2025-11-07 23:46:28,636 | DEBUG | python_multipart.multipart | Calling on_header_value with data[402:412]
2025-11-07 23:46:28,636 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:46:28,638 | DEBUG | python_multipart.multipart | Calling on_header_field with data[414:428]
2025-11-07 23:46:28,639 | DEBUG | python_multipart.multipart | Calling on_header_value with data[430:436]
2025-11-07 23:46:28,639 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:46:28,640 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:46:28,641 | DEBUG | python_multipart.multipart | Calling on_part_data with data[440:4380]
2025-11-07 23:46:28,642 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:46:28,748 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:46:28,751 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:46:28,752 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:46:28,753 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:46:28,869 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:46:28,871 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:46:28,872 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:46:28,873 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:46:28,986 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:46:28,989 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:46:28,990 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:46:29,099 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:46:29,101 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:46:29,102 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:46:29,221 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:46:29,222 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:46:29,224 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:46:29,344 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:46:29,345 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-07 23:46:29,463 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:46:29,464 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:46:29,466 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:46:29,586 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:46:29,588 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:46:29,589 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:46:29,591 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:46:29,704 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1459]
2025-11-07 23:46:29,707 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1]
2025-11-07 23:46:29,708 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:46:29,709 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:46:29,819 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:46:29,821 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:46:29,822 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:46:29,823 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:46:29,936 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:46:29,938 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:46:29,939 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:46:30,061 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:46:30,063 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:46:30,064 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:46:30,179 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:46:30,181 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:46:30,183 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:46:30,184 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:46:30,301 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:46:30,303 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:46:30,305 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:46:30,306 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:46:30,420 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:46:30,422 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:46:30,424 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:46:30,541 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:46:30,542 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:46:30,544 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:46:30,546 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:46:30,662 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:46:30,665 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5840]
2025-11-07 23:46:30,666 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:46:30,788 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:46:30,790 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:46:30,791 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:46:30,792 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:46:30,861 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:46:30,862 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:584]
2025-11-07 23:46:30,863 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:46:30,864 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-07 23:46:30,957 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:46:30,957 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 23:46:30,958 | INFO | sqlalchemy.engine.Engine | [cached since 1004s ago] ()
2025-11-07 23:46:30,963 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 23:46:30,964 | INFO | sqlalchemy.engine.Engine | [cached since 971.1s ago] (1,)
2025-11-07 23:46:31,030 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 23:46:31,031 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000232223C2510>}) about to wait for the following futures []
2025-11-07 23:46:31,032 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000232223C2510>}) done waiting for dependent futures
2025-11-07 23:46:31,032 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000232223C2510>}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'config': <boto3.s3.transfer.TransferConfig object at 0x00000232223C1DD0>, 'osutil': <s3transfer.utils.OSUtils object at 0x0000023222354250>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x00000232223C1790>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000232223C2510>}
2025-11-07 23:46:31,033 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/39a8b5e09fba4f56a4b56a731e566fe6.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x00000232223C1790> for transfer request: 0.
2025-11-07 23:46:31,033 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 23:46:31,035 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/39a8b5e09fba4f56a4b56a731e566fe6.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-07 23:46:31,035 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 23:46:31,036 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/39a8b5e09fba4f56a4b56a731e566fe6.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-07 23:46:31,037 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/39a8b5e09fba4f56a4b56a731e566fe6.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x00000232222F2A90>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/39a8b5e09fba4f56a4b56a731e566fe6.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-07 23:46:31,680 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 23:46:41,325 | INFO | app.controllers.audio | Transcripción recibida session=08fd22f7-1621-4b61-9273-6b21d67e0d6c: Buenos días, Coco Aproximación Alfa Noviembre India en ascenso. a 7000 pies rumbo a zona eco.
2025-11-07 23:46:41,325 | INFO | app.logs.transcript | student | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=120.500 | text=Buenos días, Coco Aproximación Alfa Noviembre India en ascenso. a 7000 pies rumbo a zona eco.
2025-11-07 23:46:41,463 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:46:41,464 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:46:41,465 | INFO | sqlalchemy.engine.Engine | [cached since 970.9s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:46:41,481 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 23:46:41,975 | WARNING | app.services.audio_pipeline | Intent detector invalid JSON: "Invalid error type: 'json_decode_error'" raw=```json
{
  "intent": "approach_climb_clearance",
  "confidence": 0.95,
  "frequencyGroup": "approach"
}
```
2025-11-07 23:46:42,079 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:46:42,080 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:46:42,080 | INFO | sqlalchemy.engine.Engine | [cached since 971.5s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:46:42,094 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-07 23:46:42,095 | INFO | sqlalchemy.engine.Engine | [cached since 970.7s ago] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (31394 characters truncated) ... ": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "approach"}', datetime.datetime(2025, 11, 8, 5, 46, 42, 93731), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-07 23:46:42,111 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:46:42,137 | INFO | app.controllers.audio | Fase activa session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=approach_contact intent=approach_initial_contact freq=approach
2025-11-07 23:46:42,140 | INFO | app.services.audio_pipeline | Prompts generados intent=approach_initial_contact freq_group=approach
SYSTEM> Eres COCO Aproximación (120.5). Recibes reporte pasando 5000 para 7000 rumbo Zona ECO. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "score": number | null,
  "metadata": object
 }.
El campo "score" debe ser un número de 0 a 100 que evalúe la calidad de la transmisión del alumno para la fase actual, considerando: fraseología correct...
USER> Fase actual: Contacto inicial con COCO Aproximación
Intent esperado: approach_initial_contact
Transcripción textual del alumno:
Buenos días, Coco Aproximación Alfa Noviembre India en ascenso. a 7000 pies rumbo a zona eco.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: approach
- Fase ID: approach_contact

Checklist alumno:
- Saludo a COCO Aproximación.
- Indicar altitud actual, ascenso a 7000 y rumbo Zona ECO.

Checklist controlador:
- Confirmar contacto radar.
- Autorizar a c...
2025-11-07 23:46:44,057 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=approach_initial_contact: ```json
{
  "intent": "approach_initial_contact",
  "allowResponse": true,
  "controllerText": "Alfa Noviembre India, COCO Aproximación, contacto radar confirmado. Continúe a 7000 pies. QNH 3002, reporte ingresando Zona ECO.",
  "feedback": "Buena transmisión. Ha proporcionado todos los datos necesarios. Recuerde mantener un tono breve y claro.",
  "confidence": null,
  "score": 95,
  "metadata": {
    "missingElements": null,
    "nextPhase": "approach_readback"
  }
}
```
2025-11-07 23:46:44,060 | ERROR | app.controllers.audio | Fallo en pipeline LLM
Traceback (most recent call last):
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\services\response_contract.py", line 39, in from_json
    data = json.loads(payload)
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\json\decoder.py", line 355, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\controllers\audio.py", line 189, in analyze_audio
    llm_outcome = await call_conversation_llm(request)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\pipelines\audio\llm.py", line 39, in call_conversation_llm
    structured = StructuredLlmResponse.from_json(raw_response)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\services\response_contract.py", line 41, in from_json
    raise ValidationError.from_exception_data(
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: "Invalid error type: 'json_decode_error'"
2025-11-07 23:46:44,065 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 23:47:48,659 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:47:48,659 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-07 23:47:48,660 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-07 23:47:48,660 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:47:48,662 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-07 23:47:48,662 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-07 23:47:48,663 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:47:48,664 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:47:48,664 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-07 23:47:48,665 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:47:48,665 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:47:48,667 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-07 23:47:48,667 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-07 23:47:48,668 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:47:48,668 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-07 23:47:48,668 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-07 23:47:48,669 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:47:48,670 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:47:48,671 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:269]
2025-11-07 23:47:48,672 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:47:48,672 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:47:48,673 | DEBUG | python_multipart.multipart | Calling on_header_field with data[311:330]
2025-11-07 23:47:48,674 | DEBUG | python_multipart.multipart | Calling on_header_value with data[332:386]
2025-11-07 23:47:48,674 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:47:48,675 | DEBUG | python_multipart.multipart | Calling on_header_field with data[388:400]
2025-11-07 23:47:48,675 | DEBUG | python_multipart.multipart | Calling on_header_value with data[402:412]
2025-11-07 23:47:48,675 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:47:48,677 | DEBUG | python_multipart.multipart | Calling on_header_field with data[414:428]
2025-11-07 23:47:48,678 | DEBUG | python_multipart.multipart | Calling on_header_value with data[430:436]
2025-11-07 23:47:48,679 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:47:48,679 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:47:48,680 | DEBUG | python_multipart.multipart | Calling on_part_data with data[440:2920]
2025-11-07 23:47:48,681 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:47:48,682 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:47:48,789 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:47:48,791 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:47:48,793 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:47:48,900 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:47:48,901 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:47:48,902 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:47:48,904 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:47:49,012 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:47:49,013 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:47:49,014 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:47:49,015 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:47:49,131 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:47:49,134 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:47:49,136 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:47:49,252 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:47:49,255 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:47:49,257 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:47:49,259 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:47:49,395 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:47:49,397 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:47:49,399 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:47:49,523 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:47:49,524 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:47:49,526 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:47:49,639 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:47:49,641 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:47:49,643 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3811]
2025-11-07 23:47:49,765 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1]
2025-11-07 23:47:49,766 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:47:49,767 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:47:49,768 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-07 23:47:49,883 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:47:49,885 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:47:49,887 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:47:49,995 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:47:49,997 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:47:49,998 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:47:50,111 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:47:50,112 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:47:50,114 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:47:50,229 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:47:50,230 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:47:50,231 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:47:50,345 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:47:50,347 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:47:50,349 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:47:50,464 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:47:50,467 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:47:50,468 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:47:50,597 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:47:50,599 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:47:50,600 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:47:50,601 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:47:50,733 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:47:50,734 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:47:50,737 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:47:50,847 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:47:50,849 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:47:50,850 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:47:50,969 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:47:50,970 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:47:50,971 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:47:51,091 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:47:51,093 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:47:51,095 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-07 23:47:51,114 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1374]
2025-11-07 23:47:51,114 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:47:51,115 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-07 23:47:51,220 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:47:51,221 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 23:47:51,222 | INFO | sqlalchemy.engine.Engine | [cached since 1084s ago] ()
2025-11-07 23:47:51,228 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 23:47:51,229 | INFO | sqlalchemy.engine.Engine | [cached since 1051s ago] (1,)
2025-11-07 23:47:51,296 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 23:47:51,297 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000232223A3050>}) about to wait for the following futures []
2025-11-07 23:47:51,298 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000232223A3050>}) done waiting for dependent futures
2025-11-07 23:47:51,299 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000232223A3050>}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'config': <boto3.s3.transfer.TransferConfig object at 0x0000023222357CD0>, 'osutil': <s3transfer.utils.OSUtils object at 0x0000023222354250>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002322240EF50>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000232223A3050>}
2025-11-07 23:47:51,300 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/2e0443931fe14fe7bbe79e1eaabc6c87.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002322240EF50> for transfer request: 0.
2025-11-07 23:47:51,300 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 23:47:51,302 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/2e0443931fe14fe7bbe79e1eaabc6c87.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-07 23:47:51,302 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 23:47:51,303 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/2e0443931fe14fe7bbe79e1eaabc6c87.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-07 23:47:51,303 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/2e0443931fe14fe7bbe79e1eaabc6c87.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x0000023222372C90>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/2e0443931fe14fe7bbe79e1eaabc6c87.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-07 23:47:52,099 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 23:48:01,692 | INFO | app.controllers.audio | Transcripción recibida session=08fd22f7-1621-4b61-9273-6b21d67e0d6c: Buenos días, Coco Aproximación Alfa Noviembre India. en altitud, 5500 pies, en ascenso hacia 7000 y rumbo a zona eco.
2025-11-07 23:48:01,693 | INFO | app.logs.transcript | student | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=120.500 | text=Buenos días, Coco Aproximación Alfa Noviembre India. en altitud, 5500 pies, en ascenso hacia 7000 y rumbo a zona eco.
2025-11-07 23:48:01,794 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:48:01,795 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:48:01,796 | INFO | sqlalchemy.engine.Engine | [cached since 1051s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:48:01,809 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 23:48:02,286 | WARNING | app.services.audio_pipeline | Intent detector invalid JSON: "Invalid error type: 'json_decode_error'" raw=```json
{
  "intent": "approach_climb_clearance",
  "confidence": 0.9,
  "frequencyGroup": "approach"
}
```
2025-11-07 23:48:02,408 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:48:02,409 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:48:02,410 | INFO | sqlalchemy.engine.Engine | [cached since 1052s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:48:02,424 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-07 23:48:02,425 | INFO | sqlalchemy.engine.Engine | [cached since 1051s ago] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (31742 characters truncated) ... ": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "approach"}', datetime.datetime(2025, 11, 8, 5, 48, 2, 423448), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-07 23:48:02,441 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:48:02,467 | INFO | app.controllers.audio | Fase activa session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=approach_contact intent=approach_initial_contact freq=approach
2025-11-07 23:48:02,470 | INFO | app.services.audio_pipeline | Prompts generados intent=approach_initial_contact freq_group=approach
SYSTEM> Eres COCO Aproximación (120.5). Recibes reporte pasando 5000 para 7000 rumbo Zona ECO. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "score": number | null,
  "metadata": object
 }.
El campo "score" debe ser un número de 0 a 100 que evalúe la calidad de la transmisión del alumno para la fase actual, considerando: fraseología correct...
USER> Fase actual: Contacto inicial con COCO Aproximación
Intent esperado: approach_initial_contact
Transcripción textual del alumno:
Buenos días, Coco Aproximación Alfa Noviembre India. en altitud, 5500 pies, en ascenso hacia 7000 y rumbo a zona eco.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: approach
- Fase ID: approach_contact

Checklist alumno:
- Saludo a COCO Aproximación.
- Indicar altitud actual, ascenso a 7000 y rumbo Zona ECO.

Checklist controlador:
- Confirmar contact...
2025-11-07 23:48:04,628 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=approach_initial_contact: ```json
{
  "intent": "approach_initial_contact",
  "allowResponse": true,
  "controllerText": "Buenos días, Alfa Noviembre India. COCO Aproximación, contacto radar confirmado. Continúe a 7000 pies. QNH 3002. Reporte ingresando Zona ECO.",
  "feedback": "Buena transmisión, incluye todos los elementos necesarios: saludo, altitud actual, ascenso a 7000 pies y rumbo a Zona ECO. Solo recuerda proporcionar la fraseología completa cuando indiques la altitud actual y el rumbo.",
  "confidence": 95,
...
2025-11-07 23:48:04,629 | ERROR | app.controllers.audio | Fallo en pipeline LLM
Traceback (most recent call last):
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\services\response_contract.py", line 39, in from_json
    data = json.loads(payload)
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\json\decoder.py", line 355, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\controllers\audio.py", line 189, in analyze_audio
    llm_outcome = await call_conversation_llm(request)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\pipelines\audio\llm.py", line 39, in call_conversation_llm
    structured = StructuredLlmResponse.from_json(raw_response)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\services\response_contract.py", line 41, in from_json
    raise ValidationError.from_exception_data(
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: "Invalid error type: 'json_decode_error'"
2025-11-07 23:48:04,634 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 23:52:43,322 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:52:43,322 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-07 23:52:43,323 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-07 23:52:43,323 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:52:43,324 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-07 23:52:43,325 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-07 23:52:43,325 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:52:43,326 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:52:43,326 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-07 23:52:43,327 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:52:43,327 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:52:43,328 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-07 23:52:43,329 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-07 23:52:43,329 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:52:43,329 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-07 23:52:43,331 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-07 23:52:43,331 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:52:43,332 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:52:43,332 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:269]
2025-11-07 23:52:43,333 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:52:43,335 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:52:43,336 | DEBUG | python_multipart.multipart | Calling on_header_field with data[311:330]
2025-11-07 23:52:43,337 | DEBUG | python_multipart.multipart | Calling on_header_value with data[332:386]
2025-11-07 23:52:43,337 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:52:43,338 | DEBUG | python_multipart.multipart | Calling on_header_field with data[388:400]
2025-11-07 23:52:43,338 | DEBUG | python_multipart.multipart | Calling on_header_value with data[402:412]
2025-11-07 23:52:43,340 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:52:43,340 | DEBUG | python_multipart.multipart | Calling on_header_field with data[414:428]
2025-11-07 23:52:43,341 | DEBUG | python_multipart.multipart | Calling on_header_value with data[430:436]
2025-11-07 23:52:43,341 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:52:43,342 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:52:43,344 | DEBUG | python_multipart.multipart | Calling on_part_data with data[440:5840]
2025-11-07 23:52:43,346 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:52:43,447 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:52:43,448 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:52:43,450 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:52:43,452 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:52:43,566 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:52:43,567 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:52:43,569 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:52:43,570 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:52:43,687 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:52:43,689 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:52:43,690 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:52:43,814 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:52:43,815 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:52:43,817 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:52:43,819 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:52:43,940 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:52:43,943 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:52:43,945 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:52:44,059 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:52:44,061 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:52:44,063 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:52:44,237 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:52:44,241 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:52:44,245 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:52:44,442 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:52:44,447 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:52:44,635 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:52:44,638 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:52:44,640 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:52:44,828 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:52:44,830 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:52:44,831 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:52:44,946 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:52:44,947 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:52:44,949 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:52:44,951 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:52:45,065 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:52:45,067 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:52:45,068 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:52:45,070 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:52:45,186 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:52:45,188 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:52:45,189 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:52:45,192 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:52:45,300 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:52:45,303 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:52:45,305 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:52:45,306 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:52:45,415 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:52:45,416 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:52:45,417 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:52:45,539 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:52:45,540 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:52:45,542 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:52:45,657 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:52:45,660 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:52:45,661 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:52:45,770 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:52:45,773 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:52:45,774 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:52:45,884 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:52:45,886 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:52:45,888 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:52:45,893 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:105]
2025-11-07 23:52:45,894 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:52:45,895 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-07 23:52:46,016 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:52:46,017 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 23:52:46,019 | INFO | sqlalchemy.engine.Engine | [cached since 1379s ago] ()
2025-11-07 23:52:46,023 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 23:52:46,024 | INFO | sqlalchemy.engine.Engine | [cached since 1346s ago] (1,)
2025-11-07 23:52:46,102 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 23:52:46,104 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000232223A3F90>}) about to wait for the following futures []
2025-11-07 23:52:46,104 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000232223A3F90>}) done waiting for dependent futures
2025-11-07 23:52:46,105 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000232223A3F90>}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'config': <boto3.s3.transfer.TransferConfig object at 0x0000023222349FD0>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002322237F3D0>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002322237E6D0>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000232223A3F90>}
2025-11-07 23:52:46,106 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/93b7bca31fae4aa78bdaf6e21ea592de.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002322237E6D0> for transfer request: 0.
2025-11-07 23:52:46,107 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 23:52:46,108 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/93b7bca31fae4aa78bdaf6e21ea592de.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-07 23:52:46,108 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 23:52:46,109 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/93b7bca31fae4aa78bdaf6e21ea592de.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-07 23:52:46,110 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/93b7bca31fae4aa78bdaf6e21ea592de.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x00000232223A2150>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/93b7bca31fae4aa78bdaf6e21ea592de.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-07 23:52:46,911 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 23:52:56,623 | INFO | app.controllers.audio | Transcripción recibida session=08fd22f7-1621-4b61-9273-6b21d67e0d6c: Coco aproximación Alfa Noviembre India. altitud actual, pasando a 5000 pies rumbo a 7000 pies rumbo a zona eco.
2025-11-07 23:52:56,623 | INFO | app.logs.transcript | student | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=120.500 | text=Coco aproximación Alfa Noviembre India. altitud actual, pasando a 5000 pies rumbo a 7000 pies rumbo a zona eco.
2025-11-07 23:52:56,726 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:52:56,727 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:52:56,728 | INFO | sqlalchemy.engine.Engine | [cached since 1346s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:52:56,741 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 23:52:57,224 | WARNING | app.services.audio_pipeline | Intent detector invalid JSON: "Invalid error type: 'json_decode_error'" raw=```json
{
  "intent": "approach_altitude_change_request",
  "confidence": 0.9,
  "frequencyGroup": "approach"
}
```
2025-11-07 23:52:57,346 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:52:57,347 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:52:57,348 | INFO | sqlalchemy.engine.Engine | [cached since 1347s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:52:57,360 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-07 23:52:57,362 | INFO | sqlalchemy.engine.Engine | [cached since 1346s ago] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (32078 characters truncated) ... ": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "approach"}', datetime.datetime(2025, 11, 8, 5, 52, 57, 360577), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-07 23:52:57,375 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:52:57,399 | INFO | app.controllers.audio | Fase activa session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=approach_contact intent=approach_initial_contact freq=approach
2025-11-07 23:52:57,403 | INFO | app.services.audio_pipeline | Prompts generados intent=approach_initial_contact freq_group=approach
SYSTEM> Eres COCO Aproximación (120.5). Recibes reporte pasando 5000 para 7000 rumbo Zona ECO. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "score": number | null,
  "metadata": object
 }.
El campo "score" debe ser un número de 0 a 100 que evalúe la calidad de la transmisión del alumno para la fase actual, considerando: fraseología correct...
USER> Fase actual: Contacto inicial con COCO Aproximación
Intent esperado: approach_initial_contact
Transcripción textual del alumno:
Coco aproximación Alfa Noviembre India. altitud actual, pasando a 5000 pies rumbo a 7000 pies rumbo a zona eco.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: approach
- Fase ID: approach_contact

Checklist alumno:
- Saludo a COCO Aproximación.
- Indicar altitud actual, ascenso a 7000 y rumbo Zona ECO.

Checklist controlador:
- Confirmar contacto rada...
2025-11-07 23:52:59,626 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=approach_initial_contact: {
  "intent": "approach_initial_contact",
  "allowResponse": true,
  "controllerText": "Alfa Noviembre India, COCO Aproximacion, buen día. Contacto radar confirmado. Continúe a 7000 pies. La presión al nivel del mar es 3002. Reporte ingresando Zona ECO. Buena suerte.",
  "feedback": "Buenos días. La llamada cumple con los requisitos: posición, altitud actual, ascenso a 7000 y rumbo a Zona ECO. Solo recuerda proporcionar el número de pista en formato numérico (10) para mejorar la claridad.",
 ...
2025-11-07 23:52:59,627 | INFO | app.controllers.audio | Transición automática de fase session=08fd22f7-1621-4b61-9273-6b21d67e0d6c de=approach_contact a=approach_readback
2025-11-07 23:52:59,743 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:52:59,744 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:52:59,744 | INFO | sqlalchemy.engine.Engine | [cached since 1349s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:52:59,760 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-07 23:52:59,760 | INFO | sqlalchemy.engine.Engine | [cached since 1348s ago] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (33451 characters truncated) ... ": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "approach"}', datetime.datetime(2025, 11, 8, 5, 52, 59, 759598), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-07 23:52:59,775 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:52:59,791 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.phase_scores (id, training_session_id, user_id, phase_id, score) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::VARCHAR, $5::FLOAT) RETURNING ecowhiskey.phase_scores.created_at
2025-11-07 23:52:59,793 | INFO | sqlalchemy.engine.Engine | [cached since 1232s ago] (UUID('d8d37bec-d6eb-4c75-a9f5-902d8fee90e9'), UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'), 1, 'approach_readback', 95.0)
2025-11-07 23:52:59,799 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:52:59,826 | INFO | app.controllers.audio | Puntuación guardada session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=approach_readback score=95.00
2025-11-07 23:52:59,827 | INFO | app.logs.transcript | controller | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=120.500 | intent=approach_initial_contact | phase=approach_readback | allow_response=True | text=Alfa Noviembre India, COCO Aproximacion, buen día. Contacto radar confirmado. Continúe a 7000 pies. La presión al nivel del mar es 3002. Reporte ingresando Zona ECO. Buena suerte.
2025-11-07 23:55:11,962 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:55:11,963 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-07 23:55:11,965 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-07 23:55:11,965 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:55:11,967 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-07 23:55:11,968 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-07 23:55:11,968 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:55:11,969 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:55:11,971 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-07 23:55:11,971 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:55:11,972 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:55:11,973 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-07 23:55:11,974 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-07 23:55:11,975 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:55:11,977 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-07 23:55:11,978 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-07 23:55:11,979 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:55:11,980 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:55:11,981 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:269]
2025-11-07 23:55:11,982 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:55:11,983 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:55:11,985 | DEBUG | python_multipart.multipart | Calling on_header_field with data[311:330]
2025-11-07 23:55:11,986 | DEBUG | python_multipart.multipart | Calling on_header_value with data[332:386]
2025-11-07 23:55:11,987 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:55:11,987 | DEBUG | python_multipart.multipart | Calling on_header_field with data[388:400]
2025-11-07 23:55:11,988 | DEBUG | python_multipart.multipart | Calling on_header_value with data[402:412]
2025-11-07 23:55:11,989 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:55:11,990 | DEBUG | python_multipart.multipart | Calling on_header_field with data[414:428]
2025-11-07 23:55:11,990 | DEBUG | python_multipart.multipart | Calling on_header_value with data[430:436]
2025-11-07 23:55:11,991 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:55:11,993 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:55:11,994 | DEBUG | python_multipart.multipart | Calling on_part_data with data[440:5840]
2025-11-07 23:55:11,996 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:55:12,111 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:55:12,113 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:55:12,113 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:55:12,115 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:55:12,229 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:55:12,232 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:55:12,233 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:55:12,348 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:55:12,349 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:55:12,351 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:55:12,353 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:55:12,472 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:55:12,474 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:55:12,475 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:55:12,591 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:55:12,593 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:55:12,594 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:55:12,595 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:55:12,710 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:55:12,711 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:55:12,713 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:55:12,858 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:55:12,860 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:55:12,860 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:55:12,978 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:55:12,980 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:55:13,100 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:55:13,101 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:55:13,103 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:55:13,104 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:55:13,224 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:55:13,225 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:55:13,226 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:55:13,343 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:55:13,344 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:55:13,346 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:55:13,473 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:55:13,475 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:55:13,477 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:55:13,477 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:55:13,590 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:55:13,591 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:55:13,593 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:55:13,710 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:55:13,712 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:55:13,714 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:55:13,830 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:55:13,832 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:55:13,834 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:55:13,946 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:55:13,949 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:55:13,950 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:55:14,063 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:55:14,065 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:55:14,066 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:55:14,177 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:55:14,178 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:55:14,180 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:55:14,345 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:55:14,348 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:55:14,352 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:55:14,553 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:55:14,556 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:55:14,559 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:55:14,761 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:55:14,765 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:55:14,768 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:55:14,949 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:55:14,952 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:55:14,955 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:55:15,086 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:55:15,088 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:55:15,089 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:55:15,205 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:55:15,207 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:55:15,318 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:55:15,320 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:55:15,321 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:55:15,322 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:55:15,438 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:55:15,440 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:55:15,441 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:55:15,565 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:55:15,567 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:55:15,569 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:55:15,690 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:55:15,693 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:55:15,695 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:55:15,777 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:55:15,779 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:55:15,780 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1273]
2025-11-07 23:55:15,780 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:55:15,781 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-07 23:55:15,896 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:55:15,896 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 23:55:15,897 | INFO | sqlalchemy.engine.Engine | [cached since 1529s ago] ()
2025-11-07 23:55:15,903 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 23:55:15,904 | INFO | sqlalchemy.engine.Engine | [cached since 1496s ago] (1,)
2025-11-07 23:55:15,998 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 23:55:16,000 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000232223A00D0>}) about to wait for the following futures []
2025-11-07 23:55:16,000 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000232223A00D0>}) done waiting for dependent futures
2025-11-07 23:55:16,001 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000232223A00D0>}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'config': <boto3.s3.transfer.TransferConfig object at 0x0000023222356710>, 'osutil': <s3transfer.utils.OSUtils object at 0x00000232223A0350>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x00000232223A28D0>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000232223A00D0>}
2025-11-07 23:55:16,003 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/36644dccdeaf497f8847062cb19265d1.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x00000232223A28D0> for transfer request: 0.
2025-11-07 23:55:16,005 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 23:55:16,007 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/36644dccdeaf497f8847062cb19265d1.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-07 23:55:16,008 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 23:55:16,010 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/36644dccdeaf497f8847062cb19265d1.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-07 23:55:16,011 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/36644dccdeaf497f8847062cb19265d1.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x00000232223A1BD0>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/36644dccdeaf497f8847062cb19265d1.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-07 23:55:16,791 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 23:55:26,380 | INFO | app.controllers.audio | Transcripción recibida session=08fd22f7-1621-4b61-9273-6b21d67e0d6c: Alfa Noviembre India. QNH. T02. ingresando a zona eco a 7000 pies listo.
2025-11-07 23:55:26,381 | INFO | app.logs.transcript | student | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=120.500 | text=Alfa Noviembre India. QNH. T02. ingresando a zona eco a 7000 pies listo.
2025-11-07 23:55:26,497 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:55:26,498 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:55:26,500 | INFO | sqlalchemy.engine.Engine | [cached since 1496s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:55:26,510 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 23:55:27,117 | WARNING | app.services.audio_pipeline | Intent detector invalid JSON: "Invalid error type: 'json_decode_error'" raw=```json
{
  "intent": "approach_altitude_change_clearance",
  "confidence": 0.85,
  "frequencyGroup": "approach"
}
```
2025-11-07 23:55:27,219 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:55:27,221 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:55:27,222 | INFO | sqlalchemy.engine.Engine | [cached since 1497s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:55:27,234 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-07 23:55:27,235 | INFO | sqlalchemy.engine.Engine | [cached since 1496s ago] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (33742 characters truncated) ... ": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "approach"}', datetime.datetime(2025, 11, 8, 5, 55, 27, 233164), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-07 23:55:27,247 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:55:27,273 | INFO | app.controllers.audio | Fase activa session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=approach_readback intent=approach_readback freq=approach
2025-11-07 23:55:27,276 | INFO | app.services.audio_pipeline | Prompts generados intent=approach_readback freq_group=approach
SYSTEM> Validas la colación del alumno tras las instrucciones radar. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "score": number | null,
  "metadata": object
 }.
El campo "score" debe ser un número de 0 a 100 que evalúe la calidad de la transmisión del alumno para la fase actual, considerando: fraseología correcta, información completa, o...
USER> Fase actual: Readback de COCO Aproximación
Intent esperado: approach_readback
Transcripción textual del alumno:
Alfa Noviembre India. QNH. T02. ingresando a zona eco a 7000 pies listo.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: approach
- Fase ID: approach_readback

Checklist alumno:
- Repetir ascenso 7000 pies.
- Confirmar QNH.
- Mencionar reporte ingresando Zona ECO.
- Cerrar con indicativo.

Checklist controlador:
- Decir 'colación correcta' cuando corresponda.
- Solici...
2025-11-07 23:55:29,134 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=approach_readback: {
  "intent": "approach_readback",
  "allowResponse": true,
  "controllerText": "Colación correcta, Alfa Noviembre India.",
  "feedback": "Buena colación. Has repetido la altitud, confirmado la QNH y mencionado el reporte al ingresar a la Zona ECO. Solo recuerda completar tu indicativo al final.",
  "confidence": 0.95,
  "score": 95,
  "metadata": {
    "missingElements": "indicativo completo",
    "nextPhase": "approach_zone_entry"
  }
}
2025-11-07 23:55:29,135 | INFO | app.controllers.audio | Transición automática de fase session=08fd22f7-1621-4b61-9273-6b21d67e0d6c de=approach_readback a=approach_zone_entry
2025-11-07 23:55:29,236 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:55:29,237 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:55:29,238 | INFO | sqlalchemy.engine.Engine | [cached since 1499s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:55:29,250 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-07 23:55:29,251 | INFO | sqlalchemy.engine.Engine | [cached since 1498s ago] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (34769 characters truncated) ... ": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "approach"}', datetime.datetime(2025, 11, 8, 5, 55, 29, 249137), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-07 23:55:29,306 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:55:29,332 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.phase_scores (id, training_session_id, user_id, phase_id, score) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::VARCHAR, $5::FLOAT) RETURNING ecowhiskey.phase_scores.created_at
2025-11-07 23:55:29,333 | INFO | sqlalchemy.engine.Engine | [cached since 1381s ago] (UUID('dd46d571-e867-465e-8ec3-fd4538d656a1'), UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'), 1, 'approach_zone_entry', 95.0)
2025-11-07 23:55:29,341 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:55:29,361 | INFO | app.controllers.audio | Puntuación guardada session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=approach_zone_entry score=95.00
2025-11-07 23:55:29,362 | INFO | app.logs.transcript | controller | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=120.500 | intent=approach_readback | phase=approach_zone_entry | allow_response=True | text=Colación correcta, Alfa Noviembre India.
2025-11-07 23:56:35,899 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:56:35,900 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-07 23:56:35,900 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-07 23:56:35,901 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:56:35,901 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-07 23:56:35,903 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-07 23:56:35,904 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:56:35,905 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:56:35,905 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-07 23:56:35,906 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:56:35,907 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:56:35,908 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-07 23:56:35,909 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-07 23:56:35,909 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:56:35,910 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-07 23:56:35,911 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-07 23:56:35,912 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:56:35,914 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:56:35,915 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:269]
2025-11-07 23:56:35,915 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:56:35,916 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:56:35,917 | DEBUG | python_multipart.multipart | Calling on_header_field with data[311:330]
2025-11-07 23:56:35,917 | DEBUG | python_multipart.multipart | Calling on_header_value with data[332:386]
2025-11-07 23:56:35,918 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:56:35,919 | DEBUG | python_multipart.multipart | Calling on_header_field with data[388:400]
2025-11-07 23:56:35,919 | DEBUG | python_multipart.multipart | Calling on_header_value with data[402:412]
2025-11-07 23:56:35,920 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:56:35,920 | DEBUG | python_multipart.multipart | Calling on_header_field with data[414:428]
2025-11-07 23:56:35,921 | DEBUG | python_multipart.multipart | Calling on_header_value with data[430:436]
2025-11-07 23:56:35,922 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:56:35,923 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:56:35,924 | DEBUG | python_multipart.multipart | Calling on_part_data with data[440:5840]
2025-11-07 23:56:35,926 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:56:36,024 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:56:36,026 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:56:36,027 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:56:36,137 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:56:36,139 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:56:36,141 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:56:36,262 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:56:36,264 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:56:36,265 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:56:36,268 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:56:36,387 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:56:36,389 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:56:36,390 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:56:36,509 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:56:36,510 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:56:36,512 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:56:36,632 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:56:36,634 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:56:36,636 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:56:36,757 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:56:36,758 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:56:36,759 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:56:36,876 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:56:36,880 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-07 23:56:37,004 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:56:37,005 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:56:37,006 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:56:37,123 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:56:37,126 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:56:37,128 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:56:37,131 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:56:37,284 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:56:37,286 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:56:37,287 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:56:37,289 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:56:37,412 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:56:37,414 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:56:37,415 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:56:37,535 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:56:37,536 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:56:37,537 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:56:37,656 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:56:37,657 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:56:37,659 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:56:37,705 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:56:37,707 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1708]
2025-11-07 23:56:37,707 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:56:37,707 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-07 23:56:37,800 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:56:37,802 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 23:56:37,803 | INFO | sqlalchemy.engine.Engine | [cached since 1611s ago] ()
2025-11-07 23:56:37,808 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 23:56:37,809 | INFO | sqlalchemy.engine.Engine | [cached since 1578s ago] (1,)
2025-11-07 23:56:37,896 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 23:56:37,898 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023222430CD0>}) about to wait for the following futures []
2025-11-07 23:56:37,899 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023222430CD0>}) done waiting for dependent futures
2025-11-07 23:56:37,901 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023222430CD0>}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'config': <boto3.s3.transfer.TransferConfig object at 0x00000232223B2950>, 'osutil': <s3transfer.utils.OSUtils object at 0x00000232223C2BD0>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x00000232224328D0>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023222430CD0>}
2025-11-07 23:56:37,902 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/577c86051a9a4074af0374a3c9d15d27.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x00000232224328D0> for transfer request: 0.
2025-11-07 23:56:37,903 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 23:56:37,905 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/577c86051a9a4074af0374a3c9d15d27.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-07 23:56:37,905 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 23:56:37,906 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/577c86051a9a4074af0374a3c9d15d27.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-07 23:56:37,907 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/577c86051a9a4074af0374a3c9d15d27.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002322237D2D0>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/577c86051a9a4074af0374a3c9d15d27.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-07 23:56:38,684 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 23:56:48,292 | INFO | app.controllers.audio | Transcripción recibida session=08fd22f7-1621-4b61-9273-6b21d67e0d6c: Coco Aproximación Alfa Noviembre India. ingresando a zona Eco 7000 pies.
2025-11-07 23:56:48,293 | INFO | app.logs.transcript | student | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=120.500 | text=Coco Aproximación Alfa Noviembre India. ingresando a zona Eco 7000 pies.
2025-11-07 23:56:48,407 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:56:48,409 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:56:48,409 | INFO | sqlalchemy.engine.Engine | [cached since 1578s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:56:48,425 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 23:56:48,877 | WARNING | app.services.audio_pipeline | Intent detector invalid JSON: "Invalid error type: 'json_decode_error'" raw=```json
{
    "intent": "approach_altitude_report",
    "confidence": 0.9,
    "frequencyGroup": "approach"
}
```
2025-11-07 23:56:48,973 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:56:48,974 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:56:48,974 | INFO | sqlalchemy.engine.Engine | [cached since 1578s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:56:48,987 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-07 23:56:48,988 | INFO | sqlalchemy.engine.Engine | [cached since 1578s ago] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (35066 characters truncated) ... ": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "approach"}', datetime.datetime(2025, 11, 8, 5, 56, 48, 986808), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-07 23:56:49,042 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:56:49,063 | INFO | app.controllers.audio | Fase activa session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=approach_zone_entry intent=approach_zone_report freq=approach
2025-11-07 23:56:49,066 | INFO | app.services.audio_pipeline | Prompts generados intent=approach_zone_report freq_group=approach
SYSTEM> El alumno reporta 7000 pies ingresando Zona ECO. Debes transferirlo a COCO Radio. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "score": number | null,
  "metadata": object
 }.
El campo "score" debe ser un número de 0 a 100 que evalúe la calidad de la transmisión del alumno para la fase actual, considerando: fraseología correcta, in...
USER> Fase actual: Reporte ingresando Zona ECO
Intent esperado: approach_zone_report
Transcripción textual del alumno:
Coco Aproximación Alfa Noviembre India. ingresando a zona Eco 7000 pies.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: approach
- Fase ID: approach_zone_entry

Checklist alumno:
- Confirmar altitud y entrada a la zona.

Checklist controlador:
- Acusar recibo.
- Asignar contacto con COCO Radio 126.8.

Cuándo responder:
- Responde siempre con handoff claro.

Guía de ...
2025-11-07 23:56:50,767 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=approach_zone_report: {
  "intent": "approach_zone_report",
  "allowResponse": true,
  "controllerText": "Alfa Noviembre India, COCO Radio 126.8, buen día. Reporte recibido al ingresar a Zona ECO. Buena suerte.",
  "feedback": "La llamada es clara y cumple con los requisitos. Sin embargo, recuerda incluir tu indicativo completo al final de cada mensaje para mayor claridad.",
  "confidence": 1.0,
  "score": 90,
  "metadata": {
    "nextPhase": "radio_check_in"
  }
}
2025-11-07 23:56:50,769 | INFO | app.controllers.audio | Transición automática de fase session=08fd22f7-1621-4b61-9273-6b21d67e0d6c de=approach_zone_entry a=radio_check_in
2025-11-07 23:56:50,893 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:56:50,894 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:56:50,895 | INFO | sqlalchemy.engine.Engine | [cached since 1580s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:56:50,909 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-07 23:56:50,910 | INFO | sqlalchemy.engine.Engine | [cached since 1580s ago] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (36070 characters truncated) ... und": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "radio"}', datetime.datetime(2025, 11, 8, 5, 56, 50, 909524), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-07 23:56:50,923 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:56:50,948 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.phase_scores (id, training_session_id, user_id, phase_id, score) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::VARCHAR, $5::FLOAT) RETURNING ecowhiskey.phase_scores.created_at
2025-11-07 23:56:50,949 | INFO | sqlalchemy.engine.Engine | [cached since 1463s ago] (UUID('2989e259-13f4-4890-aa0d-d2d46c9f5b75'), UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'), 1, 'radio_check_in', 90.0)
2025-11-07 23:56:50,957 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:56:50,978 | INFO | app.controllers.audio | Puntuación guardada session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=radio_check_in score=90.00
2025-11-07 23:56:50,980 | INFO | app.logs.transcript | controller | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=120.500 | intent=approach_zone_report | phase=radio_check_in | allow_response=True | text=Alfa Noviembre India, COCO Radio 126.8, buen día. Reporte recibido al ingresar a Zona ECO. Buena suerte.
2025-11-07 23:57:43,245 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:57:43,245 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-07 23:57:43,246 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-07 23:57:43,246 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:57:43,247 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-07 23:57:43,247 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-07 23:57:43,248 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:57:43,248 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:57:43,249 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-07 23:57:43,250 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:57:43,251 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:57:43,252 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-07 23:57:43,252 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-07 23:57:43,253 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:57:43,254 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-07 23:57:43,255 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-07 23:57:43,255 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:57:43,255 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:57:43,256 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:269]
2025-11-07 23:57:43,258 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:57:43,258 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:57:43,259 | DEBUG | python_multipart.multipart | Calling on_header_field with data[311:330]
2025-11-07 23:57:43,260 | DEBUG | python_multipart.multipart | Calling on_header_value with data[332:386]
2025-11-07 23:57:43,261 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:57:43,261 | DEBUG | python_multipart.multipart | Calling on_header_field with data[388:400]
2025-11-07 23:57:43,261 | DEBUG | python_multipart.multipart | Calling on_header_value with data[402:412]
2025-11-07 23:57:43,263 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:57:43,264 | DEBUG | python_multipart.multipart | Calling on_header_field with data[414:428]
2025-11-07 23:57:43,264 | DEBUG | python_multipart.multipart | Calling on_header_value with data[430:436]
2025-11-07 23:57:43,265 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:57:43,266 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:57:43,266 | DEBUG | python_multipart.multipart | Calling on_part_data with data[440:5840]
2025-11-07 23:57:43,267 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:57:43,380 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:57:43,381 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:57:43,383 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:57:43,385 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:57:43,503 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:57:43,505 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:57:43,506 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:57:43,623 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:57:43,625 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:57:43,749 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:57:43,751 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:57:43,752 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:57:43,875 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:57:43,876 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:57:43,878 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:57:43,879 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:57:43,990 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:57:43,992 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:57:44,113 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:57:44,115 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:57:44,116 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:57:44,118 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:57:44,238 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:57:44,239 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:57:44,240 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:57:44,352 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:57:44,354 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:57:44,355 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:57:44,357 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:57:44,557 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:57:44,561 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:57:44,564 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-07 23:57:44,777 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:57:44,779 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:57:44,782 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:57:44,987 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:57:44,988 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:57:44,990 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:57:45,152 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:57:45,153 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:57:45,154 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:57:45,156 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:57:45,280 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:57:45,282 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:57:45,283 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:57:45,402 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:57:45,403 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:57:45,404 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:57:45,406 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:57:45,519 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:57:45,521 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:57:45,522 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:57:45,523 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:57:45,635 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:57:45,637 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:57:45,639 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:57:45,640 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:57:45,757 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:57:45,758 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1459]
2025-11-07 23:57:45,760 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1]
2025-11-07 23:57:45,761 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:57:45,762 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:57:45,879 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:57:45,880 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:57:45,882 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:57:45,992 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:57:45,995 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:57:45,996 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:57:46,112 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:57:46,113 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:57:46,114 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:57:46,116 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:57:46,229 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:57:46,230 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:57:46,231 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:57:46,343 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:57:46,345 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:57:46,346 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:57:46,346 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:57:46,463 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:57:46,465 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:57:46,467 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:57:46,468 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:57:46,588 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:57:46,591 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:57:46,592 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:57:46,637 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:57:46,638 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:57:46,640 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:452]
2025-11-07 23:57:46,640 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:57:46,641 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-07 23:57:46,746 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:57:46,748 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 23:57:46,748 | INFO | sqlalchemy.engine.Engine | [cached since 1680s ago] ()
2025-11-07 23:57:46,755 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 23:57:46,756 | INFO | sqlalchemy.engine.Engine | [cached since 1647s ago] (1,)
2025-11-07 23:57:46,823 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 23:57:46,825 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002322240C890>}) about to wait for the following futures []
2025-11-07 23:57:46,826 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002322240C890>}) done waiting for dependent futures
2025-11-07 23:57:46,827 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002322240C890>}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'config': <boto3.s3.transfer.TransferConfig object at 0x00000232223C37D0>, 'osutil': <s3transfer.utils.OSUtils object at 0x00000232223C2DD0>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x0000023221F27310>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002322240C890>}
2025-11-07 23:57:46,829 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/0984b6825cc641d5a41c0191396e13b3.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x0000023221F27310> for transfer request: 0.
2025-11-07 23:57:46,829 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 23:57:46,831 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/0984b6825cc641d5a41c0191396e13b3.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-07 23:57:46,831 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 23:57:46,832 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/0984b6825cc641d5a41c0191396e13b3.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-07 23:57:46,833 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/0984b6825cc641d5a41c0191396e13b3.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x00000232223A4190>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/0984b6825cc641d5a41c0191396e13b3.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-07 23:57:47,604 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 23:57:57,239 | INFO | app.controllers.audio | Transcripción recibida session=08fd22f7-1621-4b61-9273-6b21d67e0d6c: Coco Radio Alfa Noviembre India. saludos. reportándome a 7000 pies en zona eco. permanencia estimada. 30 minutos.
2025-11-07 23:57:57,240 | INFO | app.logs.transcript | student | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=120.500 | text=Coco Radio Alfa Noviembre India. saludos. reportándome a 7000 pies en zona eco. permanencia estimada. 30 minutos.
2025-11-07 23:57:57,360 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:57:57,361 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:57:57,363 | INFO | sqlalchemy.engine.Engine | [cached since 1647s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:57:57,378 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 23:57:57,821 | WARNING | app.services.audio_pipeline | Intent detector invalid JSON: "Invalid error type: 'json_decode_error'" raw=```json
{
    "intent": "radar_position_report",
    "confidence": 0.95,
    "frequencyGroup": "radar"
}
```
2025-11-07 23:57:57,925 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:57:57,927 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:57:57,928 | INFO | sqlalchemy.engine.Engine | [cached since 1647s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:57:57,942 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-07 23:57:57,943 | INFO | sqlalchemy.engine.Engine | [cached since 1647s ago] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (36408 characters truncated) ... und": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "radio"}', datetime.datetime(2025, 11, 8, 5, 57, 57, 941675), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-07 23:57:58,000 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:57:58,030 | INFO | app.controllers.audio | Fase activa session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=radio_check_in intent=radio_initial_contact freq=radio
2025-11-07 23:57:58,031 | INFO | app.controllers.audio | Frecuencia fuera de rango intent=radio_initial_contact freq=120.500 esperado=126.800
2025-11-07 23:57:58,144 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:57:58,144 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:57:58,145 | INFO | sqlalchemy.engine.Engine | [cached since 1648s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:57:58,159 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-07 23:57:58,160 | INFO | sqlalchemy.engine.Engine | [cached since 1647s ago] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (36815 characters truncated) ... und": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "radio"}', datetime.datetime(2025, 11, 8, 5, 57, 58, 158724), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-07 23:57:58,214 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:57:58,227 | INFO | app.controllers.audio | Error de frecuencia registrado session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=radio_check_in
2025-11-07 23:57:58,228 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.phase_scores (id, training_session_id, user_id, phase_id, score) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::VARCHAR, $5::FLOAT), ($6::UUID, $7::UUID, $8::INTEGER, $9::VARCHAR, $10::FLOAT) RETURNING ecowhiskey.phase_scores.created_at, ecowhiskey.phase_scores.id
2025-11-07 23:57:58,230 | INFO | sqlalchemy.engine.Engine | [cached since 1647s ago (insertmanyvalues) 1/1 (ordered)] (UUID('fa69a3c1-7834-4a16-9956-f16cacf9a9ce'), UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'), 1, 'radio_check_in', 0.0, UUID('3daa3ff2-19de-4bf0-ba4e-273dca6a8355'), UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'), 1, 'frequency_usage_error', 0.0)
2025-11-07 23:57:58,239 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:57:58,260 | INFO | app.controllers.audio | Puntuación guardada session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=radio_check_in score=0.00
2025-11-07 23:57:58,261 | INFO | app.logs.transcript | controller | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=120.500 | intent=radio_initial_contact | phase=radio_check_in | allow_response=False | text=La frecuencia esperada para esta solicitud es 126.800.
2025-11-07 23:59:15,136 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:59:15,137 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-07 23:59:15,138 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-07 23:59:15,139 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:59:15,141 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-07 23:59:15,142 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-07 23:59:15,143 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:59:15,145 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:59:15,146 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-07 23:59:15,147 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:59:15,148 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:59:15,150 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-07 23:59:15,151 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-07 23:59:15,153 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:59:15,155 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-07 23:59:15,156 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-07 23:59:15,157 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:59:15,159 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:59:15,161 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:269]
2025-11-07 23:59:15,162 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:59:15,163 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 23:59:15,164 | DEBUG | python_multipart.multipart | Calling on_header_field with data[311:330]
2025-11-07 23:59:15,165 | DEBUG | python_multipart.multipart | Calling on_header_value with data[332:386]
2025-11-07 23:59:15,167 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:59:15,168 | DEBUG | python_multipart.multipart | Calling on_header_field with data[388:400]
2025-11-07 23:59:15,171 | DEBUG | python_multipart.multipart | Calling on_header_value with data[402:412]
2025-11-07 23:59:15,172 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:59:15,174 | DEBUG | python_multipart.multipart | Calling on_header_field with data[414:428]
2025-11-07 23:59:15,175 | DEBUG | python_multipart.multipart | Calling on_header_value with data[430:436]
2025-11-07 23:59:15,176 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 23:59:15,178 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 23:59:15,179 | DEBUG | python_multipart.multipart | Calling on_part_data with data[440:2920]
2025-11-07 23:59:15,182 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:59:15,186 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:59:15,296 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:59:15,298 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:59:15,301 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:59:15,415 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:59:15,416 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:59:15,417 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:59:15,537 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:59:15,539 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:59:15,540 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:59:15,656 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:59:15,657 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:59:15,775 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:59:15,777 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:59:15,778 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:59:15,896 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:59:15,898 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:59:15,899 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:59:16,014 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:59:16,017 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:59:16,019 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:59:16,137 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:59:16,138 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:59:16,140 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:59:16,267 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:59:16,269 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:59:16,271 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:59:16,404 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:59:16,405 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:59:16,407 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:59:16,409 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:59:16,525 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:59:16,527 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:59:16,528 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:59:16,650 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:59:16,652 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:59:16,653 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:59:16,771 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:59:16,772 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:59:16,774 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:59:16,889 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:59:16,889 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:59:16,892 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:59:16,893 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:59:17,015 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:59:17,017 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:59:17,019 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:59:17,021 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:59:17,139 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:59:17,140 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:59:17,142 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:59:17,262 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:59:17,263 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:59:17,264 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:59:17,381 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:59:17,383 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:59:17,386 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:59:17,388 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:59:17,531 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:59:17,533 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:59:17,535 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-07 23:59:17,671 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:59:17,672 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:59:17,672 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:59:17,788 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:59:17,790 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:59:17,792 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 23:59:17,911 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:59:17,912 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:59:18,033 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:59:18,036 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:59:18,037 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-07 23:59:18,158 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:59:18,159 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:59:18,162 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:59:18,276 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:59:18,277 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:59:18,278 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:59:18,393 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:59:18,394 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:59:18,395 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:59:18,519 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:59:18,521 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:59:18,523 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:59:18,646 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:59:18,647 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:59:18,649 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:59:18,651 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:59:18,774 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:59:18,776 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 23:59:18,777 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 23:59:18,893 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:59:18,895 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:59:18,897 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:59:18,898 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 23:59:19,007 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:59:19,007 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 23:59:19,009 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 23:59:19,010 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:331]
2025-11-07 23:59:19,010 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 23:59:19,011 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-07 23:59:19,109 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:59:19,110 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 23:59:19,111 | INFO | sqlalchemy.engine.Engine | [cached since 1772s ago] ()
2025-11-07 23:59:19,116 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 23:59:19,117 | INFO | sqlalchemy.engine.Engine | [cached since 1739s ago] (1,)
2025-11-07 23:59:19,185 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 23:59:19,186 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023222429B10>}) about to wait for the following futures []
2025-11-07 23:59:19,187 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023222429B10>}) done waiting for dependent futures
2025-11-07 23:59:19,187 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023222429B10>}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002322237E290>, 'osutil': <s3transfer.utils.OSUtils object at 0x00000232223C0550>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x0000023222429850>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023222429B10>}
2025-11-07 23:59:19,188 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/ced59bfc4a284ee28ebee19dc1e2996a.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x0000023222429850> for transfer request: 0.
2025-11-07 23:59:19,190 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 23:59:19,191 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/ced59bfc4a284ee28ebee19dc1e2996a.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-07 23:59:19,191 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 23:59:19,192 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/ced59bfc4a284ee28ebee19dc1e2996a.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-07 23:59:19,192 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/ced59bfc4a284ee28ebee19dc1e2996a.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002322242AA90>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/ced59bfc4a284ee28ebee19dc1e2996a.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-07 23:59:19,984 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 23:59:29,722 | INFO | app.controllers.audio | Transcripción recibida session=08fd22f7-1621-4b61-9273-6b21d67e0d6c: Coco Radio Saludos. Alfa Noviembre India. en posición zona eco. ingresando. a altura 7500 pies permanencia estimada. 40 minutos.
2025-11-07 23:59:29,723 | INFO | app.logs.transcript | student | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=126.800 | text=Coco Radio Saludos. Alfa Noviembre India. en posición zona eco. ingresando. a altura 7500 pies permanencia estimada. 40 minutos.
2025-11-07 23:59:29,837 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:59:29,839 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:59:29,841 | INFO | sqlalchemy.engine.Engine | [cached since 1739s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:59:29,855 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 23:59:30,272 | WARNING | app.services.audio_pipeline | Intent detector invalid JSON: "Invalid error type: 'json_decode_error'" raw=```json
{
  "intent": "radar_altitude_information",
  "confidence": 0.85,
  "frequencyGroup": "radar"
}
```
2025-11-07 23:59:30,374 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:59:30,375 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:59:30,375 | INFO | sqlalchemy.engine.Engine | [cached since 1740s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:59:30,387 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-07 23:59:30,389 | INFO | sqlalchemy.engine.Engine | [cached since 1739s ago] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (37168 characters truncated) ... und": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "radio"}', datetime.datetime(2025, 11, 8, 5, 59, 30, 387140), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-07 23:59:30,399 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:59:30,425 | INFO | app.controllers.audio | Fase activa session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=radio_check_in intent=radio_initial_contact freq=radio
2025-11-07 23:59:30,427 | INFO | app.services.audio_pipeline | Prompts generados intent=radio_initial_contact freq_group=radio
SYSTEM> Eres COCO Radio (126.8). Recibes reporte de ingreso y estimado en la zona. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "score": number | null,
  "metadata": object
 }.
El campo "score" debe ser un número de 0 a 100 que evalúe la calidad de la transmisión del alumno para la fase actual, considerando: fraseología correcta, informaci...
USER> Fase actual: Ingreso a COCO Radio
Intent esperado: radio_initial_contact
Transcripción textual del alumno:
Coco Radio Saludos. Alfa Noviembre India. en posición zona eco. ingresando. a altura 7500 pies permanencia estimada. 40 minutos.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: radio
- Fase ID: radio_check_in

Checklist alumno:
- Saludo y reporte de posición en Zona ECO.
- Indicar altitud y estimado de permanencia.

Checklist controlador:
- Proporcionar QNE 29.92.
- Inform...
2025-11-07 23:59:32,504 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=radio_initial_contact: {
  "intent": "radio_initial_contact",
  "allowResponse": true,
  "controllerText": "Alfa Noviembre India, COCO Radio, buen día. Permanezca en espera. No hay tráfico reportado. Mantenga monitoreo cada 30 minutos o cambios. QNE 29.92.",
  "feedback": "Transmisión completa y clara. Has cumplido con informar la posición en Zona ECO, la altitud actual, y el estimado de permanencia. Solo recuerda completar tu indicativo al final de cada mensaje para mayor claridad.",
  "confidence": 95.0,
  "score...
2025-11-07 23:59:32,505 | INFO | app.controllers.audio | Transición automática de fase session=08fd22f7-1621-4b61-9273-6b21d67e0d6c de=radio_check_in a=radio_position_reporting
2025-11-07 23:59:32,641 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 23:59:32,641 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 23:59:32,642 | INFO | sqlalchemy.engine.Engine | [cached since 1742s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-07 23:59:32,653 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-07 23:59:32,654 | INFO | sqlalchemy.engine.Engine | [cached since 1741s ago] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (38634 characters truncated) ... nd": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "unicom"}', datetime.datetime(2025, 11, 8, 5, 59, 32, 652623), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-07 23:59:32,665 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:59:32,678 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.phase_scores (id, training_session_id, user_id, phase_id, score) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::VARCHAR, $5::FLOAT) RETURNING ecowhiskey.phase_scores.created_at
2025-11-07 23:59:32,680 | INFO | sqlalchemy.engine.Engine | [cached since 1625s ago] (UUID('a96a1dfe-28c9-4e98-8469-5675b1d9e9f4'), UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'), 1, 'radio_position_reporting', 95.0)
2025-11-07 23:59:32,687 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 23:59:32,708 | INFO | app.controllers.audio | Puntuación guardada session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=radio_position_reporting score=95.00
2025-11-07 23:59:32,709 | INFO | app.logs.transcript | controller | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=126.800 | intent=radio_initial_contact | phase=radio_position_reporting | allow_response=True | text=Alfa Noviembre India, COCO Radio, buen día. Permanezca en espera. No hay tráfico reportado. Mantenga monitoreo cada 30 minutos o cambios. QNE 29.92.
2025-11-08 00:01:03,122 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-08 00:01:03,123 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-08 00:01:03,123 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-08 00:01:03,124 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-08 00:01:03,124 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-08 00:01:03,126 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-08 00:01:03,126 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-08 00:01:03,126 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-08 00:01:03,126 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-08 00:01:03,127 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-08 00:01:03,127 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-08 00:01:03,128 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-08 00:01:03,129 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-08 00:01:03,129 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-08 00:01:03,130 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-08 00:01:03,131 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-08 00:01:03,131 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-08 00:01:03,132 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-08 00:01:03,132 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:269]
2025-11-08 00:01:03,134 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-08 00:01:03,134 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-08 00:01:03,135 | DEBUG | python_multipart.multipart | Calling on_header_field with data[311:330]
2025-11-08 00:01:03,136 | DEBUG | python_multipart.multipart | Calling on_header_value with data[332:386]
2025-11-08 00:01:03,137 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-08 00:01:03,138 | DEBUG | python_multipart.multipart | Calling on_header_field with data[388:400]
2025-11-08 00:01:03,139 | DEBUG | python_multipart.multipart | Calling on_header_value with data[402:412]
2025-11-08 00:01:03,139 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-08 00:01:03,140 | DEBUG | python_multipart.multipart | Calling on_header_field with data[414:428]
2025-11-08 00:01:03,141 | DEBUG | python_multipart.multipart | Calling on_header_value with data[430:436]
2025-11-08 00:01:03,141 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-08 00:01:03,142 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-08 00:01:03,142 | DEBUG | python_multipart.multipart | Calling on_part_data with data[440:5840]
2025-11-08 00:01:03,143 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-08 00:01:03,239 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:03,240 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:03,243 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:01:03,355 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:03,357 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:03,359 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:01:03,479 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:03,481 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:03,482 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:03,483 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-08 00:01:03,606 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:03,607 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:03,608 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:01:03,720 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:03,722 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:03,723 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:01:03,839 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:03,841 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:03,843 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:01:03,962 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:03,964 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:03,966 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:03,968 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-08 00:01:04,104 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:04,107 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:04,109 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:01:04,220 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:04,221 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:04,223 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:04,224 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-08 00:01:04,331 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:04,333 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:04,334 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:01:04,451 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:04,453 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:04,454 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:04,455 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-08 00:01:04,607 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:04,611 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:04,614 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:01:04,807 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:04,812 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:04,816 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:01:05,008 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-08 00:01:05,012 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:05,015 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-08 00:01:05,204 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:05,207 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:05,208 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-08 00:01:05,386 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:05,388 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:05,389 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:01:05,508 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-08 00:01:05,510 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:01:05,628 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:05,630 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:05,632 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:01:05,751 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:05,753 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:05,754 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-08 00:01:05,755 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-08 00:01:05,875 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:05,877 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:05,879 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:01:06,009 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:06,010 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:06,012 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:01:06,137 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:06,139 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:06,140 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:06,142 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-08 00:01:06,252 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:06,254 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:06,256 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:01:06,365 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:06,367 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:06,368 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:01:06,480 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:06,481 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:06,483 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:01:06,597 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:06,598 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:06,600 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:06,601 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:06,603 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-08 00:01:06,721 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:06,723 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:06,725 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:01:06,840 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:06,841 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:06,843 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:01:06,944 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:06,947 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:06,948 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2977]
2025-11-08 00:01:06,949 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-08 00:01:06,949 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-08 00:01:07,050 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:01:07,051 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 00:01:07,051 | INFO | sqlalchemy.engine.Engine | [cached since 1880s ago] ()
2025-11-08 00:01:07,058 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 00:01:07,059 | INFO | sqlalchemy.engine.Engine | [cached since 1847s ago] (1,)
2025-11-08 00:01:07,132 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-08 00:01:07,133 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023222416A90>}) about to wait for the following futures []
2025-11-08 00:01:07,135 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023222416A90>}) done waiting for dependent futures
2025-11-08 00:01:07,136 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023222416A90>}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'config': <boto3.s3.transfer.TransferConfig object at 0x00000232223C33D0>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002322233EBD0>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x0000023222427990>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023222416A90>}
2025-11-08 00:01:07,137 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/e9da70484dfb447d839336362a12e2c9.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x0000023222427990> for transfer request: 0.
2025-11-08 00:01:07,137 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-08 00:01:07,140 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/e9da70484dfb447d839336362a12e2c9.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-08 00:01:07,140 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-08 00:01:07,141 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/e9da70484dfb447d839336362a12e2c9.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-08 00:01:07,142 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/e9da70484dfb447d839336362a12e2c9.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x0000023222416110>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/e9da70484dfb447d839336362a12e2c9.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-08 00:01:07,843 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-08 00:01:17,450 | INFO | app.controllers.audio | Transcripción recibida session=08fd22f7-1621-4b61-9273-6b21d67e0d6c: coco radio posición relativa cachi. Juan Viñas, norte de Catch. manteniendo altitud. y rumbo hacia el norte.
2025-11-08 00:01:17,450 | INFO | app.logs.transcript | student | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=126.800 | text=coco radio posición relativa cachi. Juan Viñas, norte de Catch. manteniendo altitud. y rumbo hacia el norte.
2025-11-08 00:01:17,550 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:01:17,552 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-08 00:01:17,554 | INFO | sqlalchemy.engine.Engine | [cached since 1847s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-08 00:01:17,571 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 00:01:18,016 | WARNING | app.services.audio_pipeline | Intent detector invalid JSON: "Invalid error type: 'json_decode_error'" raw=```json
{
  "intent": "ground_position_report",
  "confidence": 0.9,
  "frequencyGroup": "ground"
}
```
2025-11-08 00:01:18,121 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:01:18,122 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-08 00:01:18,123 | INFO | sqlalchemy.engine.Engine | [cached since 1848s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-08 00:01:18,136 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-08 00:01:18,138 | INFO | sqlalchemy.engine.Engine | [cached since 1847s ago] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (38973 characters truncated) ... nd": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "unicom"}', datetime.datetime(2025, 11, 8, 6, 1, 18, 135681), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-08 00:01:18,164 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-08 00:01:18,212 | INFO | app.controllers.audio | Fase activa session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=radio_position_reporting intent=unicom_position_report freq=unicom
2025-11-08 00:01:18,213 | INFO | app.controllers.audio | Frecuencia fuera de rango intent=unicom_position_report freq=126.800 esperado=122.000
2025-11-08 00:01:18,372 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:01:18,373 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-08 00:01:18,374 | INFO | sqlalchemy.engine.Engine | [cached since 1848s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-08 00:01:18,384 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-08 00:01:18,385 | INFO | sqlalchemy.engine.Engine | [cached since 1847s ago] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (39392 characters truncated) ... nd": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "unicom"}', datetime.datetime(2025, 11, 8, 6, 1, 18, 383825), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-08 00:01:18,398 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-08 00:01:18,413 | INFO | app.controllers.audio | Error de frecuencia registrado session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=radio_position_reporting
2025-11-08 00:01:18,414 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.phase_scores (id, training_session_id, user_id, phase_id, score) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::VARCHAR, $5::FLOAT), ($6::UUID, $7::UUID, $8::INTEGER, $9::VARCHAR, $10::FLOAT) RETURNING ecowhiskey.phase_scores.created_at, ecowhiskey.phase_scores.id
2025-11-08 00:01:18,415 | INFO | sqlalchemy.engine.Engine | [cached since 1847s ago (insertmanyvalues) 1/1 (ordered)] (UUID('bc5d1eb3-8f6e-482c-a4e7-b02ed477a370'), UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'), 1, 'radio_position_reporting', 0.0, UUID('bed6c92e-5e65-4849-9ee5-55055bcfd19a'), UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'), 1, 'frequency_usage_error', 0.0)
2025-11-08 00:01:18,424 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-08 00:01:18,444 | INFO | app.controllers.audio | Puntuación guardada session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=radio_position_reporting score=0.00
2025-11-08 00:01:18,445 | INFO | app.logs.transcript | controller | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=126.800 | intent=unicom_position_report | phase=radio_position_reporting | allow_response=False | text=La frecuencia esperada para esta solicitud es 122.000.
2025-11-08 00:01:54,248 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-08 00:01:54,248 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-08 00:01:54,249 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-08 00:01:54,249 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-08 00:01:54,251 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-08 00:01:54,251 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-08 00:01:54,251 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-08 00:01:54,252 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-08 00:01:54,253 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-08 00:01:54,253 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-08 00:01:54,255 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-08 00:01:54,255 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-08 00:01:54,255 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-08 00:01:54,256 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-08 00:01:54,256 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-08 00:01:54,257 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-08 00:01:54,257 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-08 00:01:54,259 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-08 00:01:54,260 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:269]
2025-11-08 00:01:54,261 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-08 00:01:54,261 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-08 00:01:54,263 | DEBUG | python_multipart.multipart | Calling on_header_field with data[311:330]
2025-11-08 00:01:54,264 | DEBUG | python_multipart.multipart | Calling on_header_value with data[332:386]
2025-11-08 00:01:54,264 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-08 00:01:54,265 | DEBUG | python_multipart.multipart | Calling on_header_field with data[388:400]
2025-11-08 00:01:54,265 | DEBUG | python_multipart.multipart | Calling on_header_value with data[402:412]
2025-11-08 00:01:54,266 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-08 00:01:54,266 | DEBUG | python_multipart.multipart | Calling on_header_field with data[414:428]
2025-11-08 00:01:54,267 | DEBUG | python_multipart.multipart | Calling on_header_value with data[430:436]
2025-11-08 00:01:54,267 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-08 00:01:54,268 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-08 00:01:54,269 | DEBUG | python_multipart.multipart | Calling on_part_data with data[440:5840]
2025-11-08 00:01:54,270 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-08 00:01:54,387 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:54,387 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-08 00:01:54,389 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-08 00:01:54,505 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:54,507 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:54,509 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:01:54,678 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:54,681 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:54,685 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:01:54,907 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:54,911 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:54,915 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:01:55,121 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:55,124 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:55,127 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:01:55,313 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:55,316 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:55,319 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-08 00:01:55,463 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:55,465 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:55,466 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:55,468 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-08 00:01:55,592 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:55,593 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:55,595 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:55,595 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-08 00:01:55,719 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:55,720 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:55,722 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:55,723 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-08 00:01:55,843 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:55,845 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:55,847 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:01:55,970 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-08 00:01:55,972 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:01:56,100 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:56,102 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:56,104 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:01:56,253 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:56,255 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:56,257 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:56,259 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-08 00:01:56,377 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:56,378 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:56,380 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:56,381 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-08 00:01:56,494 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:56,495 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:56,496 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:56,499 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-08 00:01:56,617 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:56,619 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:56,621 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:56,623 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:56,625 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-08 00:01:56,744 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:56,745 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:56,746 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:01:56,863 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-08 00:01:56,864 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:01:56,985 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:56,986 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:56,988 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:01:57,104 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:57,106 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:57,107 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:01:57,231 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:57,232 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:57,235 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:01:57,371 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:57,373 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:57,375 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:01:57,493 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:57,495 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:57,495 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:01:57,613 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:57,615 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:57,616 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:01:57,740 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:57,742 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-08 00:01:57,743 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-08 00:01:57,867 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:57,869 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:57,869 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:01:57,959 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:01:57,962 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:01:57,963 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1827]
2025-11-08 00:01:57,964 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-08 00:01:57,964 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-08 00:01:58,059 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:01:58,060 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 00:01:58,061 | INFO | sqlalchemy.engine.Engine | [cached since 1931s ago] ()
2025-11-08 00:01:58,066 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 00:01:58,067 | INFO | sqlalchemy.engine.Engine | [cached since 1898s ago] (1,)
2025-11-08 00:01:58,135 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-08 00:01:58,137 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023222424A50>}) about to wait for the following futures []
2025-11-08 00:01:58,138 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023222424A50>}) done waiting for dependent futures
2025-11-08 00:01:58,139 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023222424A50>}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'config': <boto3.s3.transfer.TransferConfig object at 0x00000232223CCD50>, 'osutil': <s3transfer.utils.OSUtils object at 0x00000232223CCAD0>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x00000232223C0CD0>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023222424A50>}
2025-11-08 00:01:58,140 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/0732cc19008d46348bdce8650edaecea.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x00000232223C0CD0> for transfer request: 0.
2025-11-08 00:01:58,140 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-08 00:01:58,141 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/0732cc19008d46348bdce8650edaecea.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-08 00:01:58,141 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-08 00:01:58,142 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/0732cc19008d46348bdce8650edaecea.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-08 00:01:58,143 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/0732cc19008d46348bdce8650edaecea.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x00000232223C2A10>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/0732cc19008d46348bdce8650edaecea.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-08 00:01:58,873 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-08 00:02:08,368 | INFO | app.controllers.audio | Transcripción recibida session=08fd22f7-1621-4b61-9273-6b21d67e0d6c: Unicom. posición relativa cach Juan Viñas norte de Cach. manteniendo altitud a 7000 pies rumbo noreste Alfa Noviembre India.
2025-11-08 00:02:08,369 | INFO | app.logs.transcript | student | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=122.000 | text=Unicom. posición relativa cach Juan Viñas norte de Cach. manteniendo altitud a 7000 pies rumbo noreste Alfa Noviembre India.
2025-11-08 00:02:08,478 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:02:08,479 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-08 00:02:08,479 | INFO | sqlalchemy.engine.Engine | [cached since 1898s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-08 00:02:08,493 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 00:02:08,919 | WARNING | app.services.audio_pipeline | Intent detector invalid JSON: "Invalid error type: 'json_decode_error'" raw=```json
{
  "intent": "ground_position_report",
  "confidence": 0.9,
  "frequencyGroup": "ground"
}
```
2025-11-08 00:02:09,017 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:02:09,018 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-08 00:02:09,019 | INFO | sqlalchemy.engine.Engine | [cached since 1898s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-08 00:02:09,033 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-08 00:02:09,034 | INFO | sqlalchemy.engine.Engine | [cached since 1898s ago] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (39747 characters truncated) ... nd": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "unicom"}', datetime.datetime(2025, 11, 8, 6, 2, 9, 32789), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-08 00:02:09,048 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-08 00:02:09,073 | INFO | app.controllers.audio | Fase activa session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=radio_position_reporting intent=unicom_position_report freq=unicom
2025-11-08 00:02:09,075 | INFO | app.services.audio_pipeline | Prompts generados intent=unicom_position_report freq_group=unicom
SYSTEM> Durante operaciones en la zona ECO, el alumno emite reportes auto-gestionados en UNICOM (122.0). Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "score": number | null,
  "metadata": object
 }.
El campo "score" debe ser un número de 0 a 100 que evalúe la calidad de la transmisión del alumno para la fase actual, considerando: fraseolog...
USER> Fase actual: Reportes en UNICOM y chequeos periódicos
Intent esperado: unicom_position_report
Transcripción textual del alumno:
Unicom. posición relativa cach Juan Viñas norte de Cach. manteniendo altitud a 7000 pies rumbo noreste Alfa Noviembre India.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: unicom
- Fase ID: radio_position_reporting

Checklist alumno:
- Anunciar posición relativa (Cachí, Juan Viñas, norte de Cachí).
- Mantener altitud y rumbo en el mensaje.
- Identific...
2025-11-08 00:02:10,649 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=unicom_position_report: {
  "intent": "unicom_position_report",
  "allowResponse": false,
  "controllerText": null,
  "feedback": "El alumno ha cumplido adecuadamente con informar su posición relativa, altitud y rumbo en UNICOM, no es necesario una respuesta del controlador en este entorno aire-aire.",
  "confidence": 0.95,
  "score": 95,
  "metadata": {
    "missingInformation": null,
    "nextPhase": "radio_exit_zone"
  }
}
2025-11-08 00:02:10,650 | INFO | app.controllers.audio | Transición automática de fase session=08fd22f7-1621-4b61-9273-6b21d67e0d6c de=radio_position_reporting a=radio_exit_zone
2025-11-08 00:02:10,748 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:02:10,749 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-08 00:02:10,750 | INFO | sqlalchemy.engine.Engine | [cached since 1900s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-08 00:02:10,762 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-08 00:02:10,763 | INFO | sqlalchemy.engine.Engine | [cached since 1899s ago] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (40662 characters truncated) ... und": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "radio"}', datetime.datetime(2025, 11, 8, 6, 2, 10, 761185), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-08 00:02:10,776 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-08 00:02:10,790 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.phase_scores (id, training_session_id, user_id, phase_id, score) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::VARCHAR, $5::FLOAT) RETURNING ecowhiskey.phase_scores.created_at
2025-11-08 00:02:10,791 | INFO | sqlalchemy.engine.Engine | [cached since 1783s ago] (UUID('9124f0bd-e539-4110-a30d-f4ea3df2c760'), UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'), 1, 'radio_exit_zone', 95.0)
2025-11-08 00:02:10,798 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-08 00:02:10,817 | INFO | app.controllers.audio | Puntuación guardada session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=radio_exit_zone score=95.00
2025-11-08 00:02:10,818 | INFO | app.logs.transcript | controller | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=122.000 | intent=unicom_position_report | phase=radio_exit_zone | allow_response=False | text=
2025-11-08 00:02:58,092 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-08 00:02:58,093 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-08 00:02:58,094 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-08 00:02:58,094 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-08 00:02:58,094 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-08 00:02:58,096 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-08 00:02:58,096 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-08 00:02:58,097 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-08 00:02:58,097 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-08 00:02:58,097 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-08 00:02:58,098 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-08 00:02:58,099 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-08 00:02:58,100 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-08 00:02:58,100 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-08 00:02:58,101 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-08 00:02:58,102 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-08 00:02:58,103 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-08 00:02:58,104 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-08 00:02:58,104 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:269]
2025-11-08 00:02:58,106 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-08 00:02:58,107 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-08 00:02:58,108 | DEBUG | python_multipart.multipart | Calling on_header_field with data[311:330]
2025-11-08 00:02:58,108 | DEBUG | python_multipart.multipart | Calling on_header_value with data[332:386]
2025-11-08 00:02:58,108 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-08 00:02:58,109 | DEBUG | python_multipart.multipart | Calling on_header_field with data[388:400]
2025-11-08 00:02:58,109 | DEBUG | python_multipart.multipart | Calling on_header_value with data[402:412]
2025-11-08 00:02:58,110 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-08 00:02:58,110 | DEBUG | python_multipart.multipart | Calling on_header_field with data[414:428]
2025-11-08 00:02:58,111 | DEBUG | python_multipart.multipart | Calling on_header_value with data[430:436]
2025-11-08 00:02:58,111 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-08 00:02:58,112 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-08 00:02:58,112 | DEBUG | python_multipart.multipart | Calling on_part_data with data[440:2920]
2025-11-08 00:02:58,115 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-08 00:02:58,223 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:02:58,224 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-08 00:02:58,225 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-08 00:02:58,342 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:02:58,343 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:02:58,344 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:02:58,460 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-08 00:02:58,462 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:02:58,577 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:02:58,579 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:02:58,580 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-08 00:02:58,701 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:02:58,703 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:02:58,704 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:02:58,817 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:02:58,818 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:02:58,819 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:02:58,822 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-08 00:02:58,931 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:02:58,933 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:02:58,934 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:02:59,053 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:02:59,054 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:02:59,056 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:02:59,186 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:02:59,187 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:02:59,188 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:02:59,306 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:02:59,307 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:02:59,308 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:02:59,309 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-08 00:02:59,424 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:02:59,426 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-08 00:02:59,542 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:02:59,543 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:02:59,545 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:02:59,546 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-08 00:02:59,665 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-08 00:02:59,669 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:02:59,670 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:02:59,672 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-08 00:02:59,792 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:02:59,792 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:02:59,794 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:02:59,908 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:02:59,909 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:02:59,910 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:03:00,010 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:03:00,013 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:03:00,015 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3750]
2025-11-08 00:03:00,016 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-08 00:03:00,017 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-08 00:03:00,122 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:03:00,123 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 00:03:00,124 | INFO | sqlalchemy.engine.Engine | [cached since 1993s ago] ()
2025-11-08 00:03:00,129 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 00:03:00,130 | INFO | sqlalchemy.engine.Engine | [cached since 1960s ago] (1,)
2025-11-08 00:03:00,203 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-08 00:03:00,206 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000232223C1DD0>}) about to wait for the following futures []
2025-11-08 00:03:00,207 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000232223C1DD0>}) done waiting for dependent futures
2025-11-08 00:03:00,207 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000232223C1DD0>}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'config': <boto3.s3.transfer.TransferConfig object at 0x00000232224528D0>, 'osutil': <s3transfer.utils.OSUtils object at 0x00000232224537D0>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x0000023222450CD0>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000232223C1DD0>}
2025-11-08 00:03:00,208 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/4f64859d81bd4286bc9e11247b73725b.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x0000023222450CD0> for transfer request: 0.
2025-11-08 00:03:00,209 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-08 00:03:00,211 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/4f64859d81bd4286bc9e11247b73725b.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-08 00:03:00,211 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-08 00:03:00,212 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/4f64859d81bd4286bc9e11247b73725b.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-08 00:03:00,212 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/4f64859d81bd4286bc9e11247b73725b.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x0000023222451350>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/4f64859d81bd4286bc9e11247b73725b.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-08 00:03:00,868 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-08 00:03:10,596 | INFO | app.controllers.audio | Transcripción recibida session=08fd22f7-1621-4b61-9273-6b21d67e0d6c: Ecom informo abandono de zona destino pavas.
2025-11-08 00:03:10,598 | INFO | app.logs.transcript | student | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=122.000 | text=Ecom informo abandono de zona destino pavas.
2025-11-08 00:03:10,698 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:03:10,698 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-08 00:03:10,699 | INFO | sqlalchemy.engine.Engine | [cached since 1960s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-08 00:03:10,711 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 00:03:11,188 | WARNING | app.services.audio_pipeline | Intent detector invalid JSON: "Invalid error type: 'json_decode_error'" raw=```json
{
  "intent": "ground_taxi_clearance_to_destination",
  "confidence": 0.9,
  "frequencyGroup": "ground"
}
```
2025-11-08 00:03:11,284 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:03:11,286 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-08 00:03:11,287 | INFO | sqlalchemy.engine.Engine | [cached since 1961s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-08 00:03:11,299 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-08 00:03:11,300 | INFO | sqlalchemy.engine.Engine | [cached since 1960s ago] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (40925 characters truncated) ... und": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "radio"}', datetime.datetime(2025, 11, 8, 6, 3, 11, 299213), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-08 00:03:11,313 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-08 00:03:11,337 | INFO | app.controllers.audio | Fase activa session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=radio_exit_zone intent=radio_exit_zone freq=radio
2025-11-08 00:03:11,338 | INFO | app.controllers.audio | Frecuencia fuera de rango intent=radio_exit_zone freq=122.000 esperado=126.800
2025-11-08 00:03:11,441 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:03:11,442 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-08 00:03:11,443 | INFO | sqlalchemy.engine.Engine | [cached since 1961s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-08 00:03:11,455 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-08 00:03:11,456 | INFO | sqlalchemy.engine.Engine | [cached since 1960s ago] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (41327 characters truncated) ... und": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "radio"}', datetime.datetime(2025, 11, 8, 6, 3, 11, 454237), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-08 00:03:11,467 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-08 00:03:11,480 | INFO | app.controllers.audio | Error de frecuencia registrado session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=radio_exit_zone
2025-11-08 00:03:11,482 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.phase_scores (id, training_session_id, user_id, phase_id, score) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::VARCHAR, $5::FLOAT), ($6::UUID, $7::UUID, $8::INTEGER, $9::VARCHAR, $10::FLOAT) RETURNING ecowhiskey.phase_scores.created_at, ecowhiskey.phase_scores.id
2025-11-08 00:03:11,483 | INFO | sqlalchemy.engine.Engine | [cached since 1960s ago (insertmanyvalues) 1/1 (ordered)] (UUID('9efc529e-b2a0-4469-9068-29c2371e4ed6'), UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'), 1, 'radio_exit_zone', 0.0, UUID('3663da96-7fea-4f94-92b7-e5e3b7c81404'), UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'), 1, 'frequency_usage_error', 0.0)
2025-11-08 00:03:11,491 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-08 00:03:11,512 | INFO | app.controllers.audio | Puntuación guardada session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=radio_exit_zone score=0.00
2025-11-08 00:03:11,512 | INFO | app.logs.transcript | controller | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=122.000 | intent=radio_exit_zone | phase=radio_exit_zone | allow_response=False | text=La frecuencia esperada para esta solicitud es 126.800.
2025-11-08 00:04:06,541 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-08 00:04:06,541 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-08 00:04:06,542 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-08 00:04:06,543 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-08 00:04:06,543 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-08 00:04:06,544 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-08 00:04:06,545 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-08 00:04:06,546 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-08 00:04:06,547 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-08 00:04:06,548 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-08 00:04:06,549 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-08 00:04:06,550 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-08 00:04:06,551 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-08 00:04:06,552 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-08 00:04:06,553 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-08 00:04:06,555 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-08 00:04:06,556 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-08 00:04:06,557 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-08 00:04:06,559 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:269]
2025-11-08 00:04:06,560 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-08 00:04:06,561 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-08 00:04:06,562 | DEBUG | python_multipart.multipart | Calling on_header_field with data[311:330]
2025-11-08 00:04:06,563 | DEBUG | python_multipart.multipart | Calling on_header_value with data[332:386]
2025-11-08 00:04:06,563 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-08 00:04:06,565 | DEBUG | python_multipart.multipart | Calling on_header_field with data[388:400]
2025-11-08 00:04:06,566 | DEBUG | python_multipart.multipart | Calling on_header_value with data[402:412]
2025-11-08 00:04:06,567 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-08 00:04:06,568 | DEBUG | python_multipart.multipart | Calling on_header_field with data[414:428]
2025-11-08 00:04:06,568 | DEBUG | python_multipart.multipart | Calling on_header_value with data[430:436]
2025-11-08 00:04:06,569 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-08 00:04:06,570 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-08 00:04:06,570 | DEBUG | python_multipart.multipart | Calling on_part_data with data[440:5840]
2025-11-08 00:04:06,571 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-08 00:04:06,663 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:04:06,666 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:04:06,666 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:04:06,788 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:04:06,790 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:04:06,791 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:04:06,912 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2919]
2025-11-08 00:04:06,914 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1]
2025-11-08 00:04:06,915 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:04:06,916 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:04:06,917 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-08 00:04:07,038 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:04:07,039 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:04:07,040 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:04:07,157 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:04:07,158 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:04:07,159 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:04:07,279 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:04:07,280 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:04:07,281 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:04:07,398 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:04:07,399 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:04:07,401 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:04:07,527 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:04:07,529 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:04:07,531 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:04:07,533 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-08 00:04:07,657 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:04:07,659 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:04:07,661 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:04:07,776 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:04:07,778 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:04:07,781 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:04:07,784 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:04:07,903 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:04:07,906 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:04:07,907 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:04:07,909 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-08 00:04:08,019 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:04:08,021 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:04:08,022 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:04:08,024 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-08 00:04:08,137 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:04:08,139 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:04:08,140 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:04:08,255 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:04:08,256 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:04:08,258 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:04:08,375 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-08 00:04:08,376 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:04:08,493 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:04:08,495 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:04:08,497 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:04:08,611 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:04:08,613 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:04:08,615 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:04:08,736 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:04:08,738 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:04:08,739 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:04:08,854 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-08 00:04:08,855 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:04:08,969 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-08 00:04:08,971 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:04:09,081 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-08 00:04:09,083 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:04:09,085 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-08 00:04:09,198 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-08 00:04:09,200 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:04:09,201 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-08 00:04:09,261 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-08 00:04:09,263 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1285]
2025-11-08 00:04:09,263 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-08 00:04:09,265 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-08 00:04:09,365 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:04:09,365 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 00:04:09,366 | INFO | sqlalchemy.engine.Engine | [cached since 2063s ago] ()
2025-11-08 00:04:09,373 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 00:04:09,373 | INFO | sqlalchemy.engine.Engine | [cached since 2030s ago] (1,)
2025-11-08 00:04:09,436 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-08 00:04:09,438 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000232223C2E90>}) about to wait for the following futures []
2025-11-08 00:04:09,439 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000232223C2E90>}) done waiting for dependent futures
2025-11-08 00:04:09,439 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000232223C2E90>}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'config': <boto3.s3.transfer.TransferConfig object at 0x00000232224525D0>, 'osutil': <s3transfer.utils.OSUtils object at 0x0000023222450650>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x00000232223A4B90>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000232223C2E90>}
2025-11-08 00:04:09,439 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/25409a2005144050979c8de2ac4684e8.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x00000232223A4B90> for transfer request: 0.
2025-11-08 00:04:09,440 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-08 00:04:09,441 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/25409a2005144050979c8de2ac4684e8.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-08 00:04:09,441 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-08 00:04:09,441 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/25409a2005144050979c8de2ac4684e8.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-08 00:04:09,443 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/25409a2005144050979c8de2ac4684e8.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x0000023221AF4C10>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x00000232223C2F10>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/08fd22f7-1621-4b61-9273-6b21d67e0d6c/25409a2005144050979c8de2ac4684e8.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-08 00:04:10,205 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-08 00:04:19,896 | INFO | app.controllers.audio | Transcripción recibida session=08fd22f7-1621-4b61-9273-6b21d67e0d6c: coco aproximación. informo salida de zona Eco. destino paz.
2025-11-08 00:04:19,897 | INFO | app.logs.transcript | student | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=126.800 | text=coco aproximación. informo salida de zona Eco. destino paz.
2025-11-08 00:04:19,992 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:04:19,993 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-08 00:04:19,993 | INFO | sqlalchemy.engine.Engine | [cached since 2029s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-08 00:04:20,006 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 00:04:20,449 | WARNING | app.services.audio_pipeline | Intent detector invalid JSON: "Invalid error type: 'json_decode_error'" raw=```json
{
  "intent": "approach_departure_report",
  "confidence": 0.95,
  "frequencyGroup": "approach"
}
```
2025-11-08 00:04:20,562 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:04:20,563 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-08 00:04:20,565 | INFO | sqlalchemy.engine.Engine | [cached since 2030s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-08 00:04:20,581 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-08 00:04:20,581 | INFO | sqlalchemy.engine.Engine | [cached since 2029s ago] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "stu ... (41611 characters truncated) ... und": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "radio"}', datetime.datetime(2025, 11, 8, 6, 4, 20, 580988), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-08 00:04:20,596 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-08 00:04:20,623 | INFO | app.controllers.audio | Fase activa session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=radio_exit_zone intent=radio_exit_zone freq=radio
2025-11-08 00:04:20,626 | INFO | app.services.audio_pipeline | Prompts generados intent=radio_exit_zone freq_group=radio
SYSTEM> COCO Radio recibe notificación de salida; debes transferirlo a Aproximación. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "score": number | null,
  "metadata": object
 }.
El campo "score" debe ser un número de 0 a 100 que evalúe la calidad de la transmisión del alumno para la fase actual, considerando: fraseología correcta, informa...
USER> Fase actual: Salida de Zona ECO y transferencia a Aproximación
Intent esperado: radio_exit_zone
Transcripción textual del alumno:
coco aproximación. informo salida de zona Eco. destino paz.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: radio
- Fase ID: radio_exit_zone

Checklist alumno:
- Informar abandono de la zona y destino Pavas.

Checklist controlador:
- Acusar recibo.
- Transferir a COCO Aproximación 120.5.

Cuándo responder:
- Responde siempre.

Guía de feedback:
- Si ...
2025-11-08 00:04:22,256 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=radio_exit_zone: {
  "intent": "radio_exit_zone",
  "allowResponse": true,
  "controllerText": "COCO Radio, confirmo salida de Zona ECO. Buena suerte en Pavas, buen día.",
  "feedback": "Información completa y correcta. Sin embargo, mencionaste 'destino paz' en lugar de 'destino Pavas'.",
  "confidence": 90,
  "score": 85,
  "metadata": {
    "missingInfo": "Destino",
    "nextPhase": "approach_return_contact"
  }
}
2025-11-08 00:04:22,258 | INFO | app.controllers.audio | Transición automática de fase session=08fd22f7-1621-4b61-9273-6b21d67e0d6c de=radio_exit_zone a=approach_return_contact
2025-11-08 00:04:22,363 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:04:22,365 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-08 00:04:22,366 | INFO | sqlalchemy.engine.Engine | [cached since 2032s ago] (UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'),)
2025-11-08 00:04:22,379 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-08 00:04:22,380 | INFO | sqlalchemy.engine.Engine | [cached since 2031s ago] ('{"meteo": {"qnh": "3002", "vis": "", "wind": "", "condition": "", "windSpeed": 8, "windDirection": 80}, "route": "MRPV-MRPV", "turns": [{"role": "con ... (42194 characters truncated) ... ": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0555", "default_frequency_group": "approach"}', datetime.datetime(2025, 11, 8, 6, 4, 22, 378968), UUID('a7d936d3-fd68-4a1a-8cdd-1de8624e32ba'))
2025-11-08 00:04:22,435 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-08 00:04:22,452 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.phase_scores (id, training_session_id, user_id, phase_id, score) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::VARCHAR, $5::FLOAT) RETURNING ecowhiskey.phase_scores.created_at
2025-11-08 00:04:22,453 | INFO | sqlalchemy.engine.Engine | [cached since 1914s ago] (UUID('c812f493-d15f-47a1-afed-aea98226040a'), UUID('08fd22f7-1621-4b61-9273-6b21d67e0d6c'), 1, 'approach_return_contact', 85.0)
2025-11-08 00:04:22,461 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-08 00:04:22,489 | INFO | app.controllers.audio | Puntuación guardada session=08fd22f7-1621-4b61-9273-6b21d67e0d6c phase_id=approach_return_contact score=85.00
2025-11-08 00:04:22,490 | INFO | app.logs.transcript | controller | session=08fd22f7-1621-4b61-9273-6b21d67e0d6c | frequency=126.800 | intent=radio_exit_zone | phase=approach_return_contact | allow_response=True | text=COCO Radio, confirmo salida de Zona ECO. Buena suerte en Pavas, buen día.
2025-11-08 00:06:40,499 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-08 00:06:40,500 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-08 00:06:40,506 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-08 00:06:40,506 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-08 00:06:40,513 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-08 00:06:40,513 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-08 00:06:40,518 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:06:40,519 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-08 00:06:40,520 | INFO | sqlalchemy.engine.Engine | [generated in 0.00074s] ()
2025-11-08 00:06:40,524 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 00:06:40,524 | INFO | sqlalchemy.engine.Engine | [generated in 0.00067s] ()
2025-11-08 00:06:40,530 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 00:06:40,530 | INFO | sqlalchemy.engine.Engine | [generated in 0.00114s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 00:06:40,546 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 00:06:40,547 | INFO | sqlalchemy.engine.Engine | [cached since 0.01848s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 00:06:40,550 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 00:06:40,551 | INFO | sqlalchemy.engine.Engine | [cached since 0.02225s ago] ('phase_scores', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 00:06:40,553 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 00:06:40,554 | INFO | sqlalchemy.engine.Engine | [cached since 0.02528s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 00:06:40,556 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 00:06:40,557 | INFO | sqlalchemy.engine.Engine | [cached since 0.02829s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 00:06:40,559 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 00:06:40,561 | INFO | sqlalchemy.engine.Engine | [cached since 0.03237s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 00:06:40,567 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-08 00:06:40,568 | INFO | sqlalchemy.engine.Engine | [generated in 0.00094s] ('user_status', 'pg_catalog')
2025-11-08 00:06:40,571 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-08 00:06:40,573 | INFO | sqlalchemy.engine.Engine | [cached since 0.006078s ago] ('account_type', 'pg_catalog')
2025-11-08 00:06:40,576 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-08 00:06:40,576 | INFO | sqlalchemy.engine.Engine | [generated in 0.00055s] ()
2025-11-08 00:06:40,581 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-08 00:06:40,583 | INFO | sqlalchemy.engine.Engine | [generated in 0.00089s] ()
2025-11-08 00:06:40,596 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-08 00:06:40,598 | INFO | sqlalchemy.engine.Engine | [generated in 0.00211s] ()
2025-11-08 00:06:40,658 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-08 00:06:40,689 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-08 00:16:15,179 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:16:15,180 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 00:16:15,181 | INFO | sqlalchemy.engine.Engine | [cached since 574.7s ago] ()
2025-11-08 00:16:15,191 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 00:17:38,245 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:17:38,246 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 00:17:38,247 | INFO | sqlalchemy.engine.Engine | [cached since 657.7s ago] ()
2025-11-08 00:17:38,255 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 00:18:10,530 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:18:10,531 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 00:18:10,532 | INFO | sqlalchemy.engine.Engine | [cached since 690s ago] ()
2025-11-08 00:18:10,540 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 00:20:34,814 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:20:34,816 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 00:20:34,817 | INFO | sqlalchemy.engine.Engine | [cached since 834.3s ago] ()
2025-11-08 00:20:34,824 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 00:20:34,869 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:20:34,871 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 00:20:34,872 | INFO | sqlalchemy.engine.Engine | [cached since 834.3s ago] ()
2025-11-08 00:20:34,878 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 00:20:42,712 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:20:42,713 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 00:20:42,714 | INFO | sqlalchemy.engine.Engine | [cached since 842.2s ago] ()
2025-11-08 00:20:42,718 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 00:21:10,941 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:21:10,941 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 00:21:10,942 | INFO | sqlalchemy.engine.Engine | [cached since 870.4s ago] ()
2025-11-08 00:21:10,964 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.email = $1::VARCHAR
2025-11-08 00:21:10,966 | INFO | sqlalchemy.engine.Engine | [generated in 0.00183s] ('josuelu4@gmail.com',)
2025-11-08 00:21:11,088 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 00:21:12,896 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:21:12,896 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 00:21:12,896 | INFO | sqlalchemy.engine.Engine | [cached since 872.4s ago] ()
2025-11-08 00:21:12,904 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 00:21:12,905 | INFO | sqlalchemy.engine.Engine | [generated in 0.00134s] (2,)
2025-11-08 00:21:12,973 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 00:21:12,974 | INFO | sqlalchemy.engine.Engine | [cached since 0.06948s ago] (2,)
2025-11-08 00:21:12,977 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 00:21:24,330 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:21:24,330 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 00:21:24,332 | INFO | sqlalchemy.engine.Engine | [cached since 883.8s ago] ()
2025-11-08 00:21:24,336 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 00:21:24,337 | INFO | sqlalchemy.engine.Engine | [cached since 11.43s ago] (2,)
2025-11-08 00:21:24,408 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.training_contexts (id, training_session_id, user_id, context) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::JSONB) RETURNING ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at
2025-11-08 00:21:24,409 | INFO | sqlalchemy.engine.Engine | [generated in 0.00096s] (UUID('c520e521-717a-4b27-a931-04e3d7fb469f'), UUID('98d2f819-25c0-49fa-bbd1-b5611c774b66'), 2, '{"route": "MRPV-MRPV", "meteo": {"condition": "", "vis": "", "qnh": "", "windDirection": "", "windSpeed": "", "wind": ""}, "scenario_id": "mrpv_full_flight"}')
2025-11-08 00:21:24,417 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-08 00:21:24,550 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:21:24,554 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.id = $1::UUID
2025-11-08 00:21:24,554 | INFO | sqlalchemy.engine.Engine | [generated in 0.00122s] (UUID('c520e521-717a-4b27-a931-04e3d7fb469f'),)
2025-11-08 00:21:24,567 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 00:31:12,040 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:31:12,041 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 00:31:12,041 | INFO | sqlalchemy.engine.Engine | [cached since 1472s ago] ()
2025-11-08 00:31:12,048 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.email = $1::VARCHAR
2025-11-08 00:31:12,049 | INFO | sqlalchemy.engine.Engine | [cached since 601.1s ago] ('josuelu3@gmail.com',)
2025-11-08 00:31:12,167 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 00:31:13,652 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:31:13,653 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 00:31:13,653 | INFO | sqlalchemy.engine.Engine | [cached since 1473s ago] ()
2025-11-08 00:31:13,660 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 00:31:13,661 | INFO | sqlalchemy.engine.Engine | [cached since 600.8s ago] (1,)
2025-11-08 00:31:13,728 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 00:31:13,729 | INFO | sqlalchemy.engine.Engine | [cached since 600.8s ago] (1,)
2025-11-08 00:31:13,733 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 00:31:52,320 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:31:52,321 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 00:31:52,322 | INFO | sqlalchemy.engine.Engine | [cached since 1512s ago] ()
2025-11-08 00:31:52,327 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 00:31:52,327 | INFO | sqlalchemy.engine.Engine | [cached since 639.4s ago] (1,)
2025-11-08 00:31:52,402 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.training_contexts (id, training_session_id, user_id, context) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::JSONB) RETURNING ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at
2025-11-08 00:31:52,403 | INFO | sqlalchemy.engine.Engine | [cached since 628s ago] (UUID('8b2fcc94-68e0-4c57-a0f6-631a85f61014'), UUID('ee51a737-2659-43f4-a420-5076fda0a563'), 1, '{"route": "MRPV-MRPV", "meteo": {"condition": "VMC", "vis": "3km", "qnh": "982", "windDirection": "040", "windSpeed": "3", "wind": "040/3"}, "scenario_id": "mrpv_full_flight"}')
2025-11-08 00:31:52,410 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-08 00:31:52,540 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:31:52,541 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.id = $1::UUID
2025-11-08 00:31:52,542 | INFO | sqlalchemy.engine.Engine | [cached since 628s ago] (UUID('8b2fcc94-68e0-4c57-a0f6-631a85f61014'),)
2025-11-08 00:31:52,553 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 00:32:02,335 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:32:02,336 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 00:32:02,336 | INFO | sqlalchemy.engine.Engine | [cached since 1522s ago] ()
2025-11-08 00:32:02,343 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 00:32:02,344 | INFO | sqlalchemy.engine.Engine | [cached since 649.4s ago] (1,)
2025-11-08 00:32:02,421 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.training_contexts (id, training_session_id, user_id, context) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::JSONB) RETURNING ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at
2025-11-08 00:32:02,422 | INFO | sqlalchemy.engine.Engine | [cached since 638s ago] (UUID('79e551d7-0f8e-454a-b0c0-1d14b9630313'), UUID('78c7a4bb-242f-416b-b8f2-e812fec059d8'), 1, '{"route": "MRPV-MRPV", "meteo": {"condition": "VMC", "vis": "3km", "qnh": "982", "windDirection": "040", "windSpeed": "3", "wind": "040/3"}, "scenario_id": "mrpv_full_flight"}')
2025-11-08 00:32:02,431 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-08 00:32:02,582 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:32:02,582 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.id = $1::UUID
2025-11-08 00:32:02,584 | INFO | sqlalchemy.engine.Engine | [cached since 638s ago] (UUID('79e551d7-0f8e-454a-b0c0-1d14b9630313'),)
2025-11-08 00:32:02,595 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 00:32:23,019 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:32:23,020 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 00:32:23,021 | INFO | sqlalchemy.engine.Engine | [cached since 1542s ago] ()
2025-11-08 00:32:23,027 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.email = $1::VARCHAR
2025-11-08 00:32:23,029 | INFO | sqlalchemy.engine.Engine | [cached since 672.1s ago] ('josuelu3@gmail.com',)
2025-11-08 00:32:23,155 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 00:32:57,074 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:32:57,074 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 00:32:57,075 | INFO | sqlalchemy.engine.Engine | [cached since 1577s ago] ()
2025-11-08 00:32:57,080 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 00:32:57,080 | INFO | sqlalchemy.engine.Engine | [cached since 704.2s ago] (1,)
2025-11-08 00:32:57,161 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.training_contexts (id, training_session_id, user_id, context) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::JSONB) RETURNING ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at
2025-11-08 00:32:57,162 | INFO | sqlalchemy.engine.Engine | [cached since 692.8s ago] (UUID('c837fdab-8413-478f-bed8-a9ae16191c33'), UUID('0c4d5131-9e79-42bb-91ed-affb31d74d73'), 1, '{"route": "MRPV-MRPV", "meteo": {"condition": "", "vis": "", "qnh": "", "windDirection": "", "windSpeed": "", "wind": ""}, "scenario_id": "mrpv_full_flight"}')
2025-11-08 00:32:57,171 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-08 00:32:57,308 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:32:57,309 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.id = $1::UUID
2025-11-08 00:32:57,311 | INFO | sqlalchemy.engine.Engine | [cached since 692.8s ago] (UUID('c837fdab-8413-478f-bed8-a9ae16191c33'),)
2025-11-08 00:32:57,322 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 00:35:47,347 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:35:47,348 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 00:35:47,348 | INFO | sqlalchemy.engine.Engine | [cached since 1747s ago] ()
2025-11-08 00:35:47,355 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 00:35:47,356 | INFO | sqlalchemy.engine.Engine | [cached since 874.5s ago] (1,)
2025-11-08 00:35:47,400 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:35:47,402 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 00:35:47,402 | INFO | sqlalchemy.engine.Engine | [cached since 1747s ago] ()
2025-11-08 00:35:47,409 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 00:35:47,410 | INFO | sqlalchemy.engine.Engine | [cached since 874.5s ago] (1,)
2025-11-08 00:35:47,426 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 00:35:47,516 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.user_id = $1::INTEGER ORDER BY ecowhiskey.training_contexts.created_at DESC 
 LIMIT $2::INTEGER
2025-11-08 00:35:47,517 | INFO | sqlalchemy.engine.Engine | [generated in 0.00105s] (1, 3)
2025-11-08 00:35:47,531 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 00:35:57,704 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:35:57,705 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 00:35:57,705 | INFO | sqlalchemy.engine.Engine | [cached since 1757s ago] ()
2025-11-08 00:35:57,711 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 00:35:57,713 | INFO | sqlalchemy.engine.Engine | [cached since 884.8s ago] (1,)
2025-11-08 00:35:57,797 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.user_id = $1::INTEGER ORDER BY ecowhiskey.training_contexts.created_at DESC 
 LIMIT $2::INTEGER
2025-11-08 00:35:57,798 | INFO | sqlalchemy.engine.Engine | [cached since 10.28s ago] (1, 3)
2025-11-08 00:35:57,814 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 00:35:59,128 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:35:59,129 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 00:35:59,131 | INFO | sqlalchemy.engine.Engine | [cached since 1759s ago] ()
2025-11-08 00:35:59,137 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 00:35:59,138 | INFO | sqlalchemy.engine.Engine | [cached since 886.2s ago] (1,)
2025-11-08 00:35:59,208 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.user_id = $1::INTEGER ORDER BY ecowhiskey.training_contexts.created_at DESC 
 LIMIT $2::INTEGER
2025-11-08 00:35:59,208 | INFO | sqlalchemy.engine.Engine | [cached since 11.69s ago] (1, 3)
2025-11-08 00:35:59,218 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 00:36:02,824 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:36:02,824 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 00:36:02,825 | INFO | sqlalchemy.engine.Engine | [cached since 1762s ago] ()
2025-11-08 00:36:02,830 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 00:36:02,831 | INFO | sqlalchemy.engine.Engine | [cached since 889.9s ago] (1,)
2025-11-08 00:36:02,899 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.user_id = $1::INTEGER ORDER BY ecowhiskey.training_contexts.created_at DESC 
 LIMIT $2::INTEGER
2025-11-08 00:36:02,900 | INFO | sqlalchemy.engine.Engine | [cached since 15.38s ago] (1, 3)
2025-11-08 00:36:02,913 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 00:36:18,431 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:36:18,432 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 00:36:18,433 | INFO | sqlalchemy.engine.Engine | [cached since 1778s ago] ()
2025-11-08 00:36:18,440 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 00:36:18,441 | INFO | sqlalchemy.engine.Engine | [cached since 905.5s ago] (1,)
2025-11-08 00:36:18,511 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.training_contexts (id, training_session_id, user_id, context) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::JSONB) RETURNING ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at
2025-11-08 00:36:18,513 | INFO | sqlalchemy.engine.Engine | [cached since 894.1s ago] (UUID('4a230ffb-af7f-49df-a047-58e47c2beaea'), UUID('be1949c5-6897-47ea-946d-df5b7805e451'), 1, '{"route": "MRPV-MRPV", "meteo": {"condition": "", "vis": "", "qnh": "", "windDirection": "", "windSpeed": "", "wind": ""}, "scenario_id": "mrpv_full_flight"}')
2025-11-08 00:36:18,521 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-08 00:36:18,649 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 00:36:18,651 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.id = $1::UUID
2025-11-08 00:36:18,653 | INFO | sqlalchemy.engine.Engine | [cached since 894.1s ago] (UUID('4a230ffb-af7f-49df-a047-58e47c2beaea'),)
2025-11-08 00:36:18,662 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:14:22,965 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-08 07:14:22,974 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-08 07:14:23,000 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-08 07:14:23,001 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-08 07:14:23,023 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-08 07:14:23,024 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-08 07:14:23,028 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:14:23,032 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-08 07:14:23,034 | INFO | sqlalchemy.engine.Engine | [generated in 0.00144s] ()
2025-11-08 07:14:23,057 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:14:23,058 | INFO | sqlalchemy.engine.Engine | [generated in 0.00064s] ()
2025-11-08 07:14:23,065 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 07:14:23,067 | INFO | sqlalchemy.engine.Engine | [generated in 0.00108s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 07:14:23,161 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 07:14:23,162 | INFO | sqlalchemy.engine.Engine | [cached since 0.09561s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 07:14:23,165 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 07:14:23,166 | INFO | sqlalchemy.engine.Engine | [cached since 0.1003s ago] ('phase_scores', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 07:14:23,170 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 07:14:23,172 | INFO | sqlalchemy.engine.Engine | [cached since 0.1055s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 07:14:23,176 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 07:14:23,177 | INFO | sqlalchemy.engine.Engine | [cached since 0.1116s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 07:14:23,182 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 07:14:23,185 | INFO | sqlalchemy.engine.Engine | [cached since 0.1188s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 07:14:23,191 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-08 07:14:23,191 | INFO | sqlalchemy.engine.Engine | [generated in 0.00108s] ('user_status', 'pg_catalog')
2025-11-08 07:14:23,207 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-08 07:14:23,208 | INFO | sqlalchemy.engine.Engine | [cached since 0.01636s ago] ('account_type', 'pg_catalog')
2025-11-08 07:14:23,214 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-08 07:14:23,216 | INFO | sqlalchemy.engine.Engine | [generated in 0.00187s] ()
2025-11-08 07:14:23,297 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-08 07:14:23,297 | INFO | sqlalchemy.engine.Engine | [generated in 0.00090s] ()
2025-11-08 07:14:23,402 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-08 07:14:23,403 | INFO | sqlalchemy.engine.Engine | [generated in 0.00135s] ()
2025-11-08 07:14:23,837 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-08 07:14:23,916 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-08 07:43:53,674 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:43:53,675 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:43:53,676 | INFO | sqlalchemy.engine.Engine | [cached since 1771s ago] ()
2025-11-08 07:43:53,719 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.email = $1::VARCHAR
2025-11-08 07:43:53,721 | INFO | sqlalchemy.engine.Engine | [generated in 0.00117s] ('josuelu3@gmail.com',)
2025-11-08 07:43:54,249 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:43:56,740 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:43:56,742 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:43:56,743 | INFO | sqlalchemy.engine.Engine | [cached since 1774s ago] ()
2025-11-08 07:43:56,753 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:43:56,754 | INFO | sqlalchemy.engine.Engine | [generated in 0.00136s] (1,)
2025-11-08 07:43:56,820 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:43:56,822 | INFO | sqlalchemy.engine.Engine | [cached since 0.06897s ago] (1,)
2025-11-08 07:43:56,825 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:44:00,499 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:44:00,500 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:44:00,501 | INFO | sqlalchemy.engine.Engine | [cached since 1777s ago] ()
2025-11-08 07:44:00,509 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:44:00,510 | INFO | sqlalchemy.engine.Engine | [cached since 3.759s ago] (1,)
2025-11-08 07:44:00,561 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:44:00,562 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:44:00,563 | INFO | sqlalchemy.engine.Engine | [cached since 1778s ago] ()
2025-11-08 07:44:00,570 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:44:00,571 | INFO | sqlalchemy.engine.Engine | [cached since 3.819s ago] (1,)
2025-11-08 07:44:00,603 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:44:00,657 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.user_id = $1::INTEGER ORDER BY ecowhiskey.training_contexts.created_at DESC 
 LIMIT $2::INTEGER
2025-11-08 07:44:00,658 | INFO | sqlalchemy.engine.Engine | [generated in 0.00137s] (1, 3)
2025-11-08 07:44:00,771 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:44:04,647 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:44:04,649 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:44:04,650 | INFO | sqlalchemy.engine.Engine | [cached since 1782s ago] ()
2025-11-08 07:44:04,660 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:44:04,663 | INFO | sqlalchemy.engine.Engine | [cached since 7.91s ago] (1,)
2025-11-08 07:44:04,790 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.schools.id, ecowhiskey.schools.name, ecowhiskey.schools.value, ecowhiskey.schools.location, ecowhiskey.schools.created_at 
FROM ecowhiskey.schools ORDER BY ecowhiskey.schools.name
2025-11-08 07:44:04,790 | INFO | sqlalchemy.engine.Engine | [generated in 0.00146s] ()
2025-11-08 07:44:04,802 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:44:59,095 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:44:59,096 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:44:59,098 | INFO | sqlalchemy.engine.Engine | [cached since 1836s ago] ()
2025-11-08 07:44:59,104 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.email = $1::VARCHAR
2025-11-08 07:44:59,106 | INFO | sqlalchemy.engine.Engine | [cached since 65.39s ago] ('josuelu3@gmail.com',)
2025-11-08 07:44:59,236 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:45:01,860 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:45:01,862 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:45:01,863 | INFO | sqlalchemy.engine.Engine | [cached since 1839s ago] ()
2025-11-08 07:45:01,872 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:45:01,874 | INFO | sqlalchemy.engine.Engine | [cached since 65.12s ago] (1,)
2025-11-08 07:45:01,969 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:45:01,970 | INFO | sqlalchemy.engine.Engine | [cached since 65.22s ago] (1,)
2025-11-08 07:45:01,975 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:45:24,638 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:45:24,639 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:45:24,640 | INFO | sqlalchemy.engine.Engine | [cached since 1862s ago] ()
2025-11-08 07:45:24,649 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:45:24,649 | INFO | sqlalchemy.engine.Engine | [cached since 87.9s ago] (1,)
2025-11-08 07:45:24,695 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:45:24,696 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:45:24,697 | INFO | sqlalchemy.engine.Engine | [cached since 1862s ago] ()
2025-11-08 07:45:24,704 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:45:24,705 | INFO | sqlalchemy.engine.Engine | [cached since 87.95s ago] (1,)
2025-11-08 07:45:24,723 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:45:24,789 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.user_id = $1::INTEGER ORDER BY ecowhiskey.training_contexts.created_at DESC 
 LIMIT $2::INTEGER
2025-11-08 07:45:24,789 | INFO | sqlalchemy.engine.Engine | [cached since 84.13s ago] (1, 3)
2025-11-08 07:45:24,805 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:45:25,427 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:45:25,427 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:45:25,428 | INFO | sqlalchemy.engine.Engine | [cached since 1862s ago] ()
2025-11-08 07:45:25,430 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:45:25,431 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:45:25,432 | INFO | sqlalchemy.engine.Engine | [cached since 1862s ago] ()
2025-11-08 07:45:25,438 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:45:25,439 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:45:25,440 | INFO | sqlalchemy.engine.Engine | [cached since 1862s ago] ()
2025-11-08 07:45:25,445 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:45:25,447 | INFO | sqlalchemy.engine.Engine | [cached since 88.69s ago] (1,)
2025-11-08 07:45:25,449 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:45:25,451 | INFO | sqlalchemy.engine.Engine | [cached since 88.7s ago] (1,)
2025-11-08 07:45:25,457 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:45:25,459 | INFO | sqlalchemy.engine.Engine | [cached since 88.71s ago] (1,)
2025-11-08 07:45:25,471 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:45:25,473 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:45:25,475 | INFO | sqlalchemy.engine.Engine | [cached since 1862s ago] ()
2025-11-08 07:45:25,485 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:45:25,487 | INFO | sqlalchemy.engine.Engine | [cached since 88.73s ago] (1,)
2025-11-08 07:45:25,508 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:45:25,510 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:45:25,511 | INFO | sqlalchemy.engine.Engine | [cached since 1862s ago] ()
2025-11-08 07:45:25,520 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:45:25,521 | INFO | sqlalchemy.engine.Engine | [cached since 88.77s ago] (1,)
2025-11-08 07:45:25,559 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:45:25,560 | INFO | sqlalchemy.engine.Engine | [generated in 0.00132s] ('ground_departure_request', 1)
2025-11-08 07:45:25,563 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:45:25,565 | INFO | sqlalchemy.engine.Engine | [cached since 0.006164s ago] ('frequency_usage_error', 1)
2025-11-08 07:45:25,568 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:45:25,570 | INFO | sqlalchemy.engine.Engine | [cached since 0.01052s ago] ('tower_hold_short', 1)
2025-11-08 07:45:25,587 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:45:25,588 | INFO | sqlalchemy.engine.Engine | [cached since 0.02918s ago] ('ground_readback', 1)
2025-11-08 07:45:25,608 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:45:25,610 | INFO | sqlalchemy.engine.Engine | [cached since 0.05155s ago] ('tower_line_up', 1)
2025-11-08 07:45:25,648 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:45:25,651 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:45:25,652 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:45:25,653 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:45:25,655 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:45:25,953 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:45:25,954 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:45:25,955 | INFO | sqlalchemy.engine.Engine | [cached since 1863s ago] ()
2025-11-08 07:45:25,956 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:45:25,958 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:45:25,959 | INFO | sqlalchemy.engine.Engine | [cached since 1863s ago] ()
2025-11-08 07:45:25,967 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:45:25,969 | INFO | sqlalchemy.engine.Engine | [cached since 89.22s ago] (1,)
2025-11-08 07:45:25,971 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:45:25,973 | INFO | sqlalchemy.engine.Engine | [cached since 89.22s ago] (1,)
2025-11-08 07:45:25,980 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:45:25,982 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:45:25,983 | INFO | sqlalchemy.engine.Engine | [cached since 1863s ago] ()
2025-11-08 07:45:25,992 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:45:25,993 | INFO | sqlalchemy.engine.Engine | [cached since 89.24s ago] (1,)
2025-11-08 07:45:26,002 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:45:26,004 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:45:26,005 | INFO | sqlalchemy.engine.Engine | [cached since 1863s ago] ()
2025-11-08 07:45:26,016 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:45:26,017 | INFO | sqlalchemy.engine.Engine | [cached since 89.26s ago] (1,)
2025-11-08 07:45:26,049 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:45:26,051 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:45:26,052 | INFO | sqlalchemy.engine.Engine | [cached since 1863s ago] ()
2025-11-08 07:45:26,062 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:45:26,063 | INFO | sqlalchemy.engine.Engine | [cached since 89.31s ago] (1,)
2025-11-08 07:45:26,080 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:45:26,083 | INFO | sqlalchemy.engine.Engine | [cached since 0.5235s ago] ('approach_readback', 1)
2025-11-08 07:45:26,085 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:45:26,087 | INFO | sqlalchemy.engine.Engine | [cached since 0.5282s ago] ('approach_contact', 1)
2025-11-08 07:45:26,092 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:45:26,093 | INFO | sqlalchemy.engine.Engine | [cached since 0.5349s ago] ('tower_takeoff_clearance', 1)
2025-11-08 07:45:26,107 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:45:26,110 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:45:26,113 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:45:26,120 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:45:26,120 | INFO | sqlalchemy.engine.Engine | [cached since 0.5621s ago] ('tower_initial_climb', 1)
2025-11-08 07:45:26,142 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:45:26,164 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:45:26,166 | INFO | sqlalchemy.engine.Engine | [cached since 0.6069s ago] ('approach_zone_entry', 1)
2025-11-08 07:45:26,189 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:45:26,355 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:45:26,356 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:45:26,357 | INFO | sqlalchemy.engine.Engine | [cached since 1863s ago] ()
2025-11-08 07:45:26,362 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:45:26,363 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:45:26,364 | INFO | sqlalchemy.engine.Engine | [cached since 1863s ago] ()
2025-11-08 07:45:26,369 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:45:26,371 | INFO | sqlalchemy.engine.Engine | [cached since 89.62s ago] (1,)
2025-11-08 07:45:26,375 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:45:26,377 | INFO | sqlalchemy.engine.Engine | [cached since 89.62s ago] (1,)
2025-11-08 07:45:26,394 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:45:26,396 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:45:26,397 | INFO | sqlalchemy.engine.Engine | [cached since 1863s ago] ()
2025-11-08 07:45:26,405 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:45:26,406 | INFO | sqlalchemy.engine.Engine | [cached since 89.65s ago] (1,)
2025-11-08 07:45:26,424 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:45:26,426 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:45:26,428 | INFO | sqlalchemy.engine.Engine | [cached since 1863s ago] ()
2025-11-08 07:45:26,436 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:45:26,438 | INFO | sqlalchemy.engine.Engine | [cached since 89.68s ago] (1,)
2025-11-08 07:45:26,465 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:45:26,466 | INFO | sqlalchemy.engine.Engine | [cached since 0.9072s ago] ('radio_exit_zone', 1)
2025-11-08 07:45:26,469 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:45:26,470 | INFO | sqlalchemy.engine.Engine | [cached since 0.9107s ago] ('radio_check_in', 1)
2025-11-08 07:45:26,480 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:45:26,484 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:45:26,487 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:45:26,489 | INFO | sqlalchemy.engine.Engine | [cached since 0.9298s ago] ('radio_position_reporting', 1)
2025-11-08 07:45:26,504 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:45:26,515 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:45:26,518 | INFO | sqlalchemy.engine.Engine | [cached since 0.9584s ago] ('approach_return_contact', 1)
2025-11-08 07:45:26,531 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:45:58,909 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:45:58,909 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:45:58,910 | INFO | sqlalchemy.engine.Engine | [cached since 1896s ago] ()
2025-11-08 07:45:58,915 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.email = $1::VARCHAR
2025-11-08 07:45:58,918 | INFO | sqlalchemy.engine.Engine | [cached since 125.2s ago] ('josuelu3@gmail.com',)
2025-11-08 07:45:59,039 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:46:22,946 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:46:22,947 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:46:22,948 | INFO | sqlalchemy.engine.Engine | [cached since 1920s ago] ()
2025-11-08 07:46:22,955 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.email = $1::VARCHAR
2025-11-08 07:46:22,957 | INFO | sqlalchemy.engine.Engine | [cached since 149.2s ago] ('josuelu3@gmail.com',)
2025-11-08 07:46:23,075 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:46:51,425 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:46:51,426 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:46:51,427 | INFO | sqlalchemy.engine.Engine | [cached since 1948s ago] ()
2025-11-08 07:46:51,434 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:46:51,435 | INFO | sqlalchemy.engine.Engine | [cached since 174.7s ago] (1,)
2025-11-08 07:46:51,506 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.user_id = $1::INTEGER ORDER BY ecowhiskey.training_contexts.created_at DESC 
 LIMIT $2::INTEGER
2025-11-08 07:46:51,507 | INFO | sqlalchemy.engine.Engine | [cached since 170.8s ago] (1, 3)
2025-11-08 07:46:51,523 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:47:02,696 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:47:02,697 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:47:02,698 | INFO | sqlalchemy.engine.Engine | [cached since 1960s ago] ()
2025-11-08 07:47:02,705 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:47:02,706 | INFO | sqlalchemy.engine.Engine | [cached since 186s ago] (1,)
2025-11-08 07:47:02,776 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.user_id = $1::INTEGER ORDER BY ecowhiskey.training_contexts.created_at DESC 
 LIMIT $2::INTEGER
2025-11-08 07:47:02,777 | INFO | sqlalchemy.engine.Engine | [cached since 182.1s ago] (1, 3)
2025-11-08 07:47:02,795 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:47:06,063 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:47:06,064 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:47:06,065 | INFO | sqlalchemy.engine.Engine | [cached since 1963s ago] ()
2025-11-08 07:47:06,073 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:47:06,075 | INFO | sqlalchemy.engine.Engine | [cached since 189.3s ago] (1,)
2025-11-08 07:47:06,173 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.user_id = $1::INTEGER ORDER BY ecowhiskey.training_contexts.created_at DESC 
 LIMIT $2::INTEGER
2025-11-08 07:47:06,174 | INFO | sqlalchemy.engine.Engine | [cached since 185.5s ago] (1, 3)
2025-11-08 07:47:06,195 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:47:08,949 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:47:08,950 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:47:08,951 | INFO | sqlalchemy.engine.Engine | [cached since 1966s ago] ()
2025-11-08 07:47:08,958 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:47:08,959 | INFO | sqlalchemy.engine.Engine | [cached since 192.2s ago] (1,)
2025-11-08 07:47:09,030 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.user_id = $1::INTEGER ORDER BY ecowhiskey.training_contexts.created_at DESC 
 LIMIT $2::INTEGER
2025-11-08 07:47:09,031 | INFO | sqlalchemy.engine.Engine | [cached since 188.4s ago] (1, 3)
2025-11-08 07:47:09,049 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:48:15,907 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:48:15,908 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:48:15,909 | INFO | sqlalchemy.engine.Engine | [cached since 2033s ago] ()
2025-11-08 07:48:15,917 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.email = $1::VARCHAR
2025-11-08 07:48:15,919 | INFO | sqlalchemy.engine.Engine | [cached since 262.2s ago] ('josuelu3@gmail.com',)
2025-11-08 07:48:16,060 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:48:18,389 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:48:18,390 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:48:18,391 | INFO | sqlalchemy.engine.Engine | [cached since 2035s ago] ()
2025-11-08 07:48:18,397 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:48:18,398 | INFO | sqlalchemy.engine.Engine | [cached since 261.6s ago] (1,)
2025-11-08 07:48:18,466 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:48:18,467 | INFO | sqlalchemy.engine.Engine | [cached since 261.7s ago] (1,)
2025-11-08 07:48:18,471 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:48:22,467 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:48:22,468 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:48:22,471 | INFO | sqlalchemy.engine.Engine | [cached since 2039s ago] ()
2025-11-08 07:48:22,478 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:48:22,480 | INFO | sqlalchemy.engine.Engine | [cached since 265.7s ago] (1,)
2025-11-08 07:48:22,527 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:48:22,528 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:48:22,529 | INFO | sqlalchemy.engine.Engine | [cached since 2039s ago] ()
2025-11-08 07:48:22,535 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:48:22,537 | INFO | sqlalchemy.engine.Engine | [cached since 265.8s ago] (1,)
2025-11-08 07:48:22,558 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:48:22,617 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.user_id = $1::INTEGER ORDER BY ecowhiskey.training_contexts.created_at DESC 
 LIMIT $2::INTEGER
2025-11-08 07:48:22,618 | INFO | sqlalchemy.engine.Engine | [cached since 262s ago] (1, 3)
2025-11-08 07:48:22,634 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:48:23,186 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:48:23,187 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:48:23,189 | INFO | sqlalchemy.engine.Engine | [cached since 2040s ago] ()
2025-11-08 07:48:23,195 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:48:23,196 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:48:23,197 | INFO | sqlalchemy.engine.Engine | [cached since 2040s ago] ()
2025-11-08 07:48:23,199 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:48:23,201 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:48:23,202 | INFO | sqlalchemy.engine.Engine | [cached since 2040s ago] ()
2025-11-08 07:48:23,206 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:48:23,208 | INFO | sqlalchemy.engine.Engine | [cached since 266.5s ago] (1,)
2025-11-08 07:48:23,215 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:48:23,217 | INFO | sqlalchemy.engine.Engine | [cached since 266.5s ago] (1,)
2025-11-08 07:48:23,220 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:48:23,221 | INFO | sqlalchemy.engine.Engine | [cached since 266.5s ago] (1,)
2025-11-08 07:48:23,234 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:48:23,236 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:48:23,237 | INFO | sqlalchemy.engine.Engine | [cached since 2040s ago] ()
2025-11-08 07:48:23,245 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:48:23,248 | INFO | sqlalchemy.engine.Engine | [cached since 266.5s ago] (1,)
2025-11-08 07:48:23,269 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:48:23,271 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:48:23,273 | INFO | sqlalchemy.engine.Engine | [cached since 2040s ago] ()
2025-11-08 07:48:23,281 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:48:23,283 | INFO | sqlalchemy.engine.Engine | [cached since 266.5s ago] (1,)
2025-11-08 07:48:23,314 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:48:23,316 | INFO | sqlalchemy.engine.Engine | [cached since 177.8s ago] ('tower_hold_short', 1)
2025-11-08 07:48:23,318 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:48:23,320 | INFO | sqlalchemy.engine.Engine | [cached since 177.8s ago] ('frequency_usage_error', 1)
2025-11-08 07:48:23,323 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:48:23,324 | INFO | sqlalchemy.engine.Engine | [cached since 177.8s ago] ('ground_departure_request', 1)
2025-11-08 07:48:23,337 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:48:23,341 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:48:23,343 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:48:23,346 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:48:23,346 | INFO | sqlalchemy.engine.Engine | [cached since 177.8s ago] ('ground_readback', 1)
2025-11-08 07:48:23,363 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:48:23,369 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:48:23,371 | INFO | sqlalchemy.engine.Engine | [cached since 177.8s ago] ('tower_line_up', 1)
2025-11-08 07:48:23,390 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:48:23,638 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:48:23,640 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:48:23,640 | INFO | sqlalchemy.engine.Engine | [cached since 2041s ago] ()
2025-11-08 07:48:23,643 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:48:23,644 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:48:23,645 | INFO | sqlalchemy.engine.Engine | [cached since 2041s ago] ()
2025-11-08 07:48:23,647 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:48:23,649 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:48:23,650 | INFO | sqlalchemy.engine.Engine | [cached since 2041s ago] ()
2025-11-08 07:48:23,658 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:48:23,658 | INFO | sqlalchemy.engine.Engine | [cached since 266.9s ago] (1,)
2025-11-08 07:48:23,662 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:48:23,664 | INFO | sqlalchemy.engine.Engine | [cached since 266.9s ago] (1,)
2025-11-08 07:48:23,668 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:48:23,669 | INFO | sqlalchemy.engine.Engine | [cached since 266.9s ago] (1,)
2025-11-08 07:48:23,681 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:48:23,683 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:48:23,684 | INFO | sqlalchemy.engine.Engine | [cached since 2041s ago] ()
2025-11-08 07:48:23,693 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:48:23,695 | INFO | sqlalchemy.engine.Engine | [cached since 266.9s ago] (1,)
2025-11-08 07:48:23,712 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:48:23,713 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:48:23,715 | INFO | sqlalchemy.engine.Engine | [cached since 2041s ago] ()
2025-11-08 07:48:23,725 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:48:23,726 | INFO | sqlalchemy.engine.Engine | [cached since 267s ago] (1,)
2025-11-08 07:48:23,869 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:48:23,870 | INFO | sqlalchemy.engine.Engine | [cached since 178.3s ago] ('tower_initial_climb', 1)
2025-11-08 07:48:23,872 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:48:23,873 | INFO | sqlalchemy.engine.Engine | [cached since 178.3s ago] ('tower_takeoff_clearance', 1)
2025-11-08 07:48:23,875 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:48:23,876 | INFO | sqlalchemy.engine.Engine | [cached since 178.3s ago] ('approach_contact', 1)
2025-11-08 07:48:23,879 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:48:23,880 | INFO | sqlalchemy.engine.Engine | [cached since 178.3s ago] ('approach_zone_entry', 1)
2025-11-08 07:48:23,888 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:48:23,891 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:48:23,892 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:48:23,894 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:48:23,897 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:48:23,898 | INFO | sqlalchemy.engine.Engine | [cached since 178.3s ago] ('approach_readback', 1)
2025-11-08 07:48:23,914 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:48:24,128 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:48:24,130 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:48:24,132 | INFO | sqlalchemy.engine.Engine | [cached since 2041s ago] ()
2025-11-08 07:48:24,140 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:48:24,141 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:48:24,144 | INFO | sqlalchemy.engine.Engine | [cached since 2041s ago] ()
2025-11-08 07:48:24,147 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:48:24,150 | INFO | sqlalchemy.engine.Engine | [cached since 267.4s ago] (1,)
2025-11-08 07:48:24,161 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:48:24,163 | INFO | sqlalchemy.engine.Engine | [cached since 267.4s ago] (1,)
2025-11-08 07:48:24,186 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:48:24,188 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:48:24,190 | INFO | sqlalchemy.engine.Engine | [cached since 2041s ago] ()
2025-11-08 07:48:24,201 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:48:24,203 | INFO | sqlalchemy.engine.Engine | [cached since 267.5s ago] (1,)
2025-11-08 07:48:24,231 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:48:24,231 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:48:24,234 | INFO | sqlalchemy.engine.Engine | [cached since 2041s ago] ()
2025-11-08 07:48:24,243 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:48:24,244 | INFO | sqlalchemy.engine.Engine | [cached since 267.5s ago] (1,)
2025-11-08 07:48:24,273 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:48:24,274 | INFO | sqlalchemy.engine.Engine | [cached since 178.7s ago] ('approach_return_contact', 1)
2025-11-08 07:48:24,276 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:48:24,278 | INFO | sqlalchemy.engine.Engine | [cached since 178.7s ago] ('radio_check_in', 1)
2025-11-08 07:48:24,291 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:48:24,297 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:48:24,301 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:48:24,302 | INFO | sqlalchemy.engine.Engine | [cached since 178.7s ago] ('radio_exit_zone', 1)
2025-11-08 07:48:24,320 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:48:24,348 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:48:24,349 | INFO | sqlalchemy.engine.Engine | [cached since 178.8s ago] ('radio_position_reporting', 1)
2025-11-08 07:48:24,364 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:53:54,443 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:53:54,444 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:53:54,445 | INFO | sqlalchemy.engine.Engine | [cached since 2371s ago] ()
2025-11-08 07:53:54,451 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.email = $1::VARCHAR
2025-11-08 07:53:54,452 | INFO | sqlalchemy.engine.Engine | [cached since 600.7s ago] ('josuelu3@gmail.com',)
2025-11-08 07:53:54,591 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:53:56,532 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:53:56,533 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:53:56,533 | INFO | sqlalchemy.engine.Engine | [cached since 2373s ago] ()
2025-11-08 07:53:56,541 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:53:56,542 | INFO | sqlalchemy.engine.Engine | [cached since 599.8s ago] (1,)
2025-11-08 07:53:56,615 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:53:56,617 | INFO | sqlalchemy.engine.Engine | [cached since 599.9s ago] (1,)
2025-11-08 07:53:56,620 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:55:04,778 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:55:04,779 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:55:04,781 | INFO | sqlalchemy.engine.Engine | [cached since 2442s ago] ()
2025-11-08 07:55:04,789 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:55:04,790 | INFO | sqlalchemy.engine.Engine | [cached since 668s ago] (1,)
2025-11-08 07:55:04,883 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:55:04,885 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:55:04,886 | INFO | sqlalchemy.engine.Engine | [cached since 2442s ago] ()
2025-11-08 07:55:04,890 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:55:04,894 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:55:04,894 | INFO | sqlalchemy.engine.Engine | [cached since 668.1s ago] (1,)
2025-11-08 07:55:04,980 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.user_id = $1::INTEGER ORDER BY ecowhiskey.training_contexts.created_at DESC 
 LIMIT $2::INTEGER
2025-11-08 07:55:04,982 | INFO | sqlalchemy.engine.Engine | [cached since 664.3s ago] (1, 3)
2025-11-08 07:55:05,000 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:55:06,529 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:55:06,531 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:55:06,532 | INFO | sqlalchemy.engine.Engine | [cached since 2443s ago] ()
2025-11-08 07:55:06,535 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:55:06,537 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:55:06,539 | INFO | sqlalchemy.engine.Engine | [cached since 2443s ago] ()
2025-11-08 07:55:06,547 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:55:06,549 | INFO | sqlalchemy.engine.Engine | [cached since 669.8s ago] (1,)
2025-11-08 07:55:06,586 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:55:06,587 | INFO | sqlalchemy.engine.Engine | [cached since 669.8s ago] (1,)
2025-11-08 07:55:06,599 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:55:06,602 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:55:06,604 | INFO | sqlalchemy.engine.Engine | [cached since 2444s ago] ()
2025-11-08 07:55:06,610 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:55:06,612 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:55:06,613 | INFO | sqlalchemy.engine.Engine | [cached since 2444s ago] ()
2025-11-08 07:55:06,616 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:55:06,619 | INFO | sqlalchemy.engine.Engine | [cached since 669.9s ago] (1,)
2025-11-08 07:55:06,627 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:55:06,628 | INFO | sqlalchemy.engine.Engine | [cached since 669.9s ago] (1,)
2025-11-08 07:55:06,677 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:55:06,678 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:55:06,679 | INFO | sqlalchemy.engine.Engine | [cached since 2444s ago] ()
2025-11-08 07:55:06,684 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:55:06,686 | INFO | sqlalchemy.engine.Engine | [cached since 581.1s ago] ('frequency_usage_error', 1)
2025-11-08 07:55:06,688 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:55:06,689 | INFO | sqlalchemy.engine.Engine | [cached since 581.1s ago] ('ground_departure_request', 1)
2025-11-08 07:55:06,695 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:55:06,697 | INFO | sqlalchemy.engine.Engine | [cached since 669.9s ago] (1,)
2025-11-08 07:55:06,702 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:55:06,708 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:55:06,716 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:55:06,717 | INFO | sqlalchemy.engine.Engine | [cached since 581.2s ago] ('tower_line_up', 1)
2025-11-08 07:55:06,721 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:55:06,722 | INFO | sqlalchemy.engine.Engine | [cached since 581.2s ago] ('ground_readback', 1)
2025-11-08 07:55:06,734 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:55:06,739 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:55:06,894 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:55:06,895 | INFO | sqlalchemy.engine.Engine | [cached since 581.3s ago] ('tower_hold_short', 1)
2025-11-08 07:55:07,035 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:55:07,051 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:55:07,055 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:55:07,056 | INFO | sqlalchemy.engine.Engine | [cached since 2444s ago] ()
2025-11-08 07:55:07,064 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:55:07,067 | INFO | sqlalchemy.engine.Engine | [cached since 670.3s ago] (1,)
2025-11-08 07:55:07,077 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:55:07,079 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:55:07,081 | INFO | sqlalchemy.engine.Engine | [cached since 2444s ago] ()
2025-11-08 07:55:07,092 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:55:07,093 | INFO | sqlalchemy.engine.Engine | [cached since 670.3s ago] (1,)
2025-11-08 07:55:07,104 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:55:07,105 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:55:07,107 | INFO | sqlalchemy.engine.Engine | [cached since 2444s ago] ()
2025-11-08 07:55:07,114 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:55:07,117 | INFO | sqlalchemy.engine.Engine | [cached since 670.4s ago] (1,)
2025-11-08 07:55:07,164 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:55:07,165 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:55:07,166 | INFO | sqlalchemy.engine.Engine | [cached since 2444s ago] ()
2025-11-08 07:55:07,175 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:55:07,176 | INFO | sqlalchemy.engine.Engine | [cached since 670.4s ago] (1,)
2025-11-08 07:55:07,196 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:55:07,198 | INFO | sqlalchemy.engine.Engine | [cached since 581.6s ago] ('tower_takeoff_clearance', 1)
2025-11-08 07:55:07,201 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:55:07,202 | INFO | sqlalchemy.engine.Engine | [cached since 581.6s ago] ('tower_initial_climb', 1)
2025-11-08 07:55:07,213 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:55:07,220 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:55:07,224 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:55:07,225 | INFO | sqlalchemy.engine.Engine | [cached since 581.7s ago] ('approach_contact', 1)
2025-11-08 07:55:07,245 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:55:07,262 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:55:07,263 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:55:07,265 | INFO | sqlalchemy.engine.Engine | [cached since 2444s ago] ()
2025-11-08 07:55:07,272 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:55:07,273 | INFO | sqlalchemy.engine.Engine | [cached since 581.7s ago] ('approach_readback', 1)
2025-11-08 07:55:07,280 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:55:07,282 | INFO | sqlalchemy.engine.Engine | [cached since 670.5s ago] (1,)
2025-11-08 07:55:07,294 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:55:07,436 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:55:07,438 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:55:07,439 | INFO | sqlalchemy.engine.Engine | [cached since 2444s ago] ()
2025-11-08 07:55:07,452 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:55:07,455 | INFO | sqlalchemy.engine.Engine | [cached since 581.9s ago] ('approach_zone_entry', 1)
2025-11-08 07:55:07,460 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:55:07,462 | INFO | sqlalchemy.engine.Engine | [cached since 670.7s ago] (1,)
2025-11-08 07:55:07,477 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:55:07,483 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:55:07,484 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:55:07,487 | INFO | sqlalchemy.engine.Engine | [cached since 2444s ago] ()
2025-11-08 07:55:07,530 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:55:07,531 | INFO | sqlalchemy.engine.Engine | [cached since 670.8s ago] (1,)
2025-11-08 07:55:07,540 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:55:07,542 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:55:07,543 | INFO | sqlalchemy.engine.Engine | [cached since 2444s ago] ()
2025-11-08 07:55:07,551 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:55:07,553 | INFO | sqlalchemy.engine.Engine | [cached since 670.8s ago] (1,)
2025-11-08 07:55:07,594 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:55:07,596 | INFO | sqlalchemy.engine.Engine | [cached since 582s ago] ('radio_check_in', 1)
2025-11-08 07:55:07,608 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:55:07,614 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 07:55:07,615 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 07:55:07,617 | INFO | sqlalchemy.engine.Engine | [cached since 2445s ago] ()
2025-11-08 07:55:07,619 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:55:07,620 | INFO | sqlalchemy.engine.Engine | [cached since 582.1s ago] ('radio_position_reporting', 1)
2025-11-08 07:55:07,627 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 07:55:07,628 | INFO | sqlalchemy.engine.Engine | [cached since 670.9s ago] (1,)
2025-11-08 07:55:07,637 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:55:07,638 | INFO | sqlalchemy.engine.Engine | [cached since 582.1s ago] ('radio_exit_zone', 1)
2025-11-08 07:55:07,640 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:55:07,655 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 07:55:07,708 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 07:55:07,709 | INFO | sqlalchemy.engine.Engine | [cached since 582.1s ago] ('approach_return_contact', 1)
2025-11-08 07:55:07,724 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:03:39,194 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-08 08:03:39,196 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-08 08:03:39,203 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-08 08:03:39,203 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-08 08:03:39,210 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-08 08:03:39,212 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-08 08:03:39,219 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:03:39,222 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-08 08:03:39,222 | INFO | sqlalchemy.engine.Engine | [generated in 0.00094s] ()
2025-11-08 08:03:39,231 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:03:39,232 | INFO | sqlalchemy.engine.Engine | [generated in 0.00094s] ()
2025-11-08 08:03:39,239 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:03:39,240 | INFO | sqlalchemy.engine.Engine | [generated in 0.00110s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:03:39,261 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:03:39,263 | INFO | sqlalchemy.engine.Engine | [cached since 0.02367s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:03:39,265 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:03:39,267 | INFO | sqlalchemy.engine.Engine | [cached since 0.02815s ago] ('phase_scores', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:03:39,270 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:03:39,270 | INFO | sqlalchemy.engine.Engine | [cached since 0.03204s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:03:39,275 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:03:39,276 | INFO | sqlalchemy.engine.Engine | [cached since 0.0367s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:03:39,280 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:03:39,281 | INFO | sqlalchemy.engine.Engine | [cached since 0.04267s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:03:39,287 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-08 08:03:39,288 | INFO | sqlalchemy.engine.Engine | [generated in 0.00118s] ('user_status', 'pg_catalog')
2025-11-08 08:03:39,293 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-08 08:03:39,294 | INFO | sqlalchemy.engine.Engine | [cached since 0.00848s ago] ('account_type', 'pg_catalog')
2025-11-08 08:03:39,299 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-08 08:03:39,299 | INFO | sqlalchemy.engine.Engine | [generated in 0.00087s] ()
2025-11-08 08:03:39,307 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-08 08:03:39,307 | INFO | sqlalchemy.engine.Engine | [generated in 0.00087s] ()
2025-11-08 08:03:39,326 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-08 08:03:39,329 | INFO | sqlalchemy.engine.Engine | [generated in 0.00253s] ()
2025-11-08 08:03:39,585 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-08 08:03:39,620 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-08 08:04:05,094 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-08 08:04:05,095 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-08 08:04:05,102 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-08 08:04:05,104 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-08 08:04:05,109 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-08 08:04:05,110 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-08 08:04:05,114 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:04:05,116 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-08 08:04:05,117 | INFO | sqlalchemy.engine.Engine | [generated in 0.00093s] ()
2025-11-08 08:04:05,121 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:04:05,122 | INFO | sqlalchemy.engine.Engine | [generated in 0.00154s] ()
2025-11-08 08:04:05,130 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:04:05,131 | INFO | sqlalchemy.engine.Engine | [generated in 0.00092s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:04:05,148 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:04:05,149 | INFO | sqlalchemy.engine.Engine | [cached since 0.01898s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:04:05,152 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:04:05,152 | INFO | sqlalchemy.engine.Engine | [cached since 0.02232s ago] ('phase_scores', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:04:05,155 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:04:05,157 | INFO | sqlalchemy.engine.Engine | [cached since 0.02688s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:04:05,160 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:04:05,161 | INFO | sqlalchemy.engine.Engine | [cached since 0.03103s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:04:05,164 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:04:05,165 | INFO | sqlalchemy.engine.Engine | [cached since 0.03444s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:04:05,168 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-08 08:04:05,168 | INFO | sqlalchemy.engine.Engine | [generated in 0.00075s] ('user_status', 'pg_catalog')
2025-11-08 08:04:05,173 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-08 08:04:05,176 | INFO | sqlalchemy.engine.Engine | [cached since 0.007794s ago] ('account_type', 'pg_catalog')
2025-11-08 08:04:05,179 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-08 08:04:05,180 | INFO | sqlalchemy.engine.Engine | [generated in 0.00078s] ()
2025-11-08 08:04:05,184 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-08 08:04:05,185 | INFO | sqlalchemy.engine.Engine | [generated in 0.00090s] ()
2025-11-08 08:04:05,201 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-08 08:04:05,203 | INFO | sqlalchemy.engine.Engine | [generated in 0.00136s] ()
2025-11-08 08:04:05,249 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-08 08:04:05,281 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-08 08:04:29,540 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-08 08:04:29,541 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-08 08:04:29,548 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-08 08:04:29,549 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-08 08:04:29,557 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-08 08:04:29,558 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-08 08:04:29,564 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:04:29,565 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-08 08:04:29,567 | INFO | sqlalchemy.engine.Engine | [generated in 0.00148s] ()
2025-11-08 08:04:29,574 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:04:29,575 | INFO | sqlalchemy.engine.Engine | [generated in 0.00142s] ()
2025-11-08 08:04:29,582 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:04:29,583 | INFO | sqlalchemy.engine.Engine | [generated in 0.00158s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:04:29,600 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:04:29,600 | INFO | sqlalchemy.engine.Engine | [cached since 0.01974s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:04:29,605 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:04:29,606 | INFO | sqlalchemy.engine.Engine | [cached since 0.02459s ago] ('phase_scores', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:04:29,609 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:04:29,610 | INFO | sqlalchemy.engine.Engine | [cached since 0.02875s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:04:29,612 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:04:29,613 | INFO | sqlalchemy.engine.Engine | [cached since 0.0316s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:04:29,615 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:04:29,616 | INFO | sqlalchemy.engine.Engine | [cached since 0.03485s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:04:29,621 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-08 08:04:29,621 | INFO | sqlalchemy.engine.Engine | [generated in 0.00089s] ('user_status', 'pg_catalog')
2025-11-08 08:04:29,626 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-08 08:04:29,627 | INFO | sqlalchemy.engine.Engine | [cached since 0.006083s ago] ('account_type', 'pg_catalog')
2025-11-08 08:04:29,629 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-08 08:04:29,630 | INFO | sqlalchemy.engine.Engine | [generated in 0.00071s] ()
2025-11-08 08:04:29,635 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-08 08:04:29,636 | INFO | sqlalchemy.engine.Engine | [generated in 0.00126s] ()
2025-11-08 08:04:29,649 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-08 08:04:29,650 | INFO | sqlalchemy.engine.Engine | [generated in 0.00199s] ()
2025-11-08 08:04:29,699 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-08 08:04:29,731 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-08 08:04:39,618 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-08 08:04:39,620 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-08 08:04:39,625 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-08 08:04:39,626 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-08 08:04:39,633 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-08 08:04:39,633 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-08 08:04:39,639 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:04:39,640 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-08 08:04:39,642 | INFO | sqlalchemy.engine.Engine | [generated in 0.00087s] ()
2025-11-08 08:04:39,645 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:04:39,646 | INFO | sqlalchemy.engine.Engine | [generated in 0.00069s] ()
2025-11-08 08:04:39,651 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:04:39,651 | INFO | sqlalchemy.engine.Engine | [generated in 0.00096s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:04:39,669 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:04:39,669 | INFO | sqlalchemy.engine.Engine | [cached since 0.01826s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:04:39,674 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:04:39,675 | INFO | sqlalchemy.engine.Engine | [cached since 0.02294s ago] ('phase_scores', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:04:39,677 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:04:39,678 | INFO | sqlalchemy.engine.Engine | [cached since 0.02673s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:04:39,680 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:04:39,682 | INFO | sqlalchemy.engine.Engine | [cached since 0.03058s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:04:39,685 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:04:39,686 | INFO | sqlalchemy.engine.Engine | [cached since 0.03463s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:04:39,691 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-08 08:04:39,691 | INFO | sqlalchemy.engine.Engine | [generated in 0.00084s] ('user_status', 'pg_catalog')
2025-11-08 08:04:39,697 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-08 08:04:39,697 | INFO | sqlalchemy.engine.Engine | [cached since 0.006747s ago] ('account_type', 'pg_catalog')
2025-11-08 08:04:39,700 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-08 08:04:39,701 | INFO | sqlalchemy.engine.Engine | [generated in 0.00072s] ()
2025-11-08 08:04:39,705 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-08 08:04:39,707 | INFO | sqlalchemy.engine.Engine | [generated in 0.00120s] ()
2025-11-08 08:04:39,719 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-08 08:04:39,723 | INFO | sqlalchemy.engine.Engine | [generated in 0.00282s] ()
2025-11-08 08:04:39,783 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-08 08:04:39,814 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-08 08:05:24,816 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-08 08:05:24,817 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-08 08:05:24,824 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-08 08:05:24,825 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-08 08:05:24,832 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-08 08:05:24,833 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-08 08:05:24,838 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:05:24,840 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-08 08:05:24,841 | INFO | sqlalchemy.engine.Engine | [generated in 0.00130s] ()
2025-11-08 08:05:24,847 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:05:24,848 | INFO | sqlalchemy.engine.Engine | [generated in 0.00103s] ()
2025-11-08 08:05:24,854 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:05:24,855 | INFO | sqlalchemy.engine.Engine | [generated in 0.00116s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:05:24,873 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:05:24,875 | INFO | sqlalchemy.engine.Engine | [cached since 0.02058s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:05:24,878 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:05:24,879 | INFO | sqlalchemy.engine.Engine | [cached since 0.02562s ago] ('phase_scores', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:05:24,881 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:05:24,883 | INFO | sqlalchemy.engine.Engine | [cached since 0.02927s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:05:24,885 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:05:24,887 | INFO | sqlalchemy.engine.Engine | [cached since 0.03298s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:05:24,890 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:05:24,891 | INFO | sqlalchemy.engine.Engine | [cached since 0.03707s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:05:24,896 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-08 08:05:24,897 | INFO | sqlalchemy.engine.Engine | [generated in 0.00098s] ('user_status', 'pg_catalog')
2025-11-08 08:05:24,903 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-08 08:05:24,904 | INFO | sqlalchemy.engine.Engine | [cached since 0.007609s ago] ('account_type', 'pg_catalog')
2025-11-08 08:05:24,907 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-08 08:05:24,908 | INFO | sqlalchemy.engine.Engine | [generated in 0.00146s] ()
2025-11-08 08:05:24,913 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-08 08:05:24,915 | INFO | sqlalchemy.engine.Engine | [generated in 0.00091s] ()
2025-11-08 08:05:24,930 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-08 08:05:24,932 | INFO | sqlalchemy.engine.Engine | [generated in 0.00130s] ()
2025-11-08 08:05:24,981 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-08 08:05:25,013 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-08 08:07:26,391 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:07:26,392 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:07:26,393 | INFO | sqlalchemy.engine.Engine | [cached since 121.5s ago] ()
2025-11-08 08:07:26,420 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.email = $1::VARCHAR
2025-11-08 08:07:26,421 | INFO | sqlalchemy.engine.Engine | [generated in 0.00097s] ('josuelu3@gmail.com',)
2025-11-08 08:07:26,559 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:07:28,522 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:07:28,523 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:07:28,523 | INFO | sqlalchemy.engine.Engine | [cached since 123.7s ago] ()
2025-11-08 08:07:28,531 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:07:28,532 | INFO | sqlalchemy.engine.Engine | [generated in 0.00096s] (1,)
2025-11-08 08:07:28,600 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:07:28,601 | INFO | sqlalchemy.engine.Engine | [cached since 0.07001s ago] (1,)
2025-11-08 08:07:28,605 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:45,895 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:45,897 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:45,898 | INFO | sqlalchemy.engine.Engine | [cached since 201.1s ago] ()
2025-11-08 08:08:45,939 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:45,940 | INFO | sqlalchemy.engine.Engine | [cached since 77.41s ago] (1,)
2025-11-08 08:08:46,012 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:46,013 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:46,015 | INFO | sqlalchemy.engine.Engine | [cached since 201.2s ago] ()
2025-11-08 08:08:46,024 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:46,025 | INFO | sqlalchemy.engine.Engine | [cached since 77.49s ago] (1,)
2025-11-08 08:08:46,048 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:46,128 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.user_id = $1::INTEGER ORDER BY ecowhiskey.training_contexts.created_at DESC 
 LIMIT $2::INTEGER
2025-11-08 08:08:46,130 | INFO | sqlalchemy.engine.Engine | [generated in 0.00165s] (1, 3)
2025-11-08 08:08:46,154 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:47,818 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:47,820 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:47,821 | INFO | sqlalchemy.engine.Engine | [cached since 203s ago] ()
2025-11-08 08:08:47,830 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:47,831 | INFO | sqlalchemy.engine.Engine | [cached since 79.3s ago] (1,)
2025-11-08 08:08:47,834 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:47,836 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:47,837 | INFO | sqlalchemy.engine.Engine | [cached since 203s ago] ()
2025-11-08 08:08:47,875 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:47,876 | INFO | sqlalchemy.engine.Engine | [cached since 79.34s ago] (1,)
2025-11-08 08:08:47,890 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:47,892 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:47,893 | INFO | sqlalchemy.engine.Engine | [cached since 203s ago] ()
2025-11-08 08:08:47,903 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:47,904 | INFO | sqlalchemy.engine.Engine | [cached since 79.37s ago] (1,)
2025-11-08 08:08:47,917 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:47,921 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:47,922 | INFO | sqlalchemy.engine.Engine | [cached since 203.1s ago] ()
2025-11-08 08:08:47,930 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:47,933 | INFO | sqlalchemy.engine.Engine | [cached since 79.4s ago] (1,)
2025-11-08 08:08:47,968 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:47,969 | INFO | sqlalchemy.engine.Engine | [generated in 0.00090s] ('frequency_usage_error', 1)
2025-11-08 08:08:47,972 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:47,973 | INFO | sqlalchemy.engine.Engine | [cached since 0.004638s ago] ('ground_departure_request', 1)
2025-11-08 08:08:47,976 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:47,978 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:47,978 | INFO | sqlalchemy.engine.Engine | [cached since 203.1s ago] ()
2025-11-08 08:08:47,981 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:47,984 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:47,990 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:47,991 | INFO | sqlalchemy.engine.Engine | [cached since 79.46s ago] (1,)
2025-11-08 08:08:47,998 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:48,000 | INFO | sqlalchemy.engine.Engine | [cached since 0.03177s ago] ('tower_hold_short', 1)
2025-11-08 08:08:48,006 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:48,490 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:48,491 | INFO | sqlalchemy.engine.Engine | [cached since 0.5229s ago] ('ground_readback', 1)
2025-11-08 08:08:48,564 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:48,599 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:48,601 | INFO | sqlalchemy.engine.Engine | [cached since 0.6322s ago] ('tower_line_up', 1)
2025-11-08 08:08:48,608 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:48,844 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:48,845 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:48,846 | INFO | sqlalchemy.engine.Engine | [cached since 204s ago] ()
2025-11-08 08:08:48,866 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:48,868 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:48,870 | INFO | sqlalchemy.engine.Engine | [cached since 204s ago] ()
2025-11-08 08:08:48,874 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:48,876 | INFO | sqlalchemy.engine.Engine | [cached since 80.34s ago] (1,)
2025-11-08 08:08:48,885 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:48,887 | INFO | sqlalchemy.engine.Engine | [cached since 80.36s ago] (1,)
2025-11-08 08:08:49,038 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:49,039 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:49,040 | INFO | sqlalchemy.engine.Engine | [cached since 204.2s ago] ()
2025-11-08 08:08:49,052 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:49,054 | INFO | sqlalchemy.engine.Engine | [cached since 80.52s ago] (1,)
2025-11-08 08:08:49,075 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:49,077 | INFO | sqlalchemy.engine.Engine | [cached since 1.109s ago] ('tower_takeoff_clearance', 1)
2025-11-08 08:08:49,084 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:49,110 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:49,112 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:49,114 | INFO | sqlalchemy.engine.Engine | [cached since 204.3s ago] ()
2025-11-08 08:08:49,135 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:49,137 | INFO | sqlalchemy.engine.Engine | [cached since 80.61s ago] (1,)
2025-11-08 08:08:49,159 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:49,162 | INFO | sqlalchemy.engine.Engine | [cached since 1.194s ago] ('tower_initial_climb', 1)
2025-11-08 08:08:49,169 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:49,187 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:49,190 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:49,191 | INFO | sqlalchemy.engine.Engine | [cached since 204.3s ago] ()
2025-11-08 08:08:49,204 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:49,205 | INFO | sqlalchemy.engine.Engine | [cached since 1.237s ago] ('approach_contact', 1)
2025-11-08 08:08:49,243 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:49,247 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:49,250 | INFO | sqlalchemy.engine.Engine | [cached since 80.72s ago] (1,)
2025-11-08 08:08:49,309 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:49,311 | INFO | sqlalchemy.engine.Engine | [cached since 1.342s ago] ('approach_zone_entry', 1)
2025-11-08 08:08:49,345 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:49,408 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:49,410 | INFO | sqlalchemy.engine.Engine | [cached since 1.441s ago] ('approach_readback', 1)
2025-11-08 08:08:49,447 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:49,470 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:49,472 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:49,473 | INFO | sqlalchemy.engine.Engine | [cached since 204.6s ago] ()
2025-11-08 08:08:49,484 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:49,486 | INFO | sqlalchemy.engine.Engine | [cached since 80.96s ago] (1,)
2025-11-08 08:08:49,611 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:49,612 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:49,614 | INFO | sqlalchemy.engine.Engine | [cached since 204.8s ago] ()
2025-11-08 08:08:49,626 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:49,627 | INFO | sqlalchemy.engine.Engine | [cached since 81.1s ago] (1,)
2025-11-08 08:08:49,680 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:49,683 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:49,686 | INFO | sqlalchemy.engine.Engine | [cached since 204.8s ago] ()
2025-11-08 08:08:49,698 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:49,703 | INFO | sqlalchemy.engine.Engine | [cached since 81.17s ago] (1,)
2025-11-08 08:08:49,725 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:49,727 | INFO | sqlalchemy.engine.Engine | [cached since 1.759s ago] ('radio_check_in', 1)
2025-11-08 08:08:49,731 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:49,735 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:49,738 | INFO | sqlalchemy.engine.Engine | [cached since 204.9s ago] ()
2025-11-08 08:08:49,742 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:49,745 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:49,746 | INFO | sqlalchemy.engine.Engine | [cached since 1.779s ago] ('radio_position_reporting', 1)
2025-11-08 08:08:49,756 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:49,761 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:49,763 | INFO | sqlalchemy.engine.Engine | [cached since 81.23s ago] (1,)
2025-11-08 08:08:49,914 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:49,937 | INFO | sqlalchemy.engine.Engine | [cached since 1.968s ago] ('radio_exit_zone', 1)
2025-11-08 08:08:49,948 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:49,951 | INFO | sqlalchemy.engine.Engine | [cached since 1.982s ago] ('approach_return_contact', 1)
2025-11-08 08:08:49,955 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:49,963 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:50,445 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:50,446 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:50,447 | INFO | sqlalchemy.engine.Engine | [cached since 205.6s ago] ()
2025-11-08 08:08:50,458 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:50,460 | INFO | sqlalchemy.engine.Engine | [cached since 81.93s ago] (1,)
2025-11-08 08:08:50,513 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:50,515 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:50,517 | INFO | sqlalchemy.engine.Engine | [cached since 205.7s ago] ()
2025-11-08 08:08:50,527 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:50,529 | INFO | sqlalchemy.engine.Engine | [cached since 82s ago] (1,)
2025-11-08 08:08:50,565 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:50,567 | INFO | sqlalchemy.engine.Engine | [cached since 2.599s ago] ('frequency_usage_error', 1)
2025-11-08 08:08:50,575 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:50,826 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:50,830 | INFO | sqlalchemy.engine.Engine | [cached since 2.861s ago] ('ground_departure_request', 1)
2025-11-08 08:08:50,844 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:51,841 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:51,843 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:51,846 | INFO | sqlalchemy.engine.Engine | [cached since 207s ago] ()
2025-11-08 08:08:51,859 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:51,861 | INFO | sqlalchemy.engine.Engine | [cached since 83.33s ago] (1,)
2025-11-08 08:08:51,877 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:51,880 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:51,886 | INFO | sqlalchemy.engine.Engine | [cached since 207s ago] ()
2025-11-08 08:08:51,900 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:51,905 | INFO | sqlalchemy.engine.Engine | [cached since 83.37s ago] (1,)
2025-11-08 08:08:51,953 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:51,956 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:51,960 | INFO | sqlalchemy.engine.Engine | [cached since 207.1s ago] ()
2025-11-08 08:08:51,973 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:51,975 | INFO | sqlalchemy.engine.Engine | [cached since 83.44s ago] (1,)
2025-11-08 08:08:52,004 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:52,006 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:52,008 | INFO | sqlalchemy.engine.Engine | [cached since 207.2s ago] ()
2025-11-08 08:08:52,018 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:52,020 | INFO | sqlalchemy.engine.Engine | [cached since 83.49s ago] (1,)
2025-11-08 08:08:52,044 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:52,046 | INFO | sqlalchemy.engine.Engine | [cached since 4.078s ago] ('ground_readback', 1)
2025-11-08 08:08:52,051 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:52,053 | INFO | sqlalchemy.engine.Engine | [cached since 4.084s ago] ('tower_hold_short', 1)
2025-11-08 08:08:52,059 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:52,063 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:52,065 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:52,068 | INFO | sqlalchemy.engine.Engine | [cached since 207.2s ago] ()
2025-11-08 08:08:52,073 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:52,082 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:52,085 | INFO | sqlalchemy.engine.Engine | [cached since 83.55s ago] (1,)
2025-11-08 08:08:52,154 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:52,157 | INFO | sqlalchemy.engine.Engine | [cached since 4.188s ago] ('tower_line_up', 1)
2025-11-08 08:08:52,329 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:52,392 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:52,394 | INFO | sqlalchemy.engine.Engine | [cached since 4.425s ago] ('tower_initial_climb', 1)
2025-11-08 08:08:52,398 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:52,402 | INFO | sqlalchemy.engine.Engine | [cached since 4.433s ago] ('tower_takeoff_clearance', 1)
2025-11-08 08:08:52,409 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:52,460 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:52,751 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:52,753 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:52,756 | INFO | sqlalchemy.engine.Engine | [cached since 207.9s ago] ()
2025-11-08 08:08:52,766 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:52,768 | INFO | sqlalchemy.engine.Engine | [cached since 84.24s ago] (1,)
2025-11-08 08:08:52,871 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:52,872 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:52,874 | INFO | sqlalchemy.engine.Engine | [cached since 208s ago] ()
2025-11-08 08:08:52,884 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:52,886 | INFO | sqlalchemy.engine.Engine | [cached since 84.36s ago] (1,)
2025-11-08 08:08:52,890 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:53,057 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:53,058 | INFO | sqlalchemy.engine.Engine | [cached since 208.2s ago] ()
2025-11-08 08:08:53,066 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:53,069 | INFO | sqlalchemy.engine.Engine | [cached since 84.54s ago] (1,)
2025-11-08 08:08:53,079 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:53,081 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:53,082 | INFO | sqlalchemy.engine.Engine | [cached since 208.2s ago] ()
2025-11-08 08:08:53,084 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:53,086 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:53,089 | INFO | sqlalchemy.engine.Engine | [cached since 208.2s ago] ()
2025-11-08 08:08:53,096 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:53,098 | INFO | sqlalchemy.engine.Engine | [cached since 84.57s ago] (1,)
2025-11-08 08:08:53,103 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:53,105 | INFO | sqlalchemy.engine.Engine | [cached since 84.57s ago] (1,)
2025-11-08 08:08:53,109 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:53,111 | INFO | sqlalchemy.engine.Engine | [cached since 5.143s ago] ('approach_zone_entry', 1)
2025-11-08 08:08:53,118 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:53,185 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:53,187 | INFO | sqlalchemy.engine.Engine | [cached since 5.219s ago] ('approach_contact', 1)
2025-11-08 08:08:53,194 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:53,215 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:53,217 | INFO | sqlalchemy.engine.Engine | [cached since 5.249s ago] ('radio_check_in', 1)
2025-11-08 08:08:53,222 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:53,223 | INFO | sqlalchemy.engine.Engine | [cached since 5.255s ago] ('radio_position_reporting', 1)
2025-11-08 08:08:53,227 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:53,227 | INFO | sqlalchemy.engine.Engine | [cached since 5.259s ago] ('approach_readback', 1)
2025-11-08 08:08:53,256 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:53,259 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:53,265 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:53,532 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:53,534 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:53,536 | INFO | sqlalchemy.engine.Engine | [cached since 208.7s ago] ()
2025-11-08 08:08:53,546 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:53,547 | INFO | sqlalchemy.engine.Engine | [cached since 85.02s ago] (1,)
2025-11-08 08:08:53,570 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:53,571 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:53,572 | INFO | sqlalchemy.engine.Engine | [cached since 208.7s ago] ()
2025-11-08 08:08:53,580 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:53,582 | INFO | sqlalchemy.engine.Engine | [cached since 85.05s ago] (1,)
2025-11-08 08:08:53,607 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:53,608 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:53,610 | INFO | sqlalchemy.engine.Engine | [cached since 208.8s ago] ()
2025-11-08 08:08:53,620 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:53,622 | INFO | sqlalchemy.engine.Engine | [cached since 85.09s ago] (1,)
2025-11-08 08:08:53,784 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:53,787 | INFO | sqlalchemy.engine.Engine | [cached since 5.82s ago] ('radio_exit_zone', 1)
2025-11-08 08:08:53,798 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:53,819 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:53,826 | INFO | sqlalchemy.engine.Engine | [cached since 5.857s ago] ('approach_return_contact', 1)
2025-11-08 08:08:53,832 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:53,878 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:53,881 | INFO | sqlalchemy.engine.Engine | [cached since 5.913s ago] ('frequency_usage_error', 1)
2025-11-08 08:08:53,913 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:54,168 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:54,170 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:54,171 | INFO | sqlalchemy.engine.Engine | [cached since 209.3s ago] ()
2025-11-08 08:08:54,178 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:54,180 | INFO | sqlalchemy.engine.Engine | [cached since 85.65s ago] (1,)
2025-11-08 08:08:54,261 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:54,262 | INFO | sqlalchemy.engine.Engine | [cached since 6.294s ago] ('ground_departure_request', 1)
2025-11-08 08:08:54,266 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:54,591 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:54,592 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:54,593 | INFO | sqlalchemy.engine.Engine | [cached since 209.7s ago] ()
2025-11-08 08:08:54,599 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:54,600 | INFO | sqlalchemy.engine.Engine | [cached since 86.07s ago] (1,)
2025-11-08 08:08:54,676 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:54,677 | INFO | sqlalchemy.engine.Engine | [cached since 6.709s ago] ('ground_readback', 1)
2025-11-08 08:08:54,684 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:54,955 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:54,955 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:54,957 | INFO | sqlalchemy.engine.Engine | [cached since 210.1s ago] ()
2025-11-08 08:08:54,965 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:54,966 | INFO | sqlalchemy.engine.Engine | [cached since 86.43s ago] (1,)
2025-11-08 08:08:55,055 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:55,056 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:55,057 | INFO | sqlalchemy.engine.Engine | [cached since 210.2s ago] ()
2025-11-08 08:08:55,064 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:55,066 | INFO | sqlalchemy.engine.Engine | [cached since 86.53s ago] (1,)
2025-11-08 08:08:55,088 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:55,091 | INFO | sqlalchemy.engine.Engine | [cached since 7.123s ago] ('tower_hold_short', 1)
2025-11-08 08:08:55,102 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:55,194 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:55,196 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:55,197 | INFO | sqlalchemy.engine.Engine | [cached since 210.4s ago] ()
2025-11-08 08:08:55,207 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:55,208 | INFO | sqlalchemy.engine.Engine | [cached since 86.68s ago] (1,)
2025-11-08 08:08:55,215 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:55,216 | INFO | sqlalchemy.engine.Engine | [cached since 7.248s ago] ('tower_line_up', 1)
2025-11-08 08:08:55,222 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:55,282 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:55,283 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:55,286 | INFO | sqlalchemy.engine.Engine | [cached since 210.4s ago] ()
2025-11-08 08:08:55,292 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:55,295 | INFO | sqlalchemy.engine.Engine | [cached since 86.76s ago] (1,)
2025-11-08 08:08:55,308 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:55,310 | INFO | sqlalchemy.engine.Engine | [cached since 7.342s ago] ('tower_takeoff_clearance', 1)
2025-11-08 08:08:55,314 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:55,387 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:55,387 | INFO | sqlalchemy.engine.Engine | [cached since 7.42s ago] ('tower_initial_climb', 1)
2025-11-08 08:08:55,392 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:55,612 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:55,613 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:55,614 | INFO | sqlalchemy.engine.Engine | [cached since 210.8s ago] ()
2025-11-08 08:08:55,621 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:55,623 | INFO | sqlalchemy.engine.Engine | [cached since 87.09s ago] (1,)
2025-11-08 08:08:55,747 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:55,748 | INFO | sqlalchemy.engine.Engine | [cached since 7.78s ago] ('approach_zone_entry', 1)
2025-11-08 08:08:55,754 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:55,761 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:55,764 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:55,766 | INFO | sqlalchemy.engine.Engine | [cached since 210.9s ago] ()
2025-11-08 08:08:55,778 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:55,782 | INFO | sqlalchemy.engine.Engine | [cached since 87.25s ago] (1,)
2025-11-08 08:08:55,909 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:55,910 | INFO | sqlalchemy.engine.Engine | [cached since 7.942s ago] ('approach_contact', 1)
2025-11-08 08:08:55,914 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:55,971 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:55,972 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:55,973 | INFO | sqlalchemy.engine.Engine | [cached since 211.1s ago] ()
2025-11-08 08:08:56,008 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:56,009 | INFO | sqlalchemy.engine.Engine | [cached since 87.48s ago] (1,)
2025-11-08 08:08:56,106 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:56,108 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:56,110 | INFO | sqlalchemy.engine.Engine | [cached since 211.3s ago] ()
2025-11-08 08:08:56,113 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:56,114 | INFO | sqlalchemy.engine.Engine | [cached since 8.146s ago] ('radio_check_in', 1)
2025-11-08 08:08:56,125 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:56,130 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:56,132 | INFO | sqlalchemy.engine.Engine | [cached since 87.6s ago] (1,)
2025-11-08 08:08:56,261 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:56,263 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:56,264 | INFO | sqlalchemy.engine.Engine | [cached since 211.4s ago] ()
2025-11-08 08:08:56,274 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:56,276 | INFO | sqlalchemy.engine.Engine | [cached since 87.74s ago] (1,)
2025-11-08 08:08:56,297 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:56,299 | INFO | sqlalchemy.engine.Engine | [cached since 8.331s ago] ('radio_position_reporting', 1)
2025-11-08 08:08:56,307 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:56,324 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:56,326 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:56,327 | INFO | sqlalchemy.engine.Engine | [cached since 211.5s ago] ()
2025-11-08 08:08:56,337 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:56,339 | INFO | sqlalchemy.engine.Engine | [cached since 87.81s ago] (1,)
2025-11-08 08:08:56,405 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:56,416 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:56,418 | INFO | sqlalchemy.engine.Engine | [cached since 211.6s ago] ()
2025-11-08 08:08:56,436 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:56,443 | INFO | sqlalchemy.engine.Engine | [cached since 87.91s ago] (1,)
2025-11-08 08:08:56,464 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:56,466 | INFO | sqlalchemy.engine.Engine | [cached since 8.497s ago] ('approach_readback', 1)
2025-11-08 08:08:56,472 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:56,515 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:56,516 | INFO | sqlalchemy.engine.Engine | [cached since 8.547s ago] ('radio_exit_zone', 1)
2025-11-08 08:08:56,523 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:56,538 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:56,538 | INFO | sqlalchemy.engine.Engine | [cached since 8.57s ago] ('approach_return_contact', 1)
2025-11-08 08:08:56,561 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:58,267 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:58,269 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:58,271 | INFO | sqlalchemy.engine.Engine | [cached since 213.4s ago] ()
2025-11-08 08:08:58,278 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:58,279 | INFO | sqlalchemy.engine.Engine | [cached since 89.75s ago] (1,)
2025-11-08 08:08:58,366 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:58,367 | INFO | sqlalchemy.engine.Engine | [cached since 10.4s ago] ('frequency_usage_error', 1)
2025-11-08 08:08:58,374 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:58,583 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:58,584 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:58,585 | INFO | sqlalchemy.engine.Engine | [cached since 213.7s ago] ()
2025-11-08 08:08:58,596 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:58,598 | INFO | sqlalchemy.engine.Engine | [cached since 90.07s ago] (1,)
2025-11-08 08:08:58,718 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:58,720 | INFO | sqlalchemy.engine.Engine | [cached since 10.75s ago] ('ground_departure_request', 1)
2025-11-08 08:08:58,727 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:59,029 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:59,030 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:59,030 | INFO | sqlalchemy.engine.Engine | [cached since 214.2s ago] ()
2025-11-08 08:08:59,037 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:59,038 | INFO | sqlalchemy.engine.Engine | [cached since 90.51s ago] (1,)
2025-11-08 08:08:59,115 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:59,116 | INFO | sqlalchemy.engine.Engine | [cached since 11.15s ago] ('ground_readback', 1)
2025-11-08 08:08:59,122 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:59,418 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:59,419 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:59,420 | INFO | sqlalchemy.engine.Engine | [cached since 214.6s ago] ()
2025-11-08 08:08:59,426 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:59,427 | INFO | sqlalchemy.engine.Engine | [cached since 90.9s ago] (1,)
2025-11-08 08:08:59,477 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:59,478 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:59,480 | INFO | sqlalchemy.engine.Engine | [cached since 214.6s ago] ()
2025-11-08 08:08:59,488 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:59,489 | INFO | sqlalchemy.engine.Engine | [cached since 90.96s ago] (1,)
2025-11-08 08:08:59,532 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:59,533 | INFO | sqlalchemy.engine.Engine | [cached since 11.56s ago] ('tower_hold_short', 1)
2025-11-08 08:08:59,541 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:59,589 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:59,591 | INFO | sqlalchemy.engine.Engine | [cached since 11.62s ago] ('tower_line_up', 1)
2025-11-08 08:08:59,623 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:59,635 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:59,636 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:59,637 | INFO | sqlalchemy.engine.Engine | [cached since 214.8s ago] ()
2025-11-08 08:08:59,645 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:59,646 | INFO | sqlalchemy.engine.Engine | [cached since 91.11s ago] (1,)
2025-11-08 08:08:59,711 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:08:59,714 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:08:59,715 | INFO | sqlalchemy.engine.Engine | [cached since 214.9s ago] ()
2025-11-08 08:08:59,724 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:08:59,726 | INFO | sqlalchemy.engine.Engine | [cached since 91.19s ago] (1,)
2025-11-08 08:08:59,766 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:59,767 | INFO | sqlalchemy.engine.Engine | [cached since 11.8s ago] ('tower_takeoff_clearance', 1)
2025-11-08 08:08:59,774 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:08:59,827 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:08:59,828 | INFO | sqlalchemy.engine.Engine | [cached since 11.86s ago] ('tower_initial_climb', 1)
2025-11-08 08:08:59,834 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:09:00,228 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:09:00,230 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:09:00,230 | INFO | sqlalchemy.engine.Engine | [cached since 215.4s ago] ()
2025-11-08 08:09:00,240 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:09:00,241 | INFO | sqlalchemy.engine.Engine | [cached since 91.71s ago] (1,)
2025-11-08 08:09:00,295 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:09:00,297 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:09:00,298 | INFO | sqlalchemy.engine.Engine | [cached since 215.5s ago] ()
2025-11-08 08:09:00,306 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:09:00,307 | INFO | sqlalchemy.engine.Engine | [cached since 91.78s ago] (1,)
2025-11-08 08:09:00,335 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:09:00,336 | INFO | sqlalchemy.engine.Engine | [cached since 12.37s ago] ('approach_zone_entry', 1)
2025-11-08 08:09:00,344 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:09:00,443 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:09:00,444 | INFO | sqlalchemy.engine.Engine | [cached since 12.48s ago] ('approach_contact', 1)
2025-11-08 08:09:00,450 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:09:00,511 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:09:00,512 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:09:00,513 | INFO | sqlalchemy.engine.Engine | [cached since 215.7s ago] ()
2025-11-08 08:09:00,520 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:09:00,522 | INFO | sqlalchemy.engine.Engine | [cached since 91.99s ago] (1,)
2025-11-08 08:09:00,667 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:09:00,669 | INFO | sqlalchemy.engine.Engine | [cached since 12.7s ago] ('radio_check_in', 1)
2025-11-08 08:09:00,678 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:09:01,125 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:09:01,126 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:09:01,128 | INFO | sqlalchemy.engine.Engine | [cached since 216.3s ago] ()
2025-11-08 08:09:01,139 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:09:01,141 | INFO | sqlalchemy.engine.Engine | [cached since 92.61s ago] (1,)
2025-11-08 08:09:01,214 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:09:01,216 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:09:01,216 | INFO | sqlalchemy.engine.Engine | [cached since 216.4s ago] ()
2025-11-08 08:09:01,224 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:09:01,225 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:09:01,227 | INFO | sqlalchemy.engine.Engine | [cached since 216.4s ago] ()
2025-11-08 08:09:01,231 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:09:01,232 | INFO | sqlalchemy.engine.Engine | [cached since 92.7s ago] (1,)
2025-11-08 08:09:01,238 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:09:01,239 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:09:01,241 | INFO | sqlalchemy.engine.Engine | [cached since 216.4s ago] ()
2025-11-08 08:09:01,244 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:09:01,246 | INFO | sqlalchemy.engine.Engine | [cached since 92.72s ago] (1,)
2025-11-08 08:09:01,254 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:09:01,256 | INFO | sqlalchemy.engine.Engine | [cached since 92.72s ago] (1,)
2025-11-08 08:09:01,259 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:09:01,260 | INFO | sqlalchemy.engine.Engine | [cached since 13.29s ago] ('radio_position_reporting', 1)
2025-11-08 08:09:01,266 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:09:01,376 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:09:01,378 | INFO | sqlalchemy.engine.Engine | [cached since 13.41s ago] ('radio_exit_zone', 1)
2025-11-08 08:09:01,382 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:09:01,383 | INFO | sqlalchemy.engine.Engine | [cached since 13.41s ago] ('approach_return_contact', 1)
2025-11-08 08:09:01,387 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:09:01,390 | INFO | sqlalchemy.engine.Engine | [cached since 13.42s ago] ('approach_readback', 1)
2025-11-08 08:09:01,395 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:09:01,398 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:09:01,415 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:14:55,416 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-08 08:14:55,417 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-08 08:14:55,423 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-08 08:14:55,423 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-08 08:14:55,433 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-08 08:14:55,434 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-08 08:14:55,439 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:14:55,440 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-08 08:14:55,441 | INFO | sqlalchemy.engine.Engine | [generated in 0.00096s] ()
2025-11-08 08:14:55,450 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:14:55,450 | INFO | sqlalchemy.engine.Engine | [generated in 0.00121s] ()
2025-11-08 08:14:55,456 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:14:55,458 | INFO | sqlalchemy.engine.Engine | [generated in 0.00125s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:14:55,477 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:14:55,479 | INFO | sqlalchemy.engine.Engine | [cached since 0.0217s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:14:55,483 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:14:55,484 | INFO | sqlalchemy.engine.Engine | [cached since 0.02723s ago] ('phase_scores', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:14:55,489 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:14:55,491 | INFO | sqlalchemy.engine.Engine | [cached since 0.03412s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:14:55,496 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:14:55,498 | INFO | sqlalchemy.engine.Engine | [cached since 0.04028s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:14:55,502 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:14:55,504 | INFO | sqlalchemy.engine.Engine | [cached since 0.04619s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:14:55,509 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-08 08:14:55,510 | INFO | sqlalchemy.engine.Engine | [generated in 0.00135s] ('user_status', 'pg_catalog')
2025-11-08 08:14:55,518 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-08 08:14:55,519 | INFO | sqlalchemy.engine.Engine | [cached since 0.01052s ago] ('account_type', 'pg_catalog')
2025-11-08 08:14:55,523 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-08 08:14:55,525 | INFO | sqlalchemy.engine.Engine | [generated in 0.00125s] ()
2025-11-08 08:14:55,532 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-08 08:14:55,533 | INFO | sqlalchemy.engine.Engine | [generated in 0.00117s] ()
2025-11-08 08:14:55,554 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-08 08:14:55,556 | INFO | sqlalchemy.engine.Engine | [generated in 0.00181s] ()
2025-11-08 08:14:55,633 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-08 08:14:55,673 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-08 08:16:50,140 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-08 08:16:50,140 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-08 08:16:50,147 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-08 08:16:50,148 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-08 08:16:50,154 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-08 08:16:50,156 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-08 08:16:50,163 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:16:50,164 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-08 08:16:50,165 | INFO | sqlalchemy.engine.Engine | [generated in 0.00127s] ()
2025-11-08 08:16:50,171 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:16:50,173 | INFO | sqlalchemy.engine.Engine | [generated in 0.00144s] ()
2025-11-08 08:16:50,182 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:16:50,183 | INFO | sqlalchemy.engine.Engine | [generated in 0.00152s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:16:50,202 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:16:50,204 | INFO | sqlalchemy.engine.Engine | [cached since 0.02235s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:16:50,207 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:16:50,209 | INFO | sqlalchemy.engine.Engine | [cached since 0.0269s ago] ('phase_scores', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:16:50,212 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:16:50,214 | INFO | sqlalchemy.engine.Engine | [cached since 0.03255s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:16:50,218 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:16:50,220 | INFO | sqlalchemy.engine.Engine | [cached since 0.03873s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:16:50,224 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:16:50,225 | INFO | sqlalchemy.engine.Engine | [cached since 0.044s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:16:50,232 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-08 08:16:50,234 | INFO | sqlalchemy.engine.Engine | [generated in 0.00163s] ('user_status', 'pg_catalog')
2025-11-08 08:16:50,240 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-08 08:16:50,242 | INFO | sqlalchemy.engine.Engine | [cached since 0.01044s ago] ('account_type', 'pg_catalog')
2025-11-08 08:16:50,247 | INFO | sqlalchemy.engine.Engine | 
CREATE TABLE ecowhiskey.phase_scores (
	id UUID NOT NULL, 
	training_session_id UUID NOT NULL, 
	user_id INTEGER NOT NULL, 
	phase_id VARCHAR NOT NULL, 
	score FLOAT NOT NULL, 
	feedback VARCHAR, 
	created_at TIMESTAMP WITHOUT TIME ZONE DEFAULT 'NOW()' NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES ecowhiskey.users (id) ON DELETE CASCADE
)


2025-11-08 08:16:50,249 | INFO | sqlalchemy.engine.Engine | [no key 0.00185s] ()
2025-11-08 08:16:50,485 | INFO | sqlalchemy.engine.Engine | CREATE INDEX ix_phase_scores_training_session_id ON ecowhiskey.phase_scores (training_session_id)
2025-11-08 08:16:50,486 | INFO | sqlalchemy.engine.Engine | [no key 0.00073s] ()
2025-11-08 08:16:50,505 | INFO | sqlalchemy.engine.Engine | CREATE INDEX ix_phase_scores_phase_id ON ecowhiskey.phase_scores (phase_id)
2025-11-08 08:16:50,506 | INFO | sqlalchemy.engine.Engine | [no key 0.00083s] ()
2025-11-08 08:16:50,524 | INFO | sqlalchemy.engine.Engine | CREATE INDEX ix_phase_scores_user_id ON ecowhiskey.phase_scores (user_id)
2025-11-08 08:16:50,526 | INFO | sqlalchemy.engine.Engine | [no key 0.00137s] ()
2025-11-08 08:16:50,550 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-08 08:16:50,551 | INFO | sqlalchemy.engine.Engine | [generated in 0.00122s] ()
2025-11-08 08:16:50,554 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-08 08:16:50,555 | INFO | sqlalchemy.engine.Engine | [generated in 0.00088s] ()
2025-11-08 08:16:50,572 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-08 08:16:50,573 | INFO | sqlalchemy.engine.Engine | [generated in 0.00136s] ()
2025-11-08 08:16:50,624 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-08 08:16:50,667 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-08 08:39:57,772 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:39:57,773 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:39:57,774 | INFO | sqlalchemy.engine.Engine | [cached since 1388s ago] ()
2025-11-08 08:39:57,799 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.email = $1::VARCHAR
2025-11-08 08:39:57,801 | INFO | sqlalchemy.engine.Engine | [generated in 0.00151s] ('josuelu3@gmail.com',)
2025-11-08 08:39:57,925 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:40:00,256 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:40:00,258 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:40:00,258 | INFO | sqlalchemy.engine.Engine | [cached since 1390s ago] ()
2025-11-08 08:40:00,266 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:40:00,266 | INFO | sqlalchemy.engine.Engine | [generated in 0.00084s] (1,)
2025-11-08 08:40:00,329 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:40:00,331 | INFO | sqlalchemy.engine.Engine | [cached since 0.06508s ago] (1,)
2025-11-08 08:40:00,335 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:40:21,485 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:40:21,487 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:40:21,487 | INFO | sqlalchemy.engine.Engine | [cached since 1411s ago] ()
2025-11-08 08:40:21,502 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:40:21,502 | INFO | sqlalchemy.engine.Engine | [cached since 21.24s ago] (1,)
2025-11-08 08:40:21,589 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:40:21,626 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:40:21,628 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:40:21,629 | INFO | sqlalchemy.engine.Engine | [cached since 1411s ago] ()
2025-11-08 08:40:21,636 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:40:21,637 | INFO | sqlalchemy.engine.Engine | [cached since 21.37s ago] (1,)
2025-11-08 08:40:21,712 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.user_id = $1::INTEGER ORDER BY ecowhiskey.training_contexts.created_at DESC 
 LIMIT $2::INTEGER
2025-11-08 08:40:21,713 | INFO | sqlalchemy.engine.Engine | [generated in 0.00094s] (1, 3)
2025-11-08 08:40:21,729 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:40:24,158 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:40:24,159 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:40:24,161 | INFO | sqlalchemy.engine.Engine | [cached since 1414s ago] ()
2025-11-08 08:40:24,162 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:40:24,164 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:40:24,165 | INFO | sqlalchemy.engine.Engine | [cached since 1414s ago] ()
2025-11-08 08:40:24,231 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:40:24,232 | INFO | sqlalchemy.engine.Engine | [cached since 23.97s ago] (1,)
2025-11-08 08:40:24,235 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:40:24,237 | INFO | sqlalchemy.engine.Engine | [cached since 23.97s ago] (1,)
2025-11-08 08:40:24,245 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:40:24,247 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:40:24,248 | INFO | sqlalchemy.engine.Engine | [cached since 1414s ago] ()
2025-11-08 08:40:24,256 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:40:24,259 | INFO | sqlalchemy.engine.Engine | [cached since 23.99s ago] (1,)
2025-11-08 08:40:24,286 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:40:24,287 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:40:24,290 | INFO | sqlalchemy.engine.Engine | [cached since 1414s ago] ()
2025-11-08 08:40:24,302 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:40:24,303 | INFO | sqlalchemy.engine.Engine | [cached since 24.04s ago] (1,)
2025-11-08 08:40:24,325 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:40:24,327 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:40:24,329 | INFO | sqlalchemy.engine.Engine | [cached since 1414s ago] ()
2025-11-08 08:40:24,339 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:40:24,341 | INFO | sqlalchemy.engine.Engine | [cached since 24.08s ago] (1,)
2025-11-08 08:40:24,347 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:40:24,348 | INFO | sqlalchemy.engine.Engine | [generated in 0.00204s] ('ground_departure_request', 1)
2025-11-08 08:40:24,353 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:40:24,354 | INFO | sqlalchemy.engine.Engine | [cached since 0.007483s ago] ('frequency_usage_error', 1)
2025-11-08 08:40:24,360 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:40:24,362 | INFO | sqlalchemy.engine.Engine | [cached since 0.01558s ago] ('ground_readback', 1)
2025-11-08 08:40:24,370 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:40:24,381 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:40:24,389 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:40:24,425 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:40:24,426 | INFO | sqlalchemy.engine.Engine | [cached since 0.08011s ago] ('tower_hold_short', 1)
2025-11-08 08:40:24,444 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:40:24,458 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:40:24,460 | INFO | sqlalchemy.engine.Engine | [cached since 0.113s ago] ('tower_line_up', 1)
2025-11-08 08:40:24,475 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:40:24,735 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:40:24,737 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:40:24,738 | INFO | sqlalchemy.engine.Engine | [cached since 1415s ago] ()
2025-11-08 08:40:24,741 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:40:24,742 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:40:24,744 | INFO | sqlalchemy.engine.Engine | [cached since 1415s ago] ()
2025-11-08 08:40:24,752 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:40:24,754 | INFO | sqlalchemy.engine.Engine | [cached since 24.49s ago] (1,)
2025-11-08 08:40:24,758 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:40:24,759 | INFO | sqlalchemy.engine.Engine | [cached since 24.49s ago] (1,)
2025-11-08 08:40:24,768 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:40:24,770 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:40:24,771 | INFO | sqlalchemy.engine.Engine | [cached since 1415s ago] ()
2025-11-08 08:40:24,783 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:40:24,784 | INFO | sqlalchemy.engine.Engine | [cached since 24.52s ago] (1,)
2025-11-08 08:40:24,793 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:40:24,796 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:40:24,799 | INFO | sqlalchemy.engine.Engine | [cached since 1415s ago] ()
2025-11-08 08:40:24,813 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:40:24,819 | INFO | sqlalchemy.engine.Engine | [cached since 24.55s ago] (1,)
2025-11-08 08:40:24,889 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:40:24,893 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:40:24,895 | INFO | sqlalchemy.engine.Engine | [cached since 1415s ago] ()
2025-11-08 08:40:24,904 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:40:24,906 | INFO | sqlalchemy.engine.Engine | [cached since 24.64s ago] (1,)
2025-11-08 08:40:24,920 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:40:24,921 | INFO | sqlalchemy.engine.Engine | [cached since 0.5739s ago] ('approach_readback', 1)
2025-11-08 08:40:24,923 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:40:24,925 | INFO | sqlalchemy.engine.Engine | [cached since 0.5783s ago] ('tower_initial_climb', 1)
2025-11-08 08:40:24,932 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:40:24,933 | INFO | sqlalchemy.engine.Engine | [cached since 0.5875s ago] ('approach_contact', 1)
2025-11-08 08:40:24,938 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:40:24,946 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:40:24,951 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:40:24,954 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:40:24,955 | INFO | sqlalchemy.engine.Engine | [cached since 0.6089s ago] ('approach_zone_entry', 1)
2025-11-08 08:40:24,973 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:40:25,000 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:40:25,001 | INFO | sqlalchemy.engine.Engine | [cached since 0.6543s ago] ('tower_takeoff_clearance', 1)
2025-11-08 08:40:25,018 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:40:25,255 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:40:25,258 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:40:25,259 | INFO | sqlalchemy.engine.Engine | [cached since 1415s ago] ()
2025-11-08 08:40:25,270 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:40:25,271 | INFO | sqlalchemy.engine.Engine | [cached since 25.01s ago] (1,)
2025-11-08 08:40:25,273 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:40:25,274 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:40:25,276 | INFO | sqlalchemy.engine.Engine | [cached since 1415s ago] ()
2025-11-08 08:40:25,285 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:40:25,286 | INFO | sqlalchemy.engine.Engine | [cached since 25.02s ago] (1,)
2025-11-08 08:40:25,299 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:40:25,300 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:40:25,302 | INFO | sqlalchemy.engine.Engine | [cached since 1415s ago] ()
2025-11-08 08:40:25,310 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:40:25,311 | INFO | sqlalchemy.engine.Engine | [cached since 25.05s ago] (1,)
2025-11-08 08:40:25,332 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:40:25,333 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:40:25,334 | INFO | sqlalchemy.engine.Engine | [cached since 1415s ago] ()
2025-11-08 08:40:25,342 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:40:25,343 | INFO | sqlalchemy.engine.Engine | [cached since 25.08s ago] (1,)
2025-11-08 08:40:25,364 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:40:25,366 | INFO | sqlalchemy.engine.Engine | [cached since 1.019s ago] ('radio_check_in', 1)
2025-11-08 08:40:25,370 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:40:25,370 | INFO | sqlalchemy.engine.Engine | [cached since 1.025s ago] ('radio_position_reporting', 1)
2025-11-08 08:40:25,384 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:40:25,390 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:40:25,395 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:40:25,398 | INFO | sqlalchemy.engine.Engine | [cached since 1.051s ago] ('radio_exit_zone', 1)
2025-11-08 08:40:25,413 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:40:25,423 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.phase_scores.id, ecowhiskey.phase_scores.training_session_id, ecowhiskey.phase_scores.user_id, ecowhiskey.phase_scores.phase_id, ecowhiskey.phase_scores.score, ecowhiskey.phase_scores.feedback, ecowhiskey.phase_scores.created_at 
FROM ecowhiskey.phase_scores 
WHERE ecowhiskey.phase_scores.phase_id = $1::VARCHAR AND ecowhiskey.phase_scores.user_id = $2::INTEGER ORDER BY ecowhiskey.phase_scores.created_at DESC
2025-11-08 08:40:25,424 | INFO | sqlalchemy.engine.Engine | [cached since 1.078s ago] ('approach_return_contact', 1)
2025-11-08 08:40:25,441 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:40:31,418 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:40:31,419 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:40:31,420 | INFO | sqlalchemy.engine.Engine | [cached since 1421s ago] ()
2025-11-08 08:40:31,426 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-08 08:40:31,426 | INFO | sqlalchemy.engine.Engine | [cached since 31.16s ago] (1,)
2025-11-08 08:40:31,499 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.user_id = $1::INTEGER ORDER BY ecowhiskey.training_contexts.created_at DESC 
 LIMIT $2::INTEGER
2025-11-08 08:40:31,500 | INFO | sqlalchemy.engine.Engine | [cached since 9.787s ago] (1, 3)
2025-11-08 08:40:31,514 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-08 08:40:58,216 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-08 08:40:58,217 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-08 08:40:58,221 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-08 08:40:58,222 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-08 08:40:58,228 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-08 08:40:58,229 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-08 08:40:58,232 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-08 08:40:58,234 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-08 08:40:58,234 | INFO | sqlalchemy.engine.Engine | [generated in 0.00088s] ()
2025-11-08 08:40:58,239 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-08 08:40:58,240 | INFO | sqlalchemy.engine.Engine | [generated in 0.00119s] ()
2025-11-08 08:40:58,246 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:40:58,248 | INFO | sqlalchemy.engine.Engine | [generated in 0.00122s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:40:58,266 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:40:58,266 | INFO | sqlalchemy.engine.Engine | [cached since 0.02012s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:40:58,269 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:40:58,270 | INFO | sqlalchemy.engine.Engine | [cached since 0.02447s ago] ('phase_scores', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:40:58,273 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:40:58,274 | INFO | sqlalchemy.engine.Engine | [cached since 0.02827s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:40:58,276 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:40:58,278 | INFO | sqlalchemy.engine.Engine | [cached since 0.03134s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:40:58,279 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-08 08:40:58,280 | INFO | sqlalchemy.engine.Engine | [cached since 0.03429s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-08 08:40:58,284 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-08 08:40:58,285 | INFO | sqlalchemy.engine.Engine | [generated in 0.00079s] ('user_status', 'pg_catalog')
2025-11-08 08:40:58,290 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-08 08:40:58,291 | INFO | sqlalchemy.engine.Engine | [cached since 0.006953s ago] ('account_type', 'pg_catalog')
2025-11-08 08:40:58,294 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-08 08:40:58,295 | INFO | sqlalchemy.engine.Engine | [generated in 0.00062s] ()
2025-11-08 08:40:58,299 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-08 08:40:58,300 | INFO | sqlalchemy.engine.Engine | [generated in 0.00099s] ()
2025-11-08 08:40:58,313 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
