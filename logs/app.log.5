2025-11-06 17:42:07,090 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:42:07,209 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:42:07,210 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:42:07,212 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:42:07,328 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:42:07,330 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:42:07,332 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:42:07,334 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 17:42:07,465 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:42:07,467 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:42:07,468 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:42:07,592 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:42:07,593 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:42:07,596 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:42:07,597 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 17:42:07,715 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 17:42:07,716 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:42:07,718 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 17:42:07,840 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:42:07,842 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:42:07,843 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:42:07,956 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:42:07,957 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:42:07,959 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 17:42:08,079 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:42:08,081 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:42:08,084 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:42:08,193 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:42:08,195 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:42:08,197 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:42:08,314 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:42:08,315 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:42:08,317 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 17:42:08,431 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:42:08,433 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:42:08,434 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:42:08,547 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:42:08,549 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:42:08,550 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:42:08,552 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 17:42:08,705 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:42:08,710 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 17:42:08,902 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:42:08,905 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:42:08,908 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:42:09,103 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:42:09,105 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:42:09,108 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:42:09,306 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:42:09,309 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:42:09,314 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:42:09,469 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:42:09,469 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:42:09,471 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:42:09,473 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 17:42:09,587 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:42:09,589 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:42:09,591 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:42:09,608 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1133]
2025-11-06 17:42:09,608 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 17:42:09,610 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-06 17:42:09,726 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 17:42:09,727 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 17:42:09,728 | INFO | sqlalchemy.engine.Engine | [cached since 1.647e+05s ago] ()
2025-11-06 17:42:09,735 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 17:42:09,735 | INFO | sqlalchemy.engine.Engine | [cached since 1.647e+05s ago] (1,)
2025-11-06 17:42:09,840 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 17:42:09,842 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639AF44950>}) about to wait for the following futures []
2025-11-06 17:42:09,843 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639AF44950>}) done waiting for dependent futures
2025-11-06 17:42:09,843 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639AF44950>}) with kwargs {'client': <botocore.client.S3 object at 0x000002639A5BAA50>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002639AF50310>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002639AECAB10>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002639A8687D0>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639AF44950>}
2025-11-06 17:42:09,845 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/487c6486-8fc9-43a9-86d3-b459b1ff96e9/e65f024c288d4c83a7add7c918b7e65a.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002639A8687D0> for transfer request: 0.
2025-11-06 17:42:09,845 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 17:42:09,846 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/487c6486-8fc9-43a9-86d3-b459b1ff96e9/e65f024c288d4c83a7add7c918b7e65a.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-06 17:42:09,847 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 17:42:09,847 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/487c6486-8fc9-43a9-86d3-b459b1ff96e9/e65f024c288d4c83a7add7c918b7e65a.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-06 17:42:09,849 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/487c6486-8fc9-43a9-86d3-b459b1ff96e9/e65f024c288d4c83a7add7c918b7e65a.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x000002639A5BAA50>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002639AF447D0>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/487c6486-8fc9-43a9-86d3-b459b1ff96e9/e65f024c288d4c83a7add7c918b7e65a.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-06 17:42:10,530 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 17:42:15,885 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 17:43:19,558 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 17:43:19,559 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-06 17:43:19,560 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-06 17:43:19,561 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:43:19,561 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-06 17:43:19,562 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-06 17:43:19,564 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:43:19,564 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 17:43:19,565 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-06 17:43:19,566 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 17:43:19,567 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 17:43:19,568 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-06 17:43:19,568 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-06 17:43:19,569 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:43:19,570 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-06 17:43:19,570 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-06 17:43:19,571 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:43:19,573 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 17:43:19,573 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:268]
2025-11-06 17:43:19,574 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 17:43:19,575 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 17:43:19,576 | DEBUG | python_multipart.multipart | Calling on_header_field with data[310:329]
2025-11-06 17:43:19,576 | DEBUG | python_multipart.multipart | Calling on_header_value with data[331:385]
2025-11-06 17:43:19,576 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:43:19,578 | DEBUG | python_multipart.multipart | Calling on_header_field with data[387:399]
2025-11-06 17:43:19,578 | DEBUG | python_multipart.multipart | Calling on_header_value with data[401:411]
2025-11-06 17:43:19,579 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:43:19,580 | DEBUG | python_multipart.multipart | Calling on_header_field with data[413:427]
2025-11-06 17:43:19,581 | DEBUG | python_multipart.multipart | Calling on_header_value with data[429:435]
2025-11-06 17:43:19,582 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:43:19,582 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 17:43:19,583 | DEBUG | python_multipart.multipart | Calling on_part_data with data[439:2920]
2025-11-06 17:43:19,584 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 17:43:19,680 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:43:19,681 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:19,684 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:43:19,809 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:19,811 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:43:19,813 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:43:19,815 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 17:43:19,928 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:43:19,929 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:19,932 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:43:20,047 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:43:20,049 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:20,051 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:43:20,053 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 17:43:20,166 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 17:43:20,168 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:20,171 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:20,172 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 17:43:20,296 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:43:20,298 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:20,300 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:43:20,302 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 17:43:20,429 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:43:20,432 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:20,434 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:43:20,544 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:20,545 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:43:20,548 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:43:20,673 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:43:20,676 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 17:43:20,679 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 17:43:20,820 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 17:43:20,821 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:43:20,929 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:43:20,932 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:20,933 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:43:21,041 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 17:43:21,042 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:43:21,044 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 17:43:21,157 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:43:21,159 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:21,160 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:43:21,269 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:21,271 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:21,273 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 17:43:21,383 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 17:43:21,384 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:43:21,495 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:43:21,497 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:21,498 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:21,500 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 17:43:21,608 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:21,609 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:21,612 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 17:43:21,723 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:43:21,724 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 17:43:21,852 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:21,854 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:43:21,857 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:43:21,975 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:43:21,976 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:21,978 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:43:21,979 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 17:43:22,087 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 17:43:22,089 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:43:22,199 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:43:22,201 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:22,203 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:43:22,216 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1133]
2025-11-06 17:43:22,216 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 17:43:22,219 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-06 17:43:22,344 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 17:43:22,344 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 17:43:22,345 | INFO | sqlalchemy.engine.Engine | [cached since 1.648e+05s ago] ()
2025-11-06 17:43:22,353 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 17:43:22,354 | INFO | sqlalchemy.engine.Engine | [cached since 1.648e+05s ago] (1,)
2025-11-06 17:43:22,451 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 17:43:22,452 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639AF53350>}) about to wait for the following futures []
2025-11-06 17:43:22,453 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639AF53350>}) done waiting for dependent futures
2025-11-06 17:43:22,454 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639AF53350>}) with kwargs {'client': <botocore.client.S3 object at 0x000002639A5BAA50>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002639AF45E10>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002639AF45550>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002639AF53CD0>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639AF53350>}
2025-11-06 17:43:22,456 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/487c6486-8fc9-43a9-86d3-b459b1ff96e9/c217d08102f24a3295d1dfc036483c73.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002639AF53CD0> for transfer request: 0.
2025-11-06 17:43:22,456 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 17:43:22,459 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/487c6486-8fc9-43a9-86d3-b459b1ff96e9/c217d08102f24a3295d1dfc036483c73.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-06 17:43:22,459 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 17:43:22,459 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/487c6486-8fc9-43a9-86d3-b459b1ff96e9/c217d08102f24a3295d1dfc036483c73.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-06 17:43:22,461 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/487c6486-8fc9-43a9-86d3-b459b1ff96e9/c217d08102f24a3295d1dfc036483c73.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x000002639A5BAA50>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002639AF52550>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/487c6486-8fc9-43a9-86d3-b459b1ff96e9/c217d08102f24a3295d1dfc036483c73.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-06 17:43:23,096 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 17:43:28,378 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 17:43:52,871 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 17:43:52,872 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-06 17:43:52,873 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-06 17:43:52,873 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:43:52,874 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-06 17:43:52,875 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-06 17:43:52,875 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:43:52,876 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 17:43:52,877 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-06 17:43:52,878 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 17:43:52,878 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 17:43:52,879 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-06 17:43:52,880 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-06 17:43:52,880 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:43:52,882 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-06 17:43:52,884 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-06 17:43:52,885 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:43:52,886 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 17:43:52,886 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:268]
2025-11-06 17:43:52,887 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 17:43:52,889 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 17:43:52,889 | DEBUG | python_multipart.multipart | Calling on_header_field with data[310:329]
2025-11-06 17:43:52,890 | DEBUG | python_multipart.multipart | Calling on_header_value with data[331:385]
2025-11-06 17:43:52,891 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:43:52,891 | DEBUG | python_multipart.multipart | Calling on_header_field with data[387:399]
2025-11-06 17:43:52,893 | DEBUG | python_multipart.multipart | Calling on_header_value with data[401:411]
2025-11-06 17:43:52,894 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:43:52,895 | DEBUG | python_multipart.multipart | Calling on_header_field with data[413:427]
2025-11-06 17:43:52,896 | DEBUG | python_multipart.multipart | Calling on_header_value with data[429:435]
2025-11-06 17:43:52,897 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:43:52,897 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 17:43:52,899 | DEBUG | python_multipart.multipart | Calling on_part_data with data[439:2920]
2025-11-06 17:43:52,901 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 17:43:53,008 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:43:53,010 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:53,012 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:43:53,129 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:53,131 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:43:53,133 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:43:53,242 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:53,244 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:43:53,245 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:43:53,364 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 17:43:53,366 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:53,367 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 17:43:53,482 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 17:43:53,484 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:43:53,598 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:43:53,600 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:53,602 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:43:53,714 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:53,716 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:53,718 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 17:43:53,720 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 17:43:53,832 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:43:53,834 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:53,837 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:43:53,838 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 17:43:53,950 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:43:53,952 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:53,954 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:43:54,072 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:43:54,074 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:54,077 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:43:54,200 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:54,201 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:43:54,204 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:43:54,317 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:54,318 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:43:54,320 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:43:54,425 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:54,427 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:43:54,429 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:43:54,541 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:54,543 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:54,545 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:54,547 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:43:54,666 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:43:54,667 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:54,670 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:43:54,782 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:43:54,785 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:54,787 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:43:54,908 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:54,910 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 17:43:54,911 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 17:43:55,031 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:43:55,032 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:55,035 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:43:55,152 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:43:55,154 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:55,156 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:43:55,275 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:43:55,277 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:43:55,280 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:43:55,409 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 17:43:55,411 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:43:55,459 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:43:55,461 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:167]
2025-11-06 17:43:55,462 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 17:43:55,462 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-06 17:43:55,583 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 17:43:55,584 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 17:43:55,585 | INFO | sqlalchemy.engine.Engine | [cached since 1.649e+05s ago] ()
2025-11-06 17:43:55,591 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 17:43:55,593 | INFO | sqlalchemy.engine.Engine | [cached since 1.648e+05s ago] (1,)
2025-11-06 17:43:55,686 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 17:43:55,687 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639AF50C50>}) about to wait for the following futures []
2025-11-06 17:43:55,688 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639AF50C50>}) done waiting for dependent futures
2025-11-06 17:43:55,689 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639AF50C50>}) with kwargs {'client': <botocore.client.S3 object at 0x000002639A5BAA50>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002639AEA1D50>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002639AEA1BD0>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002639AF47FD0>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639AF50C50>}
2025-11-06 17:43:55,689 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/487c6486-8fc9-43a9-86d3-b459b1ff96e9/f97ae19e09f04108a6514aeed00d4563.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002639AF47FD0> for transfer request: 0.
2025-11-06 17:43:55,690 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 17:43:55,692 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/487c6486-8fc9-43a9-86d3-b459b1ff96e9/f97ae19e09f04108a6514aeed00d4563.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-06 17:43:55,692 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 17:43:55,693 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/487c6486-8fc9-43a9-86d3-b459b1ff96e9/f97ae19e09f04108a6514aeed00d4563.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-06 17:43:55,695 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/487c6486-8fc9-43a9-86d3-b459b1ff96e9/f97ae19e09f04108a6514aeed00d4563.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x000002639A5BAA50>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002639AF51150>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/487c6486-8fc9-43a9-86d3-b459b1ff96e9/f97ae19e09f04108a6514aeed00d4563.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-06 17:43:55,892 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 17:44:05,428 | INFO | app.controllers.audio | Transcripción recibida session=487c6486-8fc9-43a9-86d3-b459b1ff96e9: superficie, Alfa Noviembre India, en algar 37, solicitamos abrir el plan de vuelo a zona ejo, vía paso de mojo, 7000 pies, dos almas a bordo, capitán Sas, tres horas y media.
2025-11-06 17:44:05,429 | INFO | app.logs.transcript | student | session=487c6486-8fc9-43a9-86d3-b459b1ff96e9 | frequency=118.00 | text=superficie, Alfa Noviembre India, en algar 37, solicitamos abrir el plan de vuelo a zona ejo, vía paso de mojo, 7000 pies, dos almas a bordo, capitán Sas, tres horas y media.
2025-11-06 17:44:05,564 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 17:44:05,565 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 17:44:05,566 | INFO | sqlalchemy.engine.Engine | [cached since 1.646e+05s ago] (UUID('487c6486-8fc9-43a9-86d3-b459b1ff96e9'),)
2025-11-06 17:44:05,586 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 17:44:05,722 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 17:44:05,724 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 17:44:05,725 | INFO | sqlalchemy.engine.Engine | [cached since 1.646e+05s ago] (UUID('487c6486-8fc9-43a9-86d3-b459b1ff96e9'),)
2025-11-06 17:44:05,739 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 17:44:05,739 | INFO | sqlalchemy.engine.Engine | [cached since 1.646e+05s ago] ('{"meteo": {"qnh": "1028", "vis": "10km", "wind": "040/37", "condition": "IMC", "windSpeed": "37", "windDirection": "040"}, "route": "MRPV-MRPV", "obj ... (5748 characters truncated) ... 10km", "wind": "040/37", "condition": "IMC", "windSpeed": "37", "windDirection": "040"}, "route": "MRPV-MRPV", "timestamp": "2025-11-06T23:44:05Z"}]}', datetime.datetime(2025, 11, 6, 23, 44, 5, 739697), UUID('798733cc-936f-4b8a-8c5d-3dbe469bd37b'))
2025-11-06 17:44:05,796 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 17:44:05,823 | INFO | app.controllers.audio | Fase activa session=487c6486-8fc9-43a9-86d3-b459b1ff96e9 phase_id=ground_departure_request intent=ground_taxi_clearance freq=ground
2025-11-06 17:44:05,824 | INFO | app.controllers.audio | Frecuencia fuera de rango intent=ground_taxi_clearance freq=118.000 esperado=121.700
2025-11-06 17:44:05,932 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 17:44:05,932 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 17:44:05,934 | INFO | sqlalchemy.engine.Engine | [cached since 1.646e+05s ago] (UUID('487c6486-8fc9-43a9-86d3-b459b1ff96e9'),)
2025-11-06 17:44:05,947 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 17:44:05,948 | INFO | sqlalchemy.engine.Engine | [cached since 1.646e+05s ago] ('{"meteo": {"qnh": "1028", "vis": "10km", "wind": "040/37", "condition": "IMC", "windSpeed": "37", "windDirection": "040"}, "route": "MRPV-MRPV", "tur ... (6081 characters truncated) ... tives": ["readBack"], "frequencies": {"ground": "121.7", "tower": "118.3"}, "scenario_id": "mrpv_vfr_departure", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 6, 23, 44, 5, 947621), UUID('798733cc-936f-4b8a-8c5d-3dbe469bd37b'))
2025-11-06 17:44:05,960 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 17:44:05,976 | INFO | app.logs.transcript | controller | session=487c6486-8fc9-43a9-86d3-b459b1ff96e9 | frequency=118.00 | intent=ground_taxi_clearance | phase=ground_departure_request | allow_response=False | text=La frecuencia esperada para esta solicitud es 121.700.
2025-11-06 17:44:05,978 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 17:45:04,550 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 17:45:04,550 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-06 17:45:04,551 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-06 17:45:04,552 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:45:04,552 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-06 17:45:04,553 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-06 17:45:04,554 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:45:04,555 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 17:45:04,556 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-06 17:45:04,557 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 17:45:04,558 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 17:45:04,558 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-06 17:45:04,559 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-06 17:45:04,559 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:45:04,560 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-06 17:45:04,561 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-06 17:45:04,562 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:45:04,564 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 17:45:04,564 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:268]
2025-11-06 17:45:04,565 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 17:45:04,566 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 17:45:04,567 | DEBUG | python_multipart.multipart | Calling on_header_field with data[310:329]
2025-11-06 17:45:04,568 | DEBUG | python_multipart.multipart | Calling on_header_value with data[331:385]
2025-11-06 17:45:04,568 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:45:04,569 | DEBUG | python_multipart.multipart | Calling on_header_field with data[387:399]
2025-11-06 17:45:04,570 | DEBUG | python_multipart.multipart | Calling on_header_value with data[401:411]
2025-11-06 17:45:04,572 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:45:04,573 | DEBUG | python_multipart.multipart | Calling on_header_field with data[413:427]
2025-11-06 17:45:04,574 | DEBUG | python_multipart.multipart | Calling on_header_value with data[429:435]
2025-11-06 17:45:04,574 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:45:04,575 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 17:45:04,576 | DEBUG | python_multipart.multipart | Calling on_part_data with data[439:2920]
2025-11-06 17:45:04,577 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 17:45:04,691 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:45:04,693 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:45:04,696 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:45:04,816 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:45:04,817 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:45:04,820 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:45:04,926 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:45:04,928 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:45:04,931 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:45:05,044 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:45:05,046 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:45:05,047 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:45:05,156 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 17:45:05,158 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:45:05,270 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:45:05,272 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:45:05,274 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 17:45:05,387 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:45:05,388 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:45:05,390 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:45:05,503 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:45:05,504 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:45:05,507 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:45:05,508 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 17:45:05,635 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:45:05,637 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:45:05,638 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 17:45:05,752 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:45:05,754 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:45:05,755 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:45:05,871 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:45:05,872 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:45:05,874 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:45:05,991 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:45:05,992 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:45:05,994 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:45:06,098 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 17:45:06,100 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:45:06,102 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 17:45:06,214 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:45:06,216 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:45:06,217 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:45:06,334 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:45:06,336 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:45:06,337 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:45:06,449 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:45:06,449 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:45:06,451 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 17:45:06,565 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:45:06,567 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:45:06,568 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:45:06,674 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:45:06,676 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:45:06,677 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:45:06,787 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 17:45:06,789 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:45:06,899 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 17:45:06,901 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:45:06,902 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 17:45:07,016 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:45:07,017 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:45:07,020 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:45:07,022 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 17:45:07,134 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:45:07,136 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:45:07,137 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:45:07,248 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:45:07,249 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:45:07,251 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:45:07,363 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:45:07,365 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:45:07,366 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:45:07,368 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 17:45:07,406 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2812]
2025-11-06 17:45:07,406 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 17:45:07,407 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-06 17:45:07,522 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 17:45:07,523 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 17:45:07,524 | INFO | sqlalchemy.engine.Engine | [cached since 1.649e+05s ago] ()
2025-11-06 17:45:07,530 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 17:45:07,531 | INFO | sqlalchemy.engine.Engine | [cached since 1.649e+05s ago] (1,)
2025-11-06 17:45:07,621 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 17:45:07,623 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639AF508D0>}) about to wait for the following futures []
2025-11-06 17:45:07,624 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639AF508D0>}) done waiting for dependent futures
2025-11-06 17:45:07,625 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639AF508D0>}) with kwargs {'client': <botocore.client.S3 object at 0x000002639A5BAA50>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002639AE8C110>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002639AF479D0>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002639AF51650>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639AF508D0>}
2025-11-06 17:45:07,626 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/487c6486-8fc9-43a9-86d3-b459b1ff96e9/1c77077e217645299eeb06d13dae206b.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002639AF51650> for transfer request: 0.
2025-11-06 17:45:07,626 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 17:45:07,630 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/487c6486-8fc9-43a9-86d3-b459b1ff96e9/1c77077e217645299eeb06d13dae206b.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-06 17:45:07,630 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 17:45:07,630 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/487c6486-8fc9-43a9-86d3-b459b1ff96e9/1c77077e217645299eeb06d13dae206b.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-06 17:45:07,632 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/487c6486-8fc9-43a9-86d3-b459b1ff96e9/1c77077e217645299eeb06d13dae206b.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x000002639A5BAA50>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002639AF50D10>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/487c6486-8fc9-43a9-86d3-b459b1ff96e9/1c77077e217645299eeb06d13dae206b.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-06 17:45:08,370 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 17:45:17,957 | INFO | app.controllers.audio | Transcripción recibida session=487c6486-8fc9-43a9-86d3-b459b1ff96e9: Pava superficie, Alfa Noviembre India, en hangar 37 solicitamos abrir plan de vuelo a zona eco, vía paso de Oomogo, 7000 pies, dos almas a bordo, Capitán Salas, autonomía, tres horas y media.
2025-11-06 17:45:17,958 | INFO | app.logs.transcript | student | session=487c6486-8fc9-43a9-86d3-b459b1ff96e9 | frequency=121.70 | text=Pava superficie, Alfa Noviembre India, en hangar 37 solicitamos abrir plan de vuelo a zona eco, vía paso de Oomogo, 7000 pies, dos almas a bordo, Capitán Salas, autonomía, tres horas y media.
2025-11-06 17:45:18,067 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 17:45:18,068 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 17:45:18,068 | INFO | sqlalchemy.engine.Engine | [cached since 1.647e+05s ago] (UUID('487c6486-8fc9-43a9-86d3-b459b1ff96e9'),)
2025-11-06 17:45:18,086 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 17:45:18,197 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 17:45:18,199 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 17:45:18,200 | INFO | sqlalchemy.engine.Engine | [cached since 1.647e+05s ago] (UUID('487c6486-8fc9-43a9-86d3-b459b1ff96e9'),)
2025-11-06 17:45:18,215 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 17:45:18,215 | INFO | sqlalchemy.engine.Engine | [cached since 1.647e+05s ago] ('{"meteo": {"qnh": "1028", "vis": "10km", "wind": "040/37", "condition": "IMC", "windSpeed": "37", "windDirection": "040"}, "route": "MRPV-MRPV", "tur ... (6527 characters truncated) ... tives": ["readBack"], "frequencies": {"tower": "118.3", "ground": "121.7"}, "scenario_id": "mrpv_vfr_departure", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 6, 23, 45, 18, 215364), UUID('798733cc-936f-4b8a-8c5d-3dbe469bd37b'))
2025-11-06 17:45:18,229 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 17:45:18,255 | INFO | app.controllers.audio | Fase activa session=487c6486-8fc9-43a9-86d3-b459b1ff96e9 phase_id=ground_departure_request intent=ground_taxi_clearance freq=ground
2025-11-06 17:45:18,259 | INFO | app.services.audio_pipeline | Prompts generados intent=ground_taxi_clearance freq_group=ground
SYSTEM> Eres un controlador de superficie en Costa Rica (Pavas Superficie 121.7). Evalúas la llamada inicial de apertura de plan VFR y decides si emites la autorización. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "metadata": object
 }.
Si necesitas proponer un cambio de fase, incluye en metadata la clave "nextPhase". No escribas texto ad...
USER> Fase actual: Solicitud de apertura de plan de vuelo
Intent esperado: ground_taxi_clearance
Transcripción textual del alumno:
Pava superficie, Alfa Noviembre India, en hangar 37 solicitamos abrir plan de vuelo a zona eco, vía paso de Oomogo, 7000 pies, dos almas a bordo, Capitán Salas, autonomía, tres horas y media.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: ground
- Fase ID: ground_departure_request

Checklist alumno:
- Destinatario correcto (Pavas Superficie / frecuencia ...
2025-11-06 17:45:19,561 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=ground_taxi_clearance: {
  "intent": "ground_taxi_clearance",
  "allowResponse": true,
  "controllerText": "Alfa Noviembre India, pista 10, viento 40/37, QNH 1028, squawk 0522, rodaje Alfa 2, Alfa, Avise listo.",
  "feedback": "Llamada correcta.",
  "confidence": 1,
  "metadata": {
    "nextPhase": "ground_readback"
  }
}
2025-11-06 17:45:19,563 | INFO | app.controllers.audio | Transición automática de fase session=487c6486-8fc9-43a9-86d3-b459b1ff96e9 de=ground_departure_request a=ground_readback
2025-11-06 17:45:19,680 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 17:45:19,682 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 17:45:19,683 | INFO | sqlalchemy.engine.Engine | [cached since 1.647e+05s ago] (UUID('487c6486-8fc9-43a9-86d3-b459b1ff96e9'),)
2025-11-06 17:45:19,701 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 17:45:19,701 | INFO | sqlalchemy.engine.Engine | [cached since 1.647e+05s ago] ('{"meteo": {"qnh": "1028", "vis": "10km", "wind": "040/37", "condition": "IMC", "windSpeed": "37", "windDirection": "040"}, "route": "MRPV-MRPV", "tur ... (7221 characters truncated) ... tives": ["readBack"], "frequencies": {"tower": "118.3", "ground": "121.7"}, "scenario_id": "mrpv_vfr_departure", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 6, 23, 45, 19, 699937), UUID('798733cc-936f-4b8a-8c5d-3dbe469bd37b'))
2025-11-06 17:45:19,717 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 17:45:19,733 | INFO | app.logs.transcript | controller | session=487c6486-8fc9-43a9-86d3-b459b1ff96e9 | frequency=121.70 | intent=ground_taxi_clearance | phase=ground_readback | allow_response=True | text=Alfa Noviembre India, pista 10, viento 40/37, QNH 1028, squawk 0522, rodaje Alfa 2, Alfa, Avise listo.
2025-11-06 17:45:21,246 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 17:46:02,351 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 17:46:02,353 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-06 17:46:02,353 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-06 17:46:02,354 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:46:02,354 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-06 17:46:02,355 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-06 17:46:02,355 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:46:02,356 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 17:46:02,356 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-06 17:46:02,357 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 17:46:02,357 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 17:46:02,359 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-06 17:46:02,360 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-06 17:46:02,360 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:46:02,361 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-06 17:46:02,362 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-06 17:46:02,363 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:46:02,364 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 17:46:02,365 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:268]
2025-11-06 17:46:02,365 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 17:46:02,366 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 17:46:02,367 | DEBUG | python_multipart.multipart | Calling on_header_field with data[310:329]
2025-11-06 17:46:02,368 | DEBUG | python_multipart.multipart | Calling on_header_value with data[331:385]
2025-11-06 17:46:02,369 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:46:02,369 | DEBUG | python_multipart.multipart | Calling on_header_field with data[387:399]
2025-11-06 17:46:02,370 | DEBUG | python_multipart.multipart | Calling on_header_value with data[401:411]
2025-11-06 17:46:02,370 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:46:02,371 | DEBUG | python_multipart.multipart | Calling on_header_field with data[413:427]
2025-11-06 17:46:02,372 | DEBUG | python_multipart.multipart | Calling on_header_value with data[429:435]
2025-11-06 17:46:02,373 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:46:02,373 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 17:46:02,374 | DEBUG | python_multipart.multipart | Calling on_part_data with data[439:4380]
2025-11-06 17:46:02,375 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:46:02,483 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:02,484 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:02,485 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:46:02,600 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:02,601 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:02,603 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:46:02,721 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:02,722 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:02,723 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:46:02,839 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:02,840 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:02,842 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:46:02,963 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:02,965 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:02,966 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:02,968 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 17:46:03,087 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:03,088 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:03,090 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:46:03,208 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:03,209 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:03,211 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:03,214 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 17:46:03,333 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:03,334 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:03,336 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:03,338 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:46:03,471 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:03,473 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:03,475 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:03,479 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 17:46:03,590 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:03,592 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:03,594 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:46:03,710 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 17:46:03,712 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:46:03,832 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 17:46:03,833 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:03,835 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 17:46:03,954 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:03,955 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:03,957 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:46:04,070 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:04,071 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:04,072 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:46:04,189 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:04,190 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:04,191 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 17:46:04,307 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 17:46:04,307 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:04,309 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 17:46:04,425 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:04,428 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:04,429 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:04,430 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 17:46:04,542 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:04,542 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:04,546 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:46:04,665 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:04,666 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:04,669 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:46:04,790 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:04,791 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:04,793 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:46:04,910 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:04,912 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:04,913 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:46:04,989 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 17:46:04,991 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:685]
2025-11-06 17:46:04,991 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 17:46:04,992 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-06 17:46:05,125 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 17:46:05,126 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 17:46:05,126 | INFO | sqlalchemy.engine.Engine | [cached since 1.65e+05s ago] ()
2025-11-06 17:46:05,137 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 17:46:05,138 | INFO | sqlalchemy.engine.Engine | [cached since 1.649e+05s ago] (1,)
2025-11-06 17:46:05,247 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 17:46:05,250 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639AF02850>}) about to wait for the following futures []
2025-11-06 17:46:05,251 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639AF02850>}) done waiting for dependent futures
2025-11-06 17:46:05,252 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639AF02850>}) with kwargs {'client': <botocore.client.S3 object at 0x000002639A5BAA50>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002639AEA1BD0>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002639A872190>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002639AF441D0>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639AF02850>}
2025-11-06 17:46:05,253 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/487c6486-8fc9-43a9-86d3-b459b1ff96e9/947bb21f14b740f9b41dbfe317de8af4.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002639AF441D0> for transfer request: 0.
2025-11-06 17:46:05,253 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 17:46:05,255 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/487c6486-8fc9-43a9-86d3-b459b1ff96e9/947bb21f14b740f9b41dbfe317de8af4.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-06 17:46:05,256 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 17:46:05,256 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/487c6486-8fc9-43a9-86d3-b459b1ff96e9/947bb21f14b740f9b41dbfe317de8af4.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-06 17:46:05,257 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/487c6486-8fc9-43a9-86d3-b459b1ff96e9/947bb21f14b740f9b41dbfe317de8af4.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x000002639A5BAA50>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002639AEE65D0>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/487c6486-8fc9-43a9-86d3-b459b1ff96e9/947bb21f14b740f9b41dbfe317de8af4.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-06 17:46:06,148 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 17:46:15,786 | INFO | app.controllers.audio | Transcripción recibida session=487c6486-8fc9-43a9-86d3-b459b1ff96e9: QHN1028, transponder 0522, lo daremos vía alfa 2, alfa al.de espera, vista 10 Alfa Noviembre India.
2025-11-06 17:46:15,787 | INFO | app.logs.transcript | student | session=487c6486-8fc9-43a9-86d3-b459b1ff96e9 | frequency=121.70 | text=QHN1028, transponder 0522, lo daremos vía alfa 2, alfa al.de espera, vista 10 Alfa Noviembre India.
2025-11-06 17:46:15,902 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 17:46:15,903 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 17:46:15,904 | INFO | sqlalchemy.engine.Engine | [cached since 1.648e+05s ago] (UUID('487c6486-8fc9-43a9-86d3-b459b1ff96e9'),)
2025-11-06 17:46:15,922 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 17:46:16,049 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 17:46:16,051 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 17:46:16,052 | INFO | sqlalchemy.engine.Engine | [cached since 1.648e+05s ago] (UUID('487c6486-8fc9-43a9-86d3-b459b1ff96e9'),)
2025-11-06 17:46:16,066 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 17:46:16,067 | INFO | sqlalchemy.engine.Engine | [cached since 1.648e+05s ago] ('{"meteo": {"qnh": "1028", "vis": "10km", "wind": "040/37", "condition": "IMC", "windSpeed": "37", "windDirection": "040"}, "route": "MRPV-MRPV", "tur ... (7563 characters truncated) ... tives": ["readBack"], "frequencies": {"tower": "118.3", "ground": "121.7"}, "scenario_id": "mrpv_vfr_departure", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 6, 23, 46, 16, 66825), UUID('798733cc-936f-4b8a-8c5d-3dbe469bd37b'))
2025-11-06 17:46:16,081 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 17:46:16,109 | INFO | app.controllers.audio | Fase activa session=487c6486-8fc9-43a9-86d3-b459b1ff96e9 phase_id=ground_readback intent=ground_taxi_readback freq=ground
2025-11-06 17:46:16,110 | INFO | app.services.audio_pipeline | Prompts generados intent=ground_taxi_readback freq_group=ground
SYSTEM> Sigues siendo Pavas Superficie en 121.7. Evalúas el readback del alumno tras la autorización de taxi. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "metadata": object
 }.
Si necesitas proponer un cambio de fase, incluye en metadata la clave "nextPhase". No escribas texto adicional antes o después del JSON.
USER> Fase actual: Readback de autorización de taxi
Intent esperado: ground_taxi_readback
Transcripción textual del alumno:
QHN1028, transponder 0522, lo daremos vía alfa 2, alfa al.de espera, vista 10 Alfa Noviembre India.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: ground
- Fase ID: ground_readback

Checklist alumno:
- Repite QNH asignado.
- Repite transponder asignado.
- Confirma ruta de rodaje y pista.
- Cierra con identificador correcto.

Checklist controlador:
- Comparar la...
2025-11-06 17:46:16,822 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=ground_taxi_readback: {
  "intent": "ground_taxi_readback",
  "allowResponse": false,
  "controllerText": null,
  "feedback": "Falta la ruta de rodaje completa y la pista asignada.",
  "confidence": null,
  "metadata": {
    "missingItems": ["Ruta de rodaje completa", "Pista asignada"]
  }
}
2025-11-06 17:46:16,937 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 17:46:16,937 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 17:46:16,939 | INFO | sqlalchemy.engine.Engine | [cached since 1.648e+05s ago] (UUID('487c6486-8fc9-43a9-86d3-b459b1ff96e9'),)
2025-11-06 17:46:16,956 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 17:46:16,957 | INFO | sqlalchemy.engine.Engine | [cached since 1.648e+05s ago] ('{"meteo": {"qnh": "1028", "vis": "10km", "wind": "040/37", "condition": "IMC", "windSpeed": "37", "windDirection": "040"}, "route": "MRPV-MRPV", "tur ... (8182 characters truncated) ... tives": ["readBack"], "frequencies": {"tower": "118.3", "ground": "121.7"}, "scenario_id": "mrpv_vfr_departure", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 6, 23, 46, 16, 956312), UUID('798733cc-936f-4b8a-8c5d-3dbe469bd37b'))
2025-11-06 17:46:16,973 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 17:46:16,990 | INFO | app.logs.transcript | controller | session=487c6486-8fc9-43a9-86d3-b459b1ff96e9 | frequency=121.70 | intent=ground_taxi_readback | phase=ground_readback | allow_response=False | text=
2025-11-06 17:46:16,991 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 17:46:45,223 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 17:46:45,224 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-06 17:46:45,225 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-06 17:46:45,225 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:46:45,226 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-06 17:46:45,228 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-06 17:46:45,232 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:46:45,234 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 17:46:45,235 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-06 17:46:45,237 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 17:46:45,237 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 17:46:45,239 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-06 17:46:45,240 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-06 17:46:45,241 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:46:45,242 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-06 17:46:45,243 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-06 17:46:45,244 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:46:45,245 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 17:46:45,246 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:268]
2025-11-06 17:46:45,246 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 17:46:45,247 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 17:46:45,250 | DEBUG | python_multipart.multipart | Calling on_header_field with data[310:329]
2025-11-06 17:46:45,251 | DEBUG | python_multipart.multipart | Calling on_header_value with data[331:385]
2025-11-06 17:46:45,253 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:46:45,253 | DEBUG | python_multipart.multipart | Calling on_header_field with data[387:399]
2025-11-06 17:46:45,254 | DEBUG | python_multipart.multipart | Calling on_header_value with data[401:411]
2025-11-06 17:46:45,255 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:46:45,256 | DEBUG | python_multipart.multipart | Calling on_header_field with data[413:427]
2025-11-06 17:46:45,256 | DEBUG | python_multipart.multipart | Calling on_header_value with data[429:435]
2025-11-06 17:46:45,256 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:46:45,258 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 17:46:45,259 | DEBUG | python_multipart.multipart | Calling on_part_data with data[439:4380]
2025-11-06 17:46:45,260 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:46:45,372 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 17:46:45,373 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:46:45,496 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:45,498 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:45,500 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:45,502 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 17:46:45,616 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 17:46:45,617 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:45,618 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 17:46:45,739 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:45,741 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:45,742 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:45,745 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 17:46:45,862 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:45,865 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:45,866 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:46:45,986 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:45,987 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:45,989 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:46:46,105 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:46,106 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:46,107 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:46:46,230 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:46,232 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:6732]
2025-11-06 17:46:46,353 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:46,355 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 17:46:46,356 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 17:46:46,488 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:46,489 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:46,491 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:46:46,614 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:46,615 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:46,617 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:46,620 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 17:46:46,735 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:46,737 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:46,739 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 17:46:46,851 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 17:46:46,854 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:46:46,972 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:46,973 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:46,975 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 17:46:47,097 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:47,099 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:47,101 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:47,103 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 17:46:47,220 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:47,222 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:47,222 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:46:47,338 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:47,340 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:47,342 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:46:47,459 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:47,460 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:47,462 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:46:47,581 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:47,582 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:47,585 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:46:47,705 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:47,706 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:47,707 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:46:47,838 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 17:46:47,839 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:46:47,960 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:46:47,961 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:46:47,964 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:46:47,992 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1977]
2025-11-06 17:46:47,992 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 17:46:47,994 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-06 17:46:48,110 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 17:46:48,111 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 17:46:48,113 | INFO | sqlalchemy.engine.Engine | [cached since 1.65e+05s ago] ()
2025-11-06 17:46:48,120 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 17:46:48,121 | INFO | sqlalchemy.engine.Engine | [cached since 1.65e+05s ago] (1,)
2025-11-06 17:46:48,209 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 17:46:48,211 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639AF45F90>}) about to wait for the following futures []
2025-11-06 17:46:48,212 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639AF45F90>}) done waiting for dependent futures
2025-11-06 17:46:48,213 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639AF45F90>}) with kwargs {'client': <botocore.client.S3 object at 0x000002639A5BAA50>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002639AF50390>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002639AF519D0>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002639AF47F50>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639AF45F90>}
2025-11-06 17:46:48,215 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/487c6486-8fc9-43a9-86d3-b459b1ff96e9/c0695356858c4021958ef795b2f25147.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002639AF47F50> for transfer request: 0.
2025-11-06 17:46:48,215 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 17:46:48,217 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/487c6486-8fc9-43a9-86d3-b459b1ff96e9/c0695356858c4021958ef795b2f25147.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-06 17:46:48,217 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 17:46:48,218 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/487c6486-8fc9-43a9-86d3-b459b1ff96e9/c0695356858c4021958ef795b2f25147.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-06 17:46:48,219 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/487c6486-8fc9-43a9-86d3-b459b1ff96e9/c0695356858c4021958ef795b2f25147.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x000002639A5BAA50>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002639AEA1C10>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/487c6486-8fc9-43a9-86d3-b459b1ff96e9/c0695356858c4021958ef795b2f25147.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-06 17:46:48,993 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 17:46:58,602 | INFO | app.controllers.audio | Transcripción recibida session=487c6486-8fc9-43a9-86d3-b459b1ff96e9: QNH 3005 transpor- transponder 0522, rodaremos vía Alfa dos alfa al.de espera pista 10 Alfa Noviembre India.
2025-11-06 17:46:58,603 | INFO | app.logs.transcript | student | session=487c6486-8fc9-43a9-86d3-b459b1ff96e9 | frequency=121.70 | text=QNH 3005 transpor- transponder 0522, rodaremos vía Alfa dos alfa al.de espera pista 10 Alfa Noviembre India.
2025-11-06 17:46:58,737 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 17:46:58,738 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 17:46:58,739 | INFO | sqlalchemy.engine.Engine | [cached since 1.648e+05s ago] (UUID('487c6486-8fc9-43a9-86d3-b459b1ff96e9'),)
2025-11-06 17:46:58,758 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 17:46:59,363 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 17:46:59,364 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 17:46:59,366 | INFO | sqlalchemy.engine.Engine | [cached since 1.648e+05s ago] (UUID('487c6486-8fc9-43a9-86d3-b459b1ff96e9'),)
2025-11-06 17:46:59,398 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 17:46:59,399 | INFO | sqlalchemy.engine.Engine | [cached since 1.648e+05s ago] ('{"meteo": {"qnh": "1028", "vis": "10km", "wind": "040/37", "condition": "IMC", "windSpeed": "37", "windDirection": "040"}, "route": "MRPV-MRPV", "tur ... (8533 characters truncated) ... tives": ["readBack"], "frequencies": {"tower": "118.3", "ground": "121.7"}, "scenario_id": "mrpv_vfr_departure", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 6, 23, 46, 59, 398798), UUID('798733cc-936f-4b8a-8c5d-3dbe469bd37b'))
2025-11-06 17:46:59,425 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 17:46:59,474 | INFO | app.controllers.audio | Fase activa session=487c6486-8fc9-43a9-86d3-b459b1ff96e9 phase_id=ground_readback intent=ground_taxi_readback freq=ground
2025-11-06 17:46:59,476 | INFO | app.services.audio_pipeline | Prompts generados intent=ground_taxi_readback freq_group=ground
SYSTEM> Sigues siendo Pavas Superficie en 121.7. Evalúas el readback del alumno tras la autorización de taxi. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "metadata": object
 }.
Si necesitas proponer un cambio de fase, incluye en metadata la clave "nextPhase". No escribas texto adicional antes o después del JSON.
USER> Fase actual: Readback de autorización de taxi
Intent esperado: ground_taxi_readback
Transcripción textual del alumno:
QNH 3005 transpor- transponder 0522, rodaremos vía Alfa dos alfa al.de espera pista 10 Alfa Noviembre India.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: ground
- Fase ID: ground_readback

Checklist alumno:
- Repite QNH asignado.
- Repite transponder asignado.
- Confirma ruta de rodaje y pista.
- Cierra con identificador correcto.

Checklist controlador:
- Co...
2025-11-06 17:47:00,032 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=ground_taxi_readback: {
  "intent": "ground_taxi_readback",
  "allowResponse": true,
  "controllerText": "Alfa Noviembre India, colación correcta.",
  "feedback": "Colación correcta.",
  "confidence": 1,
  "metadata": {}
}
2025-11-06 17:47:00,035 | INFO | app.controllers.audio | Transición automática de fase session=487c6486-8fc9-43a9-86d3-b459b1ff96e9 de=ground_readback a=tower_ready
2025-11-06 17:47:00,165 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 17:47:00,166 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 17:47:00,167 | INFO | sqlalchemy.engine.Engine | [cached since 1.648e+05s ago] (UUID('487c6486-8fc9-43a9-86d3-b459b1ff96e9'),)
2025-11-06 17:47:00,185 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 17:47:00,186 | INFO | sqlalchemy.engine.Engine | [cached since 1.648e+05s ago] ('{"meteo": {"qnh": "1028", "vis": "10km", "wind": "040/37", "condition": "IMC", "windSpeed": "37", "windDirection": "040"}, "route": "MRPV-MRPV", "tur ... (9031 characters truncated) ... ctives": ["readBack"], "frequencies": {"tower": "118.3", "ground": "121.7"}, "scenario_id": "mrpv_vfr_departure", "default_frequency_group": "tower"}', datetime.datetime(2025, 11, 6, 23, 47, 0, 185785), UUID('798733cc-936f-4b8a-8c5d-3dbe469bd37b'))
2025-11-06 17:47:00,202 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 17:47:00,220 | INFO | app.logs.transcript | controller | session=487c6486-8fc9-43a9-86d3-b459b1ff96e9 | frequency=121.70 | intent=ground_taxi_readback | phase=tower_ready | allow_response=True | text=Alfa Noviembre India, colación correcta.
2025-11-06 17:47:01,047 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 17:47:40,493 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 17:47:40,494 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-06 17:47:40,495 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-06 17:47:40,496 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:47:40,498 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-06 17:47:40,499 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-06 17:47:40,501 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:47:40,501 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 17:47:40,502 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-06 17:47:40,502 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 17:47:40,505 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 17:47:40,506 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-06 17:47:40,507 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-06 17:47:40,508 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:47:40,508 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-06 17:47:40,510 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-06 17:47:40,510 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:47:40,512 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 17:47:40,516 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:268]
2025-11-06 17:47:40,518 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 17:47:40,519 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 17:47:40,520 | DEBUG | python_multipart.multipart | Calling on_header_field with data[310:329]
2025-11-06 17:47:40,521 | DEBUG | python_multipart.multipart | Calling on_header_value with data[331:385]
2025-11-06 17:47:40,522 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:47:40,522 | DEBUG | python_multipart.multipart | Calling on_header_field with data[387:399]
2025-11-06 17:47:40,525 | DEBUG | python_multipart.multipart | Calling on_header_value with data[401:411]
2025-11-06 17:47:40,525 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:47:40,526 | DEBUG | python_multipart.multipart | Calling on_header_field with data[413:427]
2025-11-06 17:47:40,526 | DEBUG | python_multipart.multipart | Calling on_header_value with data[429:434]
2025-11-06 17:47:40,527 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 17:47:40,528 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 17:47:40,529 | DEBUG | python_multipart.multipart | Calling on_part_data with data[438:5840]
2025-11-06 17:47:40,532 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 17:47:40,639 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:47:40,641 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:47:40,643 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:47:40,770 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:47:40,771 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:47:40,774 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 17:47:40,891 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:47:40,892 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:47:40,894 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:47:41,014 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:47:41,016 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:47:41,018 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 17:47:41,135 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:47:41,137 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:47:41,139 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:47:41,254 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 17:47:41,255 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 17:47:41,380 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:47:41,382 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 17:47:41,384 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 17:47:41,495 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 17:47:41,499 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:47:41,501 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 17:47:41,608 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 17:47:41,610 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:47:41,613 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:47:41,615 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:47:41,618 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 17:47:41,673 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 17:47:41,674 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2832]
2025-11-06 17:47:41,675 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 17:47:41,676 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-06 17:47:41,805 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 17:47:41,806 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 17:47:41,806 | INFO | sqlalchemy.engine.Engine | [cached since 1.651e+05s ago] ()
2025-11-06 17:47:41,816 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 17:47:41,816 | INFO | sqlalchemy.engine.Engine | [cached since 1.65e+05s ago] (1,)
2025-11-06 17:47:41,919 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 17:47:41,920 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639AF478D0>}) about to wait for the following futures []
2025-11-06 17:47:41,922 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639AF478D0>}) done waiting for dependent futures
2025-11-06 17:47:41,923 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639AF478D0>}) with kwargs {'client': <botocore.client.S3 object at 0x000002639A5BAA50>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002639AF61610>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002639AF615D0>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002639AF3A9D0>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639AF478D0>}
2025-11-06 17:47:41,925 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/487c6486-8fc9-43a9-86d3-b459b1ff96e9/c0543b15d07e4fbf8b24096cd961f727.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002639AF3A9D0> for transfer request: 0.
2025-11-06 17:47:41,926 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 17:47:41,928 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/487c6486-8fc9-43a9-86d3-b459b1ff96e9/c0543b15d07e4fbf8b24096cd961f727.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-06 17:47:41,929 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 17:47:41,930 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/487c6486-8fc9-43a9-86d3-b459b1ff96e9/c0543b15d07e4fbf8b24096cd961f727.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-06 17:47:41,932 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/487c6486-8fc9-43a9-86d3-b459b1ff96e9/c0543b15d07e4fbf8b24096cd961f727.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x000002639A5BAA50>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002639AF47410>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/487c6486-8fc9-43a9-86d3-b459b1ff96e9/c0543b15d07e4fbf8b24096cd961f727.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-06 17:47:42,475 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 17:47:52,022 | INFO | app.controllers.audio | Transcripción recibida session=487c6486-8fc9-43a9-86d3-b459b1ff96e9: Pavas Torre Alfa Noviembre India en.de espera listos para despegar.
2025-11-06 17:47:52,024 | INFO | app.logs.transcript | student | session=487c6486-8fc9-43a9-86d3-b459b1ff96e9 | frequency=118.30 | text=Pavas Torre Alfa Noviembre India en.de espera listos para despegar.
2025-11-06 17:47:52,191 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 17:47:52,192 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 17:47:52,195 | INFO | sqlalchemy.engine.Engine | [cached since 1.649e+05s ago] (UUID('487c6486-8fc9-43a9-86d3-b459b1ff96e9'),)
2025-11-06 17:47:52,219 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 17:47:52,374 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 17:47:52,375 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 17:47:52,376 | INFO | sqlalchemy.engine.Engine | [cached since 1.649e+05s ago] (UUID('487c6486-8fc9-43a9-86d3-b459b1ff96e9'),)
2025-11-06 17:47:52,393 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 17:47:52,395 | INFO | sqlalchemy.engine.Engine | [cached since 1.649e+05s ago] ('{"meteo": {"qnh": "1028", "vis": "10km", "wind": "040/37", "condition": "IMC", "windSpeed": "37", "windDirection": "040"}, "route": "MRPV-MRPV", "tur ... (9335 characters truncated) ... ctives": ["readBack"], "frequencies": {"tower": "118.3", "ground": "121.7"}, "scenario_id": "mrpv_vfr_departure", "default_frequency_group": "tower"}', datetime.datetime(2025, 11, 6, 23, 47, 52, 393583), UUID('798733cc-936f-4b8a-8c5d-3dbe469bd37b'))
2025-11-06 17:47:52,411 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 17:47:52,441 | INFO | app.controllers.audio | Fase activa session=487c6486-8fc9-43a9-86d3-b459b1ff96e9 phase_id=tower_ready intent=tower_takeoff_clearance freq=tower
2025-11-06 17:47:52,444 | INFO | app.services.audio_pipeline | Prompts generados intent=tower_takeoff_clearance freq_group=tower
SYSTEM> Eres Pavas Torre en 118.3. Evalúas cuando la aeronave está lista en punto de espera y emites instrucciones de despegue. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "metadata": object
 }.
Si necesitas proponer un cambio de fase, incluye en metadata la clave "nextPhase". No escribas texto adicional antes o después del JSON.
USER> Fase actual: Contacto torre y autorización de despegue
Intent esperado: tower_takeoff_clearance
Transcripción textual del alumno:
Pavas Torre Alfa Noviembre India en.de espera listos para despegar.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: tower
- Fase ID: tower_ready

Checklist alumno:
- Cambiar destinatario a Pavas Torre.
- Avisar estar en punto de espera pista 10 y listo.
- Mantener identificador y fraseología correctos.

Checklist controlador:
- Gestionar secuencia: m...
2025-11-06 17:47:53,250 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=tower_takeoff_clearance: {
  "intent": "tower_takeoff_clearance",
  "allowResponse": true,
  "controllerText": "Alfa Noviembre India, despegue autorizado, viento 080 a 12, mantenga rumbo de pista, informe al pasar 5000 pies.",
  "feedback": "Llamada correcta.",
  "confidence": 1,
  "metadata": {
    "nextPhase": "en_route"
  }
}
2025-11-06 17:47:53,359 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 17:47:53,360 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 17:47:53,362 | INFO | sqlalchemy.engine.Engine | [cached since 1.649e+05s ago] (UUID('487c6486-8fc9-43a9-86d3-b459b1ff96e9'),)
2025-11-06 17:47:53,378 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 17:47:53,378 | INFO | sqlalchemy.engine.Engine | [cached since 1.649e+05s ago] ('{"meteo": {"qnh": "1028", "vis": "10km", "wind": "040/37", "condition": "IMC", "windSpeed": "37", "windDirection": "040"}, "route": "MRPV-MRPV", "tur ... (10044 characters truncated) ... ctives": ["readBack"], "frequencies": {"tower": "118.3", "ground": "121.7"}, "scenario_id": "mrpv_vfr_departure", "default_frequency_group": "tower"}', datetime.datetime(2025, 11, 6, 23, 47, 53, 377807), UUID('798733cc-936f-4b8a-8c5d-3dbe469bd37b'))
2025-11-06 17:47:53,392 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 17:47:53,409 | INFO | app.logs.transcript | controller | session=487c6486-8fc9-43a9-86d3-b459b1ff96e9 | frequency=118.30 | intent=tower_takeoff_clearance | phase=tower_ready | allow_response=True | text=Alfa Noviembre India, despegue autorizado, viento 080 a 12, mantenga rumbo de pista, informe al pasar 5000 pies.
2025-11-06 17:47:54,559 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 18:07:01,921 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:07:01,922 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 18:07:01,922 | INFO | sqlalchemy.engine.Engine | [cached since 1.662e+05s ago] ()
2025-11-06 18:07:01,931 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.email = $1::VARCHAR
2025-11-06 18:07:01,931 | INFO | sqlalchemy.engine.Engine | [cached since 1.662e+05s ago] ('josuelu3@gmail.com',)
2025-11-06 18:07:02,116 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 18:07:04,480 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:07:04,481 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 18:07:04,483 | INFO | sqlalchemy.engine.Engine | [cached since 1.662e+05s ago] ()
2025-11-06 18:07:04,495 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 18:07:04,497 | INFO | sqlalchemy.engine.Engine | [cached since 1.662e+05s ago] (1,)
2025-11-06 18:07:04,635 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 18:07:04,636 | INFO | sqlalchemy.engine.Engine | [cached since 1.662e+05s ago] (1,)
2025-11-06 18:07:04,641 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 18:07:25,501 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:07:25,502 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 18:07:25,503 | INFO | sqlalchemy.engine.Engine | [cached since 1.663e+05s ago] ()
2025-11-06 18:07:25,513 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 18:07:25,514 | INFO | sqlalchemy.engine.Engine | [cached since 1.662e+05s ago] (1,)
2025-11-06 18:07:25,568 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:07:25,569 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 18:07:25,570 | INFO | sqlalchemy.engine.Engine | [cached since 1.663e+05s ago] ()
2025-11-06 18:07:25,580 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 18:07:25,583 | INFO | sqlalchemy.engine.Engine | [cached since 1.662e+05s ago] (1,)
2025-11-06 18:07:25,655 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 18:07:25,679 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.user_id = $1::INTEGER ORDER BY ecowhiskey.training_contexts.created_at DESC
2025-11-06 18:07:25,681 | INFO | sqlalchemy.engine.Engine | [generated in 0.00185s] (1,)
2025-11-06 18:07:25,735 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 18:07:56,230 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:07:56,231 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 18:07:56,233 | INFO | sqlalchemy.engine.Engine | [cached since 1.663e+05s ago] ()
2025-11-06 18:07:56,242 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 18:07:56,243 | INFO | sqlalchemy.engine.Engine | [cached since 1.662e+05s ago] (1,)
2025-11-06 18:07:56,346 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.schools.id, ecowhiskey.schools.name, ecowhiskey.schools.value, ecowhiskey.schools.location, ecowhiskey.schools.created_at 
FROM ecowhiskey.schools ORDER BY ecowhiskey.schools.name
2025-11-06 18:07:56,346 | INFO | sqlalchemy.engine.Engine | [generated in 0.00103s] ()
2025-11-06 18:07:56,356 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 18:11:53,284 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:11:53,286 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 18:11:53,288 | INFO | sqlalchemy.engine.Engine | [cached since 1.665e+05s ago] ()
2025-11-06 18:11:53,297 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 18:11:53,298 | INFO | sqlalchemy.engine.Engine | [cached since 1.665e+05s ago] (1,)
2025-11-06 18:11:53,421 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.training_contexts (id, training_session_id, user_id, context) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::JSONB) RETURNING ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at
2025-11-06 18:11:53,422 | INFO | sqlalchemy.engine.Engine | [cached since 1.664e+05s ago] (UUID('7c1d7f2b-f3f4-46ad-b1c1-fd5b64e9a7de'), UUID('ba174189-505e-418a-a085-4ee15c13826a'), 1, '{"route": "MRPV-MRPV", "meteo": {"condition": "VMC", "vis": "5km", "qnh": "982", "windDirection": "020", "windSpeed": "3", "wind": "020/3"}, "objectives": ["readBack"]}')
2025-11-06 18:11:53,434 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 18:11:53,632 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:11:53,635 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.id = $1::UUID
2025-11-06 18:11:53,636 | INFO | sqlalchemy.engine.Engine | [cached since 1.664e+05s ago] (UUID('7c1d7f2b-f3f4-46ad-b1c1-fd5b64e9a7de'),)
2025-11-06 18:11:53,658 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 18:13:47,175 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 18:13:47,175 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-06 18:13:47,177 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-06 18:13:47,178 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 18:13:47,179 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-06 18:13:47,180 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-06 18:13:47,183 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 18:13:47,184 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 18:13:47,186 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-06 18:13:47,187 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 18:13:47,188 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 18:13:47,188 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-06 18:13:47,188 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-06 18:13:47,189 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 18:13:47,190 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-06 18:13:47,191 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-06 18:13:47,192 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 18:13:47,193 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 18:13:47,194 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:268]
2025-11-06 18:13:47,195 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 18:13:47,197 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 18:13:47,198 | DEBUG | python_multipart.multipart | Calling on_header_field with data[310:329]
2025-11-06 18:13:47,199 | DEBUG | python_multipart.multipart | Calling on_header_value with data[331:385]
2025-11-06 18:13:47,200 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 18:13:47,201 | DEBUG | python_multipart.multipart | Calling on_header_field with data[387:399]
2025-11-06 18:13:47,202 | DEBUG | python_multipart.multipart | Calling on_header_value with data[401:411]
2025-11-06 18:13:47,203 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 18:13:47,203 | DEBUG | python_multipart.multipart | Calling on_header_field with data[413:427]
2025-11-06 18:13:47,205 | DEBUG | python_multipart.multipart | Calling on_header_value with data[429:435]
2025-11-06 18:13:47,205 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 18:13:47,206 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 18:13:47,207 | DEBUG | python_multipart.multipart | Calling on_part_data with data[439:1460]
2025-11-06 18:13:47,208 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:13:47,211 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 18:13:47,323 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 18:13:47,325 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:13:47,467 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:13:47,470 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:13:47,472 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:13:47,475 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 18:13:47,602 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:13:47,604 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:13:47,606 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:13:47,733 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:13:47,736 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:13:47,739 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:13:47,742 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:13:47,883 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:13:47,886 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:13:47,888 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:13:48,010 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:13:48,013 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:13:48,015 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 18:13:48,139 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:13:48,141 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 18:13:48,144 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 18:13:48,283 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:13:48,285 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:13:48,287 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:13:48,424 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 18:13:48,426 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:13:48,428 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 18:13:48,563 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:13:48,564 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:13:48,568 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:13:48,695 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:13:48,697 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:13:48,701 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:13:48,831 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:13:48,833 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:13:48,836 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:13:48,839 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 18:13:48,965 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:13:48,966 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:13:48,969 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 18:13:49,098 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:13:49,099 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:13:49,101 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:13:49,102 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 18:13:49,225 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:13:49,226 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:13:49,228 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:13:49,363 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:13:49,364 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:13:49,366 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:13:49,370 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 18:13:49,523 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 18:13:49,527 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:13:49,528 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 18:13:49,677 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:13:49,680 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:13:49,683 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:13:49,688 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 18:13:49,810 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:13:49,811 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:13:49,815 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:13:49,817 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:13:49,819 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 18:13:49,954 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:13:49,956 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:13:49,958 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:13:50,082 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:13:50,084 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:13:50,086 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:13:50,296 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:13:50,300 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 18:13:50,539 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:13:50,541 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:13:50,543 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:13:50,546 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 18:13:50,772 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:13:50,775 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:13:50,779 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:13:51,020 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:13:51,020 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:13:51,022 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:13:51,024 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 18:13:51,142 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:13:51,143 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:13:51,145 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:13:51,147 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:13:51,227 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 18:13:51,229 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1005]
2025-11-06 18:13:51,230 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 18:13:51,231 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-06 18:13:51,362 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:13:51,364 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 18:13:51,364 | INFO | sqlalchemy.engine.Engine | [cached since 1.666e+05s ago] ()
2025-11-06 18:13:51,371 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 18:13:51,373 | INFO | sqlalchemy.engine.Engine | [cached since 1.666e+05s ago] (1,)
2025-11-06 18:13:51,470 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 18:13:51,473 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639CF93F10>}) about to wait for the following futures []
2025-11-06 18:13:51,474 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639CF93F10>}) done waiting for dependent futures
2025-11-06 18:13:51,474 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639CF93F10>}) with kwargs {'client': <botocore.client.S3 object at 0x000002639A5BAA50>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002639AF8A690>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002639AF8A150>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002639CF92F50>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639CF93F10>}
2025-11-06 18:13:51,477 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/ba174189-505e-418a-a085-4ee15c13826a/e2e1d54b49f24b729debf5a3a67f9d43.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002639CF92F50> for transfer request: 0.
2025-11-06 18:13:51,477 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 18:13:51,478 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/ba174189-505e-418a-a085-4ee15c13826a/e2e1d54b49f24b729debf5a3a67f9d43.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-06 18:13:51,479 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 18:13:51,480 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/ba174189-505e-418a-a085-4ee15c13826a/e2e1d54b49f24b729debf5a3a67f9d43.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-06 18:13:51,481 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/ba174189-505e-418a-a085-4ee15c13826a/e2e1d54b49f24b729debf5a3a67f9d43.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x000002639A5BAA50>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002639CF92090>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/ba174189-505e-418a-a085-4ee15c13826a/e2e1d54b49f24b729debf5a3a67f9d43.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-06 18:13:52,278 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 18:15:48,561 | INFO | app.controllers.audio | Transcripción recibida session=ba174189-505e-418a-a085-4ee15c13826a: pavas superficie, Alfa Noviembre, India, en hangar 37. Solicitamos abrir plan de vuelo a zona eco, vía paso de Oomogo, 7000 pies, dos almas a bordo, capitán salas, autonomía, tres horas y media.
2025-11-06 18:15:48,562 | INFO | app.logs.transcript | student | session=ba174189-505e-418a-a085-4ee15c13826a | frequency=118.00 | text=pavas superficie, Alfa Noviembre, India, en hangar 37. Solicitamos abrir plan de vuelo a zona eco, vía paso de Oomogo, 7000 pies, dos almas a bordo, capitán salas, autonomía, tres horas y media.
2025-11-06 18:15:48,691 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:15:48,693 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 18:15:48,694 | INFO | sqlalchemy.engine.Engine | [cached since 1.665e+05s ago] (UUID('ba174189-505e-418a-a085-4ee15c13826a'),)
2025-11-06 18:15:48,713 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 18:15:48,834 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:15:48,835 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 18:15:48,836 | INFO | sqlalchemy.engine.Engine | [cached since 1.665e+05s ago] (UUID('ba174189-505e-418a-a085-4ee15c13826a'),)
2025-11-06 18:15:48,849 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 18:15:48,850 | INFO | sqlalchemy.engine.Engine | [cached since 1.665e+05s ago] ('{"meteo": {"qnh": "982", "vis": "5km", "wind": "020/3", "condition": "VMC", "windSpeed": "3", "windDirection": "020"}, "route": "MRPV-MRPV", "objecti ... (5758 characters truncated) ... : "5km", "wind": "020/3", "condition": "VMC", "windSpeed": "3", "windDirection": "020"}, "route": "MRPV-MRPV", "timestamp": "2025-11-07T00:15:48Z"}]}', datetime.datetime(2025, 11, 7, 0, 15, 48, 849206), UUID('7c1d7f2b-f3f4-46ad-b1c1-fd5b64e9a7de'))
2025-11-06 18:15:48,864 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 18:15:48,889 | INFO | app.controllers.audio | Fase activa session=ba174189-505e-418a-a085-4ee15c13826a phase_id=ground_departure_request intent=ground_taxi_clearance freq=ground
2025-11-06 18:15:48,890 | INFO | app.controllers.audio | Frecuencia fuera de rango intent=ground_taxi_clearance freq=118.000 esperado=121.700
2025-11-06 18:15:48,997 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:15:48,998 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 18:15:49,000 | INFO | sqlalchemy.engine.Engine | [cached since 1.665e+05s ago] (UUID('ba174189-505e-418a-a085-4ee15c13826a'),)
2025-11-06 18:15:49,015 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 18:15:49,015 | INFO | sqlalchemy.engine.Engine | [cached since 1.665e+05s ago] ('{"meteo": {"qnh": "982", "vis": "5km", "wind": "020/3", "condition": "VMC", "windSpeed": "3", "windDirection": "020"}, "route": "MRPV-MRPV", "turns": ... (6091 characters truncated) ... tives": ["readBack"], "frequencies": {"ground": "121.7", "tower": "118.3"}, "scenario_id": "mrpv_vfr_departure", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 7, 0, 15, 49, 15285), UUID('7c1d7f2b-f3f4-46ad-b1c1-fd5b64e9a7de'))
2025-11-06 18:15:49,028 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 18:15:49,043 | INFO | app.logs.transcript | controller | session=ba174189-505e-418a-a085-4ee15c13826a | frequency=118.00 | intent=ground_taxi_clearance | phase=ground_departure_request | allow_response=False | text=La frecuencia esperada para esta solicitud es 121.700.
2025-11-06 18:15:49,046 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 18:16:37,898 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 18:16:37,899 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-06 18:16:37,900 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-06 18:16:37,901 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 18:16:37,902 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-06 18:16:37,903 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-06 18:16:37,904 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 18:16:37,905 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 18:16:37,905 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-06 18:16:37,906 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 18:16:37,907 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 18:16:37,908 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-06 18:16:37,909 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-06 18:16:37,910 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 18:16:37,911 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-06 18:16:37,913 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-06 18:16:37,914 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 18:16:37,916 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 18:16:37,917 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:268]
2025-11-06 18:16:37,917 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 18:16:37,918 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 18:16:37,919 | DEBUG | python_multipart.multipart | Calling on_header_field with data[310:329]
2025-11-06 18:16:37,919 | DEBUG | python_multipart.multipart | Calling on_header_value with data[331:385]
2025-11-06 18:16:37,921 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 18:16:37,922 | DEBUG | python_multipart.multipart | Calling on_header_field with data[387:399]
2025-11-06 18:16:37,924 | DEBUG | python_multipart.multipart | Calling on_header_value with data[401:411]
2025-11-06 18:16:37,925 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 18:16:37,925 | DEBUG | python_multipart.multipart | Calling on_header_field with data[413:427]
2025-11-06 18:16:37,926 | DEBUG | python_multipart.multipart | Calling on_header_value with data[429:435]
2025-11-06 18:16:37,927 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 18:16:37,928 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 18:16:37,929 | DEBUG | python_multipart.multipart | Calling on_part_data with data[439:1460]
2025-11-06 18:16:37,931 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:16:37,933 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 18:16:38,088 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:16:38,090 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:16:38,093 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:16:38,242 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 18:16:38,246 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:16:38,397 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:16:38,398 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:16:38,400 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:16:38,402 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 18:16:38,534 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:16:38,535 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:16:38,537 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 18:16:38,684 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:16:38,687 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:16:38,690 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:16:38,832 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:16:38,833 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:16:38,836 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:16:38,838 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 18:16:38,972 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 18:16:38,974 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:16:38,976 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:16:38,978 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 18:16:39,121 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:16:39,123 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:16:39,125 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:16:39,264 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:16:39,266 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:16:39,267 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:16:39,271 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 18:16:39,412 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 18:16:39,416 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:16:39,418 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 18:16:39,574 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:16:39,575 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:16:39,578 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:16:39,716 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:16:39,718 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:16:39,721 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:16:39,855 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:16:39,856 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:16:39,859 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:16:39,862 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 18:16:39,993 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 18:16:39,995 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:16:40,129 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:16:40,131 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:16:40,135 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:16:40,137 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:16:40,322 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:16:40,324 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:16:40,329 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:16:40,333 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 18:16:40,526 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:16:40,530 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:6732]
2025-11-06 18:16:40,727 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:16:40,731 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:16:40,735 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:16:40,953 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:16:40,956 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:16:40,958 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:16:40,961 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 18:16:41,187 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:16:41,189 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 18:16:41,191 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 18:16:41,322 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:16:41,323 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:16:41,326 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:16:41,328 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 18:16:41,455 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:16:41,456 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:16:41,458 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:16:41,459 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:16:41,579 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:16:41,581 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:16:41,584 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:16:41,709 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:16:41,711 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:16:41,713 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:16:41,717 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 18:16:41,834 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:16:41,836 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:16:41,839 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:16:41,841 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 18:16:41,851 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:571]
2025-11-06 18:16:41,852 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 18:16:41,853 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-06 18:16:42,001 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:16:42,002 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 18:16:42,004 | INFO | sqlalchemy.engine.Engine | [cached since 1.668e+05s ago] ()
2025-11-06 18:16:42,014 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 18:16:42,015 | INFO | sqlalchemy.engine.Engine | [cached since 1.668e+05s ago] (1,)
2025-11-06 18:16:42,131 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 18:16:42,133 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639CFA8F50>}) about to wait for the following futures []
2025-11-06 18:16:42,134 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639CFA8F50>}) done waiting for dependent futures
2025-11-06 18:16:42,136 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639CFA8F50>}) with kwargs {'client': <botocore.client.S3 object at 0x000002639A5BAA50>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002639AF89810>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002639AF8A650>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002639CF93A10>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639CFA8F50>}
2025-11-06 18:16:42,138 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/ba174189-505e-418a-a085-4ee15c13826a/dbc1e1d4dbcb4b66aeab363a783a8d9a.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002639CF93A10> for transfer request: 0.
2025-11-06 18:16:42,139 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 18:16:42,141 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/ba174189-505e-418a-a085-4ee15c13826a/dbc1e1d4dbcb4b66aeab363a783a8d9a.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-06 18:16:42,141 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 18:16:42,143 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/ba174189-505e-418a-a085-4ee15c13826a/dbc1e1d4dbcb4b66aeab363a783a8d9a.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-06 18:16:42,145 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/ba174189-505e-418a-a085-4ee15c13826a/dbc1e1d4dbcb4b66aeab363a783a8d9a.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x000002639A5BAA50>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002639CFA82D0>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/ba174189-505e-418a-a085-4ee15c13826a/dbc1e1d4dbcb4b66aeab363a783a8d9a.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-06 18:16:42,900 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 18:17:33,392 | INFO | app.controllers.audio | Transcripción recibida session=ba174189-505e-418a-a085-4ee15c13826a: superficie, Alfa Noviembre India, en 37, solicitamos abrir plan de vuelo a zona eco, vía paso de Chumogo, 7000 pies, dos almas a bordo, capitán Salas, autonomía tres horas y media.
2025-11-06 18:17:33,393 | INFO | app.logs.transcript | student | session=ba174189-505e-418a-a085-4ee15c13826a | frequency=118.00 | text=superficie, Alfa Noviembre India, en 37, solicitamos abrir plan de vuelo a zona eco, vía paso de Chumogo, 7000 pies, dos almas a bordo, capitán Salas, autonomía tres horas y media.
2025-11-06 18:17:33,517 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:17:33,518 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 18:17:33,520 | INFO | sqlalchemy.engine.Engine | [cached since 1.666e+05s ago] (UUID('ba174189-505e-418a-a085-4ee15c13826a'),)
2025-11-06 18:17:33,538 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 18:17:33,670 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:17:33,673 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 18:17:33,674 | INFO | sqlalchemy.engine.Engine | [cached since 1.666e+05s ago] (UUID('ba174189-505e-418a-a085-4ee15c13826a'),)
2025-11-06 18:17:33,690 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 18:17:33,691 | INFO | sqlalchemy.engine.Engine | [cached since 1.666e+05s ago] ('{"meteo": {"qnh": "982", "vis": "5km", "wind": "020/3", "condition": "VMC", "windSpeed": "3", "windDirection": "020"}, "route": "MRPV-MRPV", "turns": ... (6522 characters truncated) ... tives": ["readBack"], "frequencies": {"tower": "118.3", "ground": "121.7"}, "scenario_id": "mrpv_vfr_departure", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 7, 0, 17, 33, 690700), UUID('7c1d7f2b-f3f4-46ad-b1c1-fd5b64e9a7de'))
2025-11-06 18:17:33,705 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 18:17:33,730 | INFO | app.controllers.audio | Fase activa session=ba174189-505e-418a-a085-4ee15c13826a phase_id=ground_departure_request intent=ground_taxi_clearance freq=ground
2025-11-06 18:17:33,731 | INFO | app.controllers.audio | Frecuencia fuera de rango intent=ground_taxi_clearance freq=118.000 esperado=121.700
2025-11-06 18:17:33,856 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:17:33,857 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 18:17:33,859 | INFO | sqlalchemy.engine.Engine | [cached since 1.666e+05s ago] (UUID('ba174189-505e-418a-a085-4ee15c13826a'),)
2025-11-06 18:17:33,876 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 18:17:33,877 | INFO | sqlalchemy.engine.Engine | [cached since 1.666e+05s ago] ('{"meteo": {"qnh": "982", "vis": "5km", "wind": "020/3", "condition": "VMC", "windSpeed": "3", "windDirection": "020"}, "route": "MRPV-MRPV", "turns": ... (6855 characters truncated) ... tives": ["readBack"], "frequencies": {"tower": "118.3", "ground": "121.7"}, "scenario_id": "mrpv_vfr_departure", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 7, 0, 17, 33, 876719), UUID('7c1d7f2b-f3f4-46ad-b1c1-fd5b64e9a7de'))
2025-11-06 18:17:33,889 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 18:17:33,906 | INFO | app.logs.transcript | controller | session=ba174189-505e-418a-a085-4ee15c13826a | frequency=118.00 | intent=ground_taxi_clearance | phase=ground_departure_request | allow_response=False | text=La frecuencia esperada para esta solicitud es 121.700.
2025-11-06 18:17:33,909 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 18:19:11,338 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:19:11,339 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 18:19:11,339 | INFO | sqlalchemy.engine.Engine | [cached since 1.67e+05s ago] ()
2025-11-06 18:19:11,349 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.email = $1::VARCHAR
2025-11-06 18:19:11,350 | INFO | sqlalchemy.engine.Engine | [cached since 1.669e+05s ago] ('josuelu3@gmail.com',)
2025-11-06 18:19:11,543 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 18:19:14,036 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:19:14,036 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 18:19:14,037 | INFO | sqlalchemy.engine.Engine | [cached since 1.67e+05s ago] ()
2025-11-06 18:19:14,046 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 18:19:14,047 | INFO | sqlalchemy.engine.Engine | [cached since 1.669e+05s ago] (1,)
2025-11-06 18:19:14,151 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 18:19:14,152 | INFO | sqlalchemy.engine.Engine | [cached since 1.669e+05s ago] (1,)
2025-11-06 18:19:14,156 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 18:19:38,255 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:19:38,258 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 18:19:38,259 | INFO | sqlalchemy.engine.Engine | [cached since 1.67e+05s ago] ()
2025-11-06 18:19:38,267 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 18:19:38,269 | INFO | sqlalchemy.engine.Engine | [cached since 1.669e+05s ago] (1,)
2025-11-06 18:19:38,388 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.training_contexts (id, training_session_id, user_id, context) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::JSONB) RETURNING ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at
2025-11-06 18:19:38,389 | INFO | sqlalchemy.engine.Engine | [cached since 1.668e+05s ago] (UUID('46928aff-8e5f-40ce-b2e8-a949e9631484'), UUID('cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f'), 1, '{"route": "MRPV-MRPV", "meteo": {"condition": "VMC", "vis": "5km", "qnh": "982", "windDirection": "030", "windSpeed": "2", "wind": "030/2"}, "objectives": ["readBack"]}')
2025-11-06 18:19:38,400 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 18:19:38,605 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:19:38,606 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.id = $1::UUID
2025-11-06 18:19:38,608 | INFO | sqlalchemy.engine.Engine | [cached since 1.668e+05s ago] (UUID('46928aff-8e5f-40ce-b2e8-a949e9631484'),)
2025-11-06 18:19:38,629 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 18:20:23,777 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 18:20:23,778 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-06 18:20:23,779 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-06 18:20:23,780 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 18:20:23,782 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-06 18:20:23,783 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-06 18:20:23,785 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 18:20:23,786 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 18:20:23,787 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-06 18:20:23,788 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 18:20:23,790 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 18:20:23,790 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-06 18:20:23,792 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-06 18:20:23,793 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 18:20:23,793 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-06 18:20:23,795 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-06 18:20:23,796 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 18:20:23,798 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 18:20:23,799 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:268]
2025-11-06 18:20:23,800 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 18:20:23,800 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 18:20:23,802 | DEBUG | python_multipart.multipart | Calling on_header_field with data[310:329]
2025-11-06 18:20:23,802 | DEBUG | python_multipart.multipart | Calling on_header_value with data[331:385]
2025-11-06 18:20:23,803 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 18:20:23,803 | DEBUG | python_multipart.multipart | Calling on_header_field with data[387:399]
2025-11-06 18:20:23,805 | DEBUG | python_multipart.multipart | Calling on_header_value with data[401:411]
2025-11-06 18:20:23,806 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 18:20:23,808 | DEBUG | python_multipart.multipart | Calling on_header_field with data[413:427]
2025-11-06 18:20:23,808 | DEBUG | python_multipart.multipart | Calling on_header_value with data[429:435]
2025-11-06 18:20:23,810 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 18:20:23,812 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 18:20:23,813 | DEBUG | python_multipart.multipart | Calling on_part_data with data[439:4380]
2025-11-06 18:20:23,815 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:20:23,817 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 18:20:23,955 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:20:23,958 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:20:23,961 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:20:24,104 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:20:24,106 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:20:24,107 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:20:24,258 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:20:24,259 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:20:24,261 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:20:24,407 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:20:24,410 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:20:24,412 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:20:24,571 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:20:24,572 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:20:24,574 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:20:24,735 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:20:24,736 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:20:24,739 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:20:24,741 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 18:20:24,909 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:20:24,911 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:20:24,914 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:20:24,916 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 18:20:25,052 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:20:25,053 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:20:25,056 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:20:25,186 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:20:25,187 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:20:25,189 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:20:25,191 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 18:20:25,328 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 18:20:25,330 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:20:25,332 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 18:20:25,467 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:20:25,469 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:20:25,472 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:20:25,474 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 18:20:25,622 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 18:20:25,624 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:20:25,627 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:20:25,629 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 18:20:25,799 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:20:25,800 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:20:25,803 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:20:25,805 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 18:20:25,985 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:20:25,987 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:20:25,990 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:20:25,993 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 18:20:26,157 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:20:26,159 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:20:26,162 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:20:26,337 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:20:26,339 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:20:26,341 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:20:26,503 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:20:26,505 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:20:26,507 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:20:26,509 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2351]
2025-11-06 18:20:26,647 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1]
2025-11-06 18:20:26,647 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:20:26,650 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:20:26,652 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:20:26,813 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:20:26,816 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:20:26,818 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:20:26,958 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:20:26,960 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:20:26,962 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:20:27,103 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 18:20:27,104 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:20:27,266 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 18:20:27,269 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:20:27,271 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:20:27,274 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 18:20:27,441 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:20:27,442 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:6732]
2025-11-06 18:20:27,589 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:20:27,590 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:20:27,591 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:20:27,730 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:20:27,731 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:20:27,733 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:20:27,736 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 18:20:27,902 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:20:27,904 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:20:27,905 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:20:28,043 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:20:28,045 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:20:28,049 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:20:28,051 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 18:20:28,107 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2839]
2025-11-06 18:20:28,109 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 18:20:28,110 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-06 18:20:28,286 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:20:28,287 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 18:20:28,289 | INFO | sqlalchemy.engine.Engine | [cached since 1.67e+05s ago] ()
2025-11-06 18:20:28,297 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 18:20:28,299 | INFO | sqlalchemy.engine.Engine | [cached since 1.67e+05s ago] (1,)
2025-11-06 18:20:28,441 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 18:20:28,442 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639CFA9C50>}) about to wait for the following futures []
2025-11-06 18:20:28,444 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639CFA9C50>}) done waiting for dependent futures
2025-11-06 18:20:28,445 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639CFA9C50>}) with kwargs {'client': <botocore.client.S3 object at 0x000002639A5BAA50>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002639CF93FD0>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002639CF92550>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002639AE8E5D0>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639CFA9C50>}
2025-11-06 18:20:28,447 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f/3905b3c0e8274ea8883ee76fe5220405.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002639AE8E5D0> for transfer request: 0.
2025-11-06 18:20:28,450 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 18:20:28,452 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f/3905b3c0e8274ea8883ee76fe5220405.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-06 18:20:28,452 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 18:20:28,452 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f/3905b3c0e8274ea8883ee76fe5220405.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-06 18:20:28,454 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f/3905b3c0e8274ea8883ee76fe5220405.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x000002639A5BAA50>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002639CFA3790>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f/3905b3c0e8274ea8883ee76fe5220405.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-06 18:20:29,267 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 18:20:38,901 | INFO | app.controllers.audio | Transcripción recibida session=cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f: Pavas superficie, Alfa Noviembre India en hangar 37, solicitamos abrir plan de vuelo a zona eco, vía paso Chomo, 7000 pies, dos almas a bordo, Capitán Salas, autonomía, tres horas y media.
2025-11-06 18:20:38,902 | INFO | app.logs.transcript | student | session=cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f | frequency=121.70 | text=Pavas superficie, Alfa Noviembre India en hangar 37, solicitamos abrir plan de vuelo a zona eco, vía paso Chomo, 7000 pies, dos almas a bordo, Capitán Salas, autonomía, tres horas y media.
2025-11-06 18:20:39,036 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:20:39,037 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 18:20:39,039 | INFO | sqlalchemy.engine.Engine | [cached since 1.668e+05s ago] (UUID('cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f'),)
2025-11-06 18:20:39,058 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 18:20:39,186 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:20:39,188 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 18:20:39,189 | INFO | sqlalchemy.engine.Engine | [cached since 1.668e+05s ago] (UUID('cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f'),)
2025-11-06 18:20:39,205 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 18:20:39,206 | INFO | sqlalchemy.engine.Engine | [cached since 1.668e+05s ago] ('{"meteo": {"qnh": "982", "vis": "5km", "wind": "030/2", "condition": "VMC", "windSpeed": "2", "windDirection": "030"}, "route": "MRPV-MRPV", "objecti ... (5752 characters truncated) ... : "5km", "wind": "030/2", "condition": "VMC", "windSpeed": "2", "windDirection": "030"}, "route": "MRPV-MRPV", "timestamp": "2025-11-07T00:20:39Z"}]}', datetime.datetime(2025, 11, 7, 0, 20, 39, 205144), UUID('46928aff-8e5f-40ce-b2e8-a949e9631484'))
2025-11-06 18:20:39,220 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 18:20:39,251 | INFO | app.controllers.audio | Fase activa session=cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f phase_id=ground_departure_request intent=ground_taxi_clearance freq=ground
2025-11-06 18:20:39,254 | INFO | app.services.audio_pipeline | Prompts generados intent=ground_taxi_clearance freq_group=ground
SYSTEM> Eres un controlador de superficie en Costa Rica (Pavas Superficie 121.7). Evalúas la llamada inicial de apertura de plan VFR y decides si emites la autorización. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "metadata": object
 }.
Si necesitas proponer un cambio de fase, incluye en metadata la clave "nextPhase". No escribas texto ad...
USER> Fase actual: Solicitud de apertura de plan de vuelo
Intent esperado: ground_taxi_clearance
Transcripción textual del alumno:
Pavas superficie, Alfa Noviembre India en hangar 37, solicitamos abrir plan de vuelo a zona eco, vía paso Chomo, 7000 pies, dos almas a bordo, Capitán Salas, autonomía, tres horas y media.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: ground
- Fase ID: ground_departure_request

Checklist alumno:
- Destinatario correcto (Pavas Superficie / frecuencia 121...
2025-11-06 18:20:40,136 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=ground_taxi_clearance: {
  "intent": "ground_taxi_clearance",
  "allowResponse": true,
  "controllerText": "Alfa Noviembre India, Pavas Superficie. Pista uno cero, viento 30/2, QNH 982, squawk 0522. Alfa 2, Alfa para rodar, Avise listo.",
  "feedback": "Llamada correcta.",
  "confidence": 1,
  "metadata": {
    "nextPhase": "ground_readback"
  }
}
2025-11-06 18:20:40,140 | INFO | app.controllers.audio | Transición automática de fase session=cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f de=ground_departure_request a=ground_readback
2025-11-06 18:20:40,261 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:20:40,262 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 18:20:40,264 | INFO | sqlalchemy.engine.Engine | [cached since 1.668e+05s ago] (UUID('cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f'),)
2025-11-06 18:20:40,279 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 18:20:40,279 | INFO | sqlalchemy.engine.Engine | [cached since 1.668e+05s ago] ('{"meteo": {"qnh": "982", "vis": "5km", "wind": "030/2", "condition": "VMC", "windSpeed": "2", "windDirection": "030"}, "route": "MRPV-MRPV", "turns": ... (6498 characters truncated) ... tives": ["readBack"], "frequencies": {"ground": "121.7", "tower": "118.3"}, "scenario_id": "mrpv_vfr_departure", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 7, 0, 20, 40, 278057), UUID('46928aff-8e5f-40ce-b2e8-a949e9631484'))
2025-11-06 18:20:40,291 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 18:20:40,309 | INFO | app.logs.transcript | controller | session=cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f | frequency=121.70 | intent=ground_taxi_clearance | phase=ground_readback | allow_response=True | text=Alfa Noviembre India, Pavas Superficie. Pista uno cero, viento 30/2, QNH 982, squawk 0522. Alfa 2, Alfa para rodar, Avise listo.
2025-11-06 18:20:42,084 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 18:23:48,122 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 18:23:48,123 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-06 18:23:48,124 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-06 18:23:48,125 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 18:23:48,126 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-06 18:23:48,127 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-06 18:23:48,128 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 18:23:48,128 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 18:23:48,129 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-06 18:23:48,129 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 18:23:48,131 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 18:23:48,132 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-06 18:23:48,132 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-06 18:23:48,134 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 18:23:48,135 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-06 18:23:48,136 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-06 18:23:48,136 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 18:23:48,137 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 18:23:48,138 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:268]
2025-11-06 18:23:48,139 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 18:23:48,140 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 18:23:48,140 | DEBUG | python_multipart.multipart | Calling on_header_field with data[310:329]
2025-11-06 18:23:48,142 | DEBUG | python_multipart.multipart | Calling on_header_value with data[331:385]
2025-11-06 18:23:48,143 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 18:23:48,143 | DEBUG | python_multipart.multipart | Calling on_header_field with data[387:399]
2025-11-06 18:23:48,144 | DEBUG | python_multipart.multipart | Calling on_header_value with data[401:411]
2025-11-06 18:23:48,144 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 18:23:48,145 | DEBUG | python_multipart.multipart | Calling on_header_field with data[413:427]
2025-11-06 18:23:48,145 | DEBUG | python_multipart.multipart | Calling on_header_value with data[429:435]
2025-11-06 18:23:48,147 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 18:23:48,148 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 18:23:48,149 | DEBUG | python_multipart.multipart | Calling on_part_data with data[439:4380]
2025-11-06 18:23:48,152 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:23:48,153 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 18:23:48,280 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:23:48,282 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:23:48,285 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:23:48,429 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:23:48,432 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:23:48,435 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:23:48,582 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 18:23:48,583 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:23:48,585 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 18:23:48,725 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:23:48,726 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:23:48,728 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:23:48,731 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 18:23:48,872 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 18:23:48,875 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:23:49,015 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:23:49,017 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:23:49,020 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:23:49,022 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 18:23:49,146 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:23:49,148 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:23:49,151 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:23:49,154 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 18:23:49,284 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:23:49,286 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:23:49,288 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:23:49,292 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:23:49,416 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 18:23:49,418 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:23:49,419 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 18:23:49,556 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:23:49,558 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:23:49,560 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:23:49,744 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:23:49,746 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:23:49,749 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:23:49,751 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 18:23:49,878 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:23:49,880 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:23:49,881 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:23:50,006 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:23:50,008 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:23:50,011 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:23:50,013 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 18:23:50,131 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 18:23:50,134 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:23:50,258 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:23:50,259 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:23:50,261 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:23:50,387 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 18:23:50,389 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:23:50,512 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 18:23:50,514 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:23:50,516 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 18:23:50,699 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:23:50,703 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:23:50,707 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 18:23:50,921 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2919]
2025-11-06 18:23:50,923 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1]
2025-11-06 18:23:50,925 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:23:50,928 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:23:51,125 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:23:51,126 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:23:51,128 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2992]
2025-11-06 18:23:51,130 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 18:23:51,130 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-06 18:23:51,410 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:23:51,412 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 18:23:51,414 | INFO | sqlalchemy.engine.Engine | [cached since 1.672e+05s ago] ()
2025-11-06 18:23:51,425 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 18:23:51,427 | INFO | sqlalchemy.engine.Engine | [cached since 1.672e+05s ago] (1,)
2025-11-06 18:23:51,605 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 18:23:51,606 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639CF97410>}) about to wait for the following futures []
2025-11-06 18:23:51,607 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639CF97410>}) done waiting for dependent futures
2025-11-06 18:23:51,607 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639CF97410>}) with kwargs {'client': <botocore.client.S3 object at 0x000002639A5BAA50>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002639AF00DD0>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002639CF951D0>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002639CF973D0>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639CF97410>}
2025-11-06 18:23:51,608 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f/f9af763a176b410abec180f84144ac84.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002639CF973D0> for transfer request: 0.
2025-11-06 18:23:51,609 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 18:23:51,611 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f/f9af763a176b410abec180f84144ac84.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-06 18:23:51,612 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 18:23:51,612 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f/f9af763a176b410abec180f84144ac84.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-06 18:23:51,613 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f/f9af763a176b410abec180f84144ac84.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x000002639A5BAA50>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002639CF977D0>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f/f9af763a176b410abec180f84144ac84.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-06 18:23:52,372 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 18:24:01,965 | INFO | app.controllers.audio | Transcripción recibida session=cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f: QNH982, transponder 0522, rodaremos vía Alfa dos alfa al.de espera, pista 10, Alfa Noviembre India.
2025-11-06 18:24:01,966 | INFO | app.logs.transcript | student | session=cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f | frequency=121.70 | text=QNH982, transponder 0522, rodaremos vía Alfa dos alfa al.de espera, pista 10, Alfa Noviembre India.
2025-11-06 18:24:02,092 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:24:02,093 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 18:24:02,094 | INFO | sqlalchemy.engine.Engine | [cached since 1.67e+05s ago] (UUID('cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f'),)
2025-11-06 18:24:02,117 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 18:24:02,303 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:24:02,306 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 18:24:02,307 | INFO | sqlalchemy.engine.Engine | [cached since 1.67e+05s ago] (UUID('cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f'),)
2025-11-06 18:24:02,343 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 18:24:02,345 | INFO | sqlalchemy.engine.Engine | [cached since 1.67e+05s ago] ('{"meteo": {"qnh": "982", "vis": "5km", "wind": "030/2", "condition": "VMC", "windSpeed": "2", "windDirection": "030"}, "route": "MRPV-MRPV", "turns": ... (6836 characters truncated) ... tives": ["readBack"], "frequencies": {"tower": "118.3", "ground": "121.7"}, "scenario_id": "mrpv_vfr_departure", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 7, 0, 24, 2, 342947), UUID('46928aff-8e5f-40ce-b2e8-a949e9631484'))
2025-11-06 18:24:02,373 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 18:24:02,428 | INFO | app.controllers.audio | Fase activa session=cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f phase_id=ground_readback intent=ground_taxi_readback freq=ground
2025-11-06 18:24:02,431 | INFO | app.services.audio_pipeline | Prompts generados intent=ground_taxi_readback freq_group=ground
SYSTEM> Sigues siendo Pavas Superficie en 121.7. Evalúas el readback del alumno tras la autorización de taxi. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "metadata": object
 }.
Si necesitas proponer un cambio de fase, incluye en metadata la clave "nextPhase". No escribas texto adicional antes o después del JSON.
USER> Fase actual: Readback de autorización de taxi
Intent esperado: ground_taxi_readback
Transcripción textual del alumno:
QNH982, transponder 0522, rodaremos vía Alfa dos alfa al.de espera, pista 10, Alfa Noviembre India.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: ground
- Fase ID: ground_readback

Checklist alumno:
- Repite QNH asignado.
- Repite transponder asignado.
- Confirma ruta de rodaje y pista.
- Cierra con identificador correcto.

Checklist controlador:
- Comparar la...
2025-11-06 18:24:02,977 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=ground_taxi_readback: {
  "intent": "ground_taxi_readback",
  "allowResponse": true,
  "controllerText": "Alfa Noviembre India, colación correcta.",
  "feedback": "Colación correcta.",
  "confidence": 1,
  "metadata": {}
}
2025-11-06 18:24:02,979 | INFO | app.controllers.audio | Transición automática de fase session=cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f de=ground_readback a=tower_ready
2025-11-06 18:24:03,115 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:24:03,115 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 18:24:03,118 | INFO | sqlalchemy.engine.Engine | [cached since 1.67e+05s ago] (UUID('cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f'),)
2025-11-06 18:24:03,137 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 18:24:03,138 | INFO | sqlalchemy.engine.Engine | [cached since 1.67e+05s ago] ('{"meteo": {"qnh": "982", "vis": "5km", "wind": "030/2", "condition": "VMC", "windSpeed": "2", "windDirection": "030"}, "route": "MRPV-MRPV", "turns": ... (7334 characters truncated) ... ctives": ["readBack"], "frequencies": {"tower": "118.3", "ground": "121.7"}, "scenario_id": "mrpv_vfr_departure", "default_frequency_group": "tower"}', datetime.datetime(2025, 11, 7, 0, 24, 3, 137050), UUID('46928aff-8e5f-40ce-b2e8-a949e9631484'))
2025-11-06 18:24:03,156 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 18:24:03,176 | INFO | app.logs.transcript | controller | session=cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f | frequency=121.70 | intent=ground_taxi_readback | phase=tower_ready | allow_response=True | text=Alfa Noviembre India, colación correcta.
2025-11-06 18:24:04,023 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 18:24:58,287 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 18:24:58,288 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-06 18:24:58,289 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-06 18:24:58,290 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 18:24:58,290 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-06 18:24:58,291 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-06 18:24:58,292 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 18:24:58,293 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 18:24:58,293 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-06 18:24:58,293 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 18:24:58,295 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 18:24:58,296 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-06 18:24:58,296 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-06 18:24:58,296 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 18:24:58,298 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-06 18:24:58,298 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-06 18:24:58,300 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 18:24:58,301 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 18:24:58,302 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:268]
2025-11-06 18:24:58,303 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 18:24:58,305 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 18:24:58,305 | DEBUG | python_multipart.multipart | Calling on_header_field with data[310:329]
2025-11-06 18:24:58,306 | DEBUG | python_multipart.multipart | Calling on_header_value with data[331:385]
2025-11-06 18:24:58,307 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 18:24:58,308 | DEBUG | python_multipart.multipart | Calling on_header_field with data[387:399]
2025-11-06 18:24:58,309 | DEBUG | python_multipart.multipart | Calling on_header_value with data[401:411]
2025-11-06 18:24:58,309 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 18:24:58,311 | DEBUG | python_multipart.multipart | Calling on_header_field with data[413:427]
2025-11-06 18:24:58,312 | DEBUG | python_multipart.multipart | Calling on_header_value with data[429:434]
2025-11-06 18:24:58,313 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 18:24:58,315 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 18:24:58,315 | DEBUG | python_multipart.multipart | Calling on_part_data with data[438:2920]
2025-11-06 18:24:58,319 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:24:58,321 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:24:58,448 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 18:24:58,451 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:24:58,453 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 18:24:58,589 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:24:58,591 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:24:58,593 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:24:58,726 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 18:24:58,730 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:24:58,732 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:24:58,735 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 18:24:58,868 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:24:58,870 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:24:58,871 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:24:59,008 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:24:59,010 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:24:59,012 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 18:24:59,142 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:24:59,143 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:24:59,145 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:24:59,147 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 18:24:59,285 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:24:59,287 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:24:59,290 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:24:59,443 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:24:59,445 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:24:59,448 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:24:59,578 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:24:59,579 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:24:59,583 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:24:59,585 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 18:24:59,722 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:24:59,725 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:24:59,726 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 18:24:59,858 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 18:24:59,860 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:24:59,862 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 18:24:59,864 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 18:24:59,886 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1003]
2025-11-06 18:24:59,887 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 18:24:59,888 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-06 18:25:00,037 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:25:00,037 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 18:25:00,038 | INFO | sqlalchemy.engine.Engine | [cached since 1.673e+05s ago] ()
2025-11-06 18:25:00,046 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 18:25:00,046 | INFO | sqlalchemy.engine.Engine | [cached since 1.673e+05s ago] (1,)
2025-11-06 18:25:00,164 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 18:25:00,166 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639CFAA550>}) about to wait for the following futures []
2025-11-06 18:25:00,167 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639CFAA550>}) done waiting for dependent futures
2025-11-06 18:25:00,168 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639CFAA550>}) with kwargs {'client': <botocore.client.S3 object at 0x000002639A5BAA50>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002639CFA1550>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002639CFA2E10>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002639CFAB350>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002639CFAA550>}
2025-11-06 18:25:00,170 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f/8ac82976feb747fdbec3a823f8c6b399.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002639CFAB350> for transfer request: 0.
2025-11-06 18:25:00,170 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 18:25:00,173 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f/8ac82976feb747fdbec3a823f8c6b399.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-06 18:25:00,173 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 18:25:00,173 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f/8ac82976feb747fdbec3a823f8c6b399.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-06 18:25:00,175 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f/8ac82976feb747fdbec3a823f8c6b399.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x000002639A5BAA50>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002639CFAA790>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f/8ac82976feb747fdbec3a823f8c6b399.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-06 18:25:00,814 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 18:25:10,431 | INFO | app.controllers.audio | Transcripción recibida session=cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f: Pavas Torre, Alfa Noviembre, India, listo en.de espera, pista 10.
2025-11-06 18:25:10,432 | INFO | app.logs.transcript | student | session=cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f | frequency=118.30 | text=Pavas Torre, Alfa Noviembre, India, listo en.de espera, pista 10.
2025-11-06 18:25:10,577 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:25:10,580 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 18:25:10,580 | INFO | sqlalchemy.engine.Engine | [cached since 1.671e+05s ago] (UUID('cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f'),)
2025-11-06 18:25:10,600 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 18:25:11,118 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:25:11,123 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 18:25:11,124 | INFO | sqlalchemy.engine.Engine | [cached since 1.671e+05s ago] (UUID('cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f'),)
2025-11-06 18:25:11,162 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 18:25:11,164 | INFO | sqlalchemy.engine.Engine | [cached since 1.671e+05s ago] ('{"meteo": {"qnh": "982", "vis": "5km", "wind": "030/2", "condition": "VMC", "windSpeed": "2", "windDirection": "030"}, "route": "MRPV-MRPV", "turns": ... (7632 characters truncated) ... ctives": ["readBack"], "frequencies": {"tower": "118.3", "ground": "121.7"}, "scenario_id": "mrpv_vfr_departure", "default_frequency_group": "tower"}', datetime.datetime(2025, 11, 7, 0, 25, 11, 162143), UUID('46928aff-8e5f-40ce-b2e8-a949e9631484'))
2025-11-06 18:25:11,213 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 18:25:11,268 | INFO | app.controllers.audio | Fase activa session=cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f phase_id=tower_ready intent=tower_takeoff_clearance freq=tower
2025-11-06 18:25:11,271 | INFO | app.services.audio_pipeline | Prompts generados intent=tower_takeoff_clearance freq_group=tower
SYSTEM> Eres Pavas Torre en 118.3. Evalúas cuando la aeronave está lista en punto de espera y emites instrucciones de despegue. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "metadata": object
 }.
Si necesitas proponer un cambio de fase, incluye en metadata la clave "nextPhase". No escribas texto adicional antes o después del JSON.
USER> Fase actual: Contacto torre y autorización de despegue
Intent esperado: tower_takeoff_clearance
Transcripción textual del alumno:
Pavas Torre, Alfa Noviembre, India, listo en.de espera, pista 10.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: tower
- Fase ID: tower_ready

Checklist alumno:
- Cambiar destinatario a Pavas Torre.
- Avisar estar en punto de espera pista 10 y listo.
- Mantener identificador y fraseología correctos.

Checklist controlador:
- Gestionar secuencia: man...
2025-11-06 18:25:12,057 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=tower_takeoff_clearance: {
  "intent": "tower_takeoff_clearance",
  "allowResponse": true,
  "controllerText": "Alfa Noviembre India, Pavas Torre. Despegue autorizado, viento 080/12, mantenga rumbo de pista, informe pasando 5000 pies.",
  "feedback": "Llamada correcta.",
  "confidence": 1.0,
  "metadata": {
    "nextPhase": "en_route"
  }
}
2025-11-06 18:25:12,175 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:25:12,177 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 18:25:12,178 | INFO | sqlalchemy.engine.Engine | [cached since 1.671e+05s ago] (UUID('cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f'),)
2025-11-06 18:25:12,196 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 18:25:12,197 | INFO | sqlalchemy.engine.Engine | [cached since 1.671e+05s ago] ('{"meteo": {"qnh": "982", "vis": "5km", "wind": "030/2", "condition": "VMC", "windSpeed": "2", "windDirection": "030"}, "route": "MRPV-MRPV", "turns": ... (8363 characters truncated) ... ctives": ["readBack"], "frequencies": {"tower": "118.3", "ground": "121.7"}, "scenario_id": "mrpv_vfr_departure", "default_frequency_group": "tower"}', datetime.datetime(2025, 11, 7, 0, 25, 12, 195828), UUID('46928aff-8e5f-40ce-b2e8-a949e9631484'))
2025-11-06 18:25:12,211 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 18:25:12,228 | INFO | app.logs.transcript | controller | session=cbf5ca4d-a47b-4f4a-aed4-e284b4b9572f | frequency=118.30 | intent=tower_takeoff_clearance | phase=tower_ready | allow_response=True | text=Alfa Noviembre India, Pavas Torre. Despegue autorizado, viento 080/12, mantenga rumbo de pista, informe pasando 5000 pies.
2025-11-06 18:25:13,403 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 18:28:01,704 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:28:01,705 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 18:28:01,706 | INFO | sqlalchemy.engine.Engine | [cached since 1.675e+05s ago] ()
2025-11-06 18:28:01,714 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 18:28:01,716 | INFO | sqlalchemy.engine.Engine | [cached since 1.675e+05s ago] (1,)
2025-11-06 18:28:01,769 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:28:01,770 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 18:28:01,771 | INFO | sqlalchemy.engine.Engine | [cached since 1.675e+05s ago] ()
2025-11-06 18:28:01,780 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 18:28:01,781 | INFO | sqlalchemy.engine.Engine | [cached since 1.675e+05s ago] (1,)
2025-11-06 18:28:01,839 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 18:28:01,872 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.user_id = $1::INTEGER ORDER BY ecowhiskey.training_contexts.created_at DESC
2025-11-06 18:28:01,873 | INFO | sqlalchemy.engine.Engine | [cached since 1236s ago] (1,)
2025-11-06 18:28:01,909 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 18:36:34,839 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:36:34,840 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 18:36:34,842 | INFO | sqlalchemy.engine.Engine | [cached since 1.68e+05s ago] ()
2025-11-06 18:36:34,852 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 18:37:03,708 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:37:03,709 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 18:37:03,709 | INFO | sqlalchemy.engine.Engine | [cached since 1.68e+05s ago] ()
2025-11-06 18:37:03,720 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 18:37:42,179 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:37:42,181 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 18:37:42,181 | INFO | sqlalchemy.engine.Engine | [cached since 1.681e+05s ago] ()
2025-11-06 18:37:42,189 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 18:38:28,690 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:38:28,691 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 18:38:28,692 | INFO | sqlalchemy.engine.Engine | [cached since 1.681e+05s ago] ()
2025-11-06 18:38:28,700 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 18:38:43,504 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:38:43,505 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 18:38:43,507 | INFO | sqlalchemy.engine.Engine | [cached since 1.681e+05s ago] ()
2025-11-06 18:38:43,516 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 18:39:28,559 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:39:28,560 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 18:39:28,560 | INFO | sqlalchemy.engine.Engine | [cached since 1.682e+05s ago] ()
2025-11-06 18:39:28,569 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 18:39:40,545 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:39:40,546 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 18:39:40,547 | INFO | sqlalchemy.engine.Engine | [cached since 1.682e+05s ago] ()
2025-11-06 18:39:40,555 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.email = $1::VARCHAR
2025-11-06 18:39:40,558 | INFO | sqlalchemy.engine.Engine | [cached since 1.682e+05s ago] ('josuelu4@gmail.com',)
2025-11-06 18:39:40,736 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.users (email, first_name, last_name, password_hash, status, account_type, school_id, photo) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::user_status, $6::account_type, $7::INTEGER, $8::VARCHAR) RETURNING ecowhiskey.users.id, ecowhiskey.users.created_at, ecowhiskey.users.updated_at
2025-11-06 18:39:40,736 | INFO | sqlalchemy.engine.Engine | [generated in 0.00102s] ('josuelu4@gmail.com', 'Test', 'Cuatro', 'yvs+PvA8RwPxXdsjWdKWH1l07PtPEsmZOA/BQwzchw0Ixhz4e9/cfmyIzu4eErYg', 'ACTIVE', 'STUDENT', None, None)
2025-11-06 18:39:40,836 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 18:39:41,027 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:39:41,033 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 18:39:41,033 | INFO | sqlalchemy.engine.Engine | [generated in 0.00109s] (2,)
2025-11-06 18:39:41,133 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 18:40:04,845 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:40:04,846 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 18:40:04,847 | INFO | sqlalchemy.engine.Engine | [cached since 1.682e+05s ago] ()
2025-11-06 18:40:04,857 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 18:40:16,256 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:40:16,257 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 18:40:16,258 | INFO | sqlalchemy.engine.Engine | [cached since 1.682e+05s ago] ()
2025-11-06 18:40:16,268 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.email = $1::VARCHAR
2025-11-06 18:40:16,269 | INFO | sqlalchemy.engine.Engine | [cached since 1.682e+05s ago] ('josuelu2@gmail.com',)
2025-11-06 18:40:16,398 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 18:40:24,208 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:40:24,209 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 18:40:24,210 | INFO | sqlalchemy.engine.Engine | [cached since 1.682e+05s ago] ()
2025-11-06 18:40:24,216 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.email = $1::VARCHAR
2025-11-06 18:40:24,217 | INFO | sqlalchemy.engine.Engine | [cached since 1.682e+05s ago] ('josuelu4@gmail.com',)
2025-11-06 18:40:24,380 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 18:40:26,474 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 18:40:26,475 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 18:40:26,476 | INFO | sqlalchemy.engine.Engine | [cached since 1.682e+05s ago] ()
2025-11-06 18:40:26,484 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 18:40:26,486 | INFO | sqlalchemy.engine.Engine | [cached since 1.682e+05s ago] (2,)
2025-11-06 18:40:26,604 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 18:40:26,605 | INFO | sqlalchemy.engine.Engine | [cached since 1.682e+05s ago] (2,)
2025-11-06 18:40:26,612 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 19:03:05,476 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-06 19:03:05,477 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-06 19:03:05,486 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-06 19:03:05,487 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-06 19:03:05,496 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-06 19:03:05,497 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-06 19:03:05,503 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:03:05,505 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-06 19:03:05,506 | INFO | sqlalchemy.engine.Engine | [generated in 0.00111s] ()
2025-11-06 19:03:05,511 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 19:03:05,513 | INFO | sqlalchemy.engine.Engine | [generated in 0.00097s] ()
2025-11-06 19:03:05,520 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 19:03:05,521 | INFO | sqlalchemy.engine.Engine | [generated in 0.00084s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 19:03:05,550 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 19:03:05,551 | INFO | sqlalchemy.engine.Engine | [cached since 0.03116s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 19:03:05,555 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 19:03:05,556 | INFO | sqlalchemy.engine.Engine | [cached since 0.0358s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 19:03:05,560 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 19:03:05,561 | INFO | sqlalchemy.engine.Engine | [cached since 0.04015s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 19:03:05,564 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 19:03:05,565 | INFO | sqlalchemy.engine.Engine | [cached since 0.04532s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 19:03:05,573 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-06 19:03:05,574 | INFO | sqlalchemy.engine.Engine | [generated in 0.00168s] ('user_status', 'pg_catalog')
2025-11-06 19:03:05,584 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-06 19:03:05,585 | INFO | sqlalchemy.engine.Engine | [cached since 0.01216s ago] ('account_type', 'pg_catalog')
2025-11-06 19:03:05,588 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-06 19:03:05,589 | INFO | sqlalchemy.engine.Engine | [generated in 0.00081s] ()
2025-11-06 19:03:05,597 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-06 19:03:05,598 | INFO | sqlalchemy.engine.Engine | [generated in 0.00096s] ()
2025-11-06 19:03:05,620 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-06 19:03:05,623 | INFO | sqlalchemy.engine.Engine | [generated in 0.00150s] ()
2025-11-06 19:03:05,884 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 19:03:05,923 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-06 19:04:50,685 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-06 19:04:50,686 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-06 19:04:50,694 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-06 19:04:50,694 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-06 19:04:50,700 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-06 19:04:50,701 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-06 19:04:50,710 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:04:50,711 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-06 19:04:50,712 | INFO | sqlalchemy.engine.Engine | [generated in 0.00127s] ()
2025-11-06 19:04:50,721 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 19:04:50,722 | INFO | sqlalchemy.engine.Engine | [generated in 0.00090s] ()
2025-11-06 19:04:50,730 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 19:04:50,730 | INFO | sqlalchemy.engine.Engine | [generated in 0.00077s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 19:04:50,760 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 19:04:50,761 | INFO | sqlalchemy.engine.Engine | [cached since 0.0316s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 19:04:50,765 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 19:04:50,766 | INFO | sqlalchemy.engine.Engine | [cached since 0.03602s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 19:04:50,770 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 19:04:50,771 | INFO | sqlalchemy.engine.Engine | [cached since 0.04153s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 19:04:50,776 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 19:04:50,777 | INFO | sqlalchemy.engine.Engine | [cached since 0.04763s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 19:04:50,788 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-06 19:04:50,789 | INFO | sqlalchemy.engine.Engine | [generated in 0.00143s] ('user_status', 'pg_catalog')
2025-11-06 19:04:50,799 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-06 19:04:50,800 | INFO | sqlalchemy.engine.Engine | [cached since 0.01281s ago] ('account_type', 'pg_catalog')
2025-11-06 19:04:50,805 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-06 19:04:50,806 | INFO | sqlalchemy.engine.Engine | [generated in 0.00100s] ()
2025-11-06 19:04:50,814 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-06 19:04:50,815 | INFO | sqlalchemy.engine.Engine | [generated in 0.00086s] ()
2025-11-06 19:04:50,838 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-06 19:04:50,839 | INFO | sqlalchemy.engine.Engine | [generated in 0.00146s] ()
2025-11-06 19:04:50,960 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 19:04:51,027 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-06 19:06:08,057 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:06:08,057 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 19:06:08,059 | INFO | sqlalchemy.engine.Engine | [cached since 77.34s ago] ()
2025-11-06 19:06:08,093 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.email = $1::VARCHAR
2025-11-06 19:06:08,095 | INFO | sqlalchemy.engine.Engine | [generated in 0.00185s] ('josuelu3@gmail.com',)
2025-11-06 19:06:08,279 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 19:06:10,820 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:06:10,821 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 19:06:10,824 | INFO | sqlalchemy.engine.Engine | [cached since 80.1s ago] ()
2025-11-06 19:06:10,836 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 19:06:10,837 | INFO | sqlalchemy.engine.Engine | [generated in 0.00084s] (1,)
2025-11-06 19:06:10,925 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 19:06:10,926 | INFO | sqlalchemy.engine.Engine | [cached since 0.08978s ago] (1,)
2025-11-06 19:06:10,929 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 19:16:53,988 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:16:53,989 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 19:16:53,990 | INFO | sqlalchemy.engine.Engine | [cached since 723.3s ago] ()
2025-11-06 19:16:53,998 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 19:16:53,999 | INFO | sqlalchemy.engine.Engine | [cached since 643.2s ago] (1,)
2025-11-06 19:16:54,091 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.training_contexts (id, training_session_id, user_id, context) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::JSONB) RETURNING ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at
2025-11-06 19:16:54,092 | INFO | sqlalchemy.engine.Engine | [generated in 0.00143s] (UUID('45d69af1-541e-4e7a-b13e-5e1a92e960b7'), UUID('cbc3e192-15d3-4845-a71c-a9ec6b726772'), 1, '{"route": "MRPV-MRPV", "meteo": {"condition": "IMC", "vis": "", "qnh": "983", "windDirection": "030", "windSpeed": "3", "wind": "030/3"}, "objectives": ["mrpv_full_flight"]}')
2025-11-06 19:16:54,102 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 19:16:54,259 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:16:54,261 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.id = $1::UUID
2025-11-06 19:16:54,262 | INFO | sqlalchemy.engine.Engine | [generated in 0.00097s] (UUID('45d69af1-541e-4e7a-b13e-5e1a92e960b7'),)
2025-11-06 19:16:54,276 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 19:16:55,807 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:16:55,808 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 19:16:55,809 | INFO | sqlalchemy.engine.Engine | [cached since 725.1s ago] ()
2025-11-06 19:16:55,816 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 19:16:55,817 | INFO | sqlalchemy.engine.Engine | [cached since 645s ago] (1,)
2025-11-06 19:16:55,892 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 19:16:55,892 | INFO | sqlalchemy.engine.Engine | [cached since 645.1s ago] (1,)
2025-11-06 19:16:55,896 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 19:18:20,825 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 19:18:20,826 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-06 19:18:20,827 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-06 19:18:20,828 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:18:20,830 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-06 19:18:20,832 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-06 19:18:20,832 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:18:20,833 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 19:18:20,835 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-06 19:18:20,836 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 19:18:20,837 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 19:18:20,839 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-06 19:18:20,840 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-06 19:18:20,842 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:18:20,843 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-06 19:18:20,845 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-06 19:18:20,845 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:18:20,846 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 19:18:20,847 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:268]
2025-11-06 19:18:20,848 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 19:18:20,850 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 19:18:20,850 | DEBUG | python_multipart.multipart | Calling on_header_field with data[310:329]
2025-11-06 19:18:20,852 | DEBUG | python_multipart.multipart | Calling on_header_value with data[331:385]
2025-11-06 19:18:20,852 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:18:20,853 | DEBUG | python_multipart.multipart | Calling on_header_field with data[387:399]
2025-11-06 19:18:20,854 | DEBUG | python_multipart.multipart | Calling on_header_value with data[401:411]
2025-11-06 19:18:20,854 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:18:20,854 | DEBUG | python_multipart.multipart | Calling on_header_field with data[413:427]
2025-11-06 19:18:20,855 | DEBUG | python_multipart.multipart | Calling on_header_value with data[429:435]
2025-11-06 19:18:20,856 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:18:20,857 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 19:18:20,858 | DEBUG | python_multipart.multipart | Calling on_part_data with data[439:2920]
2025-11-06 19:18:20,859 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 19:18:20,993 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:18:20,996 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:18:20,998 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:18:21,000 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:18:21,152 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:18:21,154 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:18:21,156 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:18:21,157 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:18:21,325 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:18:21,327 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:18:21,329 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:18:21,483 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:18:21,486 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:18:21,489 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:18:21,491 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:18:21,641 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:18:21,642 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:18:21,644 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:18:21,794 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:18:21,796 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:18:21,798 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:18:21,800 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:891]
2025-11-06 19:18:21,964 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1]
2025-11-06 19:18:21,965 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:18:21,969 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:18:21,971 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:18:22,126 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:18:22,128 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:18:22,130 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:18:22,298 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:18:22,300 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:18:22,302 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:18:22,440 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:18:22,442 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:18:22,446 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:18:22,596 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2919]
2025-11-06 19:18:22,597 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1]
2025-11-06 19:18:22,598 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:18:22,600 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:18:22,754 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:18:22,757 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:18:22,903 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:18:22,906 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:18:22,910 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:18:23,055 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:18:23,057 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:18:23,058 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:18:23,060 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:18:23,302 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:18:23,309 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:18:23,318 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:18:23,558 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:18:23,561 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2919]
2025-11-06 19:18:23,568 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1]
2025-11-06 19:18:23,581 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:18:23,797 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:18:23,799 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:18:23,802 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:18:23,810 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:18:24,047 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:18:24,048 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:18:24,050 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:18:24,051 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:18:24,200 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:18:24,201 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:18:24,205 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:18:24,377 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:18:24,379 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:18:24,381 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:18:24,385 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:18:24,585 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:18:24,589 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:18:24,590 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:18:24,593 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:18:24,774 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:18:24,776 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:18:24,778 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:18:24,780 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:18:24,783 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:18:24,925 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:18:24,927 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:18:24,929 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:18:24,931 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:18:25,105 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:18:25,106 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:18:25,107 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:18:25,246 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:18:25,248 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:18:25,250 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:18:25,254 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:18:25,384 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:18:25,387 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:18:25,390 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:18:25,540 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:18:25,541 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:18:25,545 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:18:25,682 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:18:25,685 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:18:25,687 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:18:25,688 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:18:25,709 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:880]
2025-11-06 19:18:25,709 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 19:18:25,710 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-06 19:18:25,866 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:18:25,867 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 19:18:25,868 | INFO | sqlalchemy.engine.Engine | [cached since 815.1s ago] ()
2025-11-06 19:18:25,878 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 19:18:25,880 | INFO | sqlalchemy.engine.Engine | [cached since 735s ago] (1,)
2025-11-06 19:18:25,989 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 19:18:25,990 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A41C40610>}) about to wait for the following futures []
2025-11-06 19:18:25,992 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A41C40610>}) done waiting for dependent futures
2025-11-06 19:18:25,993 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A41C40610>}) with kwargs {'client': <botocore.client.S3 object at 0x0000023A43DA09D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x0000023A446C7390>, 'osutil': <s3transfer.utils.OSUtils object at 0x0000023A446C6D90>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x0000023A446BEE10>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A41C40610>}
2025-11-06 19:18:25,995 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/cbc3e192-15d3-4845-a71c-a9ec6b726772/d38d05c5d6ed464fa1107b7ff869703f.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x0000023A446BEE10> for transfer request: 0.
2025-11-06 19:18:25,996 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 19:18:25,998 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/cbc3e192-15d3-4845-a71c-a9ec6b726772/d38d05c5d6ed464fa1107b7ff869703f.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-06 19:18:25,998 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 19:18:26,002 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/cbc3e192-15d3-4845-a71c-a9ec6b726772/d38d05c5d6ed464fa1107b7ff869703f.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-06 19:18:26,007 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/cbc3e192-15d3-4845-a71c-a9ec6b726772/d38d05c5d6ed464fa1107b7ff869703f.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x0000023A43DA09D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x0000023A446BDAD0>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/cbc3e192-15d3-4845-a71c-a9ec6b726772/d38d05c5d6ed464fa1107b7ff869703f.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-06 19:18:26,826 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 19:20:29,360 | ERROR | app.services.audio_pipeline | Fallo en transcripción
Traceback (most recent call last):
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\pipelines\audio\transcription.py", line 25, in transcribe_audio
    result = await _TRANSCRIBE_SERVICE.transcribe_session_audio(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\services\transcribe.py", line 89, in transcribe_session_audio
    job_info = await self._wait_for_job(job_name)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\services\transcribe.py", line 189, in _wait_for_job
    raise TranscriptionError(
app.services.transcribe.TranscriptionError: Transcription job timed out before completion.
2025-11-06 19:20:29,379 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 19:21:00,696 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:21:00,698 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 19:21:00,700 | INFO | sqlalchemy.engine.Engine | [cached since 970s ago] ()
2025-11-06 19:21:00,712 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.email = $1::VARCHAR
2025-11-06 19:21:00,714 | INFO | sqlalchemy.engine.Engine | [cached since 892.6s ago] ('josuelu3@gmail.com',)
2025-11-06 19:21:00,897 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 19:21:05,080 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:21:05,081 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 19:21:05,082 | INFO | sqlalchemy.engine.Engine | [cached since 974.4s ago] ()
2025-11-06 19:21:05,089 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 19:21:05,090 | INFO | sqlalchemy.engine.Engine | [cached since 894.3s ago] (1,)
2025-11-06 19:21:05,184 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 19:21:05,186 | INFO | sqlalchemy.engine.Engine | [cached since 894.4s ago] (1,)
2025-11-06 19:21:05,191 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 19:21:29,156 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:21:29,157 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 19:21:29,159 | INFO | sqlalchemy.engine.Engine | [cached since 998.4s ago] ()
2025-11-06 19:21:29,167 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 19:21:29,169 | INFO | sqlalchemy.engine.Engine | [cached since 918.3s ago] (1,)
2025-11-06 19:21:29,285 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.training_contexts (id, training_session_id, user_id, context) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::JSONB) RETURNING ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at
2025-11-06 19:21:29,288 | INFO | sqlalchemy.engine.Engine | [cached since 275.2s ago] (UUID('2e490d9a-6be9-40a5-b3d5-8fced9bf313c'), UUID('1c102cba-df42-4866-87ca-662a141be587'), 1, '{"route": "MRPV-MRPV", "meteo": {"condition": "VMC", "vis": "5km", "qnh": "982", "windDirection": "030", "windSpeed": "3", "wind": "030/3"}, "objectives": ["mrpv_full_flight"]}')
2025-11-06 19:21:29,297 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 19:21:29,514 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:21:29,516 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.id = $1::UUID
2025-11-06 19:21:29,516 | INFO | sqlalchemy.engine.Engine | [cached since 275.3s ago] (UUID('2e490d9a-6be9-40a5-b3d5-8fced9bf313c'),)
2025-11-06 19:21:29,536 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 19:21:59,125 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 19:21:59,126 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-06 19:21:59,126 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-06 19:21:59,128 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:21:59,129 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-06 19:21:59,130 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-06 19:21:59,131 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:21:59,133 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 19:21:59,135 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-06 19:21:59,136 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 19:21:59,136 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 19:21:59,138 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-06 19:21:59,138 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-06 19:21:59,140 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:21:59,141 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-06 19:21:59,142 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-06 19:21:59,144 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:21:59,145 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 19:21:59,146 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:268]
2025-11-06 19:21:59,147 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 19:21:59,148 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 19:21:59,150 | DEBUG | python_multipart.multipart | Calling on_header_field with data[310:329]
2025-11-06 19:21:59,151 | DEBUG | python_multipart.multipart | Calling on_header_value with data[331:385]
2025-11-06 19:21:59,153 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:21:59,154 | DEBUG | python_multipart.multipart | Calling on_header_field with data[387:399]
2025-11-06 19:21:59,156 | DEBUG | python_multipart.multipart | Calling on_header_value with data[401:411]
2025-11-06 19:21:59,158 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:21:59,159 | DEBUG | python_multipart.multipart | Calling on_header_field with data[413:427]
2025-11-06 19:21:59,161 | DEBUG | python_multipart.multipart | Calling on_header_value with data[429:435]
2025-11-06 19:21:59,163 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:21:59,164 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 19:21:59,164 | DEBUG | python_multipart.multipart | Calling on_part_data with data[439:2920]
2025-11-06 19:21:59,168 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:21:59,170 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:21:59,368 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:21:59,370 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:21:59,375 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:21:59,377 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:21:59,381 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:21:59,551 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:21:59,554 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:21:59,555 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:21:59,741 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:21:59,744 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:21:59,745 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:21:59,913 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:21:59,916 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:21:59,917 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:21:59,919 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:22:00,122 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:00,125 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:22:00,127 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:22:00,307 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:22:00,308 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:00,310 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:00,314 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:22:00,505 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:00,508 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:22:00,510 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:00,512 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:22:00,718 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:22:00,722 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:00,725 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:22:00,894 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:22:00,896 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:00,897 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:22:00,900 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:22:01,066 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:22:01,068 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:22:01,223 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:22:01,225 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:01,227 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:22:01,230 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:22:01,380 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:22:01,381 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:01,384 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:22:01,386 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:22:01,541 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:01,542 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:01,544 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:01,546 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:22:01,692 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:22:01,694 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:22:01,696 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:22:01,856 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:22:01,859 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:01,861 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:22:02,098 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:02,102 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:22:02,104 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:22:02,303 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1459]
2025-11-06 19:22:02,304 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1]
2025-11-06 19:22:02,306 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:02,308 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:02,310 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:22:02,475 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:22:02,476 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:02,478 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:02,480 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:22:02,645 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:22:02,648 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:02,653 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:02,655 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:22:02,890 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:02,893 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:22:02,895 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:02,898 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:22:03,083 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:03,086 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:03,087 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:03,090 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:22:03,319 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:03,322 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:03,328 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:03,332 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:22:03,590 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:03,593 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:22:03,599 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:03,602 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:22:03,834 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:22:03,838 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:03,840 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:22:04,087 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:04,090 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:22:04,094 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:22:04,097 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:22:04,341 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:22:04,344 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:04,346 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:22:04,349 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:22:04,551 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:04,553 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:04,556 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:04,558 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:22:04,561 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:22:04,741 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:22:04,743 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:04,745 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:04,746 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:22:04,907 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:22:04,910 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:04,912 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:04,916 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:22:05,075 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:22:05,077 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:05,078 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:05,081 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:05,084 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:22:05,269 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:22:05,271 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:05,274 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:22:05,305 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:22:05,306 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1]
2025-11-06 19:22:05,309 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 19:22:05,310 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-06 19:22:05,469 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:22:05,470 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 19:22:05,471 | INFO | sqlalchemy.engine.Engine | [cached since 1035s ago] ()
2025-11-06 19:22:05,479 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 19:22:05,481 | INFO | sqlalchemy.engine.Engine | [cached since 954.6s ago] (1,)
2025-11-06 19:22:05,590 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 19:22:05,593 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A446C6510>}) about to wait for the following futures []
2025-11-06 19:22:05,594 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A446C6510>}) done waiting for dependent futures
2025-11-06 19:22:05,595 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A446C6510>}) with kwargs {'client': <botocore.client.S3 object at 0x0000023A43DA09D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x0000023A44723190>, 'osutil': <s3transfer.utils.OSUtils object at 0x0000023A44704950>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x0000023A4470BE90>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A446C6510>}
2025-11-06 19:22:05,597 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/1c102cba-df42-4866-87ca-662a141be587/1a83a70840ba45a1834c2fcf10f9a9b5.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x0000023A4470BE90> for transfer request: 0.
2025-11-06 19:22:05,598 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 19:22:05,601 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/1c102cba-df42-4866-87ca-662a141be587/1a83a70840ba45a1834c2fcf10f9a9b5.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-06 19:22:05,601 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 19:22:05,602 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/1c102cba-df42-4866-87ca-662a141be587/1a83a70840ba45a1834c2fcf10f9a9b5.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-06 19:22:05,603 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/1c102cba-df42-4866-87ca-662a141be587/1a83a70840ba45a1834c2fcf10f9a9b5.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x0000023A43DA09D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x0000023A446C5E10>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/1c102cba-df42-4866-87ca-662a141be587/1a83a70840ba45a1834c2fcf10f9a9b5.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-06 19:22:06,402 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 19:24:07,375 | ERROR | app.services.audio_pipeline | Fallo en transcripción
Traceback (most recent call last):
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\pipelines\audio\transcription.py", line 25, in transcribe_audio
    result = await _TRANSCRIBE_SERVICE.transcribe_session_audio(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\services\transcribe.py", line 89, in transcribe_session_audio
    job_info = await self._wait_for_job(job_name)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\services\transcribe.py", line 189, in _wait_for_job
    raise TranscriptionError(
app.services.transcribe.TranscriptionError: Transcription job timed out before completion.
2025-11-06 19:24:07,376 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 19:37:57,655 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:37:57,656 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 19:37:57,658 | INFO | sqlalchemy.engine.Engine | [cached since 1987s ago] ()
2025-11-06 19:37:57,665 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.email = $1::VARCHAR
2025-11-06 19:37:57,666 | INFO | sqlalchemy.engine.Engine | [cached since 1910s ago] ('josuelu3@gmail.com',)
2025-11-06 19:37:57,833 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 19:38:00,670 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:38:00,672 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 19:38:00,674 | INFO | sqlalchemy.engine.Engine | [cached since 1990s ago] ()
2025-11-06 19:38:00,684 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 19:38:00,686 | INFO | sqlalchemy.engine.Engine | [cached since 1910s ago] (1,)
2025-11-06 19:38:00,815 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 19:38:00,816 | INFO | sqlalchemy.engine.Engine | [cached since 1910s ago] (1,)
2025-11-06 19:38:00,822 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 19:38:46,632 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:38:46,633 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 19:38:46,635 | INFO | sqlalchemy.engine.Engine | [cached since 2036s ago] ()
2025-11-06 19:38:46,644 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 19:38:46,646 | INFO | sqlalchemy.engine.Engine | [cached since 1956s ago] (1,)
2025-11-06 19:38:46,774 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 19:38:46,836 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:38:46,838 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 19:38:46,839 | INFO | sqlalchemy.engine.Engine | [cached since 2036s ago] ()
2025-11-06 19:38:46,847 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 19:38:46,849 | INFO | sqlalchemy.engine.Engine | [cached since 1956s ago] (1,)
2025-11-06 19:38:46,939 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.user_id = $1::INTEGER ORDER BY ecowhiskey.training_contexts.created_at DESC 
 LIMIT $2::INTEGER
2025-11-06 19:38:46,941 | INFO | sqlalchemy.engine.Engine | [generated in 0.00201s] (1, 3)
2025-11-06 19:38:46,958 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 19:39:00,352 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:39:00,354 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 19:39:00,354 | INFO | sqlalchemy.engine.Engine | [cached since 2050s ago] ()
2025-11-06 19:39:00,364 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 19:39:00,365 | INFO | sqlalchemy.engine.Engine | [cached since 1970s ago] (1,)
2025-11-06 19:39:00,472 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.schools.id, ecowhiskey.schools.name, ecowhiskey.schools.value, ecowhiskey.schools.location, ecowhiskey.schools.created_at 
FROM ecowhiskey.schools ORDER BY ecowhiskey.schools.name
2025-11-06 19:39:00,474 | INFO | sqlalchemy.engine.Engine | [generated in 0.00130s] ()
2025-11-06 19:39:00,581 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 19:40:17,447 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:40:17,447 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 19:40:17,448 | INFO | sqlalchemy.engine.Engine | [cached since 2127s ago] ()
2025-11-06 19:40:17,456 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.email = $1::VARCHAR
2025-11-06 19:40:17,457 | INFO | sqlalchemy.engine.Engine | [cached since 2049s ago] ('josuelu3@gmail.com',)
2025-11-06 19:40:17,620 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 19:41:38,548 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:41:38,549 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 19:41:38,550 | INFO | sqlalchemy.engine.Engine | [cached since 2208s ago] ()
2025-11-06 19:41:38,557 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.email = $1::VARCHAR
2025-11-06 19:41:38,558 | INFO | sqlalchemy.engine.Engine | [cached since 2130s ago] ('josuelu3@gmail.com',)
2025-11-06 19:41:38,706 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 19:44:02,626 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:44:02,627 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 19:44:02,628 | INFO | sqlalchemy.engine.Engine | [cached since 2352s ago] ()
2025-11-06 19:44:02,637 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.email = $1::VARCHAR
2025-11-06 19:44:02,638 | INFO | sqlalchemy.engine.Engine | [cached since 2275s ago] ('josuelu3@gmail.com',)
2025-11-06 19:44:02,788 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 19:44:06,112 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:44:06,114 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 19:44:06,114 | INFO | sqlalchemy.engine.Engine | [cached since 2355s ago] ()
2025-11-06 19:44:06,122 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 19:44:06,123 | INFO | sqlalchemy.engine.Engine | [cached since 2275s ago] (1,)
2025-11-06 19:44:06,207 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 19:44:06,208 | INFO | sqlalchemy.engine.Engine | [cached since 2275s ago] (1,)
2025-11-06 19:44:06,212 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 19:44:30,588 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:44:30,589 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 19:44:30,590 | INFO | sqlalchemy.engine.Engine | [cached since 2380s ago] ()
2025-11-06 19:44:30,598 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 19:44:30,599 | INFO | sqlalchemy.engine.Engine | [cached since 2300s ago] (1,)
2025-11-06 19:44:30,703 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.training_contexts (id, training_session_id, user_id, context) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::JSONB) RETURNING ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at
2025-11-06 19:44:30,704 | INFO | sqlalchemy.engine.Engine | [cached since 1657s ago] (UUID('e6c2a414-f586-4167-9f75-f95bf1873a88'), UUID('f019741c-b9d5-49d6-af38-20bfc9731a39'), 1, '{"route": "MRPV-MRPV", "meteo": {"condition": "IMC", "vis": "3km", "qnh": "983", "windDirection": "040", "windSpeed": "4", "wind": "040/4"}, "objectives": ["mrpv_full_flight"]}')
2025-11-06 19:44:30,715 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 19:44:30,902 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:44:30,904 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.id = $1::UUID
2025-11-06 19:44:30,905 | INFO | sqlalchemy.engine.Engine | [cached since 1657s ago] (UUID('e6c2a414-f586-4167-9f75-f95bf1873a88'),)
2025-11-06 19:44:30,918 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 19:45:12,927 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 19:45:12,927 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-06 19:45:12,928 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-06 19:45:12,928 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:45:12,930 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-06 19:45:12,931 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-06 19:45:12,931 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:45:12,932 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 19:45:12,934 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-06 19:45:12,935 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 19:45:12,936 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 19:45:12,937 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-06 19:45:12,937 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-06 19:45:12,938 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:45:12,939 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-06 19:45:12,939 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-06 19:45:12,941 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:45:12,941 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 19:45:12,943 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:268]
2025-11-06 19:45:12,943 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 19:45:12,944 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 19:45:12,945 | DEBUG | python_multipart.multipart | Calling on_header_field with data[310:329]
2025-11-06 19:45:12,946 | DEBUG | python_multipart.multipart | Calling on_header_value with data[331:385]
2025-11-06 19:45:12,947 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:45:12,947 | DEBUG | python_multipart.multipart | Calling on_header_field with data[387:399]
2025-11-06 19:45:12,948 | DEBUG | python_multipart.multipart | Calling on_header_value with data[401:411]
2025-11-06 19:45:12,950 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:45:12,950 | DEBUG | python_multipart.multipart | Calling on_header_field with data[413:427]
2025-11-06 19:45:12,952 | DEBUG | python_multipart.multipart | Calling on_header_value with data[429:435]
2025-11-06 19:45:12,953 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:45:12,955 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 19:45:12,956 | DEBUG | python_multipart.multipart | Calling on_part_data with data[439:1460]
2025-11-06 19:45:12,958 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:12,962 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 19:45:13,133 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:45:13,136 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:13,137 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:45:13,312 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:45:13,314 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:13,315 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:45:13,527 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:13,530 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:13,531 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 19:45:13,750 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:45:13,753 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:13,755 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:13,756 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:13,759 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:45:13,981 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:13,983 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:45:13,986 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:45:13,988 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:45:14,183 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:14,185 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:45:14,187 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:45:14,189 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:45:14,365 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:45:14,366 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:14,369 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:45:14,372 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:45:14,826 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:14,830 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:45:14,835 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:45:15,331 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:15,333 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:15,336 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:45:15,338 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:45:15,553 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:45:15,555 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:15,556 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:15,558 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:15,560 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:45:15,725 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:15,726 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:45:15,729 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:45:15,733 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:45:15,897 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:15,899 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:15,900 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:15,903 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:45:15,905 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:45:16,070 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:45:16,072 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:16,074 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:16,076 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:45:16,276 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:45:16,278 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:16,281 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:45:16,503 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:45:16,505 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:16,507 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:45:16,508 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:45:16,684 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:45:16,686 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:16,687 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:45:16,846 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:16,848 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:16,849 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:16,852 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:45:17,012 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1459]
2025-11-06 19:45:17,016 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1]
2025-11-06 19:45:17,017 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:45:17,018 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:45:17,182 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:45:17,185 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:17,187 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:17,190 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:45:17,354 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:45:17,357 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:45:17,359 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:45:17,517 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:45:17,519 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:17,522 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:17,524 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:45:17,727 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:17,729 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:17,730 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:17,732 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:17,734 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:45:17,889 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:45:17,891 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:45:17,895 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:45:18,044 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:45:18,046 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:18,047 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:45:18,215 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:45:18,217 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:18,218 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:45:18,222 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:45:18,265 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1994]
2025-11-06 19:45:18,266 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 19:45:18,266 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-06 19:45:18,407 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:45:18,409 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 19:45:18,410 | INFO | sqlalchemy.engine.Engine | [cached since 2428s ago] ()
2025-11-06 19:45:18,416 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 19:45:18,417 | INFO | sqlalchemy.engine.Engine | [cached since 2348s ago] (1,)
2025-11-06 19:45:18,517 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 19:45:18,518 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A44734A10>}) about to wait for the following futures []
2025-11-06 19:45:18,521 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A44734A10>}) done waiting for dependent futures
2025-11-06 19:45:18,522 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A44734A10>}) with kwargs {'client': <botocore.client.S3 object at 0x0000023A43DA09D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x0000023A44729110>, 'osutil': <s3transfer.utils.OSUtils object at 0x0000023A4472A750>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x0000023A446B0590>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A44734A10>}
2025-11-06 19:45:18,523 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/636f7377c7244aaab631986cce1ace23.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x0000023A446B0590> for transfer request: 0.
2025-11-06 19:45:18,524 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 19:45:18,527 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/636f7377c7244aaab631986cce1ace23.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-06 19:45:18,528 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 19:45:18,529 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/636f7377c7244aaab631986cce1ace23.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-06 19:45:18,530 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/636f7377c7244aaab631986cce1ace23.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x0000023A43DA09D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x0000023A44737110>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/636f7377c7244aaab631986cce1ace23.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-06 19:45:19,327 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 19:45:31,079 | INFO | app.controllers.audio | Transcripción recibida session=f019741c-b9d5-49d6-af38-20bfc9731a39: pa superficie, Alfa Noviembre, India, en H 37 solicitamos abrir plan de vuelo hacia zona eco, vía paso Chomogo, 7000 pies, dos almas a bordo, Capitán Alberto Solano. Autonomía, cinco horas y media.
2025-11-06 19:45:31,081 | INFO | app.logs.transcript | student | session=f019741c-b9d5-49d6-af38-20bfc9731a39 | frequency=118.00 | text=pa superficie, Alfa Noviembre, India, en H 37 solicitamos abrir plan de vuelo hacia zona eco, vía paso Chomogo, 7000 pies, dos almas a bordo, Capitán Alberto Solano. Autonomía, cinco horas y media.
2025-11-06 19:45:31,231 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:45:31,232 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 19:45:31,235 | INFO | sqlalchemy.engine.Engine | [generated in 0.00143s] (UUID('f019741c-b9d5-49d6-af38-20bfc9731a39'),)
2025-11-06 19:45:31,255 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 19:45:31,937 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:45:31,938 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 19:45:31,940 | INFO | sqlalchemy.engine.Engine | [cached since 0.7073s ago] (UUID('f019741c-b9d5-49d6-af38-20bfc9731a39'),)
2025-11-06 19:45:31,957 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 19:45:31,958 | INFO | sqlalchemy.engine.Engine | [generated in 0.00157s] ('{"meteo": {"qnh": "983", "vis": "3km", "wind": "040/4", "condition": "IMC", "windSpeed": "4", "windDirection": "040"}, "route": "MRPV-MRPV", "objecti ... (5804 characters truncated) ... e": "MRPV-MRPV", "intent": "ground_departure_request", "frequency_group": "ground", "intent_confidence": 0.95, "timestamp": "2025-11-07T01:45:31Z"}]}', datetime.datetime(2025, 11, 7, 1, 45, 31, 956757), UUID('e6c2a414-f586-4167-9f75-f95bf1873a88'))
2025-11-06 19:45:31,972 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 19:45:31,999 | INFO | app.controllers.audio | Fase activa session=f019741c-b9d5-49d6-af38-20bfc9731a39 phase_id=ground_departure_request intent=ground_departure_request freq=ground
2025-11-06 19:45:32,001 | INFO | app.controllers.audio | Frecuencia fuera de rango intent=ground_departure_request freq=118.000 esperado=121.700
2025-11-06 19:45:32,135 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:45:32,137 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 19:45:32,138 | INFO | sqlalchemy.engine.Engine | [cached since 0.9051s ago] (UUID('f019741c-b9d5-49d6-af38-20bfc9731a39'),)
2025-11-06 19:45:32,152 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 19:45:32,154 | INFO | sqlalchemy.engine.Engine | [cached since 0.1974s ago] ('{"meteo": {"qnh": "983", "vis": "3km", "wind": "040/4", "condition": "IMC", "windSpeed": "4", "windDirection": "040"}, "route": "MRPV-MRPV", "turns": ... (6367 characters truncated) ... frequencies": {"ground": "121.7", "tower": "118.3"}, "scenario_id": "mrpv_vfr_departure", "transponder": "0529", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 7, 1, 45, 32, 152725), UUID('e6c2a414-f586-4167-9f75-f95bf1873a88'))
2025-11-06 19:45:32,165 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 19:45:32,183 | INFO | app.logs.transcript | controller | session=f019741c-b9d5-49d6-af38-20bfc9731a39 | frequency=118.00 | intent=ground_departure_request | phase=ground_departure_request | allow_response=False | text=La frecuencia esperada para esta solicitud es 121.700.
2025-11-06 19:45:32,186 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 19:46:21,313 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 19:46:21,314 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-06 19:46:21,315 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-06 19:46:21,316 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:46:21,317 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-06 19:46:21,319 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-06 19:46:21,320 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:46:21,321 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 19:46:21,322 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-06 19:46:21,323 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 19:46:21,324 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 19:46:21,325 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-06 19:46:21,326 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-06 19:46:21,327 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:46:21,329 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-06 19:46:21,330 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-06 19:46:21,331 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:46:21,332 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 19:46:21,334 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:268]
2025-11-06 19:46:21,335 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 19:46:21,337 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 19:46:21,337 | DEBUG | python_multipart.multipart | Calling on_header_field with data[310:329]
2025-11-06 19:46:21,337 | DEBUG | python_multipart.multipart | Calling on_header_value with data[331:385]
2025-11-06 19:46:21,340 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:46:21,342 | DEBUG | python_multipart.multipart | Calling on_header_field with data[387:399]
2025-11-06 19:46:21,344 | DEBUG | python_multipart.multipart | Calling on_header_value with data[401:411]
2025-11-06 19:46:21,346 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:46:21,347 | DEBUG | python_multipart.multipart | Calling on_header_field with data[413:427]
2025-11-06 19:46:21,350 | DEBUG | python_multipart.multipart | Calling on_header_value with data[429:435]
2025-11-06 19:46:21,353 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:46:21,353 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 19:46:21,355 | DEBUG | python_multipart.multipart | Calling on_part_data with data[439:2920]
2025-11-06 19:46:21,357 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 19:46:21,599 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:46:21,601 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:21,603 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:46:21,790 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:21,794 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:46:21,796 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:21,797 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:21,800 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:46:21,977 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:21,979 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:46:21,982 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:46:22,134 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:46:22,136 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:22,137 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:46:22,139 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:46:22,286 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:46:22,288 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:22,290 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:22,291 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:22,294 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:46:22,524 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:46:22,526 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:22,529 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:46:22,747 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:46:22,749 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:22,750 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:46:22,921 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:46:22,925 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:22,926 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:22,927 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:46:23,146 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:46:23,149 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:23,150 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:23,152 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:46:23,321 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:46:23,323 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:23,325 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:23,327 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:23,329 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:46:23,511 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:46:23,514 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:23,516 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:46:23,518 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:46:23,707 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:46:23,710 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:23,712 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:46:23,713 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:46:23,959 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:46:23,961 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:46:23,962 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:46:24,121 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:24,122 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:46:24,125 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:46:24,127 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:46:24,336 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:46:24,341 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:46:24,343 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:46:24,667 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:24,670 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:46:24,672 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:24,676 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:46:24,991 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:24,994 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:6732]
2025-11-06 19:46:25,443 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:25,446 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:46:25,449 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:46:25,451 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:46:25,636 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:46:25,639 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:25,640 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:46:25,800 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:25,802 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:46:25,806 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:46:25,979 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:25,980 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:46:25,982 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:46:25,986 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:46:26,137 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:46:26,140 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:26,141 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:46:26,297 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:46:26,300 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:26,302 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:46:26,460 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:46:26,463 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:26,466 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:26,468 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:26,470 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:46:26,626 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:46:26,629 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:26,631 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:26,632 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:46:26,786 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:26,789 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:6732]
2025-11-06 19:46:26,935 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:46:26,936 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:26,937 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:26,940 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:46:27,090 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:27,093 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:46:27,095 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:46:27,096 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:46:27,263 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:46:27,266 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:46:27,266 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:46:27,308 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1983]
2025-11-06 19:46:27,309 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 19:46:27,310 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-06 19:46:27,431 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:46:27,433 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 19:46:27,434 | INFO | sqlalchemy.engine.Engine | [cached since 2497s ago] ()
2025-11-06 19:46:27,439 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 19:46:27,441 | INFO | sqlalchemy.engine.Engine | [cached since 2417s ago] (1,)
2025-11-06 19:46:27,529 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 19:46:27,530 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A44728650>}) about to wait for the following futures []
2025-11-06 19:46:27,531 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A44728650>}) done waiting for dependent futures
2025-11-06 19:46:27,532 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A44728650>}) with kwargs {'client': <botocore.client.S3 object at 0x0000023A43DA09D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x0000023A446C4150>, 'osutil': <s3transfer.utils.OSUtils object at 0x0000023A446CF390>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x0000023A44735B10>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A44728650>}
2025-11-06 19:46:27,534 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/c1fc314a747c4524b1bf0e7cb3ccc430.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x0000023A44735B10> for transfer request: 0.
2025-11-06 19:46:27,535 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 19:46:27,537 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/c1fc314a747c4524b1bf0e7cb3ccc430.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-06 19:46:27,537 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 19:46:27,538 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/c1fc314a747c4524b1bf0e7cb3ccc430.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-06 19:46:27,539 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/c1fc314a747c4524b1bf0e7cb3ccc430.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x0000023A43DA09D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x0000023A44709910>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/c1fc314a747c4524b1bf0e7cb3ccc430.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-06 19:46:28,352 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 19:46:42,236 | INFO | app.controllers.audio | Transcripción recibida session=f019741c-b9d5-49d6-af38-20bfc9731a39: pa superficie Alfa Noviembre India en hagar 37 solicitamos abrir plan de vuelo hacia zona eco, vía paso Chomogo, 7000 pies, dos almas a bordo, Capitán Alberto Solano, Autonomía, cinco horas y media.
2025-11-06 19:46:42,237 | INFO | app.logs.transcript | student | session=f019741c-b9d5-49d6-af38-20bfc9731a39 | frequency=121.70 | text=pa superficie Alfa Noviembre India en hagar 37 solicitamos abrir plan de vuelo hacia zona eco, vía paso Chomogo, 7000 pies, dos almas a bordo, Capitán Alberto Solano, Autonomía, cinco horas y media.
2025-11-06 19:46:42,379 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:46:42,380 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 19:46:42,381 | INFO | sqlalchemy.engine.Engine | [cached since 71.15s ago] (UUID('f019741c-b9d5-49d6-af38-20bfc9731a39'),)
2025-11-06 19:46:42,396 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 19:46:42,871 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:46:42,872 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 19:46:42,873 | INFO | sqlalchemy.engine.Engine | [cached since 71.64s ago] (UUID('f019741c-b9d5-49d6-af38-20bfc9731a39'),)
2025-11-06 19:46:42,887 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 19:46:42,889 | INFO | sqlalchemy.engine.Engine | [cached since 70.93s ago] ('{"meteo": {"qnh": "983", "vis": "3km", "wind": "040/4", "condition": "IMC", "windSpeed": "4", "windDirection": "040"}, "route": "MRPV-MRPV", "turns": ... (6910 characters truncated) ... frequencies": {"tower": "118.3", "ground": "121.7"}, "scenario_id": "mrpv_vfr_departure", "transponder": "0529", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 7, 1, 46, 42, 887548), UUID('e6c2a414-f586-4167-9f75-f95bf1873a88'))
2025-11-06 19:46:42,898 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 19:46:42,927 | INFO | app.controllers.audio | Fase activa session=f019741c-b9d5-49d6-af38-20bfc9731a39 phase_id=ground_departure_request intent=ground_takeoff_clearance freq=ground
2025-11-06 19:46:42,929 | INFO | app.services.audio_pipeline | Prompts generados intent=ground_takeoff_clearance freq_group=ground
SYSTEM> Eres un controlador de superficie en Costa Rica (Pavas Superficie 121.7). Evalúas la llamada inicial de apertura de plan VFR y decides si emites la autorización. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "metadata": object
 }.
Si necesitas proponer un cambio de fase, incluye en metadata la clave "nextPhase". No escribas texto ad...
USER> Fase actual: Solicitud de apertura de plan de vuelo
Intent esperado: ground_takeoff_clearance
Transcripción textual del alumno:
pa superficie Alfa Noviembre India en hagar 37 solicitamos abrir plan de vuelo hacia zona eco, vía paso Chomogo, 7000 pies, dos almas a bordo, Capitán Alberto Solano, Autonomía, cinco horas y media.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: ground
- Fase ID: ground_departure_request

Checklist alumno:
- Destinatario correcto (Pavas Superficie / f...
2025-11-06 19:46:44,021 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=ground_takeoff_clearance: {
  "intent": "ground_taxi_clearance",
  "allowResponse": true,
  "controllerText": "Alfa Noviembre India, confirmo recepción. Rodaje Alfa Charlie, pista 10, viento 40 grados, 4 nudos, QNH 983, squawk 0529. Avise listo.",
  "feedback": "Llamada correcta.",
  "confidence": 0.95,
  "metadata": {
    "nextPhase": "ground_readback"
  }
}
2025-11-06 19:46:44,022 | INFO | app.services.audio_pipeline | Intent devuelto por el LLM (ground_taxi_clearance) difiere del esperado (ground_takeoff_clearance)
2025-11-06 19:46:44,024 | INFO | app.controllers.audio | Transición automática de fase session=f019741c-b9d5-49d6-af38-20bfc9731a39 de=ground_departure_request a=ground_readback
2025-11-06 19:46:44,152 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:46:44,154 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 19:46:44,154 | INFO | sqlalchemy.engine.Engine | [cached since 72.92s ago] (UUID('f019741c-b9d5-49d6-af38-20bfc9731a39'),)
2025-11-06 19:46:44,168 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 19:46:44,170 | INFO | sqlalchemy.engine.Engine | [cached since 72.21s ago] ('{"meteo": {"qnh": "983", "vis": "3km", "wind": "040/4", "condition": "IMC", "windSpeed": "4", "windDirection": "040"}, "route": "MRPV-MRPV", "turns": ... (7840 characters truncated) ... frequencies": {"tower": "118.3", "ground": "121.7"}, "scenario_id": "mrpv_vfr_departure", "transponder": "0529", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 7, 1, 46, 44, 167935), UUID('e6c2a414-f586-4167-9f75-f95bf1873a88'))
2025-11-06 19:46:44,181 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 19:46:44,198 | INFO | app.logs.transcript | controller | session=f019741c-b9d5-49d6-af38-20bfc9731a39 | frequency=121.70 | intent=ground_taxi_clearance | phase=ground_readback | allow_response=True | text=Alfa Noviembre India, confirmo recepción. Rodaje Alfa Charlie, pista 10, viento 40 grados, 4 nudos, QNH 983, squawk 0529. Avise listo.
2025-11-06 19:46:45,836 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 19:47:57,584 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 19:47:57,585 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-06 19:47:57,586 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-06 19:47:57,587 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:47:57,589 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-06 19:47:57,589 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-06 19:47:57,590 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:47:57,591 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 19:47:57,592 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-06 19:47:57,593 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 19:47:57,594 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 19:47:57,595 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-06 19:47:57,596 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-06 19:47:57,596 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:47:57,597 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-06 19:47:57,597 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-06 19:47:57,599 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:47:57,599 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 19:47:57,600 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:268]
2025-11-06 19:47:57,601 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 19:47:57,602 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 19:47:57,602 | DEBUG | python_multipart.multipart | Calling on_header_field with data[310:329]
2025-11-06 19:47:57,604 | DEBUG | python_multipart.multipart | Calling on_header_value with data[331:385]
2025-11-06 19:47:57,605 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:47:57,606 | DEBUG | python_multipart.multipart | Calling on_header_field with data[387:399]
2025-11-06 19:47:57,606 | DEBUG | python_multipart.multipart | Calling on_header_value with data[401:411]
2025-11-06 19:47:57,608 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:47:57,608 | DEBUG | python_multipart.multipart | Calling on_header_field with data[413:427]
2025-11-06 19:47:57,610 | DEBUG | python_multipart.multipart | Calling on_header_value with data[429:435]
2025-11-06 19:47:57,610 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:47:57,612 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 19:47:57,613 | DEBUG | python_multipart.multipart | Calling on_part_data with data[439:5840]
2025-11-06 19:47:57,615 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:47:57,776 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:47:57,778 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:47:57,781 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:47:57,783 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:47:57,954 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:47:57,958 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:47:57,960 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:47:58,109 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:47:58,112 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:47:58,114 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:47:58,116 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:47:58,269 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:47:58,271 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:47:58,272 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:47:58,275 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:47:58,277 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:47:58,454 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:47:58,456 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:47:58,458 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:47:58,460 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:47:58,658 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:47:58,660 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:47:58,664 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:47:58,837 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:47:58,838 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:47:58,840 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:47:59,014 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:47:59,017 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:47:59,019 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:47:59,021 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:47:59,206 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:47:59,209 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:47:59,211 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:47:59,385 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:47:59,386 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:47:59,388 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:47:59,389 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:47:59,571 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:47:59,574 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:47:59,576 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:47:59,579 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:47:59,751 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:47:59,754 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:47:59,756 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:47:59,757 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:47:59,956 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:47:59,958 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:47:59,959 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:48:00,140 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:48:00,142 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:48:00,145 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:48:00,314 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:00,320 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:48:00,324 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:48:00,326 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:48:00,496 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:00,497 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:00,500 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:00,504 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:48:00,707 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:48:00,709 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:00,712 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:00,714 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2351]
2025-11-06 19:48:00,891 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1]
2025-11-06 19:48:00,893 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:48:00,895 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:00,896 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:00,899 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:00,901 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:48:01,088 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:48:01,089 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:01,092 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:01,095 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:48:01,285 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:01,286 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:01,289 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 19:48:01,464 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:48:01,466 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:01,467 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:01,469 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:48:01,634 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:01,636 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:48:01,639 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:48:01,641 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:48:01,811 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:01,812 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:01,815 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:01,818 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:01,820 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:01,823 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:48:01,984 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:48:01,986 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:01,987 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:01,990 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:48:02,155 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:48:02,156 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:02,161 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:02,163 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:48:02,356 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:48:02,359 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:02,360 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:48:02,566 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:02,568 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:02,569 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:02,571 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:02,572 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:48:02,768 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:48:02,769 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:02,772 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:48:02,774 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:48:02,972 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:02,975 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:02,978 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:02,982 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:02,984 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:02,986 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:48:03,282 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:03,284 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:03,286 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:03,288 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:03,290 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:48:03,433 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:03,436 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:03,438 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:48:03,439 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1371]
2025-11-06 19:48:03,439 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 19:48:03,440 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-06 19:48:03,597 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:48:03,598 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 19:48:03,599 | INFO | sqlalchemy.engine.Engine | [cached since 2593s ago] ()
2025-11-06 19:48:03,607 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 19:48:03,608 | INFO | sqlalchemy.engine.Engine | [cached since 2513s ago] (1,)
2025-11-06 19:48:03,716 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 19:48:03,719 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A44789CD0>}) about to wait for the following futures []
2025-11-06 19:48:03,720 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A44789CD0>}) done waiting for dependent futures
2025-11-06 19:48:03,721 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A44789CD0>}) with kwargs {'client': <botocore.client.S3 object at 0x0000023A43DA09D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x0000023A4472AF10>, 'osutil': <s3transfer.utils.OSUtils object at 0x0000023A446CDFD0>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x0000023A44747C50>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A44789CD0>}
2025-11-06 19:48:03,722 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/28a036a4ec894071baec5896946234d7.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x0000023A44747C50> for transfer request: 0.
2025-11-06 19:48:03,725 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 19:48:03,727 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/28a036a4ec894071baec5896946234d7.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-06 19:48:03,727 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 19:48:03,729 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/28a036a4ec894071baec5896946234d7.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-06 19:48:03,730 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/28a036a4ec894071baec5896946234d7.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x0000023A43DA09D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x0000023A44746D10>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/28a036a4ec894071baec5896946234d7.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-06 19:48:04,461 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 19:48:14,051 | INFO | app.controllers.audio | Transcripción recibida session=f019741c-b9d5-49d6-af38-20bfc9731a39: QNH983 transponder 0529. brodaremos vía Alfa dos. Alfa al.de espera pista 10 Alfa Noviembre India.
2025-11-06 19:48:14,052 | INFO | app.logs.transcript | student | session=f019741c-b9d5-49d6-af38-20bfc9731a39 | frequency=121.70 | text=QNH983 transponder 0529. brodaremos vía Alfa dos. Alfa al.de espera pista 10 Alfa Noviembre India.
2025-11-06 19:48:14,193 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:48:14,195 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 19:48:14,196 | INFO | sqlalchemy.engine.Engine | [cached since 163s ago] (UUID('f019741c-b9d5-49d6-af38-20bfc9731a39'),)
2025-11-06 19:48:14,210 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 19:48:15,153 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:48:15,156 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 19:48:15,157 | INFO | sqlalchemy.engine.Engine | [cached since 163.9s ago] (UUID('f019741c-b9d5-49d6-af38-20bfc9731a39'),)
2025-11-06 19:48:15,191 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 19:48:15,194 | INFO | sqlalchemy.engine.Engine | [cached since 163.2s ago] ('{"meteo": {"qnh": "983", "vis": "3km", "wind": "040/4", "condition": "IMC", "windSpeed": "4", "windDirection": "040"}, "route": "MRPV-MRPV", "turns": ... (8266 characters truncated) ... frequencies": {"tower": "118.3", "ground": "121.7"}, "scenario_id": "mrpv_vfr_departure", "transponder": "0529", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 7, 1, 48, 15, 190821), UUID('e6c2a414-f586-4167-9f75-f95bf1873a88'))
2025-11-06 19:48:15,229 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 19:48:15,289 | INFO | app.controllers.audio | Intent detector frequency mismatch session=f019741c-b9d5-49d6-af38-20bfc9731a39 detected=tower scenario=ground
2025-11-06 19:48:15,290 | INFO | app.controllers.audio | Fase activa session=f019741c-b9d5-49d6-af38-20bfc9731a39 phase_id=ground_readback intent=tower_taxi_clearance freq=ground
2025-11-06 19:48:15,292 | INFO | app.services.audio_pipeline | Prompts generados intent=tower_taxi_clearance freq_group=ground
SYSTEM> Sigues siendo Pavas Superficie en 121.7. Evalúas el readback del alumno tras la autorización de taxi. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "metadata": object
 }.
Si necesitas proponer un cambio de fase, incluye en metadata la clave "nextPhase". No escribas texto adicional antes o después del JSON.
USER> Fase actual: Readback de autorización de taxi
Intent esperado: tower_taxi_clearance
Transcripción textual del alumno:
QNH983 transponder 0529. brodaremos vía Alfa dos. Alfa al.de espera pista 10 Alfa Noviembre India.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: ground
- Fase ID: ground_readback

Checklist alumno:
- Repite QNH asignado.
- Repite transponder asignado.
- Confirma ruta de rodaje y pista.
- Cierra con identificador correcto.

Checklist controlador:
- Comparar la ...
2025-11-06 19:48:16,013 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=tower_taxi_clearance: {
  "intent": "ground_taxi_readback",
  "allowResponse": false,
  "controllerText": null,
  "feedback": "Falta la ruta de rodaje completa y el transponder asignado.",
  "confidence": 0.95,
  "metadata": {
    "missingItems": ["Ruta de rodaje completa", "Transponder asignado"],
    "nextPhase": "ground_readback"
  }
}
2025-11-06 19:48:16,015 | INFO | app.services.audio_pipeline | Intent devuelto por el LLM (ground_taxi_readback) difiere del esperado (tower_taxi_clearance)
2025-11-06 19:48:16,017 | INFO | app.controllers.audio | Transición automática de fase session=f019741c-b9d5-49d6-af38-20bfc9731a39 de=ground_readback a=ground_readback
2025-11-06 19:48:16,144 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:48:16,145 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 19:48:16,146 | INFO | sqlalchemy.engine.Engine | [cached since 164.9s ago] (UUID('f019741c-b9d5-49d6-af38-20bfc9731a39'),)
2025-11-06 19:48:16,160 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 19:48:16,161 | INFO | sqlalchemy.engine.Engine | [cached since 164.2s ago] ('{"meteo": {"qnh": "983", "vis": "3km", "wind": "040/4", "condition": "IMC", "windSpeed": "4", "windDirection": "040"}, "route": "MRPV-MRPV", "turns": ... (9157 characters truncated) ... frequencies": {"tower": "118.3", "ground": "121.7"}, "scenario_id": "mrpv_vfr_departure", "transponder": "0529", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 7, 1, 48, 16, 160242), UUID('e6c2a414-f586-4167-9f75-f95bf1873a88'))
2025-11-06 19:48:16,172 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 19:48:16,189 | INFO | app.logs.transcript | controller | session=f019741c-b9d5-49d6-af38-20bfc9731a39 | frequency=121.70 | intent=ground_taxi_readback | phase=ground_readback | allow_response=False | text=
2025-11-06 19:48:16,192 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 19:49:23,896 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 19:49:23,897 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-06 19:49:23,898 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-06 19:49:23,898 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:49:23,900 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-06 19:49:23,901 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-06 19:49:23,901 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:49:23,903 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 19:49:23,904 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-06 19:49:23,906 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 19:49:23,906 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 19:49:23,907 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-06 19:49:23,909 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-06 19:49:23,910 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:49:23,911 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-06 19:49:23,913 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-06 19:49:23,914 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:49:23,915 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 19:49:23,916 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:268]
2025-11-06 19:49:23,917 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 19:49:23,918 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 19:49:23,919 | DEBUG | python_multipart.multipart | Calling on_header_field with data[310:329]
2025-11-06 19:49:23,921 | DEBUG | python_multipart.multipart | Calling on_header_value with data[331:385]
2025-11-06 19:49:23,922 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:49:23,922 | DEBUG | python_multipart.multipart | Calling on_header_field with data[387:399]
2025-11-06 19:49:23,924 | DEBUG | python_multipart.multipart | Calling on_header_value with data[401:411]
2025-11-06 19:49:23,925 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:49:23,926 | DEBUG | python_multipart.multipart | Calling on_header_field with data[413:427]
2025-11-06 19:49:23,927 | DEBUG | python_multipart.multipart | Calling on_header_value with data[429:435]
2025-11-06 19:49:23,928 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:49:23,929 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 19:49:23,929 | DEBUG | python_multipart.multipart | Calling on_part_data with data[439:2920]
2025-11-06 19:49:23,932 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 19:49:24,092 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:49:24,095 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:49:24,097 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:49:24,251 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:49:24,254 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:49:24,255 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:49:24,447 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:49:24,450 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:49:24,452 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:49:24,454 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:49:24,648 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:49:24,653 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:49:24,656 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:49:24,929 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:49:24,932 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:49:24,934 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:49:24,937 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:49:25,218 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:49:25,222 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:49:25,225 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:49:25,590 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:49:25,593 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:49:25,595 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:49:25,596 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:49:25,600 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:49:25,759 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:49:25,761 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1459]
2025-11-06 19:49:25,762 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1]
2025-11-06 19:49:25,765 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:49:25,766 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:49:25,921 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:49:25,924 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:49:25,925 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:49:25,928 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:49:25,930 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:49:26,093 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:49:26,095 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:49:26,096 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:49:26,098 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:49:26,254 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:49:26,255 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:49:26,258 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:49:26,260 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:49:26,423 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:49:26,426 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:49:26,429 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:49:26,432 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:49:26,597 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:49:26,601 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:49:26,602 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 19:49:26,759 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:49:26,762 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:49:26,763 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:49:26,908 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:49:26,909 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:49:26,911 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:49:26,912 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:49:27,068 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:49:27,069 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:49:27,073 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:49:27,074 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:49:27,231 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:49:27,232 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:49:27,233 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:49:27,236 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:49:27,378 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:49:27,380 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:49:27,383 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:49:27,385 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:49:27,556 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:49:27,559 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:49:27,561 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:49:27,563 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:49:27,742 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:49:27,744 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:49:27,746 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:49:27,748 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:49:27,906 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:49:27,907 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:49:27,908 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:49:27,910 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:49:27,912 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:49:27,914 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:49:28,080 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:49:28,082 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:49:28,084 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:49:28,085 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:49:28,238 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:49:28,242 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:49:28,243 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:49:28,381 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:49:28,382 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:49:28,385 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:49:28,419 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1675]
2025-11-06 19:49:28,420 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 19:49:28,421 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-06 19:49:28,551 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:49:28,552 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 19:49:28,552 | INFO | sqlalchemy.engine.Engine | [cached since 2678s ago] ()
2025-11-06 19:49:28,557 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 19:49:28,559 | INFO | sqlalchemy.engine.Engine | [cached since 2598s ago] (1,)
2025-11-06 19:49:28,640 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 19:49:28,641 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A4478B150>}) about to wait for the following futures []
2025-11-06 19:49:28,642 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A4478B150>}) done waiting for dependent futures
2025-11-06 19:49:28,642 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A4478B150>}) with kwargs {'client': <botocore.client.S3 object at 0x0000023A43DA09D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x0000023A447051D0>, 'osutil': <s3transfer.utils.OSUtils object at 0x0000023A446B8D90>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x0000023A4478B790>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A4478B150>}
2025-11-06 19:49:28,644 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/858c76ae8fed4f4e875d2ebb6438b2c7.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x0000023A4478B790> for transfer request: 0.
2025-11-06 19:49:28,645 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 19:49:28,646 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/858c76ae8fed4f4e875d2ebb6438b2c7.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-06 19:49:28,646 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 19:49:28,647 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/858c76ae8fed4f4e875d2ebb6438b2c7.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-06 19:49:28,648 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/858c76ae8fed4f4e875d2ebb6438b2c7.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x0000023A43DA09D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x0000023A44789190>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/858c76ae8fed4f4e875d2ebb6438b2c7.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-06 19:49:29,345 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 19:49:39,019 | INFO | app.controllers.audio | Transcripción recibida session=f019741c-b9d5-49d6-af38-20bfc9731a39: QNH983 transponder 0529. rodaremos vía Alfa Charlie. al.de espera pista 10. Alfa Noviembre India.
2025-11-06 19:49:39,019 | INFO | app.logs.transcript | student | session=f019741c-b9d5-49d6-af38-20bfc9731a39 | frequency=121.70 | text=QNH983 transponder 0529. rodaremos vía Alfa Charlie. al.de espera pista 10. Alfa Noviembre India.
2025-11-06 19:49:39,172 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:49:39,173 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 19:49:39,175 | INFO | sqlalchemy.engine.Engine | [cached since 247.9s ago] (UUID('f019741c-b9d5-49d6-af38-20bfc9731a39'),)
2025-11-06 19:49:39,190 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 19:49:39,643 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:49:39,644 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 19:49:39,645 | INFO | sqlalchemy.engine.Engine | [cached since 248.4s ago] (UUID('f019741c-b9d5-49d6-af38-20bfc9731a39'),)
2025-11-06 19:49:39,658 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 19:49:39,659 | INFO | sqlalchemy.engine.Engine | [cached since 247.7s ago] ('{"meteo": {"qnh": "983", "vis": "3km", "wind": "040/4", "condition": "IMC", "windSpeed": "4", "windDirection": "040"}, "route": "MRPV-MRPV", "turns": ... (9584 characters truncated) ... frequencies": {"tower": "118.3", "ground": "121.7"}, "scenario_id": "mrpv_vfr_departure", "transponder": "0529", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 7, 1, 49, 39, 658172), UUID('e6c2a414-f586-4167-9f75-f95bf1873a88'))
2025-11-06 19:49:39,671 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 19:49:39,700 | INFO | app.controllers.audio | Fase activa session=f019741c-b9d5-49d6-af38-20bfc9731a39 phase_id=ground_readback intent=ground_taxi_clearance freq=ground
2025-11-06 19:49:39,702 | INFO | app.services.audio_pipeline | Prompts generados intent=ground_taxi_clearance freq_group=ground
SYSTEM> Sigues siendo Pavas Superficie en 121.7. Evalúas el readback del alumno tras la autorización de taxi. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "metadata": object
 }.
Si necesitas proponer un cambio de fase, incluye en metadata la clave "nextPhase". No escribas texto adicional antes o después del JSON.
USER> Fase actual: Readback de autorización de taxi
Intent esperado: ground_taxi_clearance
Transcripción textual del alumno:
QNH983 transponder 0529. rodaremos vía Alfa Charlie. al.de espera pista 10. Alfa Noviembre India.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: ground
- Fase ID: ground_readback

Checklist alumno:
- Repite QNH asignado.
- Repite transponder asignado.
- Confirma ruta de rodaje y pista.
- Cierra con identificador correcto.

Checklist controlador:
- Comparar la ...
2025-11-06 19:49:40,333 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=ground_taxi_clearance: {
  "intent": "ground_taxi_readback",
  "allowResponse": true,
  "controllerText": "Colación correcta.",
  "feedback": "Todos los elementos están presentes y correctos.",
  "confidence": 1.0,
  "metadata": {
    "nextPhase": "tower_ready"
  }
}
2025-11-06 19:49:40,334 | INFO | app.services.audio_pipeline | Intent devuelto por el LLM (ground_taxi_readback) difiere del esperado (ground_taxi_clearance)
2025-11-06 19:49:40,336 | INFO | app.controllers.audio | Transición automática de fase session=f019741c-b9d5-49d6-af38-20bfc9731a39 de=ground_readback a=tower_ready
2025-11-06 19:49:40,517 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:49:40,518 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 19:49:40,519 | INFO | sqlalchemy.engine.Engine | [cached since 249.3s ago] (UUID('f019741c-b9d5-49d6-af38-20bfc9731a39'),)
2025-11-06 19:49:40,536 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 19:49:40,537 | INFO | sqlalchemy.engine.Engine | [cached since 248.6s ago] ('{"meteo": {"qnh": "983", "vis": "3km", "wind": "040/4", "condition": "IMC", "windSpeed": "4", "windDirection": "040"}, "route": "MRPV-MRPV", "turns": ... (10340 characters truncated) ... "frequencies": {"tower": "118.3", "ground": "121.7"}, "scenario_id": "mrpv_vfr_departure", "transponder": "0529", "default_frequency_group": "tower"}', datetime.datetime(2025, 11, 7, 1, 49, 40, 536841), UUID('e6c2a414-f586-4167-9f75-f95bf1873a88'))
2025-11-06 19:49:40,552 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 19:49:40,566 | INFO | app.logs.transcript | controller | session=f019741c-b9d5-49d6-af38-20bfc9731a39 | frequency=121.70 | intent=ground_taxi_readback | phase=tower_ready | allow_response=True | text=Colación correcta.
2025-11-06 19:49:41,356 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 19:50:15,737 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 19:50:15,739 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-06 19:50:15,739 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-06 19:50:15,740 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:50:15,741 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-06 19:50:15,742 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-06 19:50:15,742 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:50:15,742 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 19:50:15,744 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-06 19:50:15,744 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 19:50:15,744 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 19:50:15,745 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-06 19:50:15,746 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-06 19:50:15,746 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:50:15,748 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-06 19:50:15,749 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-06 19:50:15,749 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:50:15,751 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 19:50:15,751 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:268]
2025-11-06 19:50:15,752 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 19:50:15,753 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 19:50:15,754 | DEBUG | python_multipart.multipart | Calling on_header_field with data[310:329]
2025-11-06 19:50:15,756 | DEBUG | python_multipart.multipart | Calling on_header_value with data[331:385]
2025-11-06 19:50:15,756 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:50:15,757 | DEBUG | python_multipart.multipart | Calling on_header_field with data[387:399]
2025-11-06 19:50:15,759 | DEBUG | python_multipart.multipart | Calling on_header_value with data[401:411]
2025-11-06 19:50:15,759 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:50:15,760 | DEBUG | python_multipart.multipart | Calling on_header_field with data[413:427]
2025-11-06 19:50:15,761 | DEBUG | python_multipart.multipart | Calling on_header_value with data[429:434]
2025-11-06 19:50:15,762 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:50:15,762 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 19:50:15,764 | DEBUG | python_multipart.multipart | Calling on_part_data with data[438:1460]
2025-11-06 19:50:15,765 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:6732]
2025-11-06 19:50:15,900 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:50:15,901 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:50:15,903 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:50:16,057 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:50:16,059 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:50:16,061 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:50:16,214 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:50:16,216 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:50:16,219 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:50:16,221 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:50:16,421 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:50:16,424 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:50:16,426 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:50:16,427 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:50:16,620 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:50:16,621 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:50:16,623 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:50:16,782 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:50:16,784 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:50:16,786 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:50:16,787 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:50:16,937 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:50:16,940 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:50:16,942 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:50:16,943 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:50:17,097 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:50:17,100 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:50:17,102 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:50:17,104 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:50:17,106 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:50:17,254 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:50:17,257 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:50:17,430 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:50:17,431 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:50:17,432 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:50:17,434 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:50:17,552 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:50:17,555 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:50:17,559 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1205]
2025-11-06 19:50:17,560 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 19:50:17,561 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-06 19:50:17,714 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:50:17,716 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 19:50:17,716 | INFO | sqlalchemy.engine.Engine | [cached since 2727s ago] ()
2025-11-06 19:50:17,726 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 19:50:17,728 | INFO | sqlalchemy.engine.Engine | [cached since 2647s ago] (1,)
2025-11-06 19:50:17,815 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 19:50:17,818 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A4470AD50>}) about to wait for the following futures []
2025-11-06 19:50:17,818 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A4470AD50>}) done waiting for dependent futures
2025-11-06 19:50:17,818 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A4470AD50>}) with kwargs {'client': <botocore.client.S3 object at 0x0000023A43DA09D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x0000023A4474FB50>, 'osutil': <s3transfer.utils.OSUtils object at 0x0000023A44734050>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x0000023A44744190>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A4470AD50>}
2025-11-06 19:50:17,819 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/da88b00a41b54463bfda5f8cd8064522.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x0000023A44744190> for transfer request: 0.
2025-11-06 19:50:17,820 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 19:50:17,821 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/da88b00a41b54463bfda5f8cd8064522.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-06 19:50:17,821 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 19:50:17,823 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/da88b00a41b54463bfda5f8cd8064522.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-06 19:50:17,824 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/da88b00a41b54463bfda5f8cd8064522.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x0000023A43DA09D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x0000023A447084D0>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/da88b00a41b54463bfda5f8cd8064522.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-06 19:50:18,396 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 19:50:28,111 | INFO | app.controllers.audio | Transcripción recibida session=f019741c-b9d5-49d6-af38-20bfc9731a39: Alfa Noviembre India en.de espera. pista 10 listo para el despegue.
2025-11-06 19:50:28,111 | INFO | app.logs.transcript | student | session=f019741c-b9d5-49d6-af38-20bfc9731a39 | frequency=121.70 | text=Alfa Noviembre India en.de espera. pista 10 listo para el despegue.
2025-11-06 19:50:28,247 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:50:28,248 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 19:50:28,249 | INFO | sqlalchemy.engine.Engine | [cached since 297s ago] (UUID('f019741c-b9d5-49d6-af38-20bfc9731a39'),)
2025-11-06 19:50:28,264 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 19:50:28,811 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:50:28,812 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 19:50:28,814 | INFO | sqlalchemy.engine.Engine | [cached since 297.6s ago] (UUID('f019741c-b9d5-49d6-af38-20bfc9731a39'),)
2025-11-06 19:50:28,827 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 19:50:28,830 | INFO | sqlalchemy.engine.Engine | [cached since 296.9s ago] ('{"meteo": {"qnh": "983", "vis": "3km", "wind": "040/4", "condition": "IMC", "windSpeed": "4", "windDirection": "040"}, "route": "MRPV-MRPV", "turns": ... (10731 characters truncated) ... "frequencies": {"tower": "118.3", "ground": "121.7"}, "scenario_id": "mrpv_vfr_departure", "transponder": "0529", "default_frequency_group": "tower"}', datetime.datetime(2025, 11, 7, 1, 50, 28, 827625), UUID('e6c2a414-f586-4167-9f75-f95bf1873a88'))
2025-11-06 19:50:28,844 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 19:50:28,878 | INFO | app.controllers.audio | Intent detector frequency mismatch session=f019741c-b9d5-49d6-af38-20bfc9731a39 detected=ground scenario=tower
2025-11-06 19:50:28,879 | INFO | app.controllers.audio | Fase activa session=f019741c-b9d5-49d6-af38-20bfc9731a39 phase_id=tower_ready intent=ground_taxi_clearance freq=tower
2025-11-06 19:50:28,879 | INFO | app.controllers.audio | Frecuencia fuera de rango intent=ground_taxi_clearance freq=121.700 esperado=118.300
2025-11-06 19:50:29,019 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:50:29,020 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 19:50:29,021 | INFO | sqlalchemy.engine.Engine | [cached since 297.8s ago] (UUID('f019741c-b9d5-49d6-af38-20bfc9731a39'),)
2025-11-06 19:50:29,034 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 19:50:29,036 | INFO | sqlalchemy.engine.Engine | [cached since 297.1s ago] ('{"meteo": {"qnh": "983", "vis": "3km", "wind": "040/4", "condition": "IMC", "windSpeed": "4", "windDirection": "040"}, "route": "MRPV-MRPV", "turns": ... (11316 characters truncated) ... "frequencies": {"tower": "118.3", "ground": "121.7"}, "scenario_id": "mrpv_vfr_departure", "transponder": "0529", "default_frequency_group": "tower"}', datetime.datetime(2025, 11, 7, 1, 50, 29, 34304), UUID('e6c2a414-f586-4167-9f75-f95bf1873a88'))
2025-11-06 19:50:29,049 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 19:50:29,064 | INFO | app.logs.transcript | controller | session=f019741c-b9d5-49d6-af38-20bfc9731a39 | frequency=121.70 | intent=ground_taxi_clearance | phase=tower_ready | allow_response=False | text=La frecuencia esperada para esta solicitud es 118.300.
2025-11-06 19:50:29,066 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 19:51:12,354 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 19:51:12,355 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-06 19:51:12,356 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-06 19:51:12,357 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:51:12,358 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-06 19:51:12,359 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-06 19:51:12,359 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:51:12,362 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 19:51:12,363 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-06 19:51:12,364 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 19:51:12,365 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 19:51:12,366 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-06 19:51:12,366 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-06 19:51:12,367 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:51:12,368 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-06 19:51:12,369 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-06 19:51:12,371 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:51:12,372 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 19:51:12,373 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:268]
2025-11-06 19:51:12,374 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 19:51:12,376 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 19:51:12,377 | DEBUG | python_multipart.multipart | Calling on_header_field with data[310:329]
2025-11-06 19:51:12,378 | DEBUG | python_multipart.multipart | Calling on_header_value with data[331:385]
2025-11-06 19:51:12,379 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:51:12,380 | DEBUG | python_multipart.multipart | Calling on_header_field with data[387:399]
2025-11-06 19:51:12,382 | DEBUG | python_multipart.multipart | Calling on_header_value with data[401:411]
2025-11-06 19:51:12,383 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:51:12,384 | DEBUG | python_multipart.multipart | Calling on_header_field with data[413:427]
2025-11-06 19:51:12,384 | DEBUG | python_multipart.multipart | Calling on_header_value with data[429:434]
2025-11-06 19:51:12,385 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:51:12,386 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 19:51:12,387 | DEBUG | python_multipart.multipart | Calling on_part_data with data[438:2920]
2025-11-06 19:51:12,389 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:51:12,391 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:51:12,570 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:51:12,571 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:51:12,574 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:51:12,576 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:51:12,752 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:51:12,754 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:51:12,758 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:51:12,760 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:51:12,940 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:51:12,942 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:51:12,944 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:51:12,946 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:51:13,087 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:51:13,089 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:51:13,090 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:51:13,092 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:51:13,095 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:51:13,096 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:51:13,250 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:51:13,252 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:51:13,254 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:51:13,255 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:51:13,425 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:51:13,427 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:51:13,429 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:51:13,431 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:51:13,590 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:51:13,591 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:51:13,594 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:51:13,598 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:51:13,775 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:51:13,779 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:51:13,784 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:51:13,786 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:51:13,935 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:51:13,938 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:51:13,940 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:51:14,090 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:51:14,091 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:51:14,093 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:51:14,096 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:51:14,106 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:249]
2025-11-06 19:51:14,107 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 19:51:14,107 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-06 19:51:14,224 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:51:14,226 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 19:51:14,226 | INFO | sqlalchemy.engine.Engine | [cached since 2784s ago] ()
2025-11-06 19:51:14,233 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 19:51:14,234 | INFO | sqlalchemy.engine.Engine | [cached since 2703s ago] (1,)
2025-11-06 19:51:14,316 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 19:51:14,316 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A4478AE90>}) about to wait for the following futures []
2025-11-06 19:51:14,316 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A4478AE90>}) done waiting for dependent futures
2025-11-06 19:51:14,318 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A4478AE90>}) with kwargs {'client': <botocore.client.S3 object at 0x0000023A43DA09D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x0000023A4474D110>, 'osutil': <s3transfer.utils.OSUtils object at 0x0000023A44736510>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x0000023A4478ACD0>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A4478AE90>}
2025-11-06 19:51:14,319 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/e6ee2a11141341bc901c44e4806ffa85.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x0000023A4478ACD0> for transfer request: 0.
2025-11-06 19:51:14,319 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 19:51:14,320 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/e6ee2a11141341bc901c44e4806ffa85.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-06 19:51:14,320 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 19:51:14,321 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/e6ee2a11141341bc901c44e4806ffa85.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-06 19:51:14,322 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/e6ee2a11141341bc901c44e4806ffa85.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x0000023A43DA09D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x0000023A44747FD0>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/e6ee2a11141341bc901c44e4806ffa85.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-06 19:51:15,213 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 19:51:24,800 | INFO | app.controllers.audio | Transcripción recibida session=f019741c-b9d5-49d6-af38-20bfc9731a39: Alfa Noviembre India en.de espera listo para el despegue pista 10.
2025-11-06 19:51:24,801 | INFO | app.logs.transcript | student | session=f019741c-b9d5-49d6-af38-20bfc9731a39 | frequency=118.30 | text=Alfa Noviembre India en.de espera listo para el despegue pista 10.
2025-11-06 19:51:25,235 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:51:25,237 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 19:51:25,239 | INFO | sqlalchemy.engine.Engine | [cached since 354s ago] (UUID('f019741c-b9d5-49d6-af38-20bfc9731a39'),)
2025-11-06 19:51:25,264 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 19:51:25,720 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:51:25,721 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 19:51:25,721 | INFO | sqlalchemy.engine.Engine | [cached since 354.5s ago] (UUID('f019741c-b9d5-49d6-af38-20bfc9731a39'),)
2025-11-06 19:51:25,736 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 19:51:25,737 | INFO | sqlalchemy.engine.Engine | [cached since 353.8s ago] ('{"meteo": {"qnh": "983", "vis": "3km", "wind": "040/4", "condition": "IMC", "windSpeed": "4", "windDirection": "040"}, "route": "MRPV-MRPV", "turns": ... (11706 characters truncated) ... "frequencies": {"tower": "118.3", "ground": "121.7"}, "scenario_id": "mrpv_vfr_departure", "transponder": "0529", "default_frequency_group": "tower"}', datetime.datetime(2025, 11, 7, 1, 51, 25, 735976), UUID('e6c2a414-f586-4167-9f75-f95bf1873a88'))
2025-11-06 19:51:25,750 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 19:51:25,779 | INFO | app.controllers.audio | Intent detector frequency mismatch session=f019741c-b9d5-49d6-af38-20bfc9731a39 detected=ground scenario=tower
2025-11-06 19:51:25,780 | INFO | app.controllers.audio | Fase activa session=f019741c-b9d5-49d6-af38-20bfc9731a39 phase_id=tower_ready intent=ground_taxi_clearance freq=tower
2025-11-06 19:51:25,781 | INFO | app.services.audio_pipeline | Prompts generados intent=ground_taxi_clearance freq_group=tower
SYSTEM> Eres Pavas Torre en 118.3. Evalúas cuando la aeronave está lista en punto de espera y emites instrucciones de despegue. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "metadata": object
 }.
Si necesitas proponer un cambio de fase, incluye en metadata la clave "nextPhase". No escribas texto adicional antes o después del JSON.
USER> Fase actual: Contacto torre y autorización de despegue
Intent esperado: ground_taxi_clearance
Transcripción textual del alumno:
Alfa Noviembre India en.de espera listo para el despegue pista 10.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: tower
- Fase ID: tower_ready

Checklist alumno:
- Cambiar destinatario a Pavas Torre.
- Avisar estar en punto de espera pista 10 y listo.
- Mantener identificador y fraseología correctos.

Checklist controlador:
- Gestionar secuencia: mant...
2025-11-06 19:51:26,550 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=ground_taxi_clearance: {
  "intent": "tower_takeoff_clearance",
  "allowResponse": true,
  "controllerText": "Alfa Noviembre India, Pavas Torre. Despegue autorizado, mantenga rumbo de pista, informe pasando 5000 pies.",
  "feedback": "Llamada correcta.",
  "confidence": 1,
  "metadata": {
    "nextPhase": "departure"
  }
}
2025-11-06 19:51:26,551 | INFO | app.services.audio_pipeline | Intent devuelto por el LLM (tower_takeoff_clearance) difiere del esperado (ground_taxi_clearance)
2025-11-06 19:51:26,675 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:51:26,676 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 19:51:26,676 | INFO | sqlalchemy.engine.Engine | [cached since 355.4s ago] (UUID('f019741c-b9d5-49d6-af38-20bfc9731a39'),)
2025-11-06 19:51:26,690 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 19:51:26,691 | INFO | sqlalchemy.engine.Engine | [cached since 354.7s ago] ('{"meteo": {"qnh": "983", "vis": "3km", "wind": "040/4", "condition": "IMC", "windSpeed": "4", "windDirection": "040"}, "route": "MRPV-MRPV", "turns": ... (12562 characters truncated) ... "frequencies": {"tower": "118.3", "ground": "121.7"}, "scenario_id": "mrpv_vfr_departure", "transponder": "0529", "default_frequency_group": "tower"}', datetime.datetime(2025, 11, 7, 1, 51, 26, 690609), UUID('e6c2a414-f586-4167-9f75-f95bf1873a88'))
2025-11-06 19:51:26,707 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 19:51:26,722 | INFO | app.logs.transcript | controller | session=f019741c-b9d5-49d6-af38-20bfc9731a39 | frequency=118.30 | intent=tower_takeoff_clearance | phase=tower_ready | allow_response=True | text=Alfa Noviembre India, Pavas Torre. Despegue autorizado, mantenga rumbo de pista, informe pasando 5000 pies.
2025-11-06 19:51:27,852 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 19:53:25,385 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 19:53:25,387 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-06 19:53:25,389 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-06 19:53:25,390 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:53:25,391 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-06 19:53:25,393 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-06 19:53:25,395 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:53:25,395 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 19:53:25,397 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-06 19:53:25,400 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 19:53:25,401 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 19:53:25,406 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-06 19:53:25,408 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-06 19:53:25,409 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:53:25,411 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-06 19:53:25,413 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-06 19:53:25,414 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:53:25,415 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 19:53:25,418 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:268]
2025-11-06 19:53:25,420 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 19:53:25,421 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 19:53:25,425 | DEBUG | python_multipart.multipart | Calling on_header_field with data[310:329]
2025-11-06 19:53:25,428 | DEBUG | python_multipart.multipart | Calling on_header_value with data[331:385]
2025-11-06 19:53:25,431 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:53:25,434 | DEBUG | python_multipart.multipart | Calling on_header_field with data[387:399]
2025-11-06 19:53:25,436 | DEBUG | python_multipart.multipart | Calling on_header_value with data[401:411]
2025-11-06 19:53:25,438 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:53:25,441 | DEBUG | python_multipart.multipart | Calling on_header_field with data[413:427]
2025-11-06 19:53:25,447 | DEBUG | python_multipart.multipart | Calling on_header_value with data[429:435]
2025-11-06 19:53:25,449 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:53:25,452 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 19:53:25,455 | DEBUG | python_multipart.multipart | Calling on_part_data with data[439:2920]
2025-11-06 19:53:25,459 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 19:53:25,716 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:53:25,718 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:53:25,721 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:53:25,723 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:53:25,962 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:53:25,963 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:53:25,965 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:53:25,967 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:53:25,969 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:53:26,125 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:53:26,127 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1459]
2025-11-06 19:53:26,131 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1]
2025-11-06 19:53:26,132 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:53:26,135 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:53:26,303 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:53:26,306 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:53:26,307 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:53:26,476 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:53:26,478 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:53:26,480 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:53:26,482 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:53:26,633 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:53:26,637 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:53:26,639 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:53:26,642 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:53:26,856 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:53:26,859 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:53:26,861 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:53:26,863 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:53:27,040 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:53:27,042 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:53:27,043 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:53:27,046 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:53:27,049 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:53:27,202 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:53:27,205 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:53:27,208 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:53:27,210 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:53:27,368 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:53:27,371 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:53:27,372 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:53:27,374 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:53:27,377 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:53:27,544 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:53:27,547 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:53:27,548 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:53:27,550 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:53:27,696 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:53:27,697 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:53:27,698 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:53:27,700 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:53:27,849 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:53:27,851 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:53:27,852 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:53:27,854 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:53:28,017 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:53:28,019 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:53:28,021 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:53:28,023 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:53:28,187 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:53:28,189 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:53:28,191 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:53:28,193 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:53:28,196 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:53:28,355 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:53:28,360 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:53:28,363 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1667]
2025-11-06 19:53:28,364 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 19:53:28,365 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-06 19:53:28,503 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:53:28,505 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 19:53:28,506 | INFO | sqlalchemy.engine.Engine | [cached since 2918s ago] ()
2025-11-06 19:53:28,512 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 19:53:28,513 | INFO | sqlalchemy.engine.Engine | [cached since 2838s ago] (1,)
2025-11-06 19:53:28,598 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 19:53:28,599 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A4476CB10>}) about to wait for the following futures []
2025-11-06 19:53:28,600 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A4476CB10>}) done waiting for dependent futures
2025-11-06 19:53:28,600 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A4476CB10>}) with kwargs {'client': <botocore.client.S3 object at 0x0000023A43DA09D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x0000023A446B17D0>, 'osutil': <s3transfer.utils.OSUtils object at 0x0000023A44721450>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x0000023A44776410>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A4476CB10>}
2025-11-06 19:53:28,601 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/c59704f0994446fa9274621af23d6d92.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x0000023A44776410> for transfer request: 0.
2025-11-06 19:53:28,601 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 19:53:28,602 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/c59704f0994446fa9274621af23d6d92.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-06 19:53:28,602 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 19:53:28,603 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/c59704f0994446fa9274621af23d6d92.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-06 19:53:28,604 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/c59704f0994446fa9274621af23d6d92.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x0000023A43DA09D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x0000023A4478B290>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/c59704f0994446fa9274621af23d6d92.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-06 19:53:29,321 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 19:53:49,613 | INFO | app.controllers.audio | Transcripción recibida session=f019741c-b9d5-49d6-af38-20bfc9731a39: Alfa Noviembre India autorizador. a despegar pista 10 notificamos pasando 5000 pies.
2025-11-06 19:53:49,614 | INFO | app.logs.transcript | student | session=f019741c-b9d5-49d6-af38-20bfc9731a39 | frequency=118.30 | text=Alfa Noviembre India autorizador. a despegar pista 10 notificamos pasando 5000 pies.
2025-11-06 19:53:49,764 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:53:49,767 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 19:53:49,768 | INFO | sqlalchemy.engine.Engine | [cached since 498.5s ago] (UUID('f019741c-b9d5-49d6-af38-20bfc9731a39'),)
2025-11-06 19:53:49,786 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 19:53:50,241 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:53:50,241 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 19:53:50,243 | INFO | sqlalchemy.engine.Engine | [cached since 499s ago] (UUID('f019741c-b9d5-49d6-af38-20bfc9731a39'),)
2025-11-06 19:53:50,257 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 19:53:50,259 | INFO | sqlalchemy.engine.Engine | [cached since 498.3s ago] ('{"meteo": {"qnh": "983", "vis": "3km", "wind": "040/4", "condition": "IMC", "windSpeed": "4", "windDirection": "040"}, "route": "MRPV-MRPV", "turns": ... (12971 characters truncated) ... "frequencies": {"tower": "118.3", "ground": "121.7"}, "scenario_id": "mrpv_vfr_departure", "transponder": "0529", "default_frequency_group": "tower"}', datetime.datetime(2025, 11, 7, 1, 53, 50, 257713), UUID('e6c2a414-f586-4167-9f75-f95bf1873a88'))
2025-11-06 19:53:50,271 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 19:53:50,299 | INFO | app.controllers.audio | Fase activa session=f019741c-b9d5-49d6-af38-20bfc9731a39 phase_id=tower_ready intent=tower_takeoff_clearance freq=tower
2025-11-06 19:53:50,301 | INFO | app.services.audio_pipeline | Prompts generados intent=tower_takeoff_clearance freq_group=tower
SYSTEM> Eres Pavas Torre en 118.3. Evalúas cuando la aeronave está lista en punto de espera y emites instrucciones de despegue. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "metadata": object
 }.
Si necesitas proponer un cambio de fase, incluye en metadata la clave "nextPhase". No escribas texto adicional antes o después del JSON.
USER> Fase actual: Contacto torre y autorización de despegue
Intent esperado: tower_takeoff_clearance
Transcripción textual del alumno:
Alfa Noviembre India autorizador. a despegar pista 10 notificamos pasando 5000 pies.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: tower
- Fase ID: tower_ready

Checklist alumno:
- Cambiar destinatario a Pavas Torre.
- Avisar estar en punto de espera pista 10 y listo.
- Mantener identificador y fraseología correctos.

Checklist controlador:
- Gesti...
2025-11-06 19:53:50,958 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=tower_takeoff_clearance: {
  "intent": "tower_takeoff_clearance",
  "allowResponse": true,
  "controllerText": "Alfa Noviembre India, Pavas Torre. Despegue autorizado, mantenga rumbo de pista, informe pasando 5000 pies.",
  "feedback": "Llamada correcta.",
  "confidence": 1,
  "metadata": {}
}
2025-11-06 19:53:51,116 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:53:51,117 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 19:53:51,118 | INFO | sqlalchemy.engine.Engine | [cached since 499.9s ago] (UUID('f019741c-b9d5-49d6-af38-20bfc9731a39'),)
2025-11-06 19:53:51,136 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 19:53:51,137 | INFO | sqlalchemy.engine.Engine | [cached since 499.2s ago] ('{"meteo": {"qnh": "983", "vis": "3km", "wind": "040/4", "condition": "IMC", "windSpeed": "4", "windDirection": "040"}, "route": "MRPV-MRPV", "turns": ... (13712 characters truncated) ... "frequencies": {"tower": "118.3", "ground": "121.7"}, "scenario_id": "mrpv_vfr_departure", "transponder": "0529", "default_frequency_group": "tower"}', datetime.datetime(2025, 11, 7, 1, 53, 51, 136670), UUID('e6c2a414-f586-4167-9f75-f95bf1873a88'))
2025-11-06 19:53:51,155 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 19:53:51,169 | INFO | app.logs.transcript | controller | session=f019741c-b9d5-49d6-af38-20bfc9731a39 | frequency=118.30 | intent=tower_takeoff_clearance | phase=tower_ready | allow_response=True | text=Alfa Noviembre India, Pavas Torre. Despegue autorizado, mantenga rumbo de pista, informe pasando 5000 pies.
2025-11-06 19:53:52,666 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 19:55:20,153 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 19:55:20,154 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-06 19:55:20,155 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-06 19:55:20,156 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:55:20,157 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-06 19:55:20,157 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-06 19:55:20,158 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:55:20,159 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 19:55:20,159 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-06 19:55:20,160 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 19:55:20,161 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 19:55:20,162 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-06 19:55:20,164 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-06 19:55:20,165 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:55:20,166 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-06 19:55:20,166 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-06 19:55:20,167 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:55:20,168 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 19:55:20,169 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:268]
2025-11-06 19:55:20,169 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 19:55:20,170 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 19:55:20,172 | DEBUG | python_multipart.multipart | Calling on_header_field with data[310:329]
2025-11-06 19:55:20,173 | DEBUG | python_multipart.multipart | Calling on_header_value with data[331:385]
2025-11-06 19:55:20,175 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:55:20,175 | DEBUG | python_multipart.multipart | Calling on_header_field with data[387:399]
2025-11-06 19:55:20,176 | DEBUG | python_multipart.multipart | Calling on_header_value with data[401:411]
2025-11-06 19:55:20,176 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:55:20,177 | DEBUG | python_multipart.multipart | Calling on_header_field with data[413:427]
2025-11-06 19:55:20,178 | DEBUG | python_multipart.multipart | Calling on_header_value with data[429:434]
2025-11-06 19:55:20,179 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 19:55:20,180 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 19:55:20,180 | DEBUG | python_multipart.multipart | Calling on_part_data with data[438:4380]
2025-11-06 19:55:20,183 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:55:20,185 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:55:20,326 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:55:20,327 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:55:20,330 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:55:20,331 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:55:20,490 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:55:20,491 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:55:20,494 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:55:20,496 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:55:20,646 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:55:20,649 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:55:20,652 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:55:20,654 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:55:20,656 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:55:20,850 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:55:20,854 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:55:20,855 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:55:20,858 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:55:21,073 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:55:21,076 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:55:21,078 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 19:55:21,296 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 19:55:21,302 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:55:21,303 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:55:21,452 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:55:21,453 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:55:21,456 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:55:21,457 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:55:21,638 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:55:21,642 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:55:21,645 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:55:21,648 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:55:21,649 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:55:21,833 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:55:21,834 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:55:21,839 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:55:21,841 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 19:55:22,012 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:55:22,014 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:55:22,015 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 19:55:22,017 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 19:55:22,094 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 19:55:22,096 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2126]
2025-11-06 19:55:22,097 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 19:55:22,098 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-06 19:55:22,238 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:55:22,240 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 19:55:22,241 | INFO | sqlalchemy.engine.Engine | [cached since 3032s ago] ()
2025-11-06 19:55:22,248 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 19:55:22,250 | INFO | sqlalchemy.engine.Engine | [cached since 2951s ago] (1,)
2025-11-06 19:55:22,340 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 19:55:22,343 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A447A8C50>}) about to wait for the following futures []
2025-11-06 19:55:22,343 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A447A8C50>}) done waiting for dependent futures
2025-11-06 19:55:22,345 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A447A8C50>}) with kwargs {'client': <botocore.client.S3 object at 0x0000023A43DA09D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x0000023A447379D0>, 'osutil': <s3transfer.utils.OSUtils object at 0x0000023A44735FD0>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x0000023A447A9210>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A447A8C50>}
2025-11-06 19:55:22,346 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/02ea840f9245428ab72502c66d397d71.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x0000023A447A9210> for transfer request: 0.
2025-11-06 19:55:22,348 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 19:55:22,350 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/02ea840f9245428ab72502c66d397d71.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-06 19:55:22,350 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 19:55:22,351 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/02ea840f9245428ab72502c66d397d71.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-06 19:55:22,352 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/02ea840f9245428ab72502c66d397d71.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x0000023A43DA09D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x0000023A447A9A50>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/f019741c-b9d5-49d6-af38-20bfc9731a39/02ea840f9245428ab72502c66d397d71.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-06 19:55:22,912 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 19:55:41,066 | INFO | app.controllers.audio | Transcripción recibida session=f019741c-b9d5-49d6-af38-20bfc9731a39: Power Story Alfa Noviembre India, pasando a 5000 pies rumbo a Oomogo.
2025-11-06 19:55:41,066 | INFO | app.logs.transcript | student | session=f019741c-b9d5-49d6-af38-20bfc9731a39 | frequency=118.30 | text=Power Story Alfa Noviembre India, pasando a 5000 pies rumbo a Oomogo.
2025-11-06 19:55:41,219 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:55:41,220 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 19:55:41,222 | INFO | sqlalchemy.engine.Engine | [cached since 610s ago] (UUID('f019741c-b9d5-49d6-af38-20bfc9731a39'),)
2025-11-06 19:55:41,238 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 19:55:41,715 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:55:41,716 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 19:55:41,717 | INFO | sqlalchemy.engine.Engine | [cached since 610.5s ago] (UUID('f019741c-b9d5-49d6-af38-20bfc9731a39'),)
2025-11-06 19:55:41,732 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 19:55:41,734 | INFO | sqlalchemy.engine.Engine | [cached since 609.8s ago] ('{"meteo": {"qnh": "983", "vis": "3km", "wind": "040/4", "condition": "IMC", "windSpeed": "4", "windDirection": "040"}, "route": "MRPV-MRPV", "turns": ... (14106 characters truncated) ... "frequencies": {"tower": "118.3", "ground": "121.7"}, "scenario_id": "mrpv_vfr_departure", "transponder": "0529", "default_frequency_group": "tower"}', datetime.datetime(2025, 11, 7, 1, 55, 41, 732117), UUID('e6c2a414-f586-4167-9f75-f95bf1873a88'))
2025-11-06 19:55:41,749 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 19:55:41,782 | INFO | app.controllers.audio | Intent detector frequency mismatch session=f019741c-b9d5-49d6-af38-20bfc9731a39 detected=ground scenario=tower
2025-11-06 19:55:41,783 | INFO | app.controllers.audio | Fase activa session=f019741c-b9d5-49d6-af38-20bfc9731a39 phase_id=tower_ready intent=ground_climb_clearance freq=tower
2025-11-06 19:55:41,786 | INFO | app.services.audio_pipeline | Prompts generados intent=ground_climb_clearance freq_group=tower
SYSTEM> Eres Pavas Torre en 118.3. Evalúas cuando la aeronave está lista en punto de espera y emites instrucciones de despegue. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "metadata": object
 }.
Si necesitas proponer un cambio de fase, incluye en metadata la clave "nextPhase". No escribas texto adicional antes o después del JSON.
USER> Fase actual: Contacto torre y autorización de despegue
Intent esperado: ground_climb_clearance
Transcripción textual del alumno:
Power Story Alfa Noviembre India, pasando a 5000 pies rumbo a Oomogo.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: tower
- Fase ID: tower_ready

Checklist alumno:
- Cambiar destinatario a Pavas Torre.
- Avisar estar en punto de espera pista 10 y listo.
- Mantener identificador y fraseología correctos.

Checklist controlador:
- Gestionar secuencia: ...
2025-11-06 19:55:42,485 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=ground_climb_clearance: {
  "intent": "tower_takeoff_clearance",
  "allowResponse": true,
  "controllerText": "Alfa Noviembre India, Pavas Torre. Despegue autorizado, mantenga rumbo de pista, informe pasando 5000 pies.",
  "feedback": "Llamada correcta.",
  "confidence": 1,
  "metadata": {
    "nextPhase": null
  }
}
2025-11-06 19:55:42,486 | INFO | app.services.audio_pipeline | Intent devuelto por el LLM (tower_takeoff_clearance) difiere del esperado (ground_climb_clearance)
2025-11-06 19:55:42,653 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 19:55:42,654 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 19:55:42,655 | INFO | sqlalchemy.engine.Engine | [cached since 611.4s ago] (UUID('f019741c-b9d5-49d6-af38-20bfc9731a39'),)
2025-11-06 19:55:42,674 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 19:55:42,675 | INFO | sqlalchemy.engine.Engine | [cached since 610.7s ago] ('{"meteo": {"qnh": "983", "vis": "3km", "wind": "040/4", "condition": "IMC", "windSpeed": "4", "windDirection": "040"}, "route": "MRPV-MRPV", "turns": ... (14945 characters truncated) ... "frequencies": {"tower": "118.3", "ground": "121.7"}, "scenario_id": "mrpv_vfr_departure", "transponder": "0529", "default_frequency_group": "tower"}', datetime.datetime(2025, 11, 7, 1, 55, 42, 674322), UUID('e6c2a414-f586-4167-9f75-f95bf1873a88'))
2025-11-06 19:55:42,691 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 19:55:42,712 | INFO | app.logs.transcript | controller | session=f019741c-b9d5-49d6-af38-20bfc9731a39 | frequency=118.30 | intent=tower_takeoff_clearance | phase=tower_ready | allow_response=True | text=Alfa Noviembre India, Pavas Torre. Despegue autorizado, mantenga rumbo de pista, informe pasando 5000 pies.
2025-11-06 19:55:43,858 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 20:12:07,922 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:12:07,924 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 20:12:07,924 | INFO | sqlalchemy.engine.Engine | [cached since 4037s ago] ()
2025-11-06 20:12:07,932 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.email = $1::VARCHAR
2025-11-06 20:12:07,935 | INFO | sqlalchemy.engine.Engine | [cached since 3960s ago] ('josuelu3@gmail.com',)
2025-11-06 20:12:08,120 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 20:12:16,468 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:12:16,470 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 20:12:16,475 | INFO | sqlalchemy.engine.Engine | [cached since 4046s ago] ()
2025-11-06 20:12:16,490 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 20:12:16,493 | INFO | sqlalchemy.engine.Engine | [cached since 3966s ago] (1,)
2025-11-06 20:12:16,972 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 20:12:16,975 | INFO | sqlalchemy.engine.Engine | [cached since 3966s ago] (1,)
2025-11-06 20:12:16,980 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 20:12:49,289 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:12:49,290 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 20:12:49,291 | INFO | sqlalchemy.engine.Engine | [cached since 4079s ago] ()
2025-11-06 20:12:49,301 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 20:12:49,303 | INFO | sqlalchemy.engine.Engine | [cached since 3998s ago] (1,)
2025-11-06 20:12:49,432 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.training_contexts (id, training_session_id, user_id, context) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::JSONB) RETURNING ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at
2025-11-06 20:12:49,433 | INFO | sqlalchemy.engine.Engine | [cached since 3355s ago] (UUID('fce417c6-61a9-46ac-9057-ad2824f47c38'), UUID('c9e9e7e3-8f9a-4458-b7b9-e79339054b8b'), 1, '{"route": "MRPV-MRPV", "meteo": {"condition": "VMC", "vis": "3km", "qnh": "982", "windDirection": "030", "windSpeed": "4", "wind": "030/4"}, "scenario_id": ["mrpv_full_flight"]}')
2025-11-06 20:12:49,442 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 20:12:49,652 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:12:49,661 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.id = $1::UUID
2025-11-06 20:12:49,671 | INFO | sqlalchemy.engine.Engine | [cached since 3355s ago] (UUID('fce417c6-61a9-46ac-9057-ad2824f47c38'),)
2025-11-06 20:12:49,698 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 20:14:19,952 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 20:14:19,954 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-06 20:14:19,955 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-06 20:14:19,955 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:14:19,956 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-06 20:14:19,957 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-06 20:14:19,958 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:14:19,959 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 20:14:19,961 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-06 20:14:19,962 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 20:14:19,963 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 20:14:19,965 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-06 20:14:19,966 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-06 20:14:19,967 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:14:19,972 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-06 20:14:19,973 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-06 20:14:19,975 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:14:19,976 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 20:14:19,979 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:268]
2025-11-06 20:14:19,982 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 20:14:19,984 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 20:14:19,985 | DEBUG | python_multipart.multipart | Calling on_header_field with data[310:329]
2025-11-06 20:14:19,987 | DEBUG | python_multipart.multipart | Calling on_header_value with data[331:385]
2025-11-06 20:14:19,988 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:14:19,991 | DEBUG | python_multipart.multipart | Calling on_header_field with data[387:399]
2025-11-06 20:14:19,992 | DEBUG | python_multipart.multipart | Calling on_header_value with data[401:411]
2025-11-06 20:14:19,993 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:14:19,996 | DEBUG | python_multipart.multipart | Calling on_header_field with data[413:427]
2025-11-06 20:14:19,997 | DEBUG | python_multipart.multipart | Calling on_header_value with data[429:435]
2025-11-06 20:14:19,998 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:14:20,000 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 20:14:20,002 | DEBUG | python_multipart.multipart | Calling on_part_data with data[439:4380]
2025-11-06 20:14:20,006 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:14:20,190 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:14:20,195 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:14:20,197 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:14:20,199 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:14:20,384 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:14:20,386 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:14:20,387 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:14:20,388 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:14:20,609 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:14:20,614 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:14:20,616 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:14:20,838 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:14:20,839 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:14:20,844 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:14:20,847 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:14:21,046 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:14:21,047 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:14:21,049 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:14:21,051 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:14:21,052 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:14:21,283 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:14:21,285 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:14:21,288 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:14:21,291 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 20:14:21,495 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:14:21,498 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:14:21,500 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:14:21,504 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:14:21,739 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:14:21,742 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:14:21,744 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:14:21,922 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:14:21,925 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:14:21,928 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:14:22,104 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:14:22,106 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:14:22,108 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 20:14:22,285 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:14:22,289 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:14:22,291 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:14:22,295 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 20:14:22,505 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:14:22,507 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:14:22,509 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:14:22,511 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 20:14:22,717 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:14:22,719 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:14:22,723 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:14:22,725 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:14:22,728 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:14:22,887 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:14:22,891 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:14:22,893 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 20:14:23,050 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:14:23,051 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:14:23,052 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:14:23,054 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:14:23,246 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:14:23,249 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:14:23,251 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:14:23,252 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:14:23,254 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 20:14:23,447 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:14:23,448 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:14:23,451 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:14:23,668 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:14:23,669 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:14:23,672 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:14:23,906 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:14:23,907 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:14:23,910 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:14:23,911 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 20:14:24,132 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:14:24,135 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:14:24,137 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:14:24,317 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:14:24,320 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:14:24,322 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:14:24,324 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:14:24,504 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:14:24,506 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:14:24,508 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:14:24,791 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:14:24,797 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:14:24,803 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:14:24,914 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:14:24,917 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:472]
2025-11-06 20:14:24,918 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 20:14:24,919 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-06 20:14:25,092 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:14:25,094 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 20:14:25,096 | INFO | sqlalchemy.engine.Engine | [cached since 4174s ago] ()
2025-11-06 20:14:25,105 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 20:14:25,106 | INFO | sqlalchemy.engine.Engine | [cached since 4094s ago] (1,)
2025-11-06 20:14:25,225 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 20:14:25,228 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A44795FD0>}) about to wait for the following futures []
2025-11-06 20:14:25,230 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A44795FD0>}) done waiting for dependent futures
2025-11-06 20:14:25,231 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A44795FD0>}) with kwargs {'client': <botocore.client.S3 object at 0x0000023A43DA09D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x0000023A44721390>, 'osutil': <s3transfer.utils.OSUtils object at 0x0000023A44720A10>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x0000023A447B3ED0>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A44795FD0>}
2025-11-06 20:14:25,233 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/c9e9e7e3-8f9a-4458-b7b9-e79339054b8b/b7655b5528814a8e852caec97a6ea78e.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x0000023A447B3ED0> for transfer request: 0.
2025-11-06 20:14:25,234 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 20:14:25,237 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/c9e9e7e3-8f9a-4458-b7b9-e79339054b8b/b7655b5528814a8e852caec97a6ea78e.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-06 20:14:25,237 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 20:14:25,238 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/c9e9e7e3-8f9a-4458-b7b9-e79339054b8b/b7655b5528814a8e852caec97a6ea78e.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-06 20:14:25,240 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/c9e9e7e3-8f9a-4458-b7b9-e79339054b8b/b7655b5528814a8e852caec97a6ea78e.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x0000023A43DA09D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x0000023A44795390>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/c9e9e7e3-8f9a-4458-b7b9-e79339054b8b/b7655b5528814a8e852caec97a6ea78e.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-06 20:14:25,992 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 20:14:35,731 | INFO | app.controllers.audio | Transcripción recibida session=c9e9e7e3-8f9a-4458-b7b9-e79339054b8b: pa superficie Alfa Noviembre India en hangar 37 Solicitamos abrir plan de vuelo hacia zona Eco Vía Paso Chomogo 7000 pies dos almas a bordo. Capitán José Solano Autonomía cinco horas y media.
2025-11-06 20:14:35,731 | INFO | app.logs.transcript | student | session=c9e9e7e3-8f9a-4458-b7b9-e79339054b8b | frequency=121.70 | text=pa superficie Alfa Noviembre India en hangar 37 Solicitamos abrir plan de vuelo hacia zona Eco Vía Paso Chomogo 7000 pies dos almas a bordo. Capitán José Solano Autonomía cinco horas y media.
2025-11-06 20:14:36,395 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:14:36,397 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 20:14:36,399 | INFO | sqlalchemy.engine.Engine | [cached since 1745s ago] (UUID('c9e9e7e3-8f9a-4458-b7b9-e79339054b8b'),)
2025-11-06 20:14:36,434 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 20:14:36,454 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 20:15:17,467 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 20:15:17,468 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-06 20:15:17,469 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-06 20:15:17,470 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:15:17,471 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-06 20:15:17,471 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-06 20:15:17,472 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:15:17,475 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 20:15:17,475 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-06 20:15:17,477 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 20:15:17,478 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 20:15:17,479 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-06 20:15:17,480 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-06 20:15:17,481 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:15:17,482 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-06 20:15:17,483 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-06 20:15:17,485 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:15:17,486 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 20:15:17,488 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:268]
2025-11-06 20:15:17,489 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 20:15:17,490 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 20:15:17,492 | DEBUG | python_multipart.multipart | Calling on_header_field with data[310:329]
2025-11-06 20:15:17,493 | DEBUG | python_multipart.multipart | Calling on_header_value with data[331:385]
2025-11-06 20:15:17,493 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:15:17,494 | DEBUG | python_multipart.multipart | Calling on_header_field with data[387:399]
2025-11-06 20:15:17,494 | DEBUG | python_multipart.multipart | Calling on_header_value with data[401:411]
2025-11-06 20:15:17,497 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:15:17,498 | DEBUG | python_multipart.multipart | Calling on_header_field with data[413:427]
2025-11-06 20:15:17,499 | DEBUG | python_multipart.multipart | Calling on_header_value with data[429:435]
2025-11-06 20:15:17,499 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:15:17,500 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 20:15:17,501 | DEBUG | python_multipart.multipart | Calling on_part_data with data[439:1460]
2025-11-06 20:15:17,504 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:6732]
2025-11-06 20:15:17,700 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:15:17,703 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:17,705 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:17,708 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:15:17,947 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:15:17,950 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:17,953 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:17,955 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 20:15:18,196 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:15:18,198 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:18,201 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:18,204 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 20:15:18,416 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:18,417 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:18,418 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:18,422 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:15:18,424 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:15:18,611 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:15:18,613 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:18,615 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:15:18,830 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:18,831 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:18,833 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:18,836 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:18,838 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:18,840 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:15:19,015 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:19,017 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:19,018 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:19,020 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:19,022 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 20:15:19,224 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:19,226 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:19,228 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:19,234 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:15:19,236 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:15:19,480 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:15:19,481 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:19,484 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:15:19,684 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:15:19,685 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:19,687 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:15:19,851 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:15:19,854 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:19,855 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:15:19,856 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:15:20,016 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:15:20,019 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:20,022 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:15:20,024 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:15:20,200 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:15:20,203 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:20,204 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:20,205 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:20,209 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:15:20,381 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:20,382 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:15:20,384 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:15:20,385 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:15:20,534 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:15:20,537 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:20,540 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:15:20,731 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:20,733 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:15:20,736 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:15:20,915 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:20,917 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:15:20,919 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:20,920 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:20,925 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:15:21,115 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:15:21,116 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:21,119 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:15:21,121 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:15:21,285 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:21,287 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:21,289 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:21,291 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:15:21,293 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:15:21,461 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:15:21,462 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:15:21,463 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:15:21,625 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:15:21,626 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:21,628 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:21,631 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 20:15:21,805 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:15:21,807 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:21,808 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:21,811 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:21,815 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:15:22,022 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:15:22,025 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:22,027 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:22,030 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:22,033 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:15:22,098 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:15:22,100 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:472]
2025-11-06 20:15:22,101 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 20:15:22,101 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-06 20:15:22,238 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:15:22,239 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 20:15:22,241 | INFO | sqlalchemy.engine.Engine | [cached since 4232s ago] ()
2025-11-06 20:15:22,248 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 20:15:22,251 | INFO | sqlalchemy.engine.Engine | [cached since 4151s ago] (1,)
2025-11-06 20:15:22,347 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 20:15:22,349 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A478EF050>}) about to wait for the following futures []
2025-11-06 20:15:22,350 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A478EF050>}) done waiting for dependent futures
2025-11-06 20:15:22,352 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A478EF050>}) with kwargs {'client': <botocore.client.S3 object at 0x0000023A43DA09D0>, 'config': <boto3.s3.transfer.TransferConfig object at 0x0000023A478CF990>, 'osutil': <s3transfer.utils.OSUtils object at 0x0000023A478EE290>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x0000023A478ECD50>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023A478EF050>}
2025-11-06 20:15:22,354 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/c9e9e7e3-8f9a-4458-b7b9-e79339054b8b/cf28635241f347d89cd28e380ed40b47.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x0000023A478ECD50> for transfer request: 0.
2025-11-06 20:15:22,357 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 20:15:22,361 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/c9e9e7e3-8f9a-4458-b7b9-e79339054b8b/cf28635241f347d89cd28e380ed40b47.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-06 20:15:22,362 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 20:15:22,363 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/c9e9e7e3-8f9a-4458-b7b9-e79339054b8b/cf28635241f347d89cd28e380ed40b47.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-06 20:15:22,366 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/c9e9e7e3-8f9a-4458-b7b9-e79339054b8b/cf28635241f347d89cd28e380ed40b47.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x0000023A43DA09D0>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x0000023A478EF650>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/c9e9e7e3-8f9a-4458-b7b9-e79339054b8b/cf28635241f347d89cd28e380ed40b47.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-06 20:15:23,021 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 20:15:34,790 | INFO | app.controllers.audio | Transcripción recibida session=c9e9e7e3-8f9a-4458-b7b9-e79339054b8b: pa superficie Alfa Noviembre India en hangar 37 Solicitamos abrir plan de vuelo hacia zona Eco Vía Paso Chomogo 7000 pies dos almas a bordo. Capitán José Solano Autonomía cinco horas y media.
2025-11-06 20:15:34,790 | INFO | app.logs.transcript | student | session=c9e9e7e3-8f9a-4458-b7b9-e79339054b8b | frequency=121.70 | text=pa superficie Alfa Noviembre India en hangar 37 Solicitamos abrir plan de vuelo hacia zona Eco Vía Paso Chomogo 7000 pies dos almas a bordo. Capitán José Solano Autonomía cinco horas y media.
2025-11-06 20:15:34,970 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:15:34,973 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 20:15:34,974 | INFO | sqlalchemy.engine.Engine | [cached since 1804s ago] (UUID('c9e9e7e3-8f9a-4458-b7b9-e79339054b8b'),)
2025-11-06 20:15:34,991 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 20:15:35,002 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 20:17:12,686 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-06 20:17:12,687 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-06 20:17:12,696 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-06 20:17:12,697 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-06 20:17:12,703 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-06 20:17:12,705 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-06 20:17:12,712 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:17:12,713 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-06 20:17:12,715 | INFO | sqlalchemy.engine.Engine | [generated in 0.00148s] ()
2025-11-06 20:17:12,722 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 20:17:12,722 | INFO | sqlalchemy.engine.Engine | [generated in 0.00130s] ()
2025-11-06 20:17:12,734 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 20:17:12,737 | INFO | sqlalchemy.engine.Engine | [generated in 0.00291s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 20:17:12,765 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 20:17:12,766 | INFO | sqlalchemy.engine.Engine | [cached since 0.03202s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 20:17:12,769 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 20:17:12,771 | INFO | sqlalchemy.engine.Engine | [cached since 0.03664s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 20:17:12,775 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 20:17:12,776 | INFO | sqlalchemy.engine.Engine | [cached since 0.04244s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 20:17:12,782 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 20:17:12,783 | INFO | sqlalchemy.engine.Engine | [cached since 0.04924s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 20:17:12,793 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-06 20:17:12,796 | INFO | sqlalchemy.engine.Engine | [generated in 0.00290s] ('user_status', 'pg_catalog')
2025-11-06 20:17:12,803 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-06 20:17:12,807 | INFO | sqlalchemy.engine.Engine | [cached since 0.01481s ago] ('account_type', 'pg_catalog')
2025-11-06 20:17:12,815 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-06 20:17:12,816 | INFO | sqlalchemy.engine.Engine | [generated in 0.00172s] ()
2025-11-06 20:17:12,827 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-06 20:17:12,830 | INFO | sqlalchemy.engine.Engine | [generated in 0.00203s] ()
2025-11-06 20:17:12,870 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-06 20:17:12,872 | INFO | sqlalchemy.engine.Engine | [generated in 0.00329s] ()
2025-11-06 20:17:12,966 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 20:17:13,017 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-06 20:23:23,767 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:23:23,768 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 20:23:23,771 | INFO | sqlalchemy.engine.Engine | [cached since 371s ago] ()
2025-11-06 20:23:23,810 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.email = $1::VARCHAR
2025-11-06 20:23:23,810 | INFO | sqlalchemy.engine.Engine | [generated in 0.00133s] ('josuelu3@gmail.com',)
2025-11-06 20:23:23,980 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 20:23:26,891 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:23:26,893 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 20:23:26,895 | INFO | sqlalchemy.engine.Engine | [cached since 374.2s ago] ()
2025-11-06 20:23:26,910 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 20:23:26,915 | INFO | sqlalchemy.engine.Engine | [generated in 0.00672s] (1,)
2025-11-06 20:23:27,083 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 20:23:27,084 | INFO | sqlalchemy.engine.Engine | [cached since 0.1747s ago] (1,)
2025-11-06 20:23:27,088 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 20:25:29,241 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:25:29,242 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 20:25:29,242 | INFO | sqlalchemy.engine.Engine | [cached since 496.5s ago] ()
2025-11-06 20:25:29,250 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.email = $1::VARCHAR
2025-11-06 20:25:29,251 | INFO | sqlalchemy.engine.Engine | [cached since 125.4s ago] ('josuelu3@gmail.com',)
2025-11-06 20:25:29,396 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 20:25:31,571 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:25:31,572 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 20:25:31,572 | INFO | sqlalchemy.engine.Engine | [cached since 498.9s ago] ()
2025-11-06 20:25:31,580 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 20:25:31,581 | INFO | sqlalchemy.engine.Engine | [cached since 124.7s ago] (1,)
2025-11-06 20:25:31,674 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 20:25:31,676 | INFO | sqlalchemy.engine.Engine | [cached since 124.8s ago] (1,)
2025-11-06 20:25:31,679 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 20:26:03,752 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:26:03,753 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 20:26:03,755 | INFO | sqlalchemy.engine.Engine | [cached since 531s ago] ()
2025-11-06 20:26:03,765 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 20:26:03,767 | INFO | sqlalchemy.engine.Engine | [cached since 156.9s ago] (1,)
2025-11-06 20:26:03,857 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.training_contexts (id, training_session_id, user_id, context) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::JSONB) RETURNING ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at
2025-11-06 20:26:03,858 | INFO | sqlalchemy.engine.Engine | [generated in 0.00118s] (UUID('11ff337c-ca03-4095-bc21-0f6988938cab'), UUID('99ef0bd8-3b50-478a-a563-e2c75d340830'), 1, '{"route": "MRPV-MRPV", "meteo": {"condition": "IMC", "vis": "5km", "qnh": "982", "windDirection": "040", "windSpeed": "4", "wind": "040/4"}, "scenario_id": ["mrpv_full_flight"]}')
2025-11-06 20:26:03,868 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 20:26:04,055 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:26:04,057 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.id = $1::UUID
2025-11-06 20:26:04,059 | INFO | sqlalchemy.engine.Engine | [generated in 0.00130s] (UUID('11ff337c-ca03-4095-bc21-0f6988938cab'),)
2025-11-06 20:26:04,070 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 20:26:36,821 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 20:26:36,835 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-06 20:26:36,847 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-06 20:26:36,853 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:26:36,866 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-06 20:26:36,868 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-06 20:26:36,869 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:26:36,880 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 20:26:36,884 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-06 20:26:36,897 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 20:26:36,900 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 20:26:36,907 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-06 20:26:36,913 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-06 20:26:36,915 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:26:36,918 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-06 20:26:36,922 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-06 20:26:36,931 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:26:36,933 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 20:26:36,950 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:268]
2025-11-06 20:26:36,961 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 20:26:36,965 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 20:26:36,968 | DEBUG | python_multipart.multipart | Calling on_header_field with data[310:329]
2025-11-06 20:26:36,978 | DEBUG | python_multipart.multipart | Calling on_header_value with data[331:385]
2025-11-06 20:26:36,984 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:26:36,986 | DEBUG | python_multipart.multipart | Calling on_header_field with data[387:399]
2025-11-06 20:26:37,000 | DEBUG | python_multipart.multipart | Calling on_header_value with data[401:411]
2025-11-06 20:26:37,012 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:26:37,017 | DEBUG | python_multipart.multipart | Calling on_header_field with data[413:427]
2025-11-06 20:26:37,025 | DEBUG | python_multipart.multipart | Calling on_header_value with data[429:435]
2025-11-06 20:26:37,033 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:26:37,036 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 20:26:37,046 | DEBUG | python_multipart.multipart | Calling on_part_data with data[439:5840]
2025-11-06 20:26:37,050 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 20:26:37,053 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:8192]
2025-11-06 20:26:37,223 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:26:37,226 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:26:37,231 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 20:26:37,475 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:26:37,478 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:26:37,481 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:26:37,484 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:26:37,661 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:26:37,665 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:26:37,668 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:26:37,796 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:26:37,798 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:26:37,799 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:26:37,944 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:26:37,946 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:26:37,948 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:26:38,090 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:26:38,093 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:26:38,095 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:26:38,232 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:26:38,234 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:26:38,236 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:26:38,356 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:26:38,359 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:26:38,361 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:26:38,490 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:26:38,492 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:26:38,494 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:26:38,496 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 20:26:38,624 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:26:38,626 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:26:38,630 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:26:38,632 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:26:38,773 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:26:38,776 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:26:38,779 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:26:38,780 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:26:38,912 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:26:38,915 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:26:38,916 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:26:39,039 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:26:39,042 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:26:39,046 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:26:39,050 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:26:39,172 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:26:39,175 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:26:39,178 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:26:39,183 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:26:39,316 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:26:39,319 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:26:39,322 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:26:39,476 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:26:39,479 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:26:39,481 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:26:39,613 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:26:39,616 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:26:39,620 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:26:39,737 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:26:39,741 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:26:39,870 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:26:39,872 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:26:39,877 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:26:39,881 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:26:40,012 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:26:40,014 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:26:40,016 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:26:40,145 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:26:40,147 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 20:26:40,272 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:26:40,275 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:26:40,276 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:26:40,278 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 20:26:40,395 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:26:40,398 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:26:40,399 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:26:40,518 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:26:40,519 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:26:40,521 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:26:40,667 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:26:40,670 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5840]
2025-11-06 20:26:40,672 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:26:40,749 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:26:40,752 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1627]
2025-11-06 20:26:40,755 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 20:26:40,761 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-06 20:26:40,984 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:26:40,985 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 20:26:40,986 | INFO | sqlalchemy.engine.Engine | [cached since 568.3s ago] ()
2025-11-06 20:26:40,996 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 20:26:40,998 | INFO | sqlalchemy.engine.Engine | [cached since 194.1s ago] (1,)
2025-11-06 20:26:41,099 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 20:26:41,101 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000026615EDF010>}) about to wait for the following futures []
2025-11-06 20:26:41,101 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000026615EDF010>}) done waiting for dependent futures
2025-11-06 20:26:41,102 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000026615EDF010>}) with kwargs {'client': <botocore.client.S3 object at 0x00000266155C1210>, 'config': <boto3.s3.transfer.TransferConfig object at 0x0000026615ED1E50>, 'osutil': <s3transfer.utils.OSUtils object at 0x0000026615ED1390>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x0000026615EE8750>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000026615EDF010>}
2025-11-06 20:26:41,102 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/99ef0bd8-3b50-478a-a563-e2c75d340830/bb89551336b446cba312343aee7796c0.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x0000026615EE8750> for transfer request: 0.
2025-11-06 20:26:41,103 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 20:26:41,107 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/99ef0bd8-3b50-478a-a563-e2c75d340830/bb89551336b446cba312343aee7796c0.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-06 20:26:41,107 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 20:26:41,109 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/99ef0bd8-3b50-478a-a563-e2c75d340830/bb89551336b446cba312343aee7796c0.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-06 20:26:41,112 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/99ef0bd8-3b50-478a-a563-e2c75d340830/bb89551336b446cba312343aee7796c0.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x00000266155C1210>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002661589D450>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/99ef0bd8-3b50-478a-a563-e2c75d340830/bb89551336b446cba312343aee7796c0.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-06 20:26:41,945 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 20:26:51,575 | INFO | app.controllers.audio | Transcripción recibida session=99ef0bd8-3b50-478a-a563-e2c75d340830: pa superficie Alfa Noviembre India en agar 37 Solicitamos abrir plan de vuelo hacia zona Eco Vía Paso Chomogo 7000 pies dos almas a bordo. Capitán José Solano Autonomía cinco horas y media.
2025-11-06 20:26:51,576 | INFO | app.logs.transcript | student | session=99ef0bd8-3b50-478a-a563-e2c75d340830 | frequency=118.00 | text=pa superficie Alfa Noviembre India en agar 37 Solicitamos abrir plan de vuelo hacia zona Eco Vía Paso Chomogo 7000 pies dos almas a bordo. Capitán José Solano Autonomía cinco horas y media.
2025-11-06 20:26:51,736 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:26:51,738 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 20:26:51,739 | INFO | sqlalchemy.engine.Engine | [generated in 0.00115s] (UUID('99ef0bd8-3b50-478a-a563-e2c75d340830'),)
2025-11-06 20:26:51,753 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 20:26:51,766 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 20:31:19,310 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 20:31:19,310 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-06 20:31:19,312 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-06 20:31:19,312 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:31:19,313 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-06 20:31:19,315 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-06 20:31:19,315 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:31:19,316 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 20:31:19,317 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-06 20:31:19,318 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 20:31:19,320 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 20:31:19,322 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-06 20:31:19,323 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-06 20:31:19,323 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:31:19,325 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-06 20:31:19,326 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-06 20:31:19,329 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:31:19,332 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 20:31:19,333 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:268]
2025-11-06 20:31:19,335 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 20:31:19,336 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 20:31:19,337 | DEBUG | python_multipart.multipart | Calling on_header_field with data[310:329]
2025-11-06 20:31:19,337 | DEBUG | python_multipart.multipart | Calling on_header_value with data[331:385]
2025-11-06 20:31:19,339 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:31:19,341 | DEBUG | python_multipart.multipart | Calling on_header_field with data[387:399]
2025-11-06 20:31:19,342 | DEBUG | python_multipart.multipart | Calling on_header_value with data[401:411]
2025-11-06 20:31:19,343 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:31:19,345 | DEBUG | python_multipart.multipart | Calling on_header_field with data[413:427]
2025-11-06 20:31:19,346 | DEBUG | python_multipart.multipart | Calling on_header_value with data[429:435]
2025-11-06 20:31:19,348 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:31:19,349 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 20:31:19,350 | DEBUG | python_multipart.multipart | Calling on_part_data with data[439:5840]
2025-11-06 20:31:19,353 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 20:31:19,443 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:31:19,444 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:31:19,563 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:31:19,564 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:31:19,567 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:31:19,681 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:31:19,682 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:31:19,815 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:31:19,817 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:31:19,819 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:31:19,941 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:31:19,944 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:31:19,947 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:31:20,090 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:31:20,093 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:6732]
2025-11-06 20:31:20,218 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:31:20,221 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:31:20,222 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:31:20,354 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:31:20,358 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:31:20,487 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:31:20,490 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:31:20,492 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:31:20,617 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:31:20,618 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:31:20,731 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:31:20,734 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:31:20,736 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:31:20,856 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:31:20,858 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:31:20,858 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:31:20,971 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:31:20,973 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:31:20,975 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:31:21,083 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:31:21,086 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1459]
2025-11-06 20:31:21,087 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1]
2025-11-06 20:31:21,088 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:31:21,201 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:31:21,202 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:31:21,205 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:31:21,315 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:31:21,317 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:31:21,428 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:31:21,430 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:31:21,431 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:31:21,432 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:31:21,545 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:31:21,547 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:31:21,550 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:31:21,665 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:31:21,668 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:31:21,670 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:31:21,808 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:31:21,812 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:6732]
2025-11-06 20:31:21,933 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:31:21,936 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:31:22,052 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:31:22,053 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:31:22,055 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:31:22,057 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 20:31:22,184 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:31:22,186 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:31:22,188 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:31:22,305 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1459]
2025-11-06 20:31:22,306 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1]
2025-11-06 20:31:22,308 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:31:22,310 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:31:22,310 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 20:31:22,447 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:31:22,450 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:31:22,451 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:31:22,587 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:31:22,589 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:31:22,592 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:31:22,653 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:31:22,656 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:856]
2025-11-06 20:31:22,657 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 20:31:22,658 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-06 20:31:22,801 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:31:22,804 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 20:31:22,805 | INFO | sqlalchemy.engine.Engine | [cached since 850.1s ago] ()
2025-11-06 20:31:22,812 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 20:31:22,815 | INFO | sqlalchemy.engine.Engine | [cached since 475.9s ago] (1,)
2025-11-06 20:31:22,922 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 20:31:22,926 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000026615FD9B10>}) about to wait for the following futures []
2025-11-06 20:31:22,926 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000026615FD9B10>}) done waiting for dependent futures
2025-11-06 20:31:22,928 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000026615FD9B10>}) with kwargs {'client': <botocore.client.S3 object at 0x00000266155C1210>, 'config': <boto3.s3.transfer.TransferConfig object at 0x0000026615EB37D0>, 'osutil': <s3transfer.utils.OSUtils object at 0x0000026615EDF090>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x0000026615ED1510>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000026615FD9B10>}
2025-11-06 20:31:22,928 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/99ef0bd8-3b50-478a-a563-e2c75d340830/7e77322e63eb45d4ac9a267858255c1e.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x0000026615ED1510> for transfer request: 0.
2025-11-06 20:31:22,930 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 20:31:22,932 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/99ef0bd8-3b50-478a-a563-e2c75d340830/7e77322e63eb45d4ac9a267858255c1e.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-06 20:31:22,933 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 20:31:22,933 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/99ef0bd8-3b50-478a-a563-e2c75d340830/7e77322e63eb45d4ac9a267858255c1e.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-06 20:31:22,935 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/99ef0bd8-3b50-478a-a563-e2c75d340830/7e77322e63eb45d4ac9a267858255c1e.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x00000266155C1210>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x0000026615EDA8D0>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/99ef0bd8-3b50-478a-a563-e2c75d340830/7e77322e63eb45d4ac9a267858255c1e.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-06 20:31:23,705 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 20:31:35,516 | INFO | app.controllers.audio | Transcripción recibida session=99ef0bd8-3b50-478a-a563-e2c75d340830: pa superficie Alfa Noviembre India en hangar 37 Solicitamos abrir plan de vuelo hacia zona Eco vía Paso Chomogo 7000 pies dos almas a bordo. Capitán José Solano Autonomía cinco horas y media.
2025-11-06 20:31:35,517 | INFO | app.logs.transcript | student | session=99ef0bd8-3b50-478a-a563-e2c75d340830 | frequency=127.10 | text=pa superficie Alfa Noviembre India en hangar 37 Solicitamos abrir plan de vuelo hacia zona Eco vía Paso Chomogo 7000 pies dos almas a bordo. Capitán José Solano Autonomía cinco horas y media.
2025-11-06 20:31:35,704 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:31:35,707 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 20:31:35,708 | INFO | sqlalchemy.engine.Engine | [cached since 284s ago] (UUID('99ef0bd8-3b50-478a-a563-e2c75d340830'),)
2025-11-06 20:31:35,727 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 20:31:35,741 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 20:31:48,856 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:31:48,856 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 20:31:48,857 | INFO | sqlalchemy.engine.Engine | [cached since 876.1s ago] ()
2025-11-06 20:31:48,865 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.email = $1::VARCHAR
2025-11-06 20:31:48,866 | INFO | sqlalchemy.engine.Engine | [cached since 505.1s ago] ('josuelu3@gmail.com',)
2025-11-06 20:31:49,016 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 20:32:11,874 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:32:11,875 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 20:32:11,877 | INFO | sqlalchemy.engine.Engine | [cached since 899.2s ago] ()
2025-11-06 20:32:11,885 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 20:32:11,887 | INFO | sqlalchemy.engine.Engine | [cached since 525s ago] (1,)
2025-11-06 20:32:11,980 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.training_contexts (id, training_session_id, user_id, context) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::JSONB) RETURNING ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at
2025-11-06 20:32:11,982 | INFO | sqlalchemy.engine.Engine | [cached since 368.1s ago] (UUID('a7a1019c-e142-4fcb-9863-c8f9f8f2c80f'), UUID('994c6908-5fb0-4d42-a25c-503d4f7faaaf'), 1, '{"route": "MRPV-MRPV", "meteo": {"condition": "IMC", "vis": "10km", "qnh": "983", "windDirection": "030", "windSpeed": "4", "wind": "030/4"}, "scenario_id": ""}')
2025-11-06 20:32:11,992 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 20:32:12,163 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:32:12,165 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.id = $1::UUID
2025-11-06 20:32:12,165 | INFO | sqlalchemy.engine.Engine | [cached since 368.1s ago] (UUID('a7a1019c-e142-4fcb-9863-c8f9f8f2c80f'),)
2025-11-06 20:32:12,180 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 20:32:58,408 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:32:58,409 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 20:32:58,410 | INFO | sqlalchemy.engine.Engine | [cached since 945.7s ago] ()
2025-11-06 20:32:58,417 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.email = $1::VARCHAR
2025-11-06 20:32:58,417 | INFO | sqlalchemy.engine.Engine | [cached since 574.6s ago] ('josuelu3@gmail.com',)
2025-11-06 20:32:58,591 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 20:33:28,718 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:33:28,720 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 20:33:28,720 | INFO | sqlalchemy.engine.Engine | [cached since 976s ago] ()
2025-11-06 20:33:28,728 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 20:33:28,730 | INFO | sqlalchemy.engine.Engine | [cached since 601.8s ago] (1,)
2025-11-06 20:33:28,822 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.training_contexts (id, training_session_id, user_id, context) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::JSONB) RETURNING ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at
2025-11-06 20:33:28,822 | INFO | sqlalchemy.engine.Engine | [cached since 445s ago] (UUID('04bb81e5-7232-44ab-96b7-15b8d9f57b2f'), UUID('bcb9df1e-49da-4b89-ae05-89a17536da3d'), 1, '{"route": "MRPV-MRPV", "meteo": {"condition": "VMC", "vis": "3km", "qnh": "983", "windDirection": "040", "windSpeed": "4", "wind": "040/4"}, "scenario_id": "mrpv_full_flight"}')
2025-11-06 20:33:28,831 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 20:33:29,009 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:33:29,011 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.id = $1::UUID
2025-11-06 20:33:29,011 | INFO | sqlalchemy.engine.Engine | [cached since 445s ago] (UUID('04bb81e5-7232-44ab-96b7-15b8d9f57b2f'),)
2025-11-06 20:33:29,022 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 20:34:14,716 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 20:34:14,716 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-06 20:34:14,718 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-06 20:34:14,718 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:34:14,719 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-06 20:34:14,719 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-06 20:34:14,720 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:34:14,720 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 20:34:14,722 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-06 20:34:14,722 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 20:34:14,724 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 20:34:14,725 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-06 20:34:14,726 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-06 20:34:14,726 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:34:14,728 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-06 20:34:14,729 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-06 20:34:14,730 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:34:14,730 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 20:34:14,731 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:268]
2025-11-06 20:34:14,731 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 20:34:14,732 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 20:34:14,732 | DEBUG | python_multipart.multipart | Calling on_header_field with data[310:329]
2025-11-06 20:34:14,734 | DEBUG | python_multipart.multipart | Calling on_header_value with data[331:385]
2025-11-06 20:34:14,735 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:34:14,736 | DEBUG | python_multipart.multipart | Calling on_header_field with data[387:399]
2025-11-06 20:34:14,736 | DEBUG | python_multipart.multipart | Calling on_header_value with data[401:411]
2025-11-06 20:34:14,738 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:34:14,739 | DEBUG | python_multipart.multipart | Calling on_header_field with data[413:427]
2025-11-06 20:34:14,740 | DEBUG | python_multipart.multipart | Calling on_header_value with data[429:435]
2025-11-06 20:34:14,740 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:34:14,742 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 20:34:14,743 | DEBUG | python_multipart.multipart | Calling on_part_data with data[439:5840]
2025-11-06 20:34:14,746 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 20:34:14,866 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:34:14,868 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:34:14,869 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:34:14,986 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:34:14,988 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:34:14,990 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:34:15,105 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:34:15,106 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:34:15,243 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:34:15,246 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:34:15,248 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 20:34:15,403 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:34:15,406 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:34:15,409 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:34:15,549 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:34:15,550 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 20:34:15,681 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:34:15,684 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:34:15,685 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:34:15,810 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:34:15,813 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:34:15,932 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:34:15,933 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:34:16,049 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:34:16,050 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:34:16,053 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:34:16,166 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:34:16,168 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:34:16,170 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:34:16,284 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:34:16,285 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:34:16,288 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:34:16,404 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:34:16,405 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:34:16,530 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:34:16,532 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:34:16,533 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:34:16,659 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:34:16,661 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 20:34:16,787 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:34:16,791 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:34:16,795 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:34:16,978 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:34:16,982 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:34:17,158 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:34:17,161 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:34:17,165 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:34:17,336 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:34:17,340 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:34:17,345 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:34:17,558 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:34:17,561 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:34:17,564 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:34:17,747 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:34:17,751 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:34:17,754 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:34:17,912 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:34:17,915 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:34:17,917 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:34:18,043 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:34:18,045 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:34:18,048 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:34:18,168 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:34:18,170 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:34:18,172 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:34:18,289 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:34:18,290 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:34:18,293 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:34:18,399 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:34:18,401 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4754]
2025-11-06 20:34:18,401 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 20:34:18,402 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-06 20:34:18,524 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:34:18,525 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 20:34:18,526 | INFO | sqlalchemy.engine.Engine | [cached since 1026s ago] ()
2025-11-06 20:34:18,533 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 20:34:18,534 | INFO | sqlalchemy.engine.Engine | [cached since 651.6s ago] (1,)
2025-11-06 20:34:18,624 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 20:34:18,628 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000266731D3DD0>}) about to wait for the following futures []
2025-11-06 20:34:18,628 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000266731D3DD0>}) done waiting for dependent futures
2025-11-06 20:34:18,629 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000266731D3DD0>}) with kwargs {'client': <botocore.client.S3 object at 0x00000266155C1210>, 'config': <boto3.s3.transfer.TransferConfig object at 0x00000266160B1090>, 'osutil': <s3transfer.utils.OSUtils object at 0x00000266160B2850>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x0000026615EE88D0>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000266731D3DD0>}
2025-11-06 20:34:18,630 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/bcb9df1e-49da-4b89-ae05-89a17536da3d/5fdf63372fcc4ad88207a2e7b2863edd.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x0000026615EE88D0> for transfer request: 0.
2025-11-06 20:34:18,631 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 20:34:18,633 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/bcb9df1e-49da-4b89-ae05-89a17536da3d/5fdf63372fcc4ad88207a2e7b2863edd.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-06 20:34:18,633 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 20:34:18,633 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/bcb9df1e-49da-4b89-ae05-89a17536da3d/5fdf63372fcc4ad88207a2e7b2863edd.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-06 20:34:18,635 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/bcb9df1e-49da-4b89-ae05-89a17536da3d/5fdf63372fcc4ad88207a2e7b2863edd.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x00000266155C1210>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x00000266160B1D50>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/bcb9df1e-49da-4b89-ae05-89a17536da3d/5fdf63372fcc4ad88207a2e7b2863edd.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-06 20:34:19,446 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 20:34:31,130 | INFO | app.controllers.audio | Transcripción recibida session=bcb9df1e-49da-4b89-ae05-89a17536da3d: pava superficie Alfa Noviembre India en hangar 37 Solicitamos abrir plan de vuelo hacia zona Eco vía Paso Chomogo 7000 pies dos almas a bordo. Capitán José Solano Autonomía cinco horas y media.
2025-11-06 20:34:31,131 | INFO | app.logs.transcript | student | session=bcb9df1e-49da-4b89-ae05-89a17536da3d | frequency=127.10 | text=pava superficie Alfa Noviembre India en hangar 37 Solicitamos abrir plan de vuelo hacia zona Eco vía Paso Chomogo 7000 pies dos almas a bordo. Capitán José Solano Autonomía cinco horas y media.
2025-11-06 20:34:31,340 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:34:31,342 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 20:34:31,343 | INFO | sqlalchemy.engine.Engine | [cached since 459.6s ago] (UUID('bcb9df1e-49da-4b89-ae05-89a17536da3d'),)
2025-11-06 20:34:31,358 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 20:34:32,065 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:34:32,067 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 20:34:32,070 | INFO | sqlalchemy.engine.Engine | [cached since 460.3s ago] (UUID('bcb9df1e-49da-4b89-ae05-89a17536da3d'),)
2025-11-06 20:34:32,095 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 20:34:32,097 | INFO | sqlalchemy.engine.Engine | [generated in 0.00257s] ('{"meteo": {"qnh": "983", "vis": "3km", "wind": "040/4", "condition": "VMC", "windSpeed": "4", "windDirection": "040"}, "route": "MRPV-MRPV", "scenari ... (18461 characters truncated) ... route": "MRPV-MRPV", "intent": "ground_taxi_clearance", "frequency_group": "ground", "intent_confidence": 0.9, "timestamp": "2025-11-07T02:34:31Z"}]}', datetime.datetime(2025, 11, 7, 2, 34, 32, 94646), UUID('04bb81e5-7232-44ab-96b7-15b8d9f57b2f'))
2025-11-06 20:34:32,118 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 20:34:32,163 | INFO | app.controllers.audio | Fase activa session=bcb9df1e-49da-4b89-ae05-89a17536da3d phase_id=ground_departure_request intent=ground_taxi_clearance freq=ground
2025-11-06 20:34:32,165 | INFO | app.controllers.audio | Frecuencia fuera de rango intent=ground_taxi_clearance freq=127.100 esperado=121.700
2025-11-06 20:34:32,398 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:34:32,401 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 20:34:32,403 | INFO | sqlalchemy.engine.Engine | [cached since 460.7s ago] (UUID('bcb9df1e-49da-4b89-ae05-89a17536da3d'),)
2025-11-06 20:34:32,427 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 20:34:32,428 | INFO | sqlalchemy.engine.Engine | [cached since 0.3336s ago] ('{"meteo": {"qnh": "983", "vis": "3km", "wind": "040/4", "condition": "VMC", "windSpeed": "4", "windDirection": "040"}, "route": "MRPV-MRPV", "turns": ... (18973 characters truncated) ... roach": "120.5", "radio": "126.8", "unicom": "122.0"}, "scenario_id": "mrpv_full_flight", "transponder": "0539", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 7, 2, 34, 32, 426616), UUID('04bb81e5-7232-44ab-96b7-15b8d9f57b2f'))
2025-11-06 20:34:32,444 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 20:34:32,463 | INFO | app.logs.transcript | controller | session=bcb9df1e-49da-4b89-ae05-89a17536da3d | frequency=127.10 | intent=ground_taxi_clearance | phase=ground_departure_request | allow_response=False | text=La frecuencia esperada para esta solicitud es 121.700.
2025-11-06 20:34:32,466 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 20:35:08,398 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 20:35:08,398 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-06 20:35:08,399 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-06 20:35:08,400 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:35:08,402 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-06 20:35:08,402 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-06 20:35:08,402 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:35:08,404 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 20:35:08,405 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-06 20:35:08,405 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 20:35:08,408 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 20:35:08,409 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-06 20:35:08,411 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-06 20:35:08,411 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:35:08,412 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-06 20:35:08,414 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-06 20:35:08,416 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:35:08,418 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 20:35:08,420 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:268]
2025-11-06 20:35:08,423 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 20:35:08,424 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 20:35:08,426 | DEBUG | python_multipart.multipart | Calling on_header_field with data[310:329]
2025-11-06 20:35:08,426 | DEBUG | python_multipart.multipart | Calling on_header_value with data[331:385]
2025-11-06 20:35:08,427 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:35:08,429 | DEBUG | python_multipart.multipart | Calling on_header_field with data[387:399]
2025-11-06 20:35:08,430 | DEBUG | python_multipart.multipart | Calling on_header_value with data[401:411]
2025-11-06 20:35:08,431 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:35:08,432 | DEBUG | python_multipart.multipart | Calling on_header_field with data[413:427]
2025-11-06 20:35:08,434 | DEBUG | python_multipart.multipart | Calling on_header_value with data[429:435]
2025-11-06 20:35:08,435 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:35:08,435 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 20:35:08,438 | DEBUG | python_multipart.multipart | Calling on_part_data with data[439:5840]
2025-11-06 20:35:08,441 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 20:35:08,597 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:35:08,599 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:35:08,783 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:35:08,786 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:35:08,787 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:35:08,960 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:35:08,962 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:35:08,965 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:35:09,109 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:35:09,111 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:35:09,112 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 20:35:09,251 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:35:09,252 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:35:09,255 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:35:09,386 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:35:09,389 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:35:09,390 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:35:09,392 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 20:35:09,533 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:35:09,535 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:35:09,537 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:35:09,665 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:35:09,668 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:35:09,670 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:35:09,814 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:35:09,816 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:35:09,818 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:35:09,958 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:35:09,961 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:35:09,963 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:35:10,146 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:35:10,149 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:35:10,323 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:35:10,326 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:35:10,328 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:35:10,330 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:35:10,464 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:35:10,466 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:35:10,468 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:35:10,594 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:35:10,595 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:35:10,598 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:35:10,722 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:35:10,725 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:35:10,853 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:35:10,857 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:35:10,858 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:35:11,001 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:35:11,004 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:35:11,007 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:35:11,009 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:35:11,166 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:35:11,168 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:35:11,170 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:35:11,317 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:35:11,319 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:35:11,321 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:35:11,474 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:35:11,477 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:35:11,637 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:35:11,639 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:35:11,642 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:35:11,781 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:35:11,784 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:35:11,786 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 20:35:11,936 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:35:11,939 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:35:11,940 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:35:12,016 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:35:12,019 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2531]
2025-11-06 20:35:12,021 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 20:35:12,023 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-06 20:35:12,183 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:35:12,185 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 20:35:12,186 | INFO | sqlalchemy.engine.Engine | [cached since 1079s ago] ()
2025-11-06 20:35:12,195 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 20:35:12,196 | INFO | sqlalchemy.engine.Engine | [cached since 705.3s ago] (1,)
2025-11-06 20:35:12,297 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 20:35:12,300 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000266160B35D0>}) about to wait for the following futures []
2025-11-06 20:35:12,300 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000266160B35D0>}) done waiting for dependent futures
2025-11-06 20:35:12,301 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000266160B35D0>}) with kwargs {'client': <botocore.client.S3 object at 0x00000266155C1210>, 'config': <boto3.s3.transfer.TransferConfig object at 0x00000266160D1E10>, 'osutil': <s3transfer.utils.OSUtils object at 0x00000266160D1D90>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x00000266160D1C10>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000266160B35D0>}
2025-11-06 20:35:12,302 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/bcb9df1e-49da-4b89-ae05-89a17536da3d/a47742baba454c9d954d12674d020a29.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x00000266160D1C10> for transfer request: 0.
2025-11-06 20:35:12,304 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 20:35:12,306 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/bcb9df1e-49da-4b89-ae05-89a17536da3d/a47742baba454c9d954d12674d020a29.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-06 20:35:12,306 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 20:35:12,307 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/bcb9df1e-49da-4b89-ae05-89a17536da3d/a47742baba454c9d954d12674d020a29.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-06 20:35:12,308 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/bcb9df1e-49da-4b89-ae05-89a17536da3d/a47742baba454c9d954d12674d020a29.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x00000266155C1210>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x00000266160B1B90>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/bcb9df1e-49da-4b89-ae05-89a17536da3d/a47742baba454c9d954d12674d020a29.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-06 20:35:13,085 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 20:35:24,771 | INFO | app.controllers.audio | Transcripción recibida session=bcb9df1e-49da-4b89-ae05-89a17536da3d: Fas superficie Alfa Noviembre India en hangar 37 solicitamos abrir plan de vuelo hacia zona Eco vía Paso Chomogo 7000 pies, dos almas a bordo. Capitán Josué Solano, Autonomía, cinco horas y media.
2025-11-06 20:35:24,772 | INFO | app.logs.transcript | student | session=bcb9df1e-49da-4b89-ae05-89a17536da3d | frequency=121.70 | text=Fas superficie Alfa Noviembre India en hangar 37 solicitamos abrir plan de vuelo hacia zona Eco vía Paso Chomogo 7000 pies, dos almas a bordo. Capitán Josué Solano, Autonomía, cinco horas y media.
2025-11-06 20:35:24,886 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:35:24,888 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 20:35:24,889 | INFO | sqlalchemy.engine.Engine | [cached since 513.2s ago] (UUID('bcb9df1e-49da-4b89-ae05-89a17536da3d'),)
2025-11-06 20:35:24,904 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 20:35:25,385 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:35:25,385 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 20:35:25,387 | INFO | sqlalchemy.engine.Engine | [cached since 513.6s ago] (UUID('bcb9df1e-49da-4b89-ae05-89a17536da3d'),)
2025-11-06 20:35:25,405 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 20:35:25,407 | INFO | sqlalchemy.engine.Engine | [cached since 53.31s ago] ('{"meteo": {"qnh": "983", "vis": "3km", "wind": "040/4", "condition": "VMC", "windSpeed": "4", "windDirection": "040"}, "route": "MRPV-MRPV", "turns": ... (19518 characters truncated) ... nd": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0539", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 7, 2, 35, 25, 405058), UUID('04bb81e5-7232-44ab-96b7-15b8d9f57b2f'))
2025-11-06 20:35:25,422 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 20:35:25,461 | INFO | app.controllers.audio | Intent detector frequency mismatch session=bcb9df1e-49da-4b89-ae05-89a17536da3d detected=tower scenario=ground
2025-11-06 20:35:25,466 | INFO | app.controllers.audio | Fase activa session=bcb9df1e-49da-4b89-ae05-89a17536da3d phase_id=ground_departure_request intent=tower_takeoff_clearance freq=ground
2025-11-06 20:35:25,471 | INFO | app.services.audio_pipeline | Prompts generados intent=tower_takeoff_clearance freq_group=ground
SYSTEM> Eres Pavas Superficie (121.7). Recibes la llamada inicial para abrir plan de vuelo y autorizar rodaje. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "metadata": object
 }.
Si necesitas proponer un cambio de fase, incluye en metadata la clave "nextPhase". No escribas texto adicional antes o después del JSON.
USER> Fase actual: Solicitud de apertura y autorización de rodaje
Intent esperado: tower_takeoff_clearance
Transcripción textual del alumno:
Fas superficie Alfa Noviembre India en hangar 37 solicitamos abrir plan de vuelo hacia zona Eco vía Paso Chomogo 7000 pies, dos almas a bordo. Capitán Josué Solano, Autonomía, cinco horas y media.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: ground
- Fase ID: ground_departure_request

Checklist alumno:
- Saludo correcto a Pavas Superficie.
- ...
2025-11-06 20:35:27,539 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=tower_takeoff_clearance: {
  "intent": "ground_taxi_clearance",
  "allowResponse": false,
  "controllerText": null,
  "feedback": "La solicitud incluye datos generales, pero la frecuencia y la intención de despegue no coinciden con la solicitud esperada. La frecuencia esperada es 121.700 para una solicitud de autorización de rodaje, pero la transmisión fue en 121.70 y con una intención de despegue. Por favor, corrige la frecuencia y la intención de la solicitud.",
  "confidence": 0.95,
  "metadata": {
    "missing_in...
2025-11-06 20:35:27,541 | INFO | app.services.audio_pipeline | Intent devuelto por el LLM (ground_taxi_clearance) difiere del esperado (tower_takeoff_clearance)
2025-11-06 20:35:27,732 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:35:27,733 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 20:35:27,734 | INFO | sqlalchemy.engine.Engine | [cached since 516s ago] (UUID('bcb9df1e-49da-4b89-ae05-89a17536da3d'),)
2025-11-06 20:35:27,752 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 20:35:27,753 | INFO | sqlalchemy.engine.Engine | [cached since 55.66s ago] ('{"meteo": {"qnh": "983", "vis": "3km", "wind": "040/4", "condition": "VMC", "windSpeed": "4", "windDirection": "040"}, "route": "MRPV-MRPV", "turns": ... (20936 characters truncated) ... nd": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0539", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 7, 2, 35, 27, 752118), UUID('04bb81e5-7232-44ab-96b7-15b8d9f57b2f'))
2025-11-06 20:35:27,767 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 20:35:27,788 | INFO | app.logs.transcript | controller | session=bcb9df1e-49da-4b89-ae05-89a17536da3d | frequency=121.70 | intent=ground_taxi_clearance | phase=ground_departure_request | allow_response=False | text=
2025-11-06 20:35:27,791 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 20:39:26,189 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 20:39:26,190 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-06 20:39:26,190 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-06 20:39:26,192 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:39:26,192 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-06 20:39:26,193 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-06 20:39:26,193 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:39:26,194 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 20:39:26,195 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-06 20:39:26,196 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 20:39:26,196 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 20:39:26,198 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-06 20:39:26,199 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-06 20:39:26,199 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:39:26,206 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-06 20:39:26,216 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-06 20:39:26,216 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:39:26,220 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 20:39:26,222 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:268]
2025-11-06 20:39:26,226 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 20:39:26,233 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 20:39:26,236 | DEBUG | python_multipart.multipart | Calling on_header_field with data[310:329]
2025-11-06 20:39:26,238 | DEBUG | python_multipart.multipart | Calling on_header_value with data[331:385]
2025-11-06 20:39:26,239 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:39:26,241 | DEBUG | python_multipart.multipart | Calling on_header_field with data[387:399]
2025-11-06 20:39:26,243 | DEBUG | python_multipart.multipart | Calling on_header_value with data[401:411]
2025-11-06 20:39:26,244 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:39:26,246 | DEBUG | python_multipart.multipart | Calling on_header_field with data[413:427]
2025-11-06 20:39:26,252 | DEBUG | python_multipart.multipart | Calling on_header_value with data[429:435]
2025-11-06 20:39:26,254 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:39:26,256 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 20:39:26,256 | DEBUG | python_multipart.multipart | Calling on_part_data with data[439:2920]
2025-11-06 20:39:26,261 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 20:39:26,356 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:39:26,356 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:39:26,359 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:39:26,476 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:39:26,479 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:39:26,480 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:39:26,598 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:39:26,599 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:39:26,601 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:39:26,729 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:39:26,733 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:39:26,735 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:39:26,871 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:39:26,874 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:39:26,992 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:39:26,995 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:39:26,998 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:39:27,155 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:39:27,169 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:39:27,173 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:39:27,326 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:39:27,335 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:39:27,338 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:39:27,493 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:39:27,500 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:39:27,675 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:39:27,681 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:39:27,684 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:39:27,909 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:39:27,911 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:39:27,915 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:39:28,106 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:39:28,108 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 20:39:28,271 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:39:28,273 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:39:28,430 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:39:28,435 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:39:28,438 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:39:28,599 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:39:28,602 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:39:28,603 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:39:28,739 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:39:28,741 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:39:28,744 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:39:28,746 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 20:39:28,882 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:39:28,884 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:39:28,885 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 20:39:29,006 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:39:29,007 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:39:29,008 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:39:29,129 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:39:29,131 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:39:29,276 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:39:29,280 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:39:29,283 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:39:29,425 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:39:29,428 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:39:29,430 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:39:29,579 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:39:29,581 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:39:29,582 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:39:29,702 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:39:29,705 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:39:29,706 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:39:29,832 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:39:29,835 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:39:29,836 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:39:29,965 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:39:29,967 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:39:30,096 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:39:30,097 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:39:30,098 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:39:30,227 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:39:30,229 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:39:30,231 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:39:30,363 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:39:30,366 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:39:30,369 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3222]
2025-11-06 20:39:30,370 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 20:39:30,371 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-06 20:39:30,536 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:39:30,538 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 20:39:30,539 | INFO | sqlalchemy.engine.Engine | [cached since 1338s ago] ()
2025-11-06 20:39:30,548 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 20:39:30,550 | INFO | sqlalchemy.engine.Engine | [cached since 963.6s ago] (1,)
2025-11-06 20:39:30,674 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 20:39:30,676 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000266160D2650>}) about to wait for the following futures []
2025-11-06 20:39:30,677 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000266160D2650>}) done waiting for dependent futures
2025-11-06 20:39:30,679 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000266160D2650>}) with kwargs {'client': <botocore.client.S3 object at 0x00000266155C1210>, 'config': <boto3.s3.transfer.TransferConfig object at 0x0000026615F1CE50>, 'osutil': <s3transfer.utils.OSUtils object at 0x0000026615EE8F10>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x00000266160D0790>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000266160D2650>}
2025-11-06 20:39:30,680 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/bcb9df1e-49da-4b89-ae05-89a17536da3d/eed2e2d0ff3f48e2946843dbfd220cce.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x00000266160D0790> for transfer request: 0.
2025-11-06 20:39:30,681 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 20:39:30,684 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/bcb9df1e-49da-4b89-ae05-89a17536da3d/eed2e2d0ff3f48e2946843dbfd220cce.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-06 20:39:30,684 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 20:39:30,686 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/bcb9df1e-49da-4b89-ae05-89a17536da3d/eed2e2d0ff3f48e2946843dbfd220cce.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-06 20:39:30,687 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/bcb9df1e-49da-4b89-ae05-89a17536da3d/eed2e2d0ff3f48e2946843dbfd220cce.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x00000266155C1210>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x00000266160D2A90>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/bcb9df1e-49da-4b89-ae05-89a17536da3d/eed2e2d0ff3f48e2946843dbfd220cce.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-06 20:39:31,562 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 20:39:43,271 | INFO | app.controllers.audio | Transcripción recibida session=bcb9df1e-49da-4b89-ae05-89a17536da3d: pavas superficie Alfa Noviembre India en hangar 37 Solicitamos abrir el plan de vuelo hacia zona Eco vía Paso Chomogo 7000 pies dos almas a bordo. Capitán Josué Solano Autonomía cinco horas y media.
2025-11-06 20:39:43,272 | INFO | app.logs.transcript | student | session=bcb9df1e-49da-4b89-ae05-89a17536da3d | frequency=121.70 | text=pavas superficie Alfa Noviembre India en hangar 37 Solicitamos abrir el plan de vuelo hacia zona Eco vía Paso Chomogo 7000 pies dos almas a bordo. Capitán Josué Solano Autonomía cinco horas y media.
2025-11-06 20:39:43,423 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:39:43,425 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 20:39:43,426 | INFO | sqlalchemy.engine.Engine | [cached since 771.7s ago] (UUID('bcb9df1e-49da-4b89-ae05-89a17536da3d'),)
2025-11-06 20:39:43,449 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 20:39:43,932 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:39:43,934 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 20:39:43,935 | INFO | sqlalchemy.engine.Engine | [cached since 772.2s ago] (UUID('bcb9df1e-49da-4b89-ae05-89a17536da3d'),)
2025-11-06 20:39:43,950 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 20:39:43,952 | INFO | sqlalchemy.engine.Engine | [cached since 311.9s ago] ('{"meteo": {"qnh": "983", "vis": "3km", "wind": "040/4", "condition": "VMC", "windSpeed": "4", "windDirection": "040"}, "route": "MRPV-MRPV", "turns": ... (21483 characters truncated) ... nd": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0539", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 7, 2, 39, 43, 950827), UUID('04bb81e5-7232-44ab-96b7-15b8d9f57b2f'))
2025-11-06 20:39:43,966 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 20:39:43,998 | INFO | app.controllers.audio | Intent detector frequency mismatch session=bcb9df1e-49da-4b89-ae05-89a17536da3d detected=tower scenario=ground
2025-11-06 20:39:43,999 | INFO | app.controllers.audio | Fase activa session=bcb9df1e-49da-4b89-ae05-89a17536da3d phase_id=ground_departure_request intent=tower_takeoff_clearance freq=ground
2025-11-06 20:39:44,002 | INFO | app.services.audio_pipeline | Prompts generados intent=tower_takeoff_clearance freq_group=ground
SYSTEM> Eres Pavas Superficie (121.7). Recibes la llamada inicial para abrir plan de vuelo y autorizar rodaje. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "metadata": object
 }.
Si necesitas proponer un cambio de fase, incluye en metadata la clave "nextPhase". No escribas texto adicional antes o después del JSON.
USER> Fase actual: Solicitud de apertura y autorización de rodaje
Intent esperado: tower_takeoff_clearance
Transcripción textual del alumno:
pavas superficie Alfa Noviembre India en hangar 37 Solicitamos abrir el plan de vuelo hacia zona Eco vía Paso Chomogo 7000 pies dos almas a bordo. Capitán Josué Solano Autonomía cinco horas y media.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: ground
- Fase ID: ground_departure_request

Checklist alumno:
- Saludo correcto a Pavas Superficie.
...
2025-11-06 20:39:45,559 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=tower_takeoff_clearance: {
  "intent": "ground_taxi_clearance",
  "allowResponse": false,
  "controllerText": null,
  "feedback": "La solicitud incluye datos generales, pero la frecuencia y la intención de despegue no coinciden con la solicitud esperada. La solicitud debe ser para autorización de rodaje en 121.700, pero la transmisión fue en 121.70 con una intención de despegue.",
  "confidence": 0.95,
  "metadata": {
    "nextPhase": "ground_departure_request",
    "missingInformation": "correct frequency and intent...
2025-11-06 20:39:45,561 | INFO | app.services.audio_pipeline | Intent devuelto por el LLM (ground_taxi_clearance) difiere del esperado (tower_takeoff_clearance)
2025-11-06 20:39:45,562 | INFO | app.controllers.audio | Transición automática de fase session=bcb9df1e-49da-4b89-ae05-89a17536da3d de=ground_departure_request a=ground_departure_request
2025-11-06 20:39:45,697 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:39:45,698 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 20:39:45,699 | INFO | sqlalchemy.engine.Engine | [cached since 774s ago] (UUID('bcb9df1e-49da-4b89-ae05-89a17536da3d'),)
2025-11-06 20:39:45,724 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 20:39:45,726 | INFO | sqlalchemy.engine.Engine | [cached since 313.6s ago] ('{"meteo": {"qnh": "983", "vis": "3km", "wind": "040/4", "condition": "VMC", "windSpeed": "4", "windDirection": "040"}, "route": "MRPV-MRPV", "turns": ... (22803 characters truncated) ... nd": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0539", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 7, 2, 39, 45, 722487), UUID('04bb81e5-7232-44ab-96b7-15b8d9f57b2f'))
2025-11-06 20:39:45,746 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 20:39:45,763 | INFO | app.logs.transcript | controller | session=bcb9df1e-49da-4b89-ae05-89a17536da3d | frequency=121.70 | intent=ground_taxi_clearance | phase=ground_departure_request | allow_response=False | text=
2025-11-06 20:39:45,766 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 20:43:47,132 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 20:43:47,134 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-06 20:43:47,137 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-06 20:43:47,139 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:43:47,140 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-06 20:43:47,142 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-06 20:43:47,145 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:43:47,146 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 20:43:47,148 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-06 20:43:47,150 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 20:43:47,152 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 20:43:47,154 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-06 20:43:47,156 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-06 20:43:47,157 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:43:47,159 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-06 20:43:47,160 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-06 20:43:47,161 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:43:47,163 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 20:43:47,164 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:268]
2025-11-06 20:43:47,166 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 20:43:47,167 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 20:43:47,168 | DEBUG | python_multipart.multipart | Calling on_header_field with data[310:329]
2025-11-06 20:43:47,170 | DEBUG | python_multipart.multipart | Calling on_header_value with data[331:385]
2025-11-06 20:43:47,171 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:43:47,173 | DEBUG | python_multipart.multipart | Calling on_header_field with data[387:399]
2025-11-06 20:43:47,174 | DEBUG | python_multipart.multipart | Calling on_header_value with data[401:411]
2025-11-06 20:43:47,175 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:43:47,176 | DEBUG | python_multipart.multipart | Calling on_header_field with data[413:427]
2025-11-06 20:43:47,178 | DEBUG | python_multipart.multipart | Calling on_header_value with data[429:435]
2025-11-06 20:43:47,179 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:43:47,181 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 20:43:47,182 | DEBUG | python_multipart.multipart | Calling on_part_data with data[439:5840]
2025-11-06 20:43:47,184 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 20:43:47,348 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:43:47,353 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:43:47,358 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:43:47,536 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:43:47,541 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:43:47,725 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:43:47,729 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:43:47,894 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:43:47,908 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:43:48,072 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:43:48,077 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:43:48,083 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:43:48,294 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:43:48,297 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:43:48,300 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:43:48,302 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:43:48,473 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:43:48,476 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:43:48,477 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 20:43:48,609 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:43:48,610 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:43:48,613 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:43:48,751 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:43:48,754 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:43:48,756 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:43:48,897 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:43:48,901 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:43:49,033 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:43:49,036 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:43:49,037 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:43:49,182 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:43:49,186 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:43:49,187 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:43:49,334 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:43:49,336 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:43:49,338 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:43:49,455 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:43:49,457 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:43:49,459 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:43:49,577 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:43:49,579 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:43:49,694 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:43:49,697 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:43:49,823 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:43:49,825 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:43:49,827 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:43:49,946 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:43:49,947 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:43:49,950 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:43:49,952 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:43:50,072 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:43:50,076 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:43:50,077 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:43:50,217 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:43:50,220 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:43:50,223 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:43:50,355 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:43:50,357 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:43:50,359 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:43:50,538 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:43:50,541 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:43:50,543 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:43:50,713 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:43:50,716 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:43:50,719 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:43:50,866 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:43:50,867 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:43:50,870 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:43:51,013 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:43:51,014 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:43:51,016 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:43:51,036 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1104]
2025-11-06 20:43:51,037 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 20:43:51,037 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-06 20:43:51,177 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:43:51,179 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 20:43:51,181 | INFO | sqlalchemy.engine.Engine | [cached since 1598s ago] ()
2025-11-06 20:43:51,190 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 20:43:51,191 | INFO | sqlalchemy.engine.Engine | [cached since 1224s ago] (1,)
2025-11-06 20:43:51,285 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 20:43:51,286 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002661608AE50>}) about to wait for the following futures []
2025-11-06 20:43:51,286 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002661608AE50>}) done waiting for dependent futures
2025-11-06 20:43:51,287 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002661608AE50>}) with kwargs {'client': <botocore.client.S3 object at 0x00000266155C1210>, 'config': <boto3.s3.transfer.TransferConfig object at 0x00000266160D1550>, 'osutil': <s3transfer.utils.OSUtils object at 0x00000266160D2A90>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x00000266160D0B90>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002661608AE50>}
2025-11-06 20:43:51,288 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/bcb9df1e-49da-4b89-ae05-89a17536da3d/0b0b3730e10244dc82409d4bf1f05594.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x00000266160D0B90> for transfer request: 0.
2025-11-06 20:43:51,288 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 20:43:51,290 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/bcb9df1e-49da-4b89-ae05-89a17536da3d/0b0b3730e10244dc82409d4bf1f05594.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-06 20:43:51,291 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 20:43:51,291 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/bcb9df1e-49da-4b89-ae05-89a17536da3d/0b0b3730e10244dc82409d4bf1f05594.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-06 20:43:51,292 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/bcb9df1e-49da-4b89-ae05-89a17536da3d/0b0b3730e10244dc82409d4bf1f05594.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x00000266155C1210>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002661608A510>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/bcb9df1e-49da-4b89-ae05-89a17536da3d/0b0b3730e10244dc82409d4bf1f05594.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-06 20:43:52,064 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 20:44:03,901 | INFO | app.controllers.audio | Transcripción recibida session=bcb9df1e-49da-4b89-ae05-89a17536da3d: pava superficie Alfa Noviembre Noviembre India en hangar 37 solicitamos abrir plan de vuelo hacia zona Eco vía Paso Chomogo 7000 pies dos almas a bordo, Capitán Josué Solano, Autonomía cinco horas y media.
2025-11-06 20:44:03,903 | INFO | app.logs.transcript | student | session=bcb9df1e-49da-4b89-ae05-89a17536da3d | frequency=121.70 | text=pava superficie Alfa Noviembre Noviembre India en hangar 37 solicitamos abrir plan de vuelo hacia zona Eco vía Paso Chomogo 7000 pies dos almas a bordo, Capitán Josué Solano, Autonomía cinco horas y media.
2025-11-06 20:44:04,107 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:44:04,108 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 20:44:04,110 | INFO | sqlalchemy.engine.Engine | [cached since 1032s ago] (UUID('bcb9df1e-49da-4b89-ae05-89a17536da3d'),)
2025-11-06 20:44:04,136 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 20:44:04,668 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:44:04,671 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 20:44:04,673 | INFO | sqlalchemy.engine.Engine | [cached since 1033s ago] (UUID('bcb9df1e-49da-4b89-ae05-89a17536da3d'),)
2025-11-06 20:44:04,690 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 20:44:04,692 | INFO | sqlalchemy.engine.Engine | [cached since 572.6s ago] ('{"meteo": {"qnh": "983", "vis": "3km", "wind": "040/4", "condition": "VMC", "windSpeed": "4", "windDirection": "040"}, "route": "MRPV-MRPV", "turns": ... (23357 characters truncated) ... nd": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0539", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 7, 2, 44, 4, 689973), UUID('04bb81e5-7232-44ab-96b7-15b8d9f57b2f'))
2025-11-06 20:44:04,719 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 20:44:04,765 | INFO | app.controllers.audio | Intent detector frequency mismatch session=bcb9df1e-49da-4b89-ae05-89a17536da3d detected=tower scenario=ground
2025-11-06 20:44:04,767 | INFO | app.controllers.audio | Fase activa session=bcb9df1e-49da-4b89-ae05-89a17536da3d phase_id=ground_departure_request intent=tower_takeoff_clearance freq=ground
2025-11-06 20:44:04,772 | INFO | app.services.audio_pipeline | Prompts generados intent=tower_takeoff_clearance freq_group=ground
SYSTEM> Eres Pavas Superficie (121.7). Recibes la llamada inicial para abrir plan de vuelo y autorizar rodaje. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "metadata": object
 }.
Si necesitas proponer un cambio de fase, incluye en metadata la clave "nextPhase". No escribas texto adicional antes o después del JSON.
USER> Fase actual: Solicitud de apertura y autorización de rodaje
Intent esperado: tower_takeoff_clearance
Transcripción textual del alumno:
pava superficie Alfa Noviembre Noviembre India en hangar 37 solicitamos abrir plan de vuelo hacia zona Eco vía Paso Chomogo 7000 pies dos almas a bordo, Capitán Josué Solano, Autonomía cinco horas y media.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: ground
- Fase ID: ground_departure_request

Checklist alumno:
- Saludo correcto a Pavas Super...
2025-11-06 20:44:06,415 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=tower_takeoff_clearance: {
  "intent": "ground_taxi_clearance",
  "allowResponse": false,
  "controllerText": null,
  "feedback": "La solicitud incluye datos generales, pero la frecuencia y la intención de despegue no coinciden con la solicitud esperada. La frecuencia esperada es 121.700 para una solicitud de autorización de rodaje, pero la transmisión fue en 121.70 con una intención de despegue. Por favor, corrige la frecuencia y la intención de la solicitud.",
  "confidence": 0.95,
  "metadata": {
    "missing_info...
2025-11-06 20:44:06,416 | INFO | app.services.audio_pipeline | Intent devuelto por el LLM (ground_taxi_clearance) difiere del esperado (tower_takeoff_clearance)
2025-11-06 20:44:06,418 | INFO | app.controllers.audio | Transición automática de fase session=bcb9df1e-49da-4b89-ae05-89a17536da3d de=ground_departure_request a=ground_departure_request
2025-11-06 20:44:06,619 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:44:06,620 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 20:44:06,620 | INFO | sqlalchemy.engine.Engine | [cached since 1035s ago] (UUID('bcb9df1e-49da-4b89-ae05-89a17536da3d'),)
2025-11-06 20:44:06,646 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 20:44:06,647 | INFO | sqlalchemy.engine.Engine | [cached since 574.6s ago] ('{"meteo": {"qnh": "983", "vis": "3km", "wind": "040/4", "condition": "VMC", "windSpeed": "4", "windDirection": "040"}, "route": "MRPV-MRPV", "turns": ... (24863 characters truncated) ... nd": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0539", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 7, 2, 44, 6, 646298), UUID('04bb81e5-7232-44ab-96b7-15b8d9f57b2f'))
2025-11-06 20:44:06,662 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 20:44:06,679 | INFO | app.logs.transcript | controller | session=bcb9df1e-49da-4b89-ae05-89a17536da3d | frequency=121.70 | intent=ground_taxi_clearance | phase=ground_departure_request | allow_response=False | text=
2025-11-06 20:44:06,682 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 20:51:13,552 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 20:51:13,554 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-06 20:51:13,555 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-06 20:51:13,557 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:51:13,560 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-06 20:51:13,563 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-06 20:51:13,565 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:51:13,566 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 20:51:13,568 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-06 20:51:13,572 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 20:51:13,579 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 20:51:13,580 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-06 20:51:13,581 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-06 20:51:13,583 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:51:13,584 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-06 20:51:13,586 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-06 20:51:13,587 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:51:13,587 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 20:51:13,589 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:269]
2025-11-06 20:51:13,590 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 20:51:13,592 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 20:51:13,593 | DEBUG | python_multipart.multipart | Calling on_header_field with data[311:330]
2025-11-06 20:51:13,595 | DEBUG | python_multipart.multipart | Calling on_header_value with data[332:386]
2025-11-06 20:51:13,595 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:51:13,596 | DEBUG | python_multipart.multipart | Calling on_header_field with data[388:400]
2025-11-06 20:51:13,597 | DEBUG | python_multipart.multipart | Calling on_header_value with data[402:412]
2025-11-06 20:51:13,597 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:51:13,599 | DEBUG | python_multipart.multipart | Calling on_header_field with data[414:428]
2025-11-06 20:51:13,600 | DEBUG | python_multipart.multipart | Calling on_header_value with data[430:436]
2025-11-06 20:51:13,601 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:51:13,602 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 20:51:13,605 | DEBUG | python_multipart.multipart | Calling on_part_data with data[440:1460]
2025-11-06 20:51:13,606 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:51:13,609 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 20:51:13,717 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:51:13,720 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:51:13,722 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:51:13,863 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:51:13,866 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:51:13,867 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:51:14,019 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:51:14,022 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:51:14,025 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:51:14,160 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:51:14,163 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:51:14,165 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:51:14,167 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 20:51:14,291 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:51:14,292 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:51:14,295 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:51:14,415 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:51:14,416 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:51:14,532 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:51:14,534 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:51:14,536 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:51:14,654 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:51:14,656 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:51:14,657 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:51:14,780 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:51:14,782 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:51:14,933 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:51:14,935 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:51:14,938 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:51:15,076 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:51:15,077 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:51:15,079 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 20:51:15,210 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:51:15,212 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:51:15,213 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:51:15,215 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:51:15,357 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:51:15,359 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:51:15,360 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:51:15,362 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:51:15,481 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:51:15,482 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:51:15,485 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:51:15,614 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:51:15,617 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:51:15,619 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:51:15,739 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:51:15,741 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:51:15,742 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:51:15,744 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:51:15,891 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:51:15,892 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:6732]
2025-11-06 20:51:16,012 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:51:16,015 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:51:16,016 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 20:51:16,260 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:51:16,270 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:51:16,276 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:51:16,461 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:51:16,463 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:51:16,465 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:51:16,590 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:51:16,593 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:51:16,597 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:51:16,600 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 20:51:16,721 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:51:16,723 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:51:16,836 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:51:16,837 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:51:16,839 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:51:16,840 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:51:16,969 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:51:16,971 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:51:16,974 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:51:17,091 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:51:17,094 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:51:17,097 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:51:17,193 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:51:17,194 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:51:17,195 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2097]
2025-11-06 20:51:17,196 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 20:51:17,197 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-06 20:51:17,320 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:51:17,321 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 20:51:17,322 | INFO | sqlalchemy.engine.Engine | [cached since 2045s ago] ()
2025-11-06 20:51:17,329 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 20:51:17,329 | INFO | sqlalchemy.engine.Engine | [cached since 1670s ago] (1,)
2025-11-06 20:51:17,429 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 20:51:17,430 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000266160D3ED0>}) about to wait for the following futures []
2025-11-06 20:51:17,431 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000266160D3ED0>}) done waiting for dependent futures
2025-11-06 20:51:17,431 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000266160D3ED0>}) with kwargs {'client': <botocore.client.S3 object at 0x00000266155C1210>, 'config': <boto3.s3.transfer.TransferConfig object at 0x00000266158F2F10>, 'osutil': <s3transfer.utils.OSUtils object at 0x0000026615ED1810>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x00000266160D0490>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000266160D3ED0>}
2025-11-06 20:51:17,432 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/bcb9df1e-49da-4b89-ae05-89a17536da3d/de0aa06bdcf641a488e31118889c0185.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x00000266160D0490> for transfer request: 0.
2025-11-06 20:51:17,432 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 20:51:17,435 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/bcb9df1e-49da-4b89-ae05-89a17536da3d/de0aa06bdcf641a488e31118889c0185.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-06 20:51:17,435 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 20:51:17,437 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/bcb9df1e-49da-4b89-ae05-89a17536da3d/de0aa06bdcf641a488e31118889c0185.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-06 20:51:17,437 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/bcb9df1e-49da-4b89-ae05-89a17536da3d/de0aa06bdcf641a488e31118889c0185.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x00000266155C1210>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x00000266160D1A10>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/bcb9df1e-49da-4b89-ae05-89a17536da3d/de0aa06bdcf641a488e31118889c0185.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-06 20:51:18,216 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 20:51:27,975 | INFO | app.controllers.audio | Transcripción recibida session=bcb9df1e-49da-4b89-ae05-89a17536da3d: pavas superficie Alfa Noviembre India en hangar 37 Solicitamos abrir plan de vuelo hacia zona Eco Vía Paso Cholobo 7000 pies dos almas a bordo. Capitán Solano Autonomía cinco horas y media.
2025-11-06 20:51:27,977 | INFO | app.logs.transcript | student | session=bcb9df1e-49da-4b89-ae05-89a17536da3d | frequency=121.700 | text=pavas superficie Alfa Noviembre India en hangar 37 Solicitamos abrir plan de vuelo hacia zona Eco Vía Paso Cholobo 7000 pies dos almas a bordo. Capitán Solano Autonomía cinco horas y media.
2025-11-06 20:51:28,413 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:51:28,415 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 20:51:28,419 | INFO | sqlalchemy.engine.Engine | [cached since 1477s ago] (UUID('bcb9df1e-49da-4b89-ae05-89a17536da3d'),)
2025-11-06 20:51:28,445 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 20:51:28,912 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:51:28,914 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 20:51:28,915 | INFO | sqlalchemy.engine.Engine | [cached since 1477s ago] (UUID('bcb9df1e-49da-4b89-ae05-89a17536da3d'),)
2025-11-06 20:51:28,930 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 20:51:28,931 | INFO | sqlalchemy.engine.Engine | [cached since 1017s ago] ('{"meteo": {"qnh": "983", "vis": "3km", "wind": "040/4", "condition": "VMC", "windSpeed": "4", "windDirection": "040"}, "route": "MRPV-MRPV", "turns": ... (25396 characters truncated) ... nd": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0539", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 7, 2, 51, 28, 930102), UUID('04bb81e5-7232-44ab-96b7-15b8d9f57b2f'))
2025-11-06 20:51:28,947 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 20:51:28,975 | INFO | app.controllers.audio | Intent detector frequency mismatch session=bcb9df1e-49da-4b89-ae05-89a17536da3d detected=tower scenario=ground
2025-11-06 20:51:28,977 | INFO | app.controllers.audio | Fase activa session=bcb9df1e-49da-4b89-ae05-89a17536da3d phase_id=ground_departure_request intent=tower_takeoff_clearance freq=ground
2025-11-06 20:51:28,980 | INFO | app.services.audio_pipeline | Prompts generados intent=tower_takeoff_clearance freq_group=ground
SYSTEM> Eres Pavas Superficie (121.7). Recibes la llamada inicial para abrir plan de vuelo y autorizar rodaje. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "metadata": object
 }.
Si necesitas proponer un cambio de fase, incluye en metadata la clave "nextPhase". No escribas texto adicional antes o después del JSON.
USER> Fase actual: Solicitud de apertura y autorización de rodaje
Intent esperado: tower_takeoff_clearance
Transcripción textual del alumno:
pavas superficie Alfa Noviembre India en hangar 37 Solicitamos abrir plan de vuelo hacia zona Eco Vía Paso Cholobo 7000 pies dos almas a bordo. Capitán Solano Autonomía cinco horas y media.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: ground
- Fase ID: ground_departure_request

Checklist alumno:
- Saludo correcto a Pavas Superficie.
- Indicar...
2025-11-06 20:51:30,445 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=tower_takeoff_clearance: {
  "intent": "ground_taxi_clearance",
  "allowResponse": false,
  "controllerText": null,
  "feedback": "La solicitud incluye datos generales, pero la frecuencia y la intención de despegue no coinciden con la solicitud esperada. La frecuencia esperada es 121.700 para una solicitud de autorización de rodaje, pero la transmisión fue en 121.7 y con una intención de despegue. Por favor, corrige la frecuencia y la intención de la solicitud.",
  "confidence": 0.95,
  "metadata": {
    "missing_inf...
2025-11-06 20:51:30,447 | INFO | app.services.audio_pipeline | Intent devuelto por el LLM (ground_taxi_clearance) difiere del esperado (tower_takeoff_clearance)
2025-11-06 20:51:30,596 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:51:30,598 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 20:51:30,598 | INFO | sqlalchemy.engine.Engine | [cached since 1479s ago] (UUID('bcb9df1e-49da-4b89-ae05-89a17536da3d'),)
2025-11-06 20:51:30,622 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 20:51:30,640 | INFO | sqlalchemy.engine.Engine | [cached since 1019s ago] ('{"meteo": {"qnh": "983", "vis": "3km", "wind": "040/4", "condition": "VMC", "windSpeed": "4", "windDirection": "040"}, "route": "MRPV-MRPV", "turns": ... (26812 characters truncated) ... nd": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0539", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 7, 2, 51, 30, 622047), UUID('04bb81e5-7232-44ab-96b7-15b8d9f57b2f'))
2025-11-06 20:51:30,682 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 20:51:30,720 | INFO | app.logs.transcript | controller | session=bcb9df1e-49da-4b89-ae05-89a17536da3d | frequency=121.700 | intent=ground_taxi_clearance | phase=ground_departure_request | allow_response=False | text=
2025-11-06 20:51:30,724 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 20:56:34,623 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-06 20:56:34,624 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-06 20:56:34,631 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-06 20:56:34,632 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-06 20:56:34,640 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-06 20:56:34,641 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-06 20:56:34,645 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:56:34,646 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-06 20:56:34,648 | INFO | sqlalchemy.engine.Engine | [generated in 0.00124s] ()
2025-11-06 20:56:34,655 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 20:56:34,656 | INFO | sqlalchemy.engine.Engine | [generated in 0.00124s] ()
2025-11-06 20:56:34,664 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 20:56:34,665 | INFO | sqlalchemy.engine.Engine | [generated in 0.00130s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 20:56:34,693 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 20:56:34,695 | INFO | sqlalchemy.engine.Engine | [cached since 0.03073s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 20:56:34,700 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 20:56:34,701 | INFO | sqlalchemy.engine.Engine | [cached since 0.03731s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 20:56:34,705 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 20:56:34,706 | INFO | sqlalchemy.engine.Engine | [cached since 0.04237s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 20:56:34,711 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 20:56:34,712 | INFO | sqlalchemy.engine.Engine | [cached since 0.04858s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 20:56:34,717 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-06 20:56:34,718 | INFO | sqlalchemy.engine.Engine | [generated in 0.00134s] ('user_status', 'pg_catalog')
2025-11-06 20:56:34,727 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-06 20:56:34,727 | INFO | sqlalchemy.engine.Engine | [cached since 0.01107s ago] ('account_type', 'pg_catalog')
2025-11-06 20:56:34,731 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-06 20:56:34,732 | INFO | sqlalchemy.engine.Engine | [generated in 0.00084s] ()
2025-11-06 20:56:34,740 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-06 20:56:34,741 | INFO | sqlalchemy.engine.Engine | [generated in 0.00139s] ()
2025-11-06 20:56:34,762 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-06 20:56:34,765 | INFO | sqlalchemy.engine.Engine | [generated in 0.00185s] ()
2025-11-06 20:56:34,850 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 20:56:34,896 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-06 20:57:23,659 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 20:57:23,660 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-06 20:57:23,662 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-06 20:57:23,663 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:57:23,664 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-06 20:57:23,665 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-06 20:57:23,666 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:57:23,667 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 20:57:23,667 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-06 20:57:23,669 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 20:57:23,670 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 20:57:23,671 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-06 20:57:23,672 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-06 20:57:23,673 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:57:23,675 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-06 20:57:23,677 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-06 20:57:23,679 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:57:23,682 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 20:57:23,683 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:269]
2025-11-06 20:57:23,683 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 20:57:23,684 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 20:57:23,686 | DEBUG | python_multipart.multipart | Calling on_header_field with data[311:330]
2025-11-06 20:57:23,687 | DEBUG | python_multipart.multipart | Calling on_header_value with data[332:386]
2025-11-06 20:57:23,689 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:57:23,689 | DEBUG | python_multipart.multipart | Calling on_header_field with data[388:400]
2025-11-06 20:57:23,690 | DEBUG | python_multipart.multipart | Calling on_header_value with data[402:412]
2025-11-06 20:57:23,691 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:57:23,693 | DEBUG | python_multipart.multipart | Calling on_header_field with data[414:428]
2025-11-06 20:57:23,695 | DEBUG | python_multipart.multipart | Calling on_header_value with data[430:436]
2025-11-06 20:57:23,696 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:57:23,698 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 20:57:23,699 | DEBUG | python_multipart.multipart | Calling on_part_data with data[440:8192]
2025-11-06 20:57:23,782 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:57:23,786 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:57:23,788 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:57:23,951 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:57:23,953 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:57:24,098 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:57:24,100 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:57:24,101 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2919]
2025-11-06 20:57:24,103 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1]
2025-11-06 20:57:24,103 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:57:24,222 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:57:24,225 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:57:24,226 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:57:24,346 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:57:24,348 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:57:24,349 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:57:24,473 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:57:24,476 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:57:24,478 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:57:24,480 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:57:24,602 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:57:24,604 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:57:24,605 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:57:24,729 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:57:24,731 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:57:24,732 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:57:24,853 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:57:24,855 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:57:24,857 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:57:24,983 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:57:24,985 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:57:25,133 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:57:25,136 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:57:25,137 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:57:25,275 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:57:25,276 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:57:25,279 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 20:57:25,406 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:57:25,410 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:57:25,411 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:57:25,415 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:57:25,533 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:57:25,534 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:57:25,536 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:57:25,665 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:57:25,668 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:57:25,669 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 20:57:25,798 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:57:25,799 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:57:25,802 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:57:25,923 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:57:25,924 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:57:25,926 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 20:57:26,043 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:57:26,046 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:57:26,048 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:57:26,181 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:57:26,183 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:57:26,299 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:57:26,301 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:57:26,303 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:57:26,306 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:57:26,420 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:57:26,422 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:57:26,559 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:57:26,562 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:57:26,564 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:57:26,700 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:57:26,701 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:57:26,826 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:57:26,827 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:57:26,829 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:57:26,950 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:57:26,952 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:57:26,952 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:57:27,076 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:57:27,077 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:57:27,080 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:57:27,183 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:57:27,185 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:57:27,186 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2681]
2025-11-06 20:57:27,187 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 20:57:27,189 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-06 20:57:27,315 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:57:27,316 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 20:57:27,317 | INFO | sqlalchemy.engine.Engine | [cached since 52.66s ago] ()
2025-11-06 20:57:27,339 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 20:57:27,342 | INFO | sqlalchemy.engine.Engine | [generated in 0.00162s] (1,)
2025-11-06 20:57:27,427 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 20:57:27,429 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000142757E7350>}) about to wait for the following futures []
2025-11-06 20:57:27,430 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000142757E7350>}) done waiting for dependent futures
2025-11-06 20:57:27,432 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000142757E7350>}) with kwargs {'client': <botocore.client.S3 object at 0x00000142753C0590>, 'config': <boto3.s3.transfer.TransferConfig object at 0x0000014275BB8A90>, 'osutil': <s3transfer.utils.OSUtils object at 0x0000014275763790>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x0000014275BB8E90>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x00000142757E7350>}
2025-11-06 20:57:27,432 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/bcb9df1e-49da-4b89-ae05-89a17536da3d/ac45c6de115d48cf87496ad115a9a1ae.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x0000014275BB8E90> for transfer request: 0.
2025-11-06 20:57:27,433 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 20:57:27,435 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/bcb9df1e-49da-4b89-ae05-89a17536da3d/ac45c6de115d48cf87496ad115a9a1ae.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-06 20:57:27,435 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 20:57:27,436 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/bcb9df1e-49da-4b89-ae05-89a17536da3d/ac45c6de115d48cf87496ad115a9a1ae.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-06 20:57:27,437 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/bcb9df1e-49da-4b89-ae05-89a17536da3d/ac45c6de115d48cf87496ad115a9a1ae.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x00000142753C0590>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x0000014275BB9E10>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/bcb9df1e-49da-4b89-ae05-89a17536da3d/ac45c6de115d48cf87496ad115a9a1ae.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-06 20:57:28,232 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 20:57:40,057 | INFO | app.controllers.audio | Transcripción recibida session=bcb9df1e-49da-4b89-ae05-89a17536da3d: pava superficie Alfa Noviembre India en hangar 37 Solicitamos abrir plan de vuelo hacia zona Eco vía Paso Chomogo 7000 pies dos almas a bordo. Capitán Josué Solano Autonomía cinco horas y media.
2025-11-06 20:57:40,059 | INFO | app.logs.transcript | student | session=bcb9df1e-49da-4b89-ae05-89a17536da3d | frequency=121.700 | text=pava superficie Alfa Noviembre India en hangar 37 Solicitamos abrir plan de vuelo hacia zona Eco vía Paso Chomogo 7000 pies dos almas a bordo. Capitán Josué Solano Autonomía cinco horas y media.
2025-11-06 20:57:40,181 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:57:40,182 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 20:57:40,184 | INFO | sqlalchemy.engine.Engine | [generated in 0.00118s] (UUID('bcb9df1e-49da-4b89-ae05-89a17536da3d'),)
2025-11-06 20:57:40,202 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 20:57:40,495 | WARNING | app.services.audio_pipeline | Intent detector invocation failed: An error occurred (ValidationException) when calling the Converse operation: Invocation of model ID amazon.nova-premier-v1:0 with on-demand throughput isn’t supported. Retry your request with the ID or ARN of an inference profile that contains this model.
2025-11-06 20:57:40,653 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:57:40,654 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 20:57:40,655 | INFO | sqlalchemy.engine.Engine | [cached since 0.4717s ago] (UUID('bcb9df1e-49da-4b89-ae05-89a17536da3d'),)
2025-11-06 20:57:40,677 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 20:57:40,679 | INFO | sqlalchemy.engine.Engine | [generated in 0.00240s] ('{"meteo": {"qnh": "983", "vis": "3km", "wind": "040/4", "condition": "VMC", "windSpeed": "4", "windDirection": "040"}, "route": "MRPV-MRPV", "turns": ... (27264 characters truncated) ... nd": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0539", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 7, 2, 57, 40, 677740), UUID('04bb81e5-7232-44ab-96b7-15b8d9f57b2f'))
2025-11-06 20:57:40,696 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 20:57:40,722 | INFO | app.controllers.audio | Fase activa session=bcb9df1e-49da-4b89-ae05-89a17536da3d phase_id=ground_departure_request intent=ground_taxi_clearance freq=ground
2025-11-06 20:57:40,726 | INFO | app.services.audio_pipeline | Prompts generados intent=ground_taxi_clearance freq_group=ground
SYSTEM> Eres Pavas Superficie (121.7). Recibes la llamada inicial para abrir plan de vuelo y autorizar rodaje. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "metadata": object
 }.
Si necesitas proponer un cambio de fase, incluye en metadata la clave "nextPhase". No escribas texto adicional antes o después del JSON.
USER> Fase actual: Solicitud de apertura y autorización de rodaje
Intent esperado: ground_taxi_clearance
Transcripción textual del alumno:
pava superficie Alfa Noviembre India en hangar 37 Solicitamos abrir plan de vuelo hacia zona Eco vía Paso Chomogo 7000 pies dos almas a bordo. Capitán Josué Solano Autonomía cinco horas y media.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: ground
- Fase ID: ground_departure_request

Checklist alumno:
- Saludo correcto a Pavas Superficie.
- Indi...
2025-11-06 20:57:41,144 | ERROR | app.controllers.audio | Fallo en pipeline LLM
Traceback (most recent call last):
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\services\llm_client.py", line 102, in invoke
    result = await run_in_threadpool(_call)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\.venv\Lib\site-packages\starlette\concurrency.py", line 38, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2485, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 976, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\services\llm_client.py", line 87, in _call
    response = self._client.converse(
               ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\.venv\Lib\site-packages\botocore\client.py", line 602, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\.venv\Lib\site-packages\botocore\context.py", line 123, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\.venv\Lib\site-packages\botocore\client.py", line 1078, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.errorfactory.ValidationException: An error occurred (ValidationException) when calling the Converse operation: Invocation of model ID amazon.nova-premier-v1:0 with on-demand throughput isn’t supported. Retry your request with the ID or ARN of an inference profile that contains this model.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\controllers\audio.py", line 187, in analyze_audio
    llm_outcome = await call_conversation_llm(request)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\pipelines\audio\llm.py", line 26, in call_conversation_llm
    raw_response = await _LLM_CLIENT.invoke(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\services\llm_client.py", line 104, in invoke
    raise LlmInvocationError(str(exc)) from exc
app.services.llm_client.LlmInvocationError: An error occurred (ValidationException) when calling the Converse operation: Invocation of model ID amazon.nova-premier-v1:0 with on-demand throughput isn’t supported. Retry your request with the ID or ARN of an inference profile that contains this model.
2025-11-06 20:57:41,173 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 20:57:57,831 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 20:57:57,833 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-06 20:57:57,834 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-06 20:57:57,836 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:57:57,837 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-06 20:57:57,838 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-06 20:57:57,840 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:57:57,840 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 20:57:57,841 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-06 20:57:57,842 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 20:57:57,844 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 20:57:57,844 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-06 20:57:57,845 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-06 20:57:57,845 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:57:57,847 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-06 20:57:57,847 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-06 20:57:57,849 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:57:57,849 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 20:57:57,850 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:269]
2025-11-06 20:57:57,851 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 20:57:57,852 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 20:57:57,854 | DEBUG | python_multipart.multipart | Calling on_header_field with data[311:330]
2025-11-06 20:57:57,855 | DEBUG | python_multipart.multipart | Calling on_header_value with data[332:386]
2025-11-06 20:57:57,856 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:57:57,857 | DEBUG | python_multipart.multipart | Calling on_header_field with data[388:400]
2025-11-06 20:57:57,858 | DEBUG | python_multipart.multipart | Calling on_header_value with data[402:412]
2025-11-06 20:57:57,859 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:57:57,861 | DEBUG | python_multipart.multipart | Calling on_header_field with data[414:428]
2025-11-06 20:57:57,863 | DEBUG | python_multipart.multipart | Calling on_header_value with data[430:436]
2025-11-06 20:57:57,864 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 20:57:57,865 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 20:57:57,866 | DEBUG | python_multipart.multipart | Calling on_part_data with data[440:5840]
2025-11-06 20:57:57,867 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 20:57:58,024 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:57:58,033 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:57:58,037 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:57:58,199 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:57:58,203 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:57:58,208 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:57:58,399 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:57:58,406 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:57:58,577 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:57:58,584 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:57:58,592 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:57:58,783 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:57:58,786 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:57:58,789 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:57:59,033 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:57:59,036 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:57:59,037 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:57:59,176 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:57:59,178 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 20:57:59,318 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:57:59,320 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:57:59,322 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:57:59,324 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:57:59,447 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:57:59,449 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:57:59,451 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:57:59,583 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:57:59,585 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:57:59,586 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:57:59,735 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:57:59,738 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:57:59,740 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:57:59,741 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:57:59,865 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:57:59,866 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:57:59,869 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:58:00,009 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:58:00,011 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:58:00,013 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:58:00,150 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:58:00,152 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:58:00,155 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:58:00,306 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:58:00,310 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:58:00,312 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:58:00,436 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:58:00,437 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:58:00,439 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:58:00,441 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:58:00,556 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:58:00,557 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:58:00,560 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:58:00,743 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:58:00,745 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:58:00,747 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:58:00,942 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:58:00,945 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 20:58:01,095 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:58:01,097 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:58:01,098 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:58:01,100 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:58:01,246 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:58:01,247 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:58:01,376 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:58:01,377 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:58:01,378 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:58:01,500 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:58:01,503 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:58:01,505 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:58:01,631 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:58:01,632 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:58:01,634 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:58:01,748 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 20:58:01,751 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:58:01,752 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 20:58:01,871 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:58:01,874 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:58:01,876 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 20:58:01,976 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 20:58:01,977 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:58:01,978 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 20:58:01,981 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1221]
2025-11-06 20:58:01,982 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 20:58:01,984 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-06 20:58:02,124 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:58:02,126 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 20:58:02,128 | INFO | sqlalchemy.engine.Engine | [cached since 87.47s ago] ()
2025-11-06 20:58:02,138 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 20:58:02,140 | INFO | sqlalchemy.engine.Engine | [cached since 34.8s ago] (1,)
2025-11-06 20:58:02,247 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 20:58:02,249 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000014275C0B850>}) about to wait for the following futures []
2025-11-06 20:58:02,250 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000014275C0B850>}) done waiting for dependent futures
2025-11-06 20:58:02,250 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000014275C0B850>}) with kwargs {'client': <botocore.client.S3 object at 0x00000142753C0590>, 'config': <boto3.s3.transfer.TransferConfig object at 0x0000014275BC8B10>, 'osutil': <s3transfer.utils.OSUtils object at 0x0000014275BCB590>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x0000014275C1B7D0>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000014275C0B850>}
2025-11-06 20:58:02,253 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/bcb9df1e-49da-4b89-ae05-89a17536da3d/15840af520a64b218611a7320a162c5c.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x0000014275C1B7D0> for transfer request: 0.
2025-11-06 20:58:02,254 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 20:58:02,255 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/bcb9df1e-49da-4b89-ae05-89a17536da3d/15840af520a64b218611a7320a162c5c.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-06 20:58:02,255 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 20:58:02,256 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/bcb9df1e-49da-4b89-ae05-89a17536da3d/15840af520a64b218611a7320a162c5c.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-06 20:58:02,259 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/bcb9df1e-49da-4b89-ae05-89a17536da3d/15840af520a64b218611a7320a162c5c.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x00000142753C0590>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x0000014275C0AA90>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/bcb9df1e-49da-4b89-ae05-89a17536da3d/15840af520a64b218611a7320a162c5c.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-06 20:58:02,457 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 20:58:13,796 | INFO | app.controllers.audio | Transcripción recibida session=bcb9df1e-49da-4b89-ae05-89a17536da3d: pava superficie Alfa Noviembre India en hangar 37 Solicitamos abrir plan de vuelo hacia zona Eco vía Paso Chomogo 7000 pies dos almas a bordo. Capitán Josué Solano Autonomía cinco horas y media.
2025-11-06 20:58:13,797 | INFO | app.logs.transcript | student | session=bcb9df1e-49da-4b89-ae05-89a17536da3d | frequency=121.700 | text=pava superficie Alfa Noviembre India en hangar 37 Solicitamos abrir plan de vuelo hacia zona Eco vía Paso Chomogo 7000 pies dos almas a bordo. Capitán Josué Solano Autonomía cinco horas y media.
2025-11-06 20:58:13,980 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:58:13,981 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 20:58:13,982 | INFO | sqlalchemy.engine.Engine | [cached since 33.8s ago] (UUID('bcb9df1e-49da-4b89-ae05-89a17536da3d'),)
2025-11-06 20:58:13,998 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 20:58:14,121 | WARNING | app.services.audio_pipeline | Intent detector invocation failed: An error occurred (ValidationException) when calling the Converse operation: Invocation of model ID amazon.nova-premier-v1:0 with on-demand throughput isn’t supported. Retry your request with the ID or ARN of an inference profile that contains this model.
2025-11-06 20:58:14,245 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:58:14,246 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 20:58:14,247 | INFO | sqlalchemy.engine.Engine | [cached since 34.06s ago] (UUID('bcb9df1e-49da-4b89-ae05-89a17536da3d'),)
2025-11-06 20:58:14,260 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 20:58:14,261 | INFO | sqlalchemy.engine.Engine | [cached since 33.58s ago] ('{"meteo": {"qnh": "983", "vis": "3km", "wind": "040/4", "condition": "VMC", "windSpeed": "4", "windDirection": "040"}, "route": "MRPV-MRPV", "turns": ... (27716 characters truncated) ... nd": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0539", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 7, 2, 58, 14, 260864), UUID('04bb81e5-7232-44ab-96b7-15b8d9f57b2f'))
2025-11-06 20:58:14,276 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 20:58:14,304 | INFO | app.controllers.audio | Fase activa session=bcb9df1e-49da-4b89-ae05-89a17536da3d phase_id=ground_departure_request intent=ground_taxi_clearance freq=ground
2025-11-06 20:58:14,308 | INFO | app.services.audio_pipeline | Prompts generados intent=ground_taxi_clearance freq_group=ground
SYSTEM> Eres Pavas Superficie (121.7). Recibes la llamada inicial para abrir plan de vuelo y autorizar rodaje. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "metadata": object
 }.
Si necesitas proponer un cambio de fase, incluye en metadata la clave "nextPhase". No escribas texto adicional antes o después del JSON.
USER> Fase actual: Solicitud de apertura y autorización de rodaje
Intent esperado: ground_taxi_clearance
Transcripción textual del alumno:
pava superficie Alfa Noviembre India en hangar 37 Solicitamos abrir plan de vuelo hacia zona Eco vía Paso Chomogo 7000 pies dos almas a bordo. Capitán Josué Solano Autonomía cinco horas y media.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: ground
- Fase ID: ground_departure_request

Checklist alumno:
- Saludo correcto a Pavas Superficie.
- Indi...
2025-11-06 20:58:14,408 | ERROR | app.controllers.audio | Fallo en pipeline LLM
Traceback (most recent call last):
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\services\llm_client.py", line 102, in invoke
    result = await run_in_threadpool(_call)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\.venv\Lib\site-packages\starlette\concurrency.py", line 38, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2485, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 976, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\services\llm_client.py", line 87, in _call
    response = self._client.converse(
               ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\.venv\Lib\site-packages\botocore\client.py", line 602, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\.venv\Lib\site-packages\botocore\context.py", line 123, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\.venv\Lib\site-packages\botocore\client.py", line 1078, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.errorfactory.ValidationException: An error occurred (ValidationException) when calling the Converse operation: Invocation of model ID amazon.nova-premier-v1:0 with on-demand throughput isn’t supported. Retry your request with the ID or ARN of an inference profile that contains this model.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\controllers\audio.py", line 187, in analyze_audio
    llm_outcome = await call_conversation_llm(request)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\pipelines\audio\llm.py", line 26, in call_conversation_llm
    raw_response = await _LLM_CLIENT.invoke(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\services\llm_client.py", line 104, in invoke
    raise LlmInvocationError(str(exc)) from exc
app.services.llm_client.LlmInvocationError: An error occurred (ValidationException) when calling the Converse operation: Invocation of model ID amazon.nova-premier-v1:0 with on-demand throughput isn’t supported. Retry your request with the ID or ARN of an inference profile that contains this model.
2025-11-06 20:58:14,411 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 20:59:17,032 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:59:17,034 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 20:59:17,035 | INFO | sqlalchemy.engine.Engine | [cached since 162.4s ago] ()
2025-11-06 20:59:17,054 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.email = $1::VARCHAR
2025-11-06 20:59:17,055 | INFO | sqlalchemy.engine.Engine | [generated in 0.00118s] ('josuelu3@gmail.com',)
2025-11-06 20:59:17,233 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 20:59:19,534 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:59:19,535 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 20:59:19,536 | INFO | sqlalchemy.engine.Engine | [cached since 164.9s ago] ()
2025-11-06 20:59:19,542 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 20:59:19,543 | INFO | sqlalchemy.engine.Engine | [cached since 112.2s ago] (1,)
2025-11-06 20:59:19,622 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 20:59:19,623 | INFO | sqlalchemy.engine.Engine | [cached since 112.3s ago] (1,)
2025-11-06 20:59:19,626 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 20:59:45,130 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:59:45,131 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 20:59:45,132 | INFO | sqlalchemy.engine.Engine | [cached since 190.5s ago] ()
2025-11-06 20:59:45,140 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 20:59:45,141 | INFO | sqlalchemy.engine.Engine | [cached since 137.8s ago] (1,)
2025-11-06 20:59:45,235 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.training_contexts (id, training_session_id, user_id, context) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::JSONB) RETURNING ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at
2025-11-06 20:59:45,236 | INFO | sqlalchemy.engine.Engine | [generated in 0.00097s] (UUID('22516074-7c5c-4174-813f-4e3aefd15d86'), UUID('b7b8d701-528a-4e3e-899d-f72cffdf41a3'), 1, '{"route": "MRPV-MRPV", "meteo": {"condition": "VMC", "vis": "1km", "qnh": "984", "windDirection": "040", "windSpeed": "3", "wind": "040/3"}, "scenario_id": "mrpv_full_flight"}')
2025-11-06 20:59:45,242 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 20:59:45,407 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 20:59:45,410 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.id = $1::UUID
2025-11-06 20:59:45,411 | INFO | sqlalchemy.engine.Engine | [generated in 0.00127s] (UUID('22516074-7c5c-4174-813f-4e3aefd15d86'),)
2025-11-06 20:59:45,427 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 21:00:34,461 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-06 21:00:34,462 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-06 21:00:34,469 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-06 21:00:34,469 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-06 21:00:34,477 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-06 21:00:34,478 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-06 21:00:34,484 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 21:00:34,486 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-06 21:00:34,486 | INFO | sqlalchemy.engine.Engine | [generated in 0.00102s] ()
2025-11-06 21:00:34,492 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 21:00:34,493 | INFO | sqlalchemy.engine.Engine | [generated in 0.00102s] ()
2025-11-06 21:00:34,500 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 21:00:34,503 | INFO | sqlalchemy.engine.Engine | [generated in 0.00236s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 21:00:34,525 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 21:00:34,526 | INFO | sqlalchemy.engine.Engine | [cached since 0.02528s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 21:00:34,529 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 21:00:34,530 | INFO | sqlalchemy.engine.Engine | [cached since 0.02924s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 21:00:34,534 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 21:00:34,535 | INFO | sqlalchemy.engine.Engine | [cached since 0.03417s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 21:00:34,538 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 21:00:34,539 | INFO | sqlalchemy.engine.Engine | [cached since 0.03843s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 21:00:34,544 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-06 21:00:34,546 | INFO | sqlalchemy.engine.Engine | [generated in 0.00167s] ('user_status', 'pg_catalog')
2025-11-06 21:00:34,552 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-06 21:00:34,554 | INFO | sqlalchemy.engine.Engine | [cached since 0.009634s ago] ('account_type', 'pg_catalog')
2025-11-06 21:00:34,556 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-06 21:00:34,557 | INFO | sqlalchemy.engine.Engine | [generated in 0.00062s] ()
2025-11-06 21:00:34,562 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-06 21:00:34,564 | INFO | sqlalchemy.engine.Engine | [generated in 0.00120s] ()
2025-11-06 21:00:34,584 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-06 21:00:34,587 | INFO | sqlalchemy.engine.Engine | [generated in 0.00221s] ()
2025-11-06 21:00:34,647 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 21:00:34,683 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-06 21:00:41,482 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-06 21:00:41,483 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-06 21:00:41,492 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-06 21:00:41,493 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-06 21:00:41,503 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-06 21:00:41,504 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-06 21:00:41,510 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 21:00:41,512 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-06 21:00:41,512 | INFO | sqlalchemy.engine.Engine | [generated in 0.00137s] ()
2025-11-06 21:00:41,524 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 21:00:41,525 | INFO | sqlalchemy.engine.Engine | [generated in 0.00192s] ()
2025-11-06 21:00:41,538 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 21:00:41,539 | INFO | sqlalchemy.engine.Engine | [generated in 0.00150s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 21:00:41,562 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 21:00:41,564 | INFO | sqlalchemy.engine.Engine | [cached since 0.02642s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 21:00:41,568 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 21:00:41,570 | INFO | sqlalchemy.engine.Engine | [cached since 0.03239s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 21:00:41,574 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 21:00:41,576 | INFO | sqlalchemy.engine.Engine | [cached since 0.03892s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 21:00:41,581 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 21:00:41,582 | INFO | sqlalchemy.engine.Engine | [cached since 0.04476s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 21:00:41,589 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-06 21:00:41,590 | INFO | sqlalchemy.engine.Engine | [generated in 0.00138s] ('user_status', 'pg_catalog')
2025-11-06 21:00:41,598 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-06 21:00:41,600 | INFO | sqlalchemy.engine.Engine | [cached since 0.01064s ago] ('account_type', 'pg_catalog')
2025-11-06 21:00:41,608 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-06 21:00:41,612 | INFO | sqlalchemy.engine.Engine | [generated in 0.00315s] ()
2025-11-06 21:00:41,620 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-06 21:00:41,622 | INFO | sqlalchemy.engine.Engine | [generated in 0.00143s] ()
2025-11-06 21:00:41,645 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-06 21:00:41,648 | INFO | sqlalchemy.engine.Engine | [generated in 0.00233s] ()
2025-11-06 21:00:41,726 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 21:00:41,754 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-06 21:01:25,848 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 21:01:25,849 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-06 21:01:25,851 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-06 21:01:25,851 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 21:01:25,852 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-06 21:01:25,853 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-06 21:01:25,855 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 21:01:25,856 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 21:01:25,857 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-06 21:01:25,858 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 21:01:25,859 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 21:01:25,860 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-06 21:01:25,862 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-06 21:01:25,863 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 21:01:25,865 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-06 21:01:25,866 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-06 21:01:25,868 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 21:01:25,869 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 21:01:25,870 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:269]
2025-11-06 21:01:25,871 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 21:01:25,872 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 21:01:25,873 | DEBUG | python_multipart.multipart | Calling on_header_field with data[311:330]
2025-11-06 21:01:25,873 | DEBUG | python_multipart.multipart | Calling on_header_value with data[332:386]
2025-11-06 21:01:25,874 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 21:01:25,875 | DEBUG | python_multipart.multipart | Calling on_header_field with data[388:400]
2025-11-06 21:01:25,875 | DEBUG | python_multipart.multipart | Calling on_header_value with data[402:412]
2025-11-06 21:01:25,877 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 21:01:25,878 | DEBUG | python_multipart.multipart | Calling on_header_field with data[414:428]
2025-11-06 21:01:25,879 | DEBUG | python_multipart.multipart | Calling on_header_value with data[430:436]
2025-11-06 21:01:25,880 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 21:01:25,880 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 21:01:25,881 | DEBUG | python_multipart.multipart | Calling on_part_data with data[440:8192]
2025-11-06 21:01:25,982 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:01:25,986 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:01:25,989 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:01:26,150 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:01:26,152 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:01:26,154 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:01:26,287 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:01:26,288 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:01:26,290 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:01:26,421 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:01:26,423 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:01:26,425 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:01:26,426 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 21:01:26,574 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:01:26,576 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 21:01:26,577 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 21:01:26,727 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:01:26,729 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:01:26,731 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:01:26,870 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:01:26,872 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:01:26,874 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:01:26,876 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 21:01:27,000 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 21:01:27,001 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:01:27,129 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:01:27,131 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 21:01:27,267 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:01:27,269 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:01:27,272 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:01:27,275 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 21:01:27,401 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 21:01:27,403 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:01:27,406 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:01:27,409 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 21:01:27,543 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 21:01:27,545 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:01:27,677 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:01:27,679 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:01:27,681 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:01:27,814 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:01:27,816 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:01:27,817 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:01:27,982 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:01:27,984 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:01:27,986 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 21:01:27,989 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 21:01:28,121 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:01:28,127 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:01:28,131 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:01:28,307 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:01:28,312 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:01:28,314 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:01:28,501 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 21:01:28,509 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:01:28,684 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:01:28,689 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:01:28,692 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:01:28,913 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:01:28,915 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:01:28,917 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:01:29,104 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:01:29,106 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:01:29,110 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:01:29,233 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 21:01:29,235 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:01:29,358 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:01:29,359 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:01:29,361 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:01:29,492 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 21:01:29,495 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:01:29,623 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:01:29,625 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:01:29,626 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 21:01:29,658 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1965]
2025-11-06 21:01:29,661 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 21:01:29,661 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-06 21:01:29,785 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 21:01:29,786 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 21:01:29,787 | INFO | sqlalchemy.engine.Engine | [cached since 48.26s ago] ()
2025-11-06 21:01:29,811 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 21:01:29,812 | INFO | sqlalchemy.engine.Engine | [generated in 0.00104s] (1,)
2025-11-06 21:01:29,906 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 21:01:29,908 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000020735EA93D0>}) about to wait for the following futures []
2025-11-06 21:01:29,909 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000020735EA93D0>}) done waiting for dependent futures
2025-11-06 21:01:29,911 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000020735EA93D0>}) with kwargs {'client': <botocore.client.S3 object at 0x00000207356B1310>, 'config': <boto3.s3.transfer.TransferConfig object at 0x0000020735EA86D0>, 'osutil': <s3transfer.utils.OSUtils object at 0x0000020735EA8690>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x0000020735EA89D0>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000020735EA93D0>}
2025-11-06 21:01:29,913 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/b7b8d701-528a-4e3e-899d-f72cffdf41a3/9f57dfebe80842e9ace7335d1ebcb224.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x0000020735EA89D0> for transfer request: 0.
2025-11-06 21:01:29,914 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 21:01:29,916 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/b7b8d701-528a-4e3e-899d-f72cffdf41a3/9f57dfebe80842e9ace7335d1ebcb224.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-06 21:01:29,917 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 21:01:29,920 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/b7b8d701-528a-4e3e-899d-f72cffdf41a3/9f57dfebe80842e9ace7335d1ebcb224.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-06 21:01:29,923 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/b7b8d701-528a-4e3e-899d-f72cffdf41a3/9f57dfebe80842e9ace7335d1ebcb224.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x00000207356B1310>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002077FD58490>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/b7b8d701-528a-4e3e-899d-f72cffdf41a3/9f57dfebe80842e9ace7335d1ebcb224.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-06 21:01:30,699 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 21:01:42,753 | INFO | app.controllers.audio | Transcripción recibida session=b7b8d701-528a-4e3e-899d-f72cffdf41a3: pa superficie Alfa Noviembre India en hangar 37 Solicitamos abrir plan de vuelo hacia zona Eco. vía Paso Chomogo 7000 pies dos almas a bordo. Capitán Josué Solano, Autonomía cinco horas y media.
2025-11-06 21:01:42,754 | INFO | app.logs.transcript | student | session=b7b8d701-528a-4e3e-899d-f72cffdf41a3 | frequency=121.700 | text=pa superficie Alfa Noviembre India en hangar 37 Solicitamos abrir plan de vuelo hacia zona Eco. vía Paso Chomogo 7000 pies dos almas a bordo. Capitán Josué Solano, Autonomía cinco horas y media.
2025-11-06 21:01:42,927 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 21:01:42,930 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 21:01:42,932 | INFO | sqlalchemy.engine.Engine | [generated in 0.00136s] (UUID('b7b8d701-528a-4e3e-899d-f72cffdf41a3'),)
2025-11-06 21:01:42,951 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 21:01:43,616 | WARNING | app.services.audio_pipeline | Intent detector invalid JSON: ValidationError.from_exception_data() got an unexpected keyword argument 'excs' raw=```json
{
    "intent": "tower_takeoff_clearance",
    "confidence": 0.95,
    "frequencyGroup": "tower"
}
```
2025-11-06 21:01:43,751 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 21:01:43,752 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 21:01:43,754 | INFO | sqlalchemy.engine.Engine | [cached since 0.8231s ago] (UUID('b7b8d701-528a-4e3e-899d-f72cffdf41a3'),)
2025-11-06 21:01:43,777 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 21:01:43,781 | INFO | sqlalchemy.engine.Engine | [generated in 0.00339s] ('{"meteo": {"qnh": "984", "vis": "1km", "wind": "040/3", "condition": "VMC", "windSpeed": "3", "windDirection": "040"}, "route": "MRPV-MRPV", "scenari ... (18393 characters truncated) ... : "1km", "wind": "040/3", "condition": "VMC", "windSpeed": "3", "windDirection": "040"}, "route": "MRPV-MRPV", "timestamp": "2025-11-07T03:01:43Z"}]}', datetime.datetime(2025, 11, 7, 3, 1, 43, 776902), UUID('22516074-7c5c-4174-813f-4e3aefd15d86'))
2025-11-06 21:01:43,803 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 21:01:43,836 | INFO | app.controllers.audio | Fase activa session=b7b8d701-528a-4e3e-899d-f72cffdf41a3 phase_id=ground_departure_request intent=ground_taxi_clearance freq=ground
2025-11-06 21:01:43,840 | INFO | app.services.audio_pipeline | Prompts generados intent=ground_taxi_clearance freq_group=ground
SYSTEM> Eres Pavas Superficie (121.7). Recibes la llamada inicial para abrir plan de vuelo y autorizar rodaje. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "metadata": object
 }.
Si necesitas proponer un cambio de fase, incluye en metadata la clave "nextPhase". No escribas texto adicional antes o después del JSON.
USER> Fase actual: Solicitud de apertura y autorización de rodaje
Intent esperado: ground_taxi_clearance
Transcripción textual del alumno:
pa superficie Alfa Noviembre India en hangar 37 Solicitamos abrir plan de vuelo hacia zona Eco. vía Paso Chomogo 7000 pies dos almas a bordo. Capitán Josué Solano, Autonomía cinco horas y media.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: ground
- Fase ID: ground_departure_request

Checklist alumno:
- Saludo correcto a Pavas Superficie.
- Indi...
2025-11-06 21:01:45,782 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=ground_taxi_clearance: {
  "intent": "ground_taxi_clearance",
  "allowResponse": true,
  "controllerText": "Alfa Noviembre India, Pavas Superficie. En contacto. Alfa Noviembre India, rodar a punto de espera vía Alfa 3, Alfa. Mantenga frecuencia. Contacte Torre en 118.3 cuando esté listo.",
  "feedback": "Solicitud completa.",
  "confidence": 0.95,
  "metadata": {
    "nextPhase": "ground_readback"
  }
}
2025-11-06 21:01:45,782 | INFO | app.controllers.audio | Transición automática de fase session=b7b8d701-528a-4e3e-899d-f72cffdf41a3 de=ground_departure_request a=ground_readback
2025-11-06 21:01:45,925 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 21:01:45,926 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 21:01:45,927 | INFO | sqlalchemy.engine.Engine | [cached since 2.997s ago] (UUID('b7b8d701-528a-4e3e-899d-f72cffdf41a3'),)
2025-11-06 21:01:45,942 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 21:01:45,944 | INFO | sqlalchemy.engine.Engine | [cached since 2.167s ago] ('{"meteo": {"qnh": "984", "vis": "1km", "wind": "040/3", "condition": "VMC", "windSpeed": "3", "windDirection": "040"}, "route": "MRPV-MRPV", "turns": ... (19275 characters truncated) ... roach": "120.5", "radio": "126.8", "unicom": "122.0"}, "scenario_id": "mrpv_full_flight", "transponder": "0572", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 7, 3, 1, 45, 942780), UUID('22516074-7c5c-4174-813f-4e3aefd15d86'))
2025-11-06 21:01:45,959 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 21:01:45,982 | INFO | app.logs.transcript | controller | session=b7b8d701-528a-4e3e-899d-f72cffdf41a3 | frequency=121.700 | intent=ground_taxi_clearance | phase=ground_readback | allow_response=True | text=Alfa Noviembre India, Pavas Superficie. En contacto. Alfa Noviembre India, rodar a punto de espera vía Alfa 3, Alfa. Mantenga frecuencia. Contacte Torre en 118.3 cuando esté listo.
2025-11-06 21:01:47,631 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 21:06:24,055 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-06 21:06:24,056 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-06 21:06:24,063 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-06 21:06:24,065 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-06 21:06:24,074 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-06 21:06:24,075 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-06 21:06:24,080 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 21:06:24,082 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-06 21:06:24,084 | INFO | sqlalchemy.engine.Engine | [generated in 0.00133s] ()
2025-11-06 21:06:24,092 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 21:06:24,093 | INFO | sqlalchemy.engine.Engine | [generated in 0.00126s] ()
2025-11-06 21:06:24,102 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 21:06:24,103 | INFO | sqlalchemy.engine.Engine | [generated in 0.00117s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 21:06:24,121 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 21:06:24,122 | INFO | sqlalchemy.engine.Engine | [cached since 0.02059s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 21:06:24,126 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 21:06:24,126 | INFO | sqlalchemy.engine.Engine | [cached since 0.02469s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 21:06:24,129 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 21:06:24,130 | INFO | sqlalchemy.engine.Engine | [cached since 0.02841s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 21:06:24,134 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 21:06:24,136 | INFO | sqlalchemy.engine.Engine | [cached since 0.03427s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 21:06:24,142 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-06 21:06:24,142 | INFO | sqlalchemy.engine.Engine | [generated in 0.00093s] ('user_status', 'pg_catalog')
2025-11-06 21:06:24,148 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-06 21:06:24,149 | INFO | sqlalchemy.engine.Engine | [cached since 0.00777s ago] ('account_type', 'pg_catalog')
2025-11-06 21:06:24,152 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-06 21:06:24,154 | INFO | sqlalchemy.engine.Engine | [generated in 0.00115s] ()
2025-11-06 21:06:24,160 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-06 21:06:24,162 | INFO | sqlalchemy.engine.Engine | [generated in 0.00146s] ()
2025-11-06 21:06:24,185 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-06 21:06:24,186 | INFO | sqlalchemy.engine.Engine | [generated in 0.00159s] ()
2025-11-06 21:06:24,244 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 21:06:24,285 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-06 21:06:34,079 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-06 21:06:34,080 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-06 21:06:34,090 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-06 21:06:34,091 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-06 21:06:34,098 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-06 21:06:34,099 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-06 21:06:34,105 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 21:06:34,107 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-06 21:06:34,109 | INFO | sqlalchemy.engine.Engine | [generated in 0.00221s] ()
2025-11-06 21:06:34,115 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 21:06:34,116 | INFO | sqlalchemy.engine.Engine | [generated in 0.00078s] ()
2025-11-06 21:06:34,125 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 21:06:34,126 | INFO | sqlalchemy.engine.Engine | [generated in 0.00128s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 21:06:34,152 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 21:06:34,154 | INFO | sqlalchemy.engine.Engine | [cached since 0.02905s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 21:06:34,160 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 21:06:34,160 | INFO | sqlalchemy.engine.Engine | [cached since 0.0367s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 21:06:34,169 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 21:06:34,171 | INFO | sqlalchemy.engine.Engine | [cached since 0.04639s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 21:06:34,175 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 21:06:34,176 | INFO | sqlalchemy.engine.Engine | [cached since 0.05179s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 21:06:34,181 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-06 21:06:34,182 | INFO | sqlalchemy.engine.Engine | [generated in 0.00118s] ('user_status', 'pg_catalog')
2025-11-06 21:06:34,190 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-06 21:06:34,191 | INFO | sqlalchemy.engine.Engine | [cached since 0.009755s ago] ('account_type', 'pg_catalog')
2025-11-06 21:06:34,197 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-06 21:06:34,199 | INFO | sqlalchemy.engine.Engine | [generated in 0.00202s] ()
2025-11-06 21:06:34,207 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-06 21:06:34,208 | INFO | sqlalchemy.engine.Engine | [generated in 0.00139s] ()
2025-11-06 21:06:34,232 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-06 21:06:34,238 | INFO | sqlalchemy.engine.Engine | [generated in 0.00622s] ()
2025-11-06 21:06:34,307 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 21:06:34,361 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-06 21:06:50,639 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 21:06:50,640 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 21:06:50,642 | INFO | sqlalchemy.engine.Engine | [cached since 16.53s ago] ()
2025-11-06 21:06:50,676 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.email = $1::VARCHAR
2025-11-06 21:06:50,678 | INFO | sqlalchemy.engine.Engine | [generated in 0.00214s] ('josuelu3@gmail.com',)
2025-11-06 21:06:50,830 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 21:07:20,884 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 21:07:20,885 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 21:07:20,886 | INFO | sqlalchemy.engine.Engine | [cached since 46.77s ago] ()
2025-11-06 21:07:20,895 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 21:07:20,896 | INFO | sqlalchemy.engine.Engine | [generated in 0.00119s] (1,)
2025-11-06 21:07:20,998 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.training_contexts (id, training_session_id, user_id, context) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::JSONB) RETURNING ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at
2025-11-06 21:07:20,999 | INFO | sqlalchemy.engine.Engine | [generated in 0.00212s] (UUID('56ff3a80-271a-4335-a786-0630f5d06ad4'), UUID('1759f49c-4c68-4354-b601-11691d5ec633'), 1, '{"route": "MRPV-MRPV", "meteo": {"condition": "IMC", "vis": "10km", "qnh": "983", "windDirection": "030", "windSpeed": "3", "wind": "030/3"}, "scenario_id": "mrpv_full_flight"}')
2025-11-06 21:07:21,010 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 21:07:21,182 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 21:07:21,185 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.id = $1::UUID
2025-11-06 21:07:21,186 | INFO | sqlalchemy.engine.Engine | [generated in 0.00099s] (UUID('56ff3a80-271a-4335-a786-0630f5d06ad4'),)
2025-11-06 21:07:21,200 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 21:08:25,761 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 21:08:25,762 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-06 21:08:25,762 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-06 21:08:25,765 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 21:08:25,766 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-06 21:08:25,767 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-06 21:08:25,768 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 21:08:25,769 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 21:08:25,771 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-06 21:08:25,774 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 21:08:25,776 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 21:08:25,780 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-06 21:08:25,782 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-06 21:08:25,784 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 21:08:25,786 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-06 21:08:25,800 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-06 21:08:25,811 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 21:08:25,816 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 21:08:25,830 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:269]
2025-11-06 21:08:25,834 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 21:08:25,836 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 21:08:25,840 | DEBUG | python_multipart.multipart | Calling on_header_field with data[311:330]
2025-11-06 21:08:25,841 | DEBUG | python_multipart.multipart | Calling on_header_value with data[332:386]
2025-11-06 21:08:25,844 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 21:08:25,846 | DEBUG | python_multipart.multipart | Calling on_header_field with data[388:400]
2025-11-06 21:08:25,846 | DEBUG | python_multipart.multipart | Calling on_header_value with data[402:412]
2025-11-06 21:08:25,856 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 21:08:25,858 | DEBUG | python_multipart.multipart | Calling on_header_field with data[414:428]
2025-11-06 21:08:25,860 | DEBUG | python_multipart.multipart | Calling on_header_value with data[430:436]
2025-11-06 21:08:25,861 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 21:08:25,862 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 21:08:25,863 | DEBUG | python_multipart.multipart | Calling on_part_data with data[440:5840]
2025-11-06 21:08:25,866 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 21:08:25,949 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:08:25,950 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:08:25,953 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:08:26,082 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 21:08:26,085 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:08:26,087 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 21:08:26,225 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:08:26,227 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:08:26,229 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:08:26,366 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:08:26,367 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:08:26,369 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 21:08:26,531 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:08:26,533 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:08:26,534 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:08:26,672 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:08:26,675 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:08:26,678 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:08:26,680 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 21:08:26,836 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:08:26,837 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:08:26,840 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:08:26,843 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 21:08:27,009 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:08:27,011 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:08:27,014 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:08:27,180 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 21:08:27,182 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:08:27,320 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:08:27,321 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:08:27,322 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 21:08:27,463 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:08:27,465 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:08:27,467 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:08:27,631 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:08:27,633 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:08:27,636 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:08:27,823 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:08:27,827 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:08:27,831 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 21:08:27,979 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 21:08:27,981 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:08:28,108 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 21:08:28,110 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:08:28,245 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:08:28,247 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:08:28,249 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:08:28,394 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:08:28,398 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:08:28,400 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:08:28,586 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:08:28,600 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:08:28,612 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:08:28,792 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:08:28,797 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:08:28,800 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:08:28,988 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:08:28,995 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 21:08:29,206 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:08:29,208 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:08:29,211 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:08:29,409 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 21:08:29,411 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:08:29,413 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 21:08:29,549 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 21:08:29,551 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:08:29,698 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:08:29,700 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 21:08:29,725 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:786]
2025-11-06 21:08:29,726 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 21:08:29,726 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-06 21:08:29,859 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 21:08:29,860 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 21:08:29,862 | INFO | sqlalchemy.engine.Engine | [cached since 115.7s ago] ()
2025-11-06 21:08:29,868 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 21:08:29,869 | INFO | sqlalchemy.engine.Engine | [cached since 68.97s ago] (1,)
2025-11-06 21:08:29,969 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 21:08:29,971 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002484F6FA590>}) about to wait for the following futures []
2025-11-06 21:08:29,972 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002484F6FA590>}) done waiting for dependent futures
2025-11-06 21:08:29,973 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002484F6FA590>}) with kwargs {'client': <botocore.client.S3 object at 0x000002484EDC1C10>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002484F6F9850>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002484F6F9810>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002484F6F9B90>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x000002484F6FA590>}
2025-11-06 21:08:29,974 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/1759f49c-4c68-4354-b601-11691d5ec633/323b0a6f50634502994d3f494979d15d.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002484F6F9B90> for transfer request: 0.
2025-11-06 21:08:29,975 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 21:08:29,976 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/1759f49c-4c68-4354-b601-11691d5ec633/323b0a6f50634502994d3f494979d15d.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-06 21:08:29,976 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 21:08:29,977 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/1759f49c-4c68-4354-b601-11691d5ec633/323b0a6f50634502994d3f494979d15d.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-06 21:08:29,979 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/1759f49c-4c68-4354-b601-11691d5ec633/323b0a6f50634502994d3f494979d15d.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x000002484EDC1C10>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002484F6FAA10>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/1759f49c-4c68-4354-b601-11691d5ec633/323b0a6f50634502994d3f494979d15d.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-06 21:08:30,795 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 21:08:42,560 | INFO | app.controllers.audio | Transcripción recibida session=1759f49c-4c68-4354-b601-11691d5ec633: pa superficie Alfa Noviembre India en hangar 37 Solicitamos abrir plan de vuelo hacia zona Eco vía Paso Chomogo 7000 pies dos almas a bordo. Capitán Josué Solano Autonomía cinco horas y media.
2025-11-06 21:08:42,561 | INFO | app.logs.transcript | student | session=1759f49c-4c68-4354-b601-11691d5ec633 | frequency=121.700 | text=pa superficie Alfa Noviembre India en hangar 37 Solicitamos abrir plan de vuelo hacia zona Eco vía Paso Chomogo 7000 pies dos almas a bordo. Capitán Josué Solano Autonomía cinco horas y media.
2025-11-06 21:08:42,691 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 21:08:42,692 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 21:08:42,694 | INFO | sqlalchemy.engine.Engine | [generated in 0.00105s] (UUID('1759f49c-4c68-4354-b601-11691d5ec633'),)
2025-11-06 21:08:42,706 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 21:08:43,319 | WARNING | app.services.audio_pipeline | Intent detector invalid JSON: ValidationError.from_exception_data() got an unexpected keyword argument 'excs' raw=```json
{
  "intent": "tower_takeoff_clearance",
  "confidence": 0.95,
  "frequencyGroup": "tower"
}
```
2025-11-06 21:08:43,442 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 21:08:43,443 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 21:08:43,444 | INFO | sqlalchemy.engine.Engine | [cached since 0.7513s ago] (UUID('1759f49c-4c68-4354-b601-11691d5ec633'),)
2025-11-06 21:08:43,457 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 21:08:43,459 | INFO | sqlalchemy.engine.Engine | [generated in 0.00172s] ('{"meteo": {"qnh": "983", "vis": "10km", "wind": "030/3", "condition": "IMC", "windSpeed": "3", "windDirection": "030"}, "route": "MRPV-MRPV", "scenar ... (18373 characters truncated) ...  "10km", "wind": "030/3", "condition": "IMC", "windSpeed": "3", "windDirection": "030"}, "route": "MRPV-MRPV", "timestamp": "2025-11-07T03:08:43Z"}]}', datetime.datetime(2025, 11, 7, 3, 8, 43, 457065), UUID('56ff3a80-271a-4335-a786-0630f5d06ad4'))
2025-11-06 21:08:43,471 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 21:08:43,507 | INFO | app.controllers.audio | Fase activa session=1759f49c-4c68-4354-b601-11691d5ec633 phase_id=ground_departure_request intent=ground_taxi_clearance freq=ground
2025-11-06 21:08:43,510 | INFO | app.services.audio_pipeline | Prompts generados intent=ground_taxi_clearance freq_group=ground
SYSTEM> Eres Pavas Superficie (121.7). Recibes la llamada inicial para abrir plan de vuelo y autorizar rodaje. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "metadata": object
 }.
Si necesitas proponer un cambio de fase, incluye en metadata la clave "nextPhase". No escribas texto adicional antes o después del JSON.
USER> Fase actual: Solicitud de apertura y autorización de rodaje
Intent esperado: ground_taxi_clearance
Transcripción textual del alumno:
pa superficie Alfa Noviembre India en hangar 37 Solicitamos abrir plan de vuelo hacia zona Eco vía Paso Chomogo 7000 pies dos almas a bordo. Capitán Josué Solano Autonomía cinco horas y media.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: ground
- Fase ID: ground_departure_request

Checklist alumno:
- Saludo correcto a Pavas Superficie.
- Indica...
2025-11-06 21:08:45,848 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=ground_taxi_clearance: ```json
{
  "intent": "ground_taxi_clearance",
  "allowResponse": true,
  "controllerText": "Alfa Noviembre India, Pavas Superficie, pista en uso uno cero, viento 30 grados a 3 nudos, QNH 983. Autorizado a rodar al punto de espera vía Alfa. Contacte Torre en 118.3 cuando esté listo.",
  "feedback": "Solicitud completa. Todos los datos esenciales han sido proporcionados correctamente.",
  "confidence": 0.95,
  "metadata": {
    "nextPhase": "ground_readback"
  }
}
```
2025-11-06 21:08:45,849 | ERROR | app.controllers.audio | Fallo en pipeline LLM
Traceback (most recent call last):
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\services\response_contract.py", line 36, in from_json
    data = json.loads(payload)
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\json\decoder.py", line 355, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\controllers\audio.py", line 187, in analyze_audio
    llm_outcome = await call_conversation_llm(request)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\pipelines\audio\llm.py", line 39, in call_conversation_llm
    structured = StructuredLlmResponse.from_json(raw_response)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\coper\OneDrive\CENFOTEC\Projecto 4\EcoWhiskey-ATC\EcoWhiskey-ATC-BackEnd\app\services\response_contract.py", line 38, in from_json
    raise ValidationError.from_exception_data(
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: ValidationError.from_exception_data() got an unexpected keyword argument 'excs'
2025-11-06 21:08:45,888 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 21:14:55,848 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-06 21:14:55,849 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-06 21:14:55,855 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-06 21:14:55,856 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-06 21:14:55,866 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-06 21:14:55,866 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-06 21:14:55,872 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 21:14:55,873 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-06 21:14:55,873 | INFO | sqlalchemy.engine.Engine | [generated in 0.00085s] ()
2025-11-06 21:14:55,882 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 21:14:55,883 | INFO | sqlalchemy.engine.Engine | [generated in 0.00153s] ()
2025-11-06 21:14:55,890 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 21:14:55,891 | INFO | sqlalchemy.engine.Engine | [generated in 0.00167s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 21:14:55,909 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 21:14:55,910 | INFO | sqlalchemy.engine.Engine | [cached since 0.0195s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 21:14:55,912 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 21:14:55,913 | INFO | sqlalchemy.engine.Engine | [cached since 0.02345s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 21:14:55,916 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 21:14:55,916 | INFO | sqlalchemy.engine.Engine | [cached since 0.02685s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 21:14:55,919 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-06 21:14:55,920 | INFO | sqlalchemy.engine.Engine | [cached since 0.02985s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-06 21:14:55,924 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-06 21:14:55,925 | INFO | sqlalchemy.engine.Engine | [generated in 0.00191s] ('user_status', 'pg_catalog')
2025-11-06 21:14:55,931 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-06 21:14:55,932 | INFO | sqlalchemy.engine.Engine | [cached since 0.008855s ago] ('account_type', 'pg_catalog')
2025-11-06 21:14:55,936 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-06 21:14:55,936 | INFO | sqlalchemy.engine.Engine | [generated in 0.00104s] ()
2025-11-06 21:14:55,940 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-06 21:14:55,941 | INFO | sqlalchemy.engine.Engine | [generated in 0.00121s] ()
2025-11-06 21:14:55,963 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-06 21:14:55,965 | INFO | sqlalchemy.engine.Engine | [generated in 0.00180s] ()
2025-11-06 21:14:56,019 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 21:14:56,051 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-06 21:14:57,700 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 21:14:57,701 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-06 21:14:57,702 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-06 21:14:57,703 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 21:14:57,704 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-06 21:14:57,705 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-06 21:14:57,706 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 21:14:57,706 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 21:14:57,706 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-06 21:14:57,709 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 21:14:57,710 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 21:14:57,711 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-06 21:14:57,711 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-06 21:14:57,712 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 21:14:57,714 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-06 21:14:57,715 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-06 21:14:57,716 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 21:14:57,716 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 21:14:57,718 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:269]
2025-11-06 21:14:57,719 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 21:14:57,719 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-06 21:14:57,720 | DEBUG | python_multipart.multipart | Calling on_header_field with data[311:330]
2025-11-06 21:14:57,721 | DEBUG | python_multipart.multipart | Calling on_header_value with data[332:386]
2025-11-06 21:14:57,723 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 21:14:57,724 | DEBUG | python_multipart.multipart | Calling on_header_field with data[388:400]
2025-11-06 21:14:57,725 | DEBUG | python_multipart.multipart | Calling on_header_value with data[402:412]
2025-11-06 21:14:57,726 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 21:14:57,729 | DEBUG | python_multipart.multipart | Calling on_header_field with data[414:428]
2025-11-06 21:14:57,729 | DEBUG | python_multipart.multipart | Calling on_header_value with data[430:436]
2025-11-06 21:14:57,732 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-06 21:14:57,733 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-06 21:14:57,734 | DEBUG | python_multipart.multipart | Calling on_part_data with data[440:8192]
2025-11-06 21:14:57,831 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 21:14:57,835 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:14:57,837 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 21:14:57,949 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:14:57,951 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:14:57,953 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:14:58,082 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 21:14:58,085 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:14:58,086 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 21:14:58,212 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:14:58,215 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5272]
2025-11-06 21:14:58,351 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:14:58,352 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:14:58,354 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:14:58,355 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 21:14:58,477 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 21:14:58,480 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:14:58,612 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 21:14:58,616 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:14:58,758 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:14:58,761 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:14:58,764 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:14:58,971 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:14:58,981 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:14:58,988 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:14:59,175 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:14:59,183 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:14:59,189 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:14:59,377 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:14:59,383 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:14:59,386 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:14:59,624 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:14:59,627 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:14:59,630 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:14:59,816 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 21:14:59,817 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:14:59,945 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:14:59,946 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 21:14:59,949 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 21:15:00,086 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:15:00,088 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:15:00,090 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:15:00,221 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-06 21:15:00,223 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:15:00,225 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-06 21:15:00,349 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:15:00,351 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:15:00,352 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:15:00,355 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 21:15:00,483 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:15:00,486 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:15:00,488 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:15:00,623 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:15:00,625 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:15:00,627 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:15:00,629 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 21:15:00,764 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:15:00,766 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:15:00,768 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:15:00,934 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:15:00,936 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:15:00,938 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:15:01,082 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:15:01,085 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:15:01,087 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:15:01,217 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:15:01,219 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:15:01,221 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-06 21:15:01,351 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:15:01,352 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-06 21:15:01,355 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-06 21:15:01,356 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-06 21:15:01,367 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:786]
2025-11-06 21:15:01,368 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-06 21:15:01,368 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-06 21:15:01,504 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 21:15:01,505 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-06 21:15:01,506 | INFO | sqlalchemy.engine.Engine | [cached since 5.624s ago] ()
2025-11-06 21:15:01,526 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-06 21:15:01,528 | INFO | sqlalchemy.engine.Engine | [generated in 0.00149s] (1,)
2025-11-06 21:15:01,624 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 21:15:01,626 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023EE9A0F290>}) about to wait for the following futures []
2025-11-06 21:15:01,627 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023EE9A0F290>}) done waiting for dependent futures
2025-11-06 21:15:01,629 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023EE9A0F290>}) with kwargs {'client': <botocore.client.S3 object at 0x0000023EE9740650>, 'config': <boto3.s3.transfer.TransferConfig object at 0x0000023EE9F38890>, 'osutil': <s3transfer.utils.OSUtils object at 0x0000023EE9F38850>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x0000023EE9F38B90>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000023EE9A0F290>}
2025-11-06 21:15:01,630 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/1759f49c-4c68-4354-b601-11691d5ec633/ee9a496654a34baea62d2bddebe3c97d.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x0000023EE9F38B90> for transfer request: 0.
2025-11-06 21:15:01,632 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-06 21:15:01,633 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/1759f49c-4c68-4354-b601-11691d5ec633/ee9a496654a34baea62d2bddebe3c97d.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-06 21:15:01,633 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 21:15:01,635 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/1759f49c-4c68-4354-b601-11691d5ec633/ee9a496654a34baea62d2bddebe3c97d.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-06 21:15:01,637 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/1759f49c-4c68-4354-b601-11691d5ec633/ee9a496654a34baea62d2bddebe3c97d.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x0000023EE9740650>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x0000023EE9A72350>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/1759f49c-4c68-4354-b601-11691d5ec633/ee9a496654a34baea62d2bddebe3c97d.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-06 21:15:02,427 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-06 21:15:14,193 | INFO | app.controllers.audio | Transcripción recibida session=1759f49c-4c68-4354-b601-11691d5ec633: pa superficie Alfa Noviembre India en hangar 37 Solicitamos abrir plan de vuelo hacia zona Eco vía Paso Chomogo 7000 pies dos almas a bordo. Capitán Josué Solano Autonomía cinco horas y media.
2025-11-06 21:15:14,193 | INFO | app.logs.transcript | student | session=1759f49c-4c68-4354-b601-11691d5ec633 | frequency=121.700 | text=pa superficie Alfa Noviembre India en hangar 37 Solicitamos abrir plan de vuelo hacia zona Eco vía Paso Chomogo 7000 pies dos almas a bordo. Capitán Josué Solano Autonomía cinco horas y media.
2025-11-06 21:15:14,339 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 21:15:14,342 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 21:15:14,343 | INFO | sqlalchemy.engine.Engine | [generated in 0.00097s] (UUID('1759f49c-4c68-4354-b601-11691d5ec633'),)
2025-11-06 21:15:14,359 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-06 21:15:14,971 | WARNING | app.services.audio_pipeline | Intent detector invalid JSON: "Invalid error type: 'json_decode_error'" raw=```json
{
    "intent": "tower_takeoff_clearance",
    "confidence": 0.95,
    "frequencyGroup": "tower"
}
```
2025-11-06 21:15:15,121 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 21:15:15,123 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 21:15:15,124 | INFO | sqlalchemy.engine.Engine | [cached since 0.7818s ago] (UUID('1759f49c-4c68-4354-b601-11691d5ec633'),)
2025-11-06 21:15:15,142 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 21:15:15,145 | INFO | sqlalchemy.engine.Engine | [generated in 0.00228s] ('{"meteo": {"qnh": "983", "vis": "10km", "wind": "030/3", "condition": "IMC", "windSpeed": "3", "windDirection": "030"}, "route": "MRPV-MRPV", "turns" ... (18824 characters truncated) ... nd": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0554", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 7, 3, 15, 15, 142272), UUID('56ff3a80-271a-4335-a786-0630f5d06ad4'))
2025-11-06 21:15:15,161 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 21:15:15,188 | INFO | app.controllers.audio | Fase activa session=1759f49c-4c68-4354-b601-11691d5ec633 phase_id=ground_departure_request intent=ground_taxi_clearance freq=ground
2025-11-06 21:15:15,191 | INFO | app.services.audio_pipeline | Prompts generados intent=ground_taxi_clearance freq_group=ground
SYSTEM> Eres Pavas Superficie (121.7). Recibes la llamada inicial para abrir plan de vuelo y autorizar rodaje. Responde únicamente en formato JSON válido con la estructura exacta: {
  "intent": string,
  "allowResponse": boolean,
  "controllerText": string | null,
  "feedback": string,
  "confidence": number | null,
  "metadata": object
 }.
Si necesitas proponer un cambio de fase, incluye en metadata la clave "nextPhase". No escribas texto adicional antes o después del JSON.
USER> Fase actual: Solicitud de apertura y autorización de rodaje
Intent esperado: ground_taxi_clearance
Transcripción textual del alumno:
pa superficie Alfa Noviembre India en hangar 37 Solicitamos abrir plan de vuelo hacia zona Eco vía Paso Chomogo 7000 pies dos almas a bordo. Capitán Josué Solano Autonomía cinco horas y media.

Contexto operativo:
- Aeropuerto: MRPV
- Grupo de frecuencia: ground
- Fase ID: ground_departure_request

Checklist alumno:
- Saludo correcto a Pavas Superficie.
- Indica...
2025-11-06 21:15:17,396 | INFO | app.services.audio_pipeline | Respuesta LLM cruda intent=ground_taxi_clearance: {
  "intent": "ground_taxi_clearance",
  "allowResponse": true,
  "controllerText": "Alfa Noviembre India, Pavas Superficie, buenas tardes. Plan de vuelo abierto. Ruta Alfa Bravo al punto de espera. Vento tres nudos del 30. QNH 983. Contacte Torre en 118.3 cuando esté listo.",
  "feedback": "Solicitud completa. Recuerde que siempre es bueno verificar la información proporcionada, especialmente la ruta de rodaje y la frecuencia a la que debe cambiarse. Buen trabajo.",
  "confidence": 0.95,
  "...
2025-11-06 21:15:17,398 | INFO | app.controllers.audio | Transición automática de fase session=1759f49c-4c68-4354-b601-11691d5ec633 de=ground_departure_request a=ground_readback
2025-11-06 21:15:17,561 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-06 21:15:17,563 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-06 21:15:17,564 | INFO | sqlalchemy.engine.Engine | [cached since 3.222s ago] (UUID('1759f49c-4c68-4354-b601-11691d5ec633'),)
2025-11-06 21:15:17,581 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
2025-11-06 21:15:17,582 | INFO | sqlalchemy.engine.Engine | [cached since 2.441s ago] ('{"meteo": {"qnh": "983", "vis": "10km", "wind": "030/3", "condition": "IMC", "windSpeed": "3", "windDirection": "030"}, "route": "MRPV-MRPV", "turns" ... (20040 characters truncated) ... nd": "121.7", "unicom": "122.0", "approach": "120.5"}, "scenario_id": "mrpv_full_flight", "transponder": "0554", "default_frequency_group": "ground"}', datetime.datetime(2025, 11, 7, 3, 15, 17, 581428), UUID('56ff3a80-271a-4335-a786-0630f5d06ad4'))
2025-11-06 21:15:17,605 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-06 21:15:17,630 | INFO | app.logs.transcript | controller | session=1759f49c-4c68-4354-b601-11691d5ec633 | frequency=121.700 | intent=ground_taxi_clearance | phase=ground_readback | allow_response=True | text=Alfa Noviembre India, Pavas Superficie, buenas tardes. Plan de vuelo abierto. Ruta Alfa Bravo al punto de espera. Vento tres nudos del 30. QNH 983. Contacte Torre en 118.3 cuando esté listo.
2025-11-06 21:15:19,388 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 21:39:23,658 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-07 21:39:23,659 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 21:39:23,681 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-07 21:39:23,683 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 21:39:23,699 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-07 21:39:23,699 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 21:39:23,713 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 21:39:23,715 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-07 21:39:23,715 | INFO | sqlalchemy.engine.Engine | [generated in 0.00072s] ()
2025-11-07 21:39:23,732 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 21:39:23,732 | INFO | sqlalchemy.engine.Engine | [generated in 0.00106s] ()
2025-11-07 21:39:23,742 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 21:39:23,743 | INFO | sqlalchemy.engine.Engine | [generated in 0.00164s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 21:39:23,849 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 21:39:23,850 | INFO | sqlalchemy.engine.Engine | [cached since 0.1075s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 21:39:23,852 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 21:39:23,853 | INFO | sqlalchemy.engine.Engine | [cached since 0.1109s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 21:39:23,857 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 21:39:23,857 | INFO | sqlalchemy.engine.Engine | [cached since 0.1153s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 21:39:23,861 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 21:39:23,861 | INFO | sqlalchemy.engine.Engine | [cached since 0.1219s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 21:39:23,868 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 21:39:23,869 | INFO | sqlalchemy.engine.Engine | [generated in 0.00090s] ('user_status', 'pg_catalog')
2025-11-07 21:39:23,880 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 21:39:23,880 | INFO | sqlalchemy.engine.Engine | [cached since 0.01232s ago] ('account_type', 'pg_catalog')
2025-11-07 21:39:23,884 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-07 21:39:23,884 | INFO | sqlalchemy.engine.Engine | [generated in 0.00078s] ()
2025-11-07 21:39:23,967 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-07 21:39:23,968 | INFO | sqlalchemy.engine.Engine | [generated in 0.00092s] ()
2025-11-07 21:39:24,093 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-07 21:39:24,098 | INFO | sqlalchemy.engine.Engine | [generated in 0.00179s] ()
2025-11-07 21:39:24,558 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 21:39:24,609 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-07 21:56:42,444 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 21:56:42,444 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 21:56:42,445 | INFO | sqlalchemy.engine.Engine | [cached since 1039s ago] ()
2025-11-07 21:56:42,467 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.email = $1::VARCHAR
2025-11-07 21:56:42,470 | INFO | sqlalchemy.engine.Engine | [generated in 0.00208s] ('josuelu3@gmail.com',)
2025-11-07 21:56:42,691 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 21:56:44,543 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 21:56:44,544 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 21:56:44,544 | INFO | sqlalchemy.engine.Engine | [cached since 1041s ago] ()
2025-11-07 21:56:44,551 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 21:56:44,552 | INFO | sqlalchemy.engine.Engine | [generated in 0.00110s] (1,)
2025-11-07 21:56:44,658 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 21:56:44,659 | INFO | sqlalchemy.engine.Engine | [cached since 0.108s ago] (1,)
2025-11-07 21:56:44,662 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 21:57:18,832 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 21:57:18,834 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 21:57:18,835 | INFO | sqlalchemy.engine.Engine | [cached since 1075s ago] ()
2025-11-07 21:57:18,844 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 21:57:18,845 | INFO | sqlalchemy.engine.Engine | [cached since 34.29s ago] (1,)
2025-11-07 21:57:18,993 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.training_contexts (id, training_session_id, user_id, context) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::JSONB) RETURNING ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at
2025-11-07 21:57:18,995 | INFO | sqlalchemy.engine.Engine | [generated in 0.00187s] (UUID('f1508784-3ee3-4d24-9ccf-438714bb9608'), UUID('62d42b09-c18f-40a5-a8d8-bd2fb972e510'), 1, '{"route": "MRPV-MRPV", "meteo": {"condition": "", "vis": "", "qnh": "", "windDirection": "", "windSpeed": "", "wind": ""}, "scenario_id": "mrpv_full_flight"}')
2025-11-07 21:57:19,021 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 21:57:19,449 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 21:57:19,453 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.id = $1::UUID
2025-11-07 21:57:19,454 | INFO | sqlalchemy.engine.Engine | [generated in 0.00153s] (UUID('f1508784-3ee3-4d24-9ccf-438714bb9608'),)
2025-11-07 21:57:19,471 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 22:16:18,694 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-07 22:16:18,695 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:16:18,701 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-07 22:16:18,702 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:16:18,709 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-07 22:16:18,711 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:16:18,715 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:16:18,716 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-07 22:16:18,716 | INFO | sqlalchemy.engine.Engine | [generated in 0.00069s] ()
2025-11-07 22:16:18,722 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 22:16:18,722 | INFO | sqlalchemy.engine.Engine | [generated in 0.00136s] ()
2025-11-07 22:16:18,730 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:16:18,731 | INFO | sqlalchemy.engine.Engine | [generated in 0.00095s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:16:18,752 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:16:18,753 | INFO | sqlalchemy.engine.Engine | [cached since 0.02233s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:16:18,755 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:16:18,756 | INFO | sqlalchemy.engine.Engine | [cached since 0.02606s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:16:18,759 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:16:18,761 | INFO | sqlalchemy.engine.Engine | [cached since 0.03104s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:16:18,764 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:16:18,766 | INFO | sqlalchemy.engine.Engine | [cached since 0.03545s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:16:18,770 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 22:16:18,771 | INFO | sqlalchemy.engine.Engine | [generated in 0.00127s] ('user_status', 'pg_catalog')
2025-11-07 22:16:18,778 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 22:16:18,780 | INFO | sqlalchemy.engine.Engine | [cached since 0.009859s ago] ('account_type', 'pg_catalog')
2025-11-07 22:16:18,783 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-07 22:16:18,784 | INFO | sqlalchemy.engine.Engine | [generated in 0.00093s] ()
2025-11-07 22:16:18,792 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-07 22:16:18,793 | INFO | sqlalchemy.engine.Engine | [generated in 0.00110s] ()
2025-11-07 22:16:18,814 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-07 22:16:18,816 | INFO | sqlalchemy.engine.Engine | [generated in 0.00187s] ()
2025-11-07 22:16:18,885 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 22:16:18,920 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-07 22:16:42,624 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-07 22:16:42,624 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:16:42,631 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-07 22:16:42,631 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:16:42,639 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-07 22:16:42,639 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:16:42,645 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:16:42,646 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-07 22:16:42,646 | INFO | sqlalchemy.engine.Engine | [generated in 0.00112s] ()
2025-11-07 22:16:42,655 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 22:16:42,656 | INFO | sqlalchemy.engine.Engine | [generated in 0.00103s] ()
2025-11-07 22:16:42,662 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:16:42,663 | INFO | sqlalchemy.engine.Engine | [generated in 0.00079s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:16:42,679 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:16:42,679 | INFO | sqlalchemy.engine.Engine | [cached since 0.01844s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:16:42,684 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:16:42,688 | INFO | sqlalchemy.engine.Engine | [cached since 0.02651s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:16:42,692 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:16:42,693 | INFO | sqlalchemy.engine.Engine | [cached since 0.03139s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:16:42,696 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:16:42,697 | INFO | sqlalchemy.engine.Engine | [cached since 0.03557s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:16:42,703 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 22:16:42,704 | INFO | sqlalchemy.engine.Engine | [generated in 0.00157s] ('user_status', 'pg_catalog')
2025-11-07 22:16:42,710 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 22:16:42,710 | INFO | sqlalchemy.engine.Engine | [cached since 0.008224s ago] ('account_type', 'pg_catalog')
2025-11-07 22:16:42,713 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-07 22:16:42,714 | INFO | sqlalchemy.engine.Engine | [generated in 0.00091s] ()
2025-11-07 22:16:42,720 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-07 22:16:42,721 | INFO | sqlalchemy.engine.Engine | [generated in 0.00141s] ()
2025-11-07 22:16:42,734 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-07 22:16:42,738 | INFO | sqlalchemy.engine.Engine | [generated in 0.00222s] ()
2025-11-07 22:16:42,793 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 22:16:42,828 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-07 22:16:53,143 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:16:53,145 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 22:16:53,145 | INFO | sqlalchemy.engine.Engine | [cached since 10.49s ago] ()
2025-11-07 22:16:53,164 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 22:16:53,164 | INFO | sqlalchemy.engine.Engine | [generated in 0.00097s] (1,)
2025-11-07 22:16:53,257 | INFO | app.controllers.training_context | Creating training context user_id=1 session_id=d3785a99-b274-484d-9f80-d10e1ccba0c9 payload={'route': 'MRPV-MRPV', 'meteo': {'condition': '', 'vis': '', 'qnh': '', 'windDirection': '', 'windSpeed': '', 'wind': ''}, 'scenario_id': 'mrpv_full_flight'}
2025-11-07 22:16:53,260 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.training_contexts (id, training_session_id, user_id, context) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::JSONB) RETURNING ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at
2025-11-07 22:16:53,261 | INFO | sqlalchemy.engine.Engine | [generated in 0.00131s] (UUID('50a51967-ea49-452b-8ab3-590fc574c97a'), UUID('d3785a99-b274-484d-9f80-d10e1ccba0c9'), 1, '{"route": "MRPV-MRPV", "meteo": {"condition": "", "vis": "", "qnh": "", "windDirection": "", "windSpeed": "", "wind": ""}, "scenario_id": "mrpv_full_flight"}')
2025-11-07 22:16:53,270 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 22:16:53,413 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:16:53,416 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.id = $1::UUID
2025-11-07 22:16:53,417 | INFO | sqlalchemy.engine.Engine | [generated in 0.00120s] (UUID('50a51967-ea49-452b-8ab3-590fc574c97a'),)
2025-11-07 22:16:53,432 | INFO | app.controllers.training_context | Training context created session_id=d3785a99-b274-484d-9f80-d10e1ccba0c9 stored_context={'meteo': {'qnh': '', 'vis': '', 'wind': '', 'condition': '', 'windSpeed': '', 'windDirection': ''}, 'route': 'MRPV-MRPV', 'scenario_id': 'mrpv_full_flight'}
2025-11-07 22:16:53,434 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 22:16:54,813 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:16:54,813 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 22:16:54,814 | INFO | sqlalchemy.engine.Engine | [cached since 12.16s ago] ()
2025-11-07 22:16:54,823 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 22:16:54,826 | INFO | sqlalchemy.engine.Engine | [cached since 1.661s ago] (1,)
2025-11-07 22:16:54,898 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 22:16:54,900 | INFO | sqlalchemy.engine.Engine | [cached since 1.735s ago] (1,)
2025-11-07 22:16:54,908 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 22:19:52,579 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-07 22:19:52,581 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:19:52,588 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-07 22:19:52,589 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:19:52,594 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-07 22:19:52,595 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:19:52,599 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:19:52,602 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-07 22:19:52,602 | INFO | sqlalchemy.engine.Engine | [generated in 0.00115s] ()
2025-11-07 22:19:52,606 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 22:19:52,608 | INFO | sqlalchemy.engine.Engine | [generated in 0.00091s] ()
2025-11-07 22:19:52,615 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:19:52,616 | INFO | sqlalchemy.engine.Engine | [generated in 0.00141s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:19:52,636 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:19:52,637 | INFO | sqlalchemy.engine.Engine | [cached since 0.02239s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:19:52,642 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:19:52,643 | INFO | sqlalchemy.engine.Engine | [cached since 0.02847s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:19:52,648 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:19:52,649 | INFO | sqlalchemy.engine.Engine | [cached since 0.03459s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:19:52,654 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:19:52,656 | INFO | sqlalchemy.engine.Engine | [cached since 0.04129s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:19:52,662 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 22:19:52,663 | INFO | sqlalchemy.engine.Engine | [generated in 0.00137s] ('user_status', 'pg_catalog')
2025-11-07 22:19:52,671 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 22:19:52,672 | INFO | sqlalchemy.engine.Engine | [cached since 0.009882s ago] ('account_type', 'pg_catalog')
2025-11-07 22:19:52,678 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-07 22:19:52,679 | INFO | sqlalchemy.engine.Engine | [generated in 0.00107s] ()
2025-11-07 22:19:52,684 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-07 22:19:52,685 | INFO | sqlalchemy.engine.Engine | [generated in 0.00127s] ()
2025-11-07 22:19:52,706 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-07 22:19:52,708 | INFO | sqlalchemy.engine.Engine | [generated in 0.00220s] ()
2025-11-07 22:19:52,795 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 22:19:52,838 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-07 22:20:34,899 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-07 22:20:34,899 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:20:34,906 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-07 22:20:34,907 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:20:34,911 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-07 22:20:34,913 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:20:34,917 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:20:34,918 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-07 22:20:34,919 | INFO | sqlalchemy.engine.Engine | [generated in 0.00114s] ()
2025-11-07 22:20:34,924 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 22:20:34,925 | INFO | sqlalchemy.engine.Engine | [generated in 0.00107s] ()
2025-11-07 22:20:34,931 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:20:34,932 | INFO | sqlalchemy.engine.Engine | [generated in 0.00092s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:20:34,949 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:20:34,949 | INFO | sqlalchemy.engine.Engine | [cached since 0.01872s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:20:34,953 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:20:34,954 | INFO | sqlalchemy.engine.Engine | [cached since 0.02293s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:20:34,957 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:20:34,958 | INFO | sqlalchemy.engine.Engine | [cached since 0.02706s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:20:34,962 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:20:34,963 | INFO | sqlalchemy.engine.Engine | [cached since 0.03158s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:20:34,966 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 22:20:34,968 | INFO | sqlalchemy.engine.Engine | [generated in 0.00100s] ('user_status', 'pg_catalog')
2025-11-07 22:20:34,974 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 22:20:34,975 | INFO | sqlalchemy.engine.Engine | [cached since 0.008183s ago] ('account_type', 'pg_catalog')
2025-11-07 22:20:34,978 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-07 22:20:34,979 | INFO | sqlalchemy.engine.Engine | [generated in 0.00111s] ()
2025-11-07 22:20:34,985 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-07 22:20:34,986 | INFO | sqlalchemy.engine.Engine | [generated in 0.00117s] ()
2025-11-07 22:20:35,001 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-07 22:20:35,003 | INFO | sqlalchemy.engine.Engine | [generated in 0.00164s] ()
2025-11-07 22:20:35,059 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 22:20:35,096 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-07 22:20:49,155 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-07 22:20:49,156 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:20:49,163 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-07 22:20:49,163 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:20:49,171 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-07 22:20:49,172 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:20:49,177 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:20:49,178 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-07 22:20:49,179 | INFO | sqlalchemy.engine.Engine | [generated in 0.00106s] ()
2025-11-07 22:20:49,186 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 22:20:49,190 | INFO | sqlalchemy.engine.Engine | [generated in 0.00347s] ()
2025-11-07 22:20:49,202 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:20:49,203 | INFO | sqlalchemy.engine.Engine | [generated in 0.00123s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:20:49,232 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:20:49,235 | INFO | sqlalchemy.engine.Engine | [cached since 0.03208s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:20:49,239 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:20:49,240 | INFO | sqlalchemy.engine.Engine | [cached since 0.03786s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:20:49,244 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:20:49,247 | INFO | sqlalchemy.engine.Engine | [cached since 0.04526s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:20:49,251 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:20:49,252 | INFO | sqlalchemy.engine.Engine | [cached since 0.05038s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:20:49,259 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 22:20:49,260 | INFO | sqlalchemy.engine.Engine | [generated in 0.00137s] ('user_status', 'pg_catalog')
2025-11-07 22:20:49,267 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 22:20:49,268 | INFO | sqlalchemy.engine.Engine | [cached since 0.009282s ago] ('account_type', 'pg_catalog')
2025-11-07 22:20:49,271 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-07 22:20:49,273 | INFO | sqlalchemy.engine.Engine | [generated in 0.00182s] ()
2025-11-07 22:20:49,283 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-07 22:20:49,284 | INFO | sqlalchemy.engine.Engine | [generated in 0.00161s] ()
2025-11-07 22:20:49,303 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-07 22:20:49,306 | INFO | sqlalchemy.engine.Engine | [generated in 0.00197s] ()
2025-11-07 22:20:49,369 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 22:20:49,413 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-07 22:21:23,718 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:21:23,719 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 22:21:23,720 | INFO | sqlalchemy.engine.Engine | [cached since 34.53s ago] ()
2025-11-07 22:21:23,748 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.email = $1::VARCHAR
2025-11-07 22:21:23,750 | INFO | sqlalchemy.engine.Engine | [generated in 0.00128s] ('josuelu3@gmail.com',)
2025-11-07 22:21:23,914 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 22:21:40,555 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:21:40,558 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 22:21:40,560 | INFO | sqlalchemy.engine.Engine | [cached since 51.37s ago] ()
2025-11-07 22:21:40,579 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 22:21:40,580 | INFO | sqlalchemy.engine.Engine | [generated in 0.00204s] (1,)
2025-11-07 22:21:40,711 | INFO | app.controllers.training_context | Creating training context user_id=1 session_id=72e034d9-88d4-4d24-890d-d04d89cbc704 payload={'route': 'MRPV-MRPV', 'meteo': {'condition': '', 'vis': '', 'qnh': '', 'windDirection': '', 'windSpeed': '', 'wind': ''}, 'scenario_id': 'mrpv_full_flight'}
2025-11-07 22:21:40,716 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.training_contexts (id, training_session_id, user_id, context) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::JSONB) RETURNING ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at
2025-11-07 22:21:40,719 | INFO | sqlalchemy.engine.Engine | [generated in 0.00322s] (UUID('b5a9c022-954e-403f-8799-15b8510deeec'), UUID('72e034d9-88d4-4d24-890d-d04d89cbc704'), 1, '{"route": "MRPV-MRPV", "meteo": {"condition": "", "vis": "", "qnh": "", "windDirection": "", "windSpeed": "", "wind": ""}, "scenario_id": "mrpv_full_flight"}')
2025-11-07 22:21:40,733 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 22:21:40,927 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:21:40,929 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.id = $1::UUID
2025-11-07 22:21:40,930 | INFO | sqlalchemy.engine.Engine | [generated in 0.00091s] (UUID('b5a9c022-954e-403f-8799-15b8510deeec'),)
2025-11-07 22:21:40,944 | INFO | app.controllers.training_context | Training context created session_id=72e034d9-88d4-4d24-890d-d04d89cbc704 stored_context={'meteo': {'qnh': '', 'vis': '', 'wind': '', 'condition': '', 'windSpeed': '', 'windDirection': ''}, 'route': 'MRPV-MRPV', 'scenario_id': 'mrpv_full_flight'}
2025-11-07 22:21:40,944 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 22:23:26,636 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-07 22:23:26,637 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:23:26,642 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-07 22:23:26,643 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:23:26,651 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-07 22:23:26,652 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:23:26,656 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:23:26,657 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-07 22:23:26,658 | INFO | sqlalchemy.engine.Engine | [generated in 0.00085s] ()
2025-11-07 22:23:26,662 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 22:23:26,663 | INFO | sqlalchemy.engine.Engine | [generated in 0.00109s] ()
2025-11-07 22:23:26,671 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:23:26,671 | INFO | sqlalchemy.engine.Engine | [generated in 0.00110s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:23:26,693 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:23:26,694 | INFO | sqlalchemy.engine.Engine | [cached since 0.02356s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:23:26,697 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:23:26,699 | INFO | sqlalchemy.engine.Engine | [cached since 0.02848s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:23:26,702 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:23:26,703 | INFO | sqlalchemy.engine.Engine | [cached since 0.03288s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:23:26,705 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:23:26,706 | INFO | sqlalchemy.engine.Engine | [cached since 0.03637s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:23:26,711 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 22:23:26,711 | INFO | sqlalchemy.engine.Engine | [generated in 0.00096s] ('user_status', 'pg_catalog')
2025-11-07 22:23:26,719 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 22:23:26,720 | INFO | sqlalchemy.engine.Engine | [cached since 0.00909s ago] ('account_type', 'pg_catalog')
2025-11-07 22:23:26,723 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-07 22:23:26,724 | INFO | sqlalchemy.engine.Engine | [generated in 0.00088s] ()
2025-11-07 22:23:26,729 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-07 22:23:26,730 | INFO | sqlalchemy.engine.Engine | [generated in 0.00116s] ()
2025-11-07 22:23:26,747 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-07 22:23:26,749 | INFO | sqlalchemy.engine.Engine | [generated in 0.00218s] ()
2025-11-07 22:23:26,807 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 22:23:26,840 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-07 22:23:54,808 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-07 22:23:54,809 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:23:54,817 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-07 22:23:54,818 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:23:54,824 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-07 22:23:54,825 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:23:54,831 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:23:54,832 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-07 22:23:54,834 | INFO | sqlalchemy.engine.Engine | [generated in 0.00111s] ()
2025-11-07 22:23:54,838 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 22:23:54,839 | INFO | sqlalchemy.engine.Engine | [generated in 0.00088s] ()
2025-11-07 22:23:54,845 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:23:54,847 | INFO | sqlalchemy.engine.Engine | [generated in 0.00114s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:23:54,864 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:23:54,865 | INFO | sqlalchemy.engine.Engine | [cached since 0.01952s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:23:54,869 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:23:54,869 | INFO | sqlalchemy.engine.Engine | [cached since 0.02347s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:23:54,873 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:23:54,873 | INFO | sqlalchemy.engine.Engine | [cached since 0.02743s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:23:54,877 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:23:54,879 | INFO | sqlalchemy.engine.Engine | [cached since 0.03282s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:23:54,883 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 22:23:54,884 | INFO | sqlalchemy.engine.Engine | [generated in 0.00097s] ('user_status', 'pg_catalog')
2025-11-07 22:23:54,889 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 22:23:54,890 | INFO | sqlalchemy.engine.Engine | [cached since 0.006443s ago] ('account_type', 'pg_catalog')
2025-11-07 22:23:54,893 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-07 22:23:54,894 | INFO | sqlalchemy.engine.Engine | [generated in 0.00131s] ()
2025-11-07 22:23:54,899 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-07 22:23:54,900 | INFO | sqlalchemy.engine.Engine | [generated in 0.00089s] ()
2025-11-07 22:23:54,917 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-07 22:23:54,919 | INFO | sqlalchemy.engine.Engine | [generated in 0.00175s] ()
2025-11-07 22:23:54,976 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 22:23:55,018 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-07 22:24:08,831 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:24:08,832 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 22:24:08,834 | INFO | sqlalchemy.engine.Engine | [cached since 14s ago] ()
2025-11-07 22:24:08,856 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.email = $1::VARCHAR
2025-11-07 22:24:08,857 | INFO | sqlalchemy.engine.Engine | [generated in 0.00110s] ('josuelu3@gmail.com',)
2025-11-07 22:24:09,031 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 22:24:41,731 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:24:41,732 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 22:24:41,733 | INFO | sqlalchemy.engine.Engine | [cached since 46.89s ago] ()
2025-11-07 22:24:41,743 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 22:24:41,744 | INFO | sqlalchemy.engine.Engine | [generated in 0.00115s] (1,)
2025-11-07 22:24:41,824 | INFO | app.controllers.training_context | Creating training context user_id=1 session_id=6ffd604f-9914-4c78-a2da-8ca1d1684bc9 payload={'route': 'MRPV-MRPV', 'meteo': {'condition': '', 'vis': '', 'qnh': '', 'windDirection': '', 'windSpeed': '', 'wind': ''}, 'scenario_id': 'mrpv_full_flight'}
2025-11-07 22:24:41,825 | INFO | app.controllers.training_context | Before DB write session_id=6ffd604f-9914-4c78-a2da-8ca1d1684bc9 context_copy={'route': 'MRPV-MRPV', 'meteo': {'condition': '', 'vis': '', 'qnh': '', 'windDirection': '', 'windSpeed': '', 'wind': ''}, 'scenario_id': 'mrpv_full_flight'}
2025-11-07 22:24:41,828 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.training_contexts (id, training_session_id, user_id, context) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::JSONB) RETURNING ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at
2025-11-07 22:24:41,828 | INFO | sqlalchemy.engine.Engine | [generated in 0.00096s] (UUID('0688088d-9700-4d4e-97e2-44e3e7da2e05'), UUID('6ffd604f-9914-4c78-a2da-8ca1d1684bc9'), 1, '{"route": "MRPV-MRPV", "meteo": {"condition": "", "vis": "", "qnh": "", "windDirection": "", "windSpeed": "", "wind": ""}, "scenario_id": "mrpv_full_flight"}')
2025-11-07 22:24:41,837 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 22:24:41,993 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:24:41,995 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.id = $1::UUID
2025-11-07 22:24:41,997 | INFO | sqlalchemy.engine.Engine | [generated in 0.00125s] (UUID('0688088d-9700-4d4e-97e2-44e3e7da2e05'),)
2025-11-07 22:24:42,011 | INFO | app.controllers.training_context | Training context created session_id=6ffd604f-9914-4c78-a2da-8ca1d1684bc9 stored_context={'meteo': {'qnh': '', 'vis': '', 'wind': '', 'condition': '', 'windSpeed': '', 'windDirection': ''}, 'route': 'MRPV-MRPV', 'scenario_id': 'mrpv_full_flight'}
2025-11-07 22:24:42,011 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 22:31:16,337 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:31:16,338 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 22:31:16,339 | INFO | sqlalchemy.engine.Engine | [cached since 441.5s ago] ()
2025-11-07 22:31:16,347 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.email = $1::VARCHAR
2025-11-07 22:31:16,348 | INFO | sqlalchemy.engine.Engine | [cached since 427.5s ago] ('josuelu3@gmail.com',)
2025-11-07 22:31:16,615 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 22:31:18,226 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:31:18,227 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 22:31:18,228 | INFO | sqlalchemy.engine.Engine | [cached since 443.4s ago] ()
2025-11-07 22:31:18,233 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 22:31:18,234 | INFO | sqlalchemy.engine.Engine | [cached since 396.5s ago] (1,)
2025-11-07 22:31:18,306 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 22:31:18,306 | INFO | sqlalchemy.engine.Engine | [cached since 396.6s ago] (1,)
2025-11-07 22:31:18,311 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 22:31:32,764 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:31:32,765 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 22:31:32,766 | INFO | sqlalchemy.engine.Engine | [cached since 457.9s ago] ()
2025-11-07 22:31:32,773 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 22:31:32,775 | INFO | sqlalchemy.engine.Engine | [cached since 411s ago] (1,)
2025-11-07 22:31:32,849 | INFO | app.controllers.training_context | Creating training context user_id=1 session_id=b2c19e9d-2533-4839-90bf-8bb21b519153 payload={'route': 'MRPV-MRPV', 'meteo': {'condition': '', 'vis': '', 'qnh': '', 'windDirection': '', 'windSpeed': '', 'wind': ''}, 'scenario_id': 'mrpv_full_flight'}
2025-11-07 22:31:32,849 | INFO | app.controllers.training_context | Before DB write session_id=b2c19e9d-2533-4839-90bf-8bb21b519153 context_copy={'route': 'MRPV-MRPV', 'meteo': {'condition': '', 'vis': '', 'qnh': '', 'windDirection': '', 'windSpeed': '', 'wind': ''}, 'scenario_id': 'mrpv_full_flight'}
2025-11-07 22:31:32,851 | INFO | sqlalchemy.engine.Engine | INSERT INTO ecowhiskey.training_contexts (id, training_session_id, user_id, context) VALUES ($1::UUID, $2::UUID, $3::INTEGER, $4::JSONB) RETURNING ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at
2025-11-07 22:31:32,852 | INFO | sqlalchemy.engine.Engine | [cached since 411s ago] (UUID('767d4c4f-5ef2-4216-ab34-1cc70607991d'), UUID('b2c19e9d-2533-4839-90bf-8bb21b519153'), 1, '{"route": "MRPV-MRPV", "meteo": {"condition": "", "vis": "", "qnh": "", "windDirection": "", "windSpeed": "", "wind": ""}, "scenario_id": "mrpv_full_flight"}')
2025-11-07 22:31:32,859 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 22:31:33,038 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:31:33,040 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.id = $1::UUID
2025-11-07 22:31:33,041 | INFO | sqlalchemy.engine.Engine | [cached since 411s ago] (UUID('767d4c4f-5ef2-4216-ab34-1cc70607991d'),)
2025-11-07 22:31:33,050 | INFO | app.controllers.training_context | Training context created session_id=b2c19e9d-2533-4839-90bf-8bb21b519153 stored_context={'meteo': {'qnh': '', 'vis': '', 'wind': '', 'condition': '', 'windSpeed': '', 'windDirection': ''}, 'route': 'MRPV-MRPV', 'scenario_id': 'mrpv_full_flight'}
2025-11-07 22:31:33,051 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 22:36:25,973 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-07 22:36:25,974 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:36:25,981 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-07 22:36:25,981 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:36:25,987 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-07 22:36:25,987 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:36:25,992 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:36:25,993 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-07 22:36:25,994 | INFO | sqlalchemy.engine.Engine | [generated in 0.00098s] ()
2025-11-07 22:36:26,000 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 22:36:26,001 | INFO | sqlalchemy.engine.Engine | [generated in 0.00092s] ()
2025-11-07 22:36:26,005 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:36:26,007 | INFO | sqlalchemy.engine.Engine | [generated in 0.00092s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:36:26,022 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:36:26,024 | INFO | sqlalchemy.engine.Engine | [cached since 0.01728s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:36:26,027 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:36:26,028 | INFO | sqlalchemy.engine.Engine | [cached since 0.0217s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:36:26,031 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:36:26,031 | INFO | sqlalchemy.engine.Engine | [cached since 0.02548s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:36:26,034 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:36:26,035 | INFO | sqlalchemy.engine.Engine | [cached since 0.0287s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:36:26,039 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 22:36:26,039 | INFO | sqlalchemy.engine.Engine | [generated in 0.00091s] ('user_status', 'pg_catalog')
2025-11-07 22:36:26,046 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 22:36:26,047 | INFO | sqlalchemy.engine.Engine | [cached since 0.007984s ago] ('account_type', 'pg_catalog')
2025-11-07 22:36:26,050 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-07 22:36:26,051 | INFO | sqlalchemy.engine.Engine | [generated in 0.00075s] ()
2025-11-07 22:36:26,054 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-07 22:36:26,055 | INFO | sqlalchemy.engine.Engine | [generated in 0.00092s] ()
2025-11-07 22:36:26,070 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-07 22:36:26,071 | INFO | sqlalchemy.engine.Engine | [generated in 0.00174s] ()
2025-11-07 22:36:26,174 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 22:36:26,205 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-07 22:36:36,113 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-07 22:36:36,114 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:36:36,119 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-07 22:36:36,120 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:36:36,125 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-07 22:36:36,125 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:36:36,131 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:36:36,132 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-07 22:36:36,133 | INFO | sqlalchemy.engine.Engine | [generated in 0.00133s] ()
2025-11-07 22:36:36,139 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 22:36:36,140 | INFO | sqlalchemy.engine.Engine | [generated in 0.00081s] ()
2025-11-07 22:36:36,145 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:36:36,146 | INFO | sqlalchemy.engine.Engine | [generated in 0.00142s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:36:36,162 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:36:36,164 | INFO | sqlalchemy.engine.Engine | [cached since 0.01907s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:36:36,167 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:36:36,168 | INFO | sqlalchemy.engine.Engine | [cached since 0.02347s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:36:36,171 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:36:36,172 | INFO | sqlalchemy.engine.Engine | [cached since 0.02776s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:36:36,175 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:36:36,175 | INFO | sqlalchemy.engine.Engine | [cached since 0.03131s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:36:36,180 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 22:36:36,180 | INFO | sqlalchemy.engine.Engine | [generated in 0.00143s] ('user_status', 'pg_catalog')
2025-11-07 22:36:36,187 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 22:36:36,188 | INFO | sqlalchemy.engine.Engine | [cached since 0.008306s ago] ('account_type', 'pg_catalog')
2025-11-07 22:36:36,191 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-07 22:36:36,191 | INFO | sqlalchemy.engine.Engine | [generated in 0.00092s] ()
2025-11-07 22:36:36,196 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-07 22:36:36,197 | INFO | sqlalchemy.engine.Engine | [generated in 0.00128s] ()
2025-11-07 22:36:36,211 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-07 22:36:36,213 | INFO | sqlalchemy.engine.Engine | [generated in 0.00199s] ()
2025-11-07 22:36:36,268 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 22:36:36,299 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-07 22:37:04,808 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-07 22:37:04,809 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:37:04,815 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-07 22:37:04,816 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:37:04,821 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-07 22:37:04,822 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:37:04,828 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:37:04,829 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-07 22:37:04,830 | INFO | sqlalchemy.engine.Engine | [generated in 0.00081s] ()
2025-11-07 22:37:04,835 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 22:37:04,835 | INFO | sqlalchemy.engine.Engine | [generated in 0.00097s] ()
2025-11-07 22:37:04,843 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:37:04,844 | INFO | sqlalchemy.engine.Engine | [generated in 0.00110s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:37:04,861 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:37:04,862 | INFO | sqlalchemy.engine.Engine | [cached since 0.01928s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:37:04,865 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:37:04,866 | INFO | sqlalchemy.engine.Engine | [cached since 0.02361s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:37:04,870 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:37:04,871 | INFO | sqlalchemy.engine.Engine | [cached since 0.02796s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:37:04,873 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:37:04,875 | INFO | sqlalchemy.engine.Engine | [cached since 0.03275s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:37:04,879 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 22:37:04,881 | INFO | sqlalchemy.engine.Engine | [generated in 0.00122s] ('user_status', 'pg_catalog')
2025-11-07 22:37:04,887 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 22:37:04,888 | INFO | sqlalchemy.engine.Engine | [cached since 0.007753s ago] ('account_type', 'pg_catalog')
2025-11-07 22:37:04,890 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-07 22:37:04,891 | INFO | sqlalchemy.engine.Engine | [generated in 0.00132s] ()
2025-11-07 22:37:04,897 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-07 22:37:04,900 | INFO | sqlalchemy.engine.Engine | [generated in 0.00150s] ()
2025-11-07 22:37:04,914 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-07 22:37:04,916 | INFO | sqlalchemy.engine.Engine | [generated in 0.00187s] ()
2025-11-07 22:37:04,973 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 22:37:05,008 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-07 22:37:33,441 | INFO | sqlalchemy.engine.Engine | select pg_catalog.version()
2025-11-07 22:37:33,442 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:37:33,448 | INFO | sqlalchemy.engine.Engine | select current_schema()
2025-11-07 22:37:33,449 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:37:33,456 | INFO | sqlalchemy.engine.Engine | show standard_conforming_strings
2025-11-07 22:37:33,456 | INFO | sqlalchemy.engine.Engine | [raw sql] ()
2025-11-07 22:37:33,462 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:37:33,463 | INFO | sqlalchemy.engine.Engine | CREATE SCHEMA IF NOT EXISTS "ecowhiskey"
2025-11-07 22:37:33,465 | INFO | sqlalchemy.engine.Engine | [generated in 0.00112s] ()
2025-11-07 22:37:33,472 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 22:37:33,474 | INFO | sqlalchemy.engine.Engine | [generated in 0.00190s] ()
2025-11-07 22:37:33,483 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:37:33,485 | INFO | sqlalchemy.engine.Engine | [generated in 0.00128s] ('hello_messages', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:37:33,510 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:37:33,511 | INFO | sqlalchemy.engine.Engine | [cached since 0.02716s ago] ('request_logs', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:37:33,514 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:37:33,515 | INFO | sqlalchemy.engine.Engine | [cached since 0.03242s ago] ('schools', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:37:33,519 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:37:33,521 | INFO | sqlalchemy.engine.Engine | [cached since 0.03762s ago] ('training_contexts', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:37:33,526 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_namespace.nspname = $7::VARCHAR
2025-11-07 22:37:33,528 | INFO | sqlalchemy.engine.Engine | [cached since 0.04423s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'ecowhiskey')
2025-11-07 22:37:33,533 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 22:37:33,535 | INFO | sqlalchemy.engine.Engine | [generated in 0.00130s] ('user_status', 'pg_catalog')
2025-11-07 22:37:33,541 | INFO | sqlalchemy.engine.Engine | SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-11-07 22:37:33,541 | INFO | sqlalchemy.engine.Engine | [cached since 0.008426s ago] ('account_type', 'pg_catalog')
2025-11-07 22:37:33,545 | INFO | sqlalchemy.engine.Engine | ALTER TABLE IF EXISTS schools ADD COLUMN IF NOT EXISTS value VARCHAR(20)
2025-11-07 22:37:33,546 | INFO | sqlalchemy.engine.Engine | [generated in 0.00091s] ()
2025-11-07 22:37:33,550 | INFO | sqlalchemy.engine.Engine | UPDATE schools SET value = CONCAT('school_', id) WHERE value IS NULL OR btrim(value) = ''
2025-11-07 22:37:33,552 | INFO | sqlalchemy.engine.Engine | [generated in 0.00180s] ()
2025-11-07 22:37:33,571 | INFO | sqlalchemy.engine.Engine | 
            DO $$
            BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM information_schema.columns
                    WHERE table_schema = current_schema()
                      AND table_name = 'schools'
                      AND column_name = 'value'
                ) THEN
                    IF NOT EXISTS (
                        SELECT 1
                        FROM information_schema.table_constraints tc
                        JOIN information_schema.constraint_column_usage ccu
                          ON tc.constraint_name = ccu.constraint_name
                         AND tc.table_schema = ccu.table_schema
                        WHERE tc.table_schema = current_schema()
                          AND tc.table_name = 'schools'
                          AND tc.constraint_type = 'UNIQUE'
                          AND ccu.column_name = 'value'
                    ) THEN
                        ALTER TABLE schools
                        ADD CONSTRAINT uq_schools_value UNIQUE (value);
                    END IF;

                    ALTER TABLE schools
                    ALTER COLUMN value SET NOT NULL;
                END IF;
            END
            $$;
            
2025-11-07 22:37:33,573 | INFO | sqlalchemy.engine.Engine | [generated in 0.00200s] ()
2025-11-07 22:37:33,626 | INFO | sqlalchemy.engine.Engine | COMMIT
2025-11-07 22:37:33,656 | INFO | app.database | Ensured database tables in schema 'ecowhiskey'.
2025-11-07 22:41:10,873 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 22:41:10,874 | DEBUG | python_multipart.multipart | Calling on_header_field with data[40:59]
2025-11-07 22:41:10,875 | DEBUG | python_multipart.multipart | Calling on_header_value with data[61:89]
2025-11-07 22:41:10,876 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 22:41:10,876 | DEBUG | python_multipart.multipart | Calling on_header_field with data[91:105]
2025-11-07 22:41:10,877 | DEBUG | python_multipart.multipart | Calling on_header_value with data[107:109]
2025-11-07 22:41:10,877 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 22:41:10,879 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 22:41:10,880 | DEBUG | python_multipart.multipart | Calling on_part_data with data[113:149]
2025-11-07 22:41:10,881 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 22:41:10,882 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 22:41:10,882 | DEBUG | python_multipart.multipart | Calling on_header_field with data[191:210]
2025-11-07 22:41:10,884 | DEBUG | python_multipart.multipart | Calling on_header_value with data[212:239]
2025-11-07 22:41:10,885 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 22:41:10,886 | DEBUG | python_multipart.multipart | Calling on_header_field with data[241:255]
2025-11-07 22:41:10,887 | DEBUG | python_multipart.multipart | Calling on_header_value with data[257:258]
2025-11-07 22:41:10,889 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 22:41:10,890 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 22:41:10,891 | DEBUG | python_multipart.multipart | Calling on_part_data with data[262:269]
2025-11-07 22:41:10,892 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 22:41:10,893 | DEBUG | python_multipart.multipart | Calling on_part_begin with no data
2025-11-07 22:41:10,894 | DEBUG | python_multipart.multipart | Calling on_header_field with data[311:330]
2025-11-07 22:41:10,895 | DEBUG | python_multipart.multipart | Calling on_header_value with data[332:386]
2025-11-07 22:41:10,896 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 22:41:10,897 | DEBUG | python_multipart.multipart | Calling on_header_field with data[388:400]
2025-11-07 22:41:10,898 | DEBUG | python_multipart.multipart | Calling on_header_value with data[402:412]
2025-11-07 22:41:10,898 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 22:41:10,899 | DEBUG | python_multipart.multipart | Calling on_header_field with data[414:428]
2025-11-07 22:41:10,900 | DEBUG | python_multipart.multipart | Calling on_header_value with data[430:435]
2025-11-07 22:41:10,902 | DEBUG | python_multipart.multipart | Calling on_header_end with no data
2025-11-07 22:41:10,903 | DEBUG | python_multipart.multipart | Calling on_headers_finished with no data
2025-11-07 22:41:10,905 | DEBUG | python_multipart.multipart | Calling on_part_data with data[439:8192]
2025-11-07 22:41:11,098 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:4380]
2025-11-07 22:41:11,101 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 22:41:11,351 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 22:41:11,352 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 22:41:11,355 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 22:41:11,357 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 22:41:11,535 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 22:41:11,537 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 22:41:11,539 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:3812]
2025-11-07 22:41:11,672 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 22:41:11,674 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:5840]
2025-11-07 22:41:11,676 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:892]
2025-11-07 22:41:11,802 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 22:41:11,804 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 22:41:11,805 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 22:41:11,807 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2352]
2025-11-07 22:41:11,898 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:2920]
2025-11-07 22:41:11,900 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:1460]
2025-11-07 22:41:11,902 | DEBUG | python_multipart.multipart | Calling on_part_data with data[0:899]
2025-11-07 22:41:11,902 | DEBUG | python_multipart.multipart | Calling on_part_end with no data
2025-11-07 22:41:11,903 | DEBUG | python_multipart.multipart | Calling on_end with no data
2025-11-07 22:41:12,004 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:41:12,005 | INFO | sqlalchemy.engine.Engine | SET search_path TO "ecowhiskey", public
2025-11-07 22:41:12,006 | INFO | sqlalchemy.engine.Engine | [cached since 218.5s ago] ()
2025-11-07 22:41:12,026 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.users.id, ecowhiskey.users.email, ecowhiskey.users.first_name, ecowhiskey.users.last_name, ecowhiskey.users.password_hash, ecowhiskey.users.status, ecowhiskey.users.account_type, ecowhiskey.users.school_id, ecowhiskey.users.photo, ecowhiskey.users.created_at, ecowhiskey.users.updated_at, schools_1.id AS id_1, schools_1.name, schools_1.value, schools_1.location, schools_1.created_at AS created_at_1 
FROM ecowhiskey.users LEFT OUTER JOIN ecowhiskey.schools AS schools_1 ON schools_1.id = ecowhiskey.users.school_id 
WHERE ecowhiskey.users.id = $1::INTEGER
2025-11-07 22:41:12,027 | INFO | sqlalchemy.engine.Engine | [generated in 0.00124s] (1,)
2025-11-07 22:41:12,110 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 22:41:12,111 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000020338019ED0>}) about to wait for the following futures []
2025-11-07 22:41:12,112 | DEBUG | s3transfer.tasks | UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000020338019ED0>}) done waiting for dependent futures
2025-11-07 22:41:12,113 | DEBUG | s3transfer.tasks | Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000020338019ED0>}) with kwargs {'client': <botocore.client.S3 object at 0x000002033A9E1490>, 'config': <boto3.s3.transfer.TransferConfig object at 0x000002033B1D86D0>, 'osutil': <s3transfer.utils.OSUtils object at 0x000002033B1D8590>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x000002033B1D8B10>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x0000020338019ED0>}
2025-11-07 22:41:12,113 | DEBUG | s3transfer.futures | Submitting task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/b2c19e9d-2533-4839-90bf-8bb21b519153/4cec5cb1106c422fa52dc17997b3cb3f.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) to executor <s3transfer.futures.BoundedExecutor object at 0x000002033B1D8B10> for transfer request: 0.
2025-11-07 22:41:12,114 | DEBUG | s3transfer.utils | Acquiring 0
2025-11-07 22:41:12,116 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/b2c19e9d-2533-4839-90bf-8bb21b519153/4cec5cb1106c422fa52dc17997b3cb3f.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) about to wait for the following futures []
2025-11-07 22:41:12,116 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 22:41:12,117 | DEBUG | s3transfer.tasks | PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/b2c19e9d-2533-4839-90bf-8bb21b519153/4cec5cb1106c422fa52dc17997b3cb3f.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) done waiting for dependent futures
2025-11-07 22:41:12,119 | DEBUG | s3transfer.tasks | Executing task PutObjectTask(transfer_id=0, {'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/b2c19e9d-2533-4839-90bf-8bb21b519153/4cec5cb1106c422fa52dc17997b3cb3f.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}) with kwargs {'client': <botocore.client.S3 object at 0x000002033A9E1490>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x000002033B1D9810>, 'bucket': 'ecowhiskey-atc-audio', 'key': 'sessions/b2c19e9d-2533-4839-90bf-8bb21b519153/4cec5cb1106c422fa52dc17997b3cb3f.mp3', 'extra_args': {'ContentType': 'audio/mpeg', 'ChecksumAlgorithm': 'CRC32'}}
2025-11-07 22:41:12,756 | DEBUG | s3transfer.utils | Releasing acquire 0/None
2025-11-07 22:41:20,323 | INFO | app.controllers.audio | Transcripción recibida session=b2c19e9d-2533-4839-90bf-8bb21b519153: probando, probando, probando, probando, probando.
2025-11-07 22:41:20,324 | INFO | app.logs.transcript | student | session=b2c19e9d-2533-4839-90bf-8bb21b519153 | frequency=121.700 | text=probando, probando, probando, probando, probando.
2025-11-07 22:41:20,446 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:41:20,448 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 22:41:20,449 | INFO | sqlalchemy.engine.Engine | [generated in 0.00108s] (UUID('b2c19e9d-2533-4839-90bf-8bb21b519153'),)
2025-11-07 22:41:20,462 | INFO | sqlalchemy.engine.Engine | ROLLBACK
2025-11-07 22:41:21,395 | WARNING | app.services.audio_pipeline | Intent detector invalid JSON: "Invalid error type: 'json_decode_error'" raw=```json
{
    "intent": "ground_test_transmission",
    "confidence": 0.9,
    "frequencyGroup": "ground"
}
```
2025-11-07 22:41:21,528 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2025-11-07 22:41:21,529 | INFO | sqlalchemy.engine.Engine | SELECT ecowhiskey.training_contexts.id, ecowhiskey.training_contexts.training_session_id, ecowhiskey.training_contexts.user_id, ecowhiskey.training_contexts.context, ecowhiskey.training_contexts.created_at, ecowhiskey.training_contexts.updated_at 
FROM ecowhiskey.training_contexts 
WHERE ecowhiskey.training_contexts.training_session_id = $1::UUID
2025-11-07 22:41:21,529 | INFO | sqlalchemy.engine.Engine | [cached since 1.082s ago] (UUID('b2c19e9d-2533-4839-90bf-8bb21b519153'),)
2025-11-07 22:41:21,543 | INFO | sqlalchemy.engine.Engine | UPDATE ecowhiskey.training_contexts SET context=$1::JSONB, updated_at=$2::TIMESTAMP WITHOUT TIME ZONE WHERE ecowhiskey.training_contexts.id = $3::UUID
