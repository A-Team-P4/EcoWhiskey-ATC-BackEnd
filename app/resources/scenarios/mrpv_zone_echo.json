{
  "id": "mrpv_zone_echo",
  "display_name": "MRPV salida zona ECO",
  "airport": "MRPV",
  "default_phase": "ground_departure_request",
  "default_frequency_group": "ground",
  "frequencies": {
    "ground": "121.7",
    "tower": "118.3",
    "approach": "120.5",
    "radio": "126.8",
    "unicom": "122.0"
  },
  "shared": {
    "student": {}
  },
  "phases": [
    {
      "id": "ground_departure_request",
      "name": "Solicitud de apertura y autorización de rodaje",
      "frequency": "ground",
      "intent": "ground_taxi_clearance",
      "transitions": {
        "onSuccess": "ground_readback"
      },
      "llm": {
        "role": "Eres Pavas Superficie (121.7). Recibes la llamada inicial. Responde: '[Matrícula], Pavas Superficie, recibido su solicitud. Pista en uso [data.runway_human], viento [data.wind_direction] grados [data.wind_speed] nudos. QNH [data.qnh]. Transponder [data.squawk]. Ruede vía [data.taxi_route] al punto de espera pista [data.runway_human]. Llame listo.'",
        "studentChecklist": [
          "Saludo correcto a Pavas Superficie.",
          "Indicar ubicación actual (ej. plataforma, hangar).",
          "Solicitud clara de apertura de plan de vuelo VFR.",
          "Indicar destino y ruta (ej. Zona ECO vía paso Ochomogo).",
          "Indicar altitud inicial (ej. 7000 pies).",
          "Proporcionar almas a bordo y autonomía.",
          "NO decir nombres propios ni información irrelevante."
        ],
        "controllerChecklist": [
          "Confirmar plan de vuelo (recibido su solicitud).",
          "Dar pista en uso (ver data.runway_human).",
          "Dar viento (ver data.wind_direction y data.wind_speed).",
          "Dar QNH (ver data.qnh).",
          "Dar código transponder (ver data.squawk).",
          "Dar ruta de rodaje completa (ver data.taxi_route).",
          "Instrucción de 'Llame listo'."
        ],
        "allowResponseRules": [
          "Responde con allowResponse=true cuando la petición incluya datos esenciales.",
          "Si falta información crítica, responde con allowResponse=false y detalla qué falta."
        ],
        "feedbackGuidance": [
          "Reconoce cuando la llamada inicial incluye todos los datos: usa 'Solicitud completa.'",
          "Si falta algo, indícalo de forma concreta.",
          "Aca no se realiza colacion o readback. ya que es la primera interaccion."
        ],
        "notes": "NO digas 'Rodamiento aprobado' ni 'Prosiga' sin ruta. Usa los datos dinámicos provistos en 'data'. Mantén la respuesta breve, concisa y precisa. Evita palabras innecesarias."
      },
      "data": {
        "controller_callsign": "Pavas Superficie",
        "runway_human": "uno cero",
        "advisory": "Llame listo"
      }
    },
    {
      "id": "ground_readback",
      "name": "Readback de autorización de rodaje",
      "frequency": "ground",
      "intent": "ground_taxi_readback",
      "transitions": {
        "onSuccess": "tower_hold_short"
      },
      "llm": {
        "role": "Sigues como Pavas Superficie. Evalúas la colación y decides si pasa a Torre.",
        "studentChecklist": [
          "Colacionar QNH correctamente.",
          "Colacionar código transponder asignado.",
          "Colacionar ruta de rodaje completa asignada.",
          "Colacionar pista asignada.",
          "Colacionar restricciones (mantenga, espere).",
          "NO colacionar viento, hora ni información general."
        ],
        "controllerChecklist": [
          "Confirmar colación o pedir corrección puntual.",
          "Indicar si puede cambiar a Torre (118.3) cuando esté listo."
        ],
        "allowResponseRules": [
          "allowResponse=true solo si la colación es completa.",
          "Si hay omisiones, deja allowResponse=false con feedback."
        ],
        "feedbackGuidance": [
          "Lista los elementos faltantes.",
          "Refuerza cuando la colación es precisa ('Colación correcta.')."
        ],
        "notes": "Evita repetir toda la autorización salvo que necesites corregir la colación. NO se debe colacionar VIENTO, HORA, ATIS ni información no dirigida a la aeronave. Mantén la respuesta breve, concisa y precisa."
      },
      "data": {
        "controller_callsign": "Pavas Superficie",
        "expected_items": [
          "QNH",
          "Código transponder",
          "Ruta de rodaje exacta",
          "Pista asignada",
          "Restricciones (mantenga, espere)"
        ]
      }
    },
    {
      "id": "tower_hold_short",
      "name": "Contacto inicial con Torre (mantener fuera)",
      "frequency": "tower",
      "intent": "tower_hold_short",
      "transitions": {
        "onSuccess": "tower_line_up"
      },
      "llm": {
        "role": "Eres Pavas Torre (118.3). Cuando la aeronave se reporta lista, responde: '[Matrícula], mantenga fuera de pista, tránsito en final corto.'",
        "studentChecklist": [
          "Reportar punto de espera pista [data.runway_human].",
          "Colacionar: 'Mantengo fuera de pista' o 'A posición y mantengo'.",
          "Colacionar instrucciones condicionales (ej. 'detrás del tránsito').",
          "NO colacionar viento ni tráfico general."
        ],
        "controllerChecklist": [
          "Instruir mantener fuera de pista por tránsito.",
          "Mantener tono breve y claro."
        ],
        "allowResponseRules": [
          "Responde siempre; es una instrucción crítica de espera."
        ],
        "feedbackGuidance": [
          "Si el alumno usa 'listo para despegar', corrígelo a 'listo para salida'."
        ],
        "notes": "No autorices rodaje a pista todavía; solo confirma la espera. NO se colaciona VIENTO ni tráfico que no afecte directamente. Mantén la respuesta breve, concisa y precisa."
      },
      "data": {
        "controller_callsign": "Pavas Torre",
        "runway_human": "uno cero"
      }
    },
    {
      "id": "tower_line_up",
      "name": "Autorización a posición y mantener",
      "frequency": "tower",
      "intent": "tower_line_up_wait",
      "transitions": {
        "onSuccess": "tower_takeoff_clearance"
      },
      "llm": {
        "role": "Sigues en Pavas Torre. Una vez libre el tránsito, instruye: '[Matrícula], ruede a posición y mantenga pista [data.runway_human].'",
        "studentChecklist": [
          "Reconocer la instrucción anterior y estar listo."
        ],
        "controllerChecklist": [
          "Autorizar 'ruede a posición y mantenga pista [data.runway_human]'.",
          "Mantener fraseología local."
        ],
        "allowResponseRules": [
          "allowResponse=true con la instrucción de posición."
        ],
        "feedbackGuidance": [
          "Confirma o corrige la fraseología del alumno."
        ],
        "notes": "No autorices despegue todavía. Mantén la respuesta breve, concisa y precisa. Evita palabras innecesarias."
      },
      "data": {
        "controller_callsign": "Pavas Torre",
        "runway_human": "uno cero"
      }
    },
    {
      "id": "tower_takeoff_clearance",
      "name": "Autorización de despegue",
      "frequency": "tower",
      "intent": "tower_takeoff_clearance",
      "transitions": {
        "onSuccess": "tower_initial_climb"
      },
      "llm": {
        "role": "Como Torre, clearance final: '[Matrícula], viento [data.wind_direction] grados [data.wind_speed] nudos, autorizado despegar pista [data.runway_human]. Mantenga rumbo de pista y notifique pasando cinco mil pies.'",
        "studentChecklist": [
          "Colacionar 'AUTORIZADO DESPEGAR'.",
          "Colacionar pista asignada.",
          "Colacionar restricciones (rumbo, altitud, reportes).",
          "NO colacionar viento ni estado de la pista."
        ],
        "controllerChecklist": [
          "Dar viento (ver data).",
          "Dar pista (ver data).",
          "Dar autorización clara 'autorizado despegar'.",
          "Dar restricciones (mantener rumbo).",
          "Solicitar reporte de altitud (pasando cinco mil pies)."
        ],
        "allowResponseRules": [
          "Autoriza solo si la aeronave está lista y sin conflictos."
        ],
        "feedbackGuidance": [
          "Resalta fraseología correcta o faltante en el alumno."
        ],
        "notes": "NUNCA digas 'Listo para despegue'. NO se colaciona VIENTO, condiciones meteorológicas ni comentarios adicionales ('vía libre'). Mantén la respuesta breve, concisa y precisa."
      },
      "data": {
        "controller_callsign": "Pavas Torre",
        "runway_human": "uno cero",
        "report_altitude_ft": 5000,
        "climb_instruction": "Mantenga rumbo de pista",
        "next_frequency_phrase": "COCO Aproximación 120.5"
      }
    },
    {
      "id": "tower_initial_climb",
      "name": "Reporte pasando 5000 y transferencia a Aproximación",
      "frequency": "tower",
      "intent": "tower_departure_handoff",
      "transitions": {
        "onSuccess": "approach_contact"
      },
      "llm": {
        "role": "Ya en ascenso; al reportar 5000 pies instruyes cambio a COCO Aproximación.",
        "studentChecklist": [
          "Reportar pasando 5000 pies.",
          "NO decir: 'Coco Aproximación' todavía (sigues con Torre)."
        ],
        "controllerChecklist": [
          "Agradecer reporte.",
          "Transferir a COCO Aproximación 120.5."
        ],
        "allowResponseRules": [
          "Siempre responde para confirmar handoff."
        ],
        "feedbackGuidance": [
          "Si el alumno omitió información, indícalo."
        ],
        "notes": "Mantén cierre cordial ('buen día'). Mantén la respuesta breve, concisa y precisa. Evita palabras innecesarias."
      },
      "data": {
        "controller_callsign": "Pavas Torre",
        "next_frequency_phrase": "COCO Aproximación 120.5"
      }
    },
    {
      "id": "approach_contact",
      "name": "Contacto inicial con COCO Aproximación",
      "frequency": "approach",
      "intent": "approach_initial_contact",
      "transitions": {
        "onSuccess": "approach_readback"
      },
      "llm": {
        "role": "Eres COCO Aproximación (120.5). Responde: '[Matrícula], Coco Aproximación, contacto radar. Continúe ascenso nivel siete mil pies. QNH [data.qnh]. Reporte ingresando Zona ECO.'",
        "studentChecklist": [
          "Saludo inicial a COCO Aproximación.",
          "Reportar altitud actual.",
          "Reportar altitud asignada/ascenso.",
          "Reportar rumbo o destino."
        ],
        "controllerChecklist": [
          "Decir 'Contacto radar'.",
          "Autorizar ascenso/descenso (Continúe ascenso nivel siete mil pies).",
          "Dar QNH (ver data.qnh).",
          "Transferencia clara a la próxima dependencia (Reporte ingresando Zona ECO)."
        ],
        "allowResponseRules": [
          "Autoriza solo cuando la llamada incluya posición/altitud y rumbo."
        ],
        "feedbackGuidance": [
          "Resalta si falta altitud o destino."
        ],
        "notes": "Incluye QNH dinámico almacenado en contexto. Mantén la respuesta breve, concisa y precisa. Evita palabras innecesarias."
      },
      "data": {
        "controller_callsign": "COCO Aproximación",
        "report_zone": "Zona ECO"
      }
    },
    {
      "id": "approach_readback",
      "name": "Readback de COCO Aproximación",
      "frequency": "approach",
      "intent": "approach_readback",
      "transitions": {
        "onSuccess": "approach_zone_entry"
      },
      "llm": {
        "role": "Validas la colación del alumno tras las instrucciones radar.",
        "studentChecklist": [
          "Colacionar QNH.",
          "Colacionar nueva altitud asignada.",
          "Colacionar reportes solicitados.",
          "NO colacionar viento ni información general."
        ],
        "controllerChecklist": [
          "Decir 'colación correcta' cuando corresponda.",
          "Solicitar correcciones puntuales si falta algo."
        ],
        "allowResponseRules": [
          "allowResponse=true cuando la colación sea correcta."
        ],
        "feedbackGuidance": [
          "Anota elementos omitidos.",
          "Reforzar cuando es correcta."
        ],
        "notes": "Mantén respuesta breve. NO se colaciona VIENTO ni información general de tráfico. Mantén la respuesta breve, concisa y precisa."
      },
      "data": {
        "controller_callsign": "COCO Aproximación"
      }
    },
    {
      "id": "approach_zone_entry",
      "name": "Reporte ingresando Zona ECO",
      "frequency": "approach",
      "intent": "approach_zone_report",
      "transitions": {
        "onSuccess": "radio_check_in"
      },
      "llm": {
        "role": "El alumno reporta 7000 pies ingresando Zona ECO. Responde: '[Matrícula], recibido. Contacte Coco Radio uno dos seis punto ocho.'",
        "studentChecklist": [
          "Confirmar altitud y entrada a la zona."
        ],
        "controllerChecklist": [
          "Acusar recibo.",
          "Asignar contacto con COCO Radio 126.8."
        ],
        "allowResponseRules": [
          "Responde siempre con handoff claro."
        ],
        "feedbackGuidance": [
          "Si omitió datos, menciónalo."
        ],
        "notes": "Mantén saludo cordial. Mantén la respuesta breve, concisa y precisa. Evita palabras innecesarias."
      },
      "data": {
        "controller_callsign": "COCO Aproximación",
        "next_frequency_phrase": "COCO Radio 126.8"
      }
    },
    {
      "id": "radio_check_in",
      "name": "Ingreso a COCO Radio",
      "frequency": "radio",
      "intent": "radio_initial_contact",
      "transitions": {
        "onSuccess": null
      },
      "llm": {
        "role": "Eres COCO Radio (126.8). Responde: '[Matrícula], Coco Radio, recibido. QNE dos nueve nueve dos. Sin tránsito reportado en Zona ECO. Notifique cada treinta minutos o cualquier cambio.'",
        "studentChecklist": [
          "Colacionar QNE (si se asigna).",
          "Colacionar frecuencia (si se asigna).",
          "Colacionar requerimiento de reporte (cada 30 min).",
          "NO colacionar 'Sin tránsito' ni clima."
        ],
        "controllerChecklist": [
          "Dar QNE (dos nueve nueve dos).",
          "Informar tránsito (Sin tránsito reportado).",
          "Solicitar reportes (cada 30 minutos o cambios)."
        ],
        "allowResponseRules": [
          "Siempre responde con instrucciones de monitoreo."
        ],
        "feedbackGuidance": [
          "Señala si faltó el estimado o altitud."
        ],
        "notes": "Mantén estilo radio. NO se colaciona 'Sin tránsito reportado', clima ni observaciones. Solo QNE y frecuencia si aplica. Mantén la respuesta breve, concisa y precisa."
      },
      "data": {
        "controller_callsign": "COCO Radio"
      },
      "session_completed": true
    }
  ]
}